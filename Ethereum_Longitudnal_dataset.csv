,author_name,author_email,author_date,commitor_name,commitor_email,commit_date,commit_message,commit_verified,commit_reason
da3da7c0e7b11288541d01483074aad694ef2912,Marius van der Wijden,m.vanderwijden@live.de,2021-10-11T17:37:18Z,Marius van der Wijden,m.vanderwijden@live.de,2021-10-11T17:37:18Z,ci: enable race tests as cron job on travis (#23480),TRUE,valid
cf8a6d61736b2985086eaf74e67299ba75aeaafa,Miro,mirokuratczyk@users.noreply.github.com,2021-10-11T17:25:21Z,Miro,mirokuratczyk@users.noreply.github.com,2021-10-11T17:25:21Z,"core: tests for forked blocks retrievable by hash (#23695)

* Update tests to showcase that forked blocks can still be looked up by their hash",TRUE,valid
088bc341941d35506fe1beb7bfa3d5609f29fec1,rjl493456442,garyrong0905@gmail.com,2021-10-11T16:49:26Z,rjl493456442,garyrong0905@gmail.com,2021-10-11T16:49:26Z,"les/vflux/server: fix metrics (#22946)

* les/vflux/server: fix metrics

* les/vflux/server: fix metrics",TRUE,valid
53b1420edefcf6be154ea6df887b1e4d68fcc36f,Marius van der Wijden,m.vanderwijden@live.de,2021-10-11T15:58:11Z,Marius van der Wijden,m.vanderwijden@live.de,2021-10-11T15:58:11Z,"params: changed CatalystBlock to TerminalTotalDifficulty (#23700)

* params: changed CatalystBlock to TerminalTotalDifficulty

* eth/catalyst: comment out unused code",TRUE,valid
8b6e01840163b12f1872a922f8fe9ed8d010885f,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-10-11T13:48:41Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-10-11T13:48:41Z,"build: increase C thread stack size on linux (#23676)

* build: increase thread stack size when running alpine linux

* review feedback: force a stack size of 8M on all linux distribs

* fix missing extldflags",TRUE,valid
64da037e99aac013dec62111f7254d8b84ca66f8,Martin Holst Swende,martin@swende.se,2021-10-11T10:30:13Z,Martin Holst Swende,martin@swende.se,2021-10-11T10:30:13Z,"cmd/evm: stricter transaction validation (#23694)

* cmd/evm: t9n: validate transaction intrinsic gas

* cmd/evm: t9n: stricter tx validation",TRUE,valid
8a430fbd1cbd07dac4b25f12aac7e544ef6d7b73,Zachinquarantine,Zachinquarantine@protonmail.com,2021-10-11T08:15:45Z,Zachinquarantine,Zachinquarantine@protonmail.com,2021-10-11T08:15:45Z,cmd/puppeth: add txpool to explorer Dockerfile (#23652),TRUE,valid
bcbd700367e8ff22aa0c7d1bf622b2d40b646d73,aaronbuchwald,aaron.buchwald56@gmail.com,2021-10-10T23:52:30Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-10-10T23:52:30Z,"eth/gasprice: avoid modifying TestChainConfig (#23204)


Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
84bccd0900929f544271ddc97c53bb2b460835c0,hsyodyssey,47173566+hsyodyssey@users.noreply.github.com,2021-10-10T13:00:00Z,hsyodyssey,47173566+hsyodyssey@users.noreply.github.com,2021-10-10T13:00:00Z,core/state: fix typos in comments (#23702),TRUE,valid
a6a0609b058e1a574abdee821eeeb02b324ee022,Aditya Arora,arora.aditya520@gmail.com,2021-10-10T12:58:47Z,Aditya Arora,arora.aditya520@gmail.com,2021-10-10T12:58:47Z,"internal/jsre: handle null and undefined to prevent crash (#23701)

This prevents the console from crashing when auto-completing on
a variable or property that is null or undefined.

Fixes #23693",TRUE,valid
1bea4b0dfabac141d9ffddd768ebfe99ba51f3ed,Felix Lange,fjl@twurst.com,2021-10-09T14:39:53Z,Felix Lange,fjl@twurst.com,2021-10-09T14:39:53Z,"miner/stress: initialize account backends explicitly (#23699)

node.Node no longer registers any account manager backends by default,
they need to be registered explicitly.

For ethash-based tests, we actually don't need any accounts in the miner
keystore. Just set the etherbase instead to make mining work. For
clique, the signer account must be in the keystore.

The change also adds interrupt handling in stress tests.",TRUE,valid
ee120ef865e9468fef0bbb0a0bcffba93e3e358e,Marius van der Wijden,m.vanderwijden@live.de,2021-10-08T18:12:52Z,Marius van der Wijden,m.vanderwijden@live.de,2021-10-08T18:12:52Z,"miner: fix data race during shutdown (#23435)

This fixes a data race on worker.current by moving the call to StopPrefetcher
into the main loop.

The commit also contains fixes for two other races in unit tests of unrelated packages.",TRUE,valid
28d30b51f88e2e5a96f35bd9cef51079a5d1a9d2,Martin Holst Swende,martin@swende.se,2021-10-08T16:36:58Z,Martin Holst Swende,martin@swende.se,2021-10-08T16:36:58Z,"eth: close miner on exit (instead of just stopping) (#21992)

This ensures that all miner goroutines have exited before stopping the blockchain. 

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
2fe0c65f4b80f47058628c90be54058d5a1462f5,Felix Lange,fjl@twurst.com,2021-10-08T15:23:25Z,Felix Lange,fjl@twurst.com,2021-10-08T15:23:25Z,"build: upgrade -dlgo version to 1.17.2 (#23698)

Go 1.17.2 fixes some miscompilation issues on amd64 and a runtime issue with timers.
While the upgrade is not strictly necessary for go-ethereum right now, it is still good
to be up-to-date.",TRUE,valid
ec2b43c2c34285a8ec9b041f7cd2b273bb3f1798,Sean,darcys22@gmail.com,2021-10-08T12:57:49Z,Sean,darcys22@gmail.com,2021-10-08T12:57:49Z,cmd/geth: fix typo in error message (#23697),TRUE,valid
48496e067552bc91c8940fc5acfab7830519e8be,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-10-07T13:51:14Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-10-07T13:51:14Z,"internal/ethapi: use correct signer when serving old blocks (#23683)

Fixes #23681

After the fix I get the address 0x6d6d02e83c4ced98204e20126acf27e9d87b8af2 for the
tx mentioned in the ticket, which agrees with etherscan.",TRUE,valid
edb1937cf78b2562edc0e62cf369fc7886bb224f,Martin Holst Swende,martin@swende.se,2021-10-07T13:47:50Z,Martin Holst Swende,martin@swende.se,2021-10-07T13:47:50Z,"core: improve shutdown synchronization in BlockChain (#22853)

This change removes misuses of sync.WaitGroup in BlockChain. Before this change,
block insertion modified the WaitGroup counter in order to ensure that Stop would wait
for pending operations to complete. This was racy and could even lead to crashes
if Stop was called at an unfortunate time. The issue is resolved by adding a specialized
'closable' mutex, which prevents chain modifications after stopping while also
synchronizing writers with each other.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
4e599ee469223ccc452f40f36c85bac3bea9c16b,aaronbuchwald,aaron.buchwald56@gmail.com,2021-10-06T11:12:52Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-10-06T11:12:52Z,"core/types: copy tx recipient address (#23376)

This resolves a long-standing TODO. The point of copying the address is
to ensure that all data referenced by types.Transaction is independent of the
data passed into the constructor.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
57ff2dee06a17bb55110eb9aefc185b12807b512,Felix Lange,fjl@twurst.com,2021-10-05T16:33:53Z,Felix Lange,fjl@twurst.com,2021-10-05T16:33:53Z,"go.mod: upgrade github.com/karalable/usb (#23684)

This update includes fixes for the *BSD build and go module vendoring.",TRUE,valid
307156cc46f7241dfad702f72b8ed2e338770337,Martin Holst Swende,martin@swende.se,2021-10-05T06:13:00Z,Martin Holst Swende,martin@swende.se,2021-10-05T06:13:00Z,"eth/api: add rpc method to obtain which states are accessible (#23646)

This PR adds a method to the debug namespace, to iterate over the blocks and check where we have the roots on disk.",TRUE,valid
0dbb3b160164cbc352892cc49a19ee7d3428bb96,Ferran Borreguero,ferranbt@protonmail.com,2021-10-04T14:10:51Z,Ferran Borreguero,ferranbt@protonmail.com,2021-10-04T14:10:51Z,eth/protocols/eth: replace array with counter in txn broadcaster (#23656),TRUE,valid
5a0e1d88f48eb3394505290178afd4ce47e60a8f,Miro,mirokuratczyk@users.noreply.github.com,2021-10-04T12:09:51Z,Miro,mirokuratczyk@users.noreply.github.com,2021-10-04T12:09:51Z,"eth/filters: fix TestPendingLogsSubscription (#23619)

The test did not synchronize with per-case goroutines, and thus didn't notice
that some tests were just hanging. This change adds missing synchronization
and fixes the broken tests.",TRUE,valid
12f971fb2d8dd8e857da9e4eca3b5a2c58ddcab7,hsyodyssey,47173566+hsyodyssey@users.noreply.github.com,2021-10-04T10:16:50Z,hsyodyssey,47173566+hsyodyssey@users.noreply.github.com,2021-10-04T10:16:50Z,core/state: fix typo in comment (#23665),TRUE,valid
01fdca53e13512e659f7142957d7d8b2f0281541,Peter Szilagyi,peterke@gmail.com,2021-10-03T14:45:12Z,Peter Szilagyi,peterke@gmail.com,2021-10-03T14:45:12Z,"Merge pull request #23677 from karalabe/canon-rlp-fetcher

internal/ethapi: make header/block rlp retrieval canonical",TRUE,valid
52407250416fb838b9c2b0fd9918c432413b03f0,Peter Szilagyi,peterke@gmail.com,2021-10-03T13:47:21Z,Peter Szilagyi,peterke@gmail.com,2021-10-03T13:47:21Z,internal/ethapi: make header/block rlp retrieval canonical,TRUE,valid
b522f5e091fe5e09056ac96c890f9ec5aac5d88d,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-10-01T11:03:24Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-10-01T11:03:24Z,"eth/tracers: fix callTracer fault handling (#23667)

* eth/tracers: fix calltracer fault handling

* eth/tracers: fix calltracer indentation",TRUE,valid
a47b8cf6f59bfe73e3fcbc01f59f779055156dc7,Peter Szilagyi,peterke@gmail.com,2021-10-01T09:14:32Z,Peter Szilagyi,peterke@gmail.com,2021-10-01T09:14:32Z,"Merge pull request #23670 from karalabe/get-header-rlp

internal/ethapi: support retrieving header RLPs too",TRUE,valid
07a5bc1b0b4b4cbab9b4dc5f75400f9dbfd1e576,Peter Szilagyi,peterke@gmail.com,2021-10-01T08:45:47Z,Peter Szilagyi,peterke@gmail.com,2021-10-01T08:45:47Z,internal/ethapi: support retrieving header RLPs too,TRUE,valid
f2491c5ed77b9554bd979a426db741a99acf6fa4,Ikko Ashimine,eltociear@gmail.com,2021-09-29T19:28:47Z,Ikko Ashimine,eltociear@gmail.com,2021-09-29T19:28:47Z,core: fix typo in comment (#23658),TRUE,valid
06082fe267f59631c950ff62e59e1fd78fbfab3f,Felix Lange,fjl@twurst.com,2021-09-29T18:00:31Z,Felix Lange,fjl@twurst.com,2021-09-29T18:00:31Z,params: begin v1.10.10 release cycle,FALSE,unsigned
eae3b1946a276ac099e0018fc792d9e8c3bfda6d,Felix Lange,fjl@twurst.com,2021-09-29T17:59:30Z,Felix Lange,fjl@twurst.com,2021-09-29T17:59:30Z,params: release go-ethereum v1.10.9 stable,FALSE,unsigned
3a6fe69f2356c50d1819be3417fcb89abc6e9cfe,Martin Holst Swende,martin@swende.se,2021-09-29T13:19:40Z,Martin Holst Swende,martin@swende.se,2021-09-29T13:19:40Z,"eth/protocols/snap, trie: better error-handling (#23657)",TRUE,valid
42bc1944a17260d75dc1e33e1571c804b9a4a88a,Martin Holst Swende,martin@swende.se,2021-09-28T22:28:17Z,Martin Holst Swende,martin@swende.se,2021-09-28T22:28:17Z,"graphql: add storage slots to access list (#23650)

Fixes #23640",TRUE,valid
a541fbea182edcb0313d3b578f939ce2c7045aed,Ferran Borreguero,ferranbt@protonmail.com,2021-09-28T11:44:07Z,Ferran Borreguero,ferranbt@protonmail.com,2021-09-28T11:44:07Z,"eth/protocols/eth: simplify peer known block/txs caches (#23649)

* Simplify peer known block/txns cache

* Address minor changes

* Add more minor comments

* Minor changes from review",TRUE,valid
3531ca2246db3474b5d1e61d18adc7e98725175b,Martin Holst Swende,martin@swende.se,2021-09-28T11:06:19Z,Martin Holst Swende,martin@swende.se,2021-09-28T11:06:19Z,"eth/tracers: avoid unsyncronized mutations on trie database (#23632)

This PR fixes an issue in traceChain, where the statedb Commit operation was performed asynchronously with dereference-operations agains the underlying trie.Database instance. Due to how the reference counting works within the trie database (where parent count is recursively updated when new parents are added), doing dereferencing in the middle of Commit can cause the refcount to become wrong, leading to an inconsistent state. 

This was fixed by doing Commit/Deref from the same routine.",TRUE,valid
92c5d104d0158ed29a2aa4f583c40b7595b72a77,Yihau Chen,a122092487@gmail.com,2021-09-28T10:56:03Z,Yihau Chen,a122092487@gmail.com,2021-09-28T10:56:03Z,"accounts/abi/bind: check event signature before parsing (#23230)

* accounts/abi/bind: check event signature before parsing

* remove redundant break line",TRUE,valid
783e97ef1f51f4a94afbad6e07253bcdb78da2d7,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-28T10:54:49Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-28T10:54:49Z,"core/rawdb: avoid unnecessary receipt processing for log filtering (#23147)

* core/types: rm extranous check in test

* core/rawdb: add lightweight types for block logs

* core/rawdb,eth: use lightweight accessor for log filtering

* core/rawdb: add bench for decoding into rlpLogs",TRUE,valid
ab2caaee1167a8bef9760d84b45716f1bddcc381,Martin Holst Swende,martin@swende.se,2021-09-28T10:53:11Z,Martin Holst Swende,martin@swende.se,2021-09-28T10:53:11Z,"eth/tracers: implement debug.intermediateRoots (#23594)

This PR implements a new debug method, which I've talked briefly about to some other client developers. It allows the caller to obtain the intermediate state roots for a block (which might be either a canon block or a 'bad' block).",TRUE,valid
443afc975c7a4016bf9ed1b057b8cc186cb089e1,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-09-28T08:48:07Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-09-28T08:48:07Z,"core/state: move state account to core/types + abstracted ""write account to trie"" (#23567)

* core/state: abstracted ""write account to trie"" method

* fix appveyor build

* Apply suggestions from code review

Co-authored-by: Martin Holst Swende <martin@swende.se>

* review feedback

* core/state/accounts: move Account to core/types

* core/types: rename Account -> StateAccount

* core/state: restore EncodeRLP for stateObject

* core/types: add the missing file

* more review feedback

* more review feedback

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
ac7baeab57405c64592b1646a91e0a2bb33d8d6c,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-27T16:44:16Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-27T16:44:16Z,"eth/tracers: re-write of 4byte tracer using enter/exit (#23622)

* eth/tracers: add re-write of 4byte tracer using enter/exit

* eth/tracers: fix 4byte indent",TRUE,valid
12674d493e2958208a19db0818f75cd94ba1b638,Zachinquarantine,Zachinquarantine@protonmail.com,2021-09-27T16:42:48Z,Zachinquarantine,Zachinquarantine@protonmail.com,2021-09-27T16:42:48Z,cmd/puppeth: remove shh from Dockerfile (#23634),TRUE,valid
51ececb64e9cacaaa9b736b5bc2455225d061edb,Jordan Krage,jmank88@gmail.com,2021-09-27T14:31:45Z,Jordan Krage,jmank88@gmail.com,2021-09-27T14:31:45Z,"rpc: set pong read deadline (#23556)

This PR adds a 30s timeout for the remote part to answer a ping message, thus detecting (silent) disconnnects",TRUE,valid
57a3fab8a75eeb9c2f4fab770b73b51b9fe672c5,gary rong,garyrong0905@gmail.com,2021-09-22T08:18:18Z,gary rong,garyrong0905@gmail.com,2021-09-22T08:18:18Z,accounts/abi: fix resolving single struct argument (#23573),TRUE,valid
ca9bce9a45f02dfb4f306c897311408e265550ae,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-21T20:26:35Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-21T20:26:35Z,"rpc: set scheme for ws and ipc conns to the server (#23615)

* rpc: set scheme for ws and ipc conns to the server

* rpc: review fixes

* rpc: bugfix

* rpc: empty default scheme",TRUE,valid
b61ef24ccef9b4d14f4f3c97298fa6d4c1b6b47d,Marius van der Wijden,m.vanderwijden@live.de,2021-09-21T08:46:08Z,Marius van der Wijden,m.vanderwijden@live.de,2021-09-21T08:46:08Z,"consensus/clique: prevent 0 len extradata from panicing (#23538)

Closes #23522

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
d8211c7ec726fc38bc3db49b36d70633ffae4ce2,Thad Guidry,thadguidry@gmail.com,2021-09-21T08:19:46Z,Thad Guidry,thadguidry@gmail.com,2021-09-21T08:19:46Z,"console: add note about typing exit to exit (#23602)

* add explicit note about typing exit in console

* Add note about typing exit as alternative",TRUE,valid
b1a5e4afdd80e45b570c80fa0319ed2816a5e30b,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:13:37Z,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:13:37Z,"Merge pull request #23610 from karalabe/gomod-tify

go.mod: fix module file to prevent go from updating it during build",TRUE,valid
5b246af54e3d549a22a34ddd09201924f2560c9e,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:12:20Z,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:12:20Z,go.mod: fix module file to prevent go from updating it during build,TRUE,valid
86f3625455accdbd0d0101ad8d3be406e4711813,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:01:32Z,Peter Szilagyi,peterke@gmail.com,2021-09-20T16:01:32Z,"Merge pull request #23609 from karalabe/regex-fix

internal/debug: make gosimple linter happy",TRUE,valid
9bf495bfc996b6465f910f92f6279b0776a1589d,Peter Szilagyi,peterke@gmail.com,2021-09-20T15:55:35Z,Peter Szilagyi,peterke@gmail.com,2021-09-20T15:55:35Z,internal/debug: make gosimple linter happy,TRUE,valid
e28f713ada67af2380bd7052cb85b2e255a62a6a,Peter Szilagyi,peterke@gmail.com,2021-09-20T13:29:07Z,Peter Szilagyi,peterke@gmail.com,2021-09-20T13:29:07Z,"internal: support optional filter expression for debug.stacks (#23605)

* internal: support optional filter expression for debug.stacks

* internal/debug: fix string regexp

* internal/debug: support searching for line numbers too",TRUE,valid
62e3b83af69afdee8ce2f242b64efbd98bf44db2,Pete,90942436+peteyburgers@users.noreply.github.com,2021-09-20T11:33:15Z,Pete,90942436+peteyburgers@users.noreply.github.com,2021-09-20T11:33:15Z,"docs: fix spelling on 2021-08-22 postmortem (#23595)

Spelling update",TRUE,valid
1b34283810d22421724eba7bbda4074f2f4720c5,Martin Holst Swende,martin@swende.se,2021-09-20T08:23:44Z,Martin Holst Swende,martin@swende.se,2021-09-20T08:23:44Z,"ethclient, accounts/keystore: fix flaky tests (#23599)

* ethclient/gethclient: fix flaky test (due to map key ordering)

* accounts/keystore: fix test failing due to rand collision due to low time resolution on windows",TRUE,valid
401354976bb44f0ad4455ca1e0b5c0dc31d9a5f5,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-17T07:31:22Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-09-17T07:31:22Z,"core,eth: call frame tracing (#23087)


This change introduces 2 new optional methods; `enter()` and `exit()` for js tracers, and makes `step()` optiona. The two new methods are invoked when entering and exiting a call frame (but not invoked for the outermost scope, which has it's own methods). Currently these are the data fields passed to each of them:

    enter: type (opcode), from, to, input, gas, value
    exit: output, gasUsed, error

The PR also comes with a re-write of the callTracer. As a backup we keep the previous tracing script under the name `callTracerLegacy`. Behaviour of both tracers are equivalent for the most part, although there are some small differences (improvements), where the new tracer is more correct / has more information.",TRUE,valid
7ada89d4e68801d958b0ffe311c57919969a62be,Martin Holst Swende,martin@swende.se,2021-09-16T11:45:16Z,Martin Holst Swende,martin@swende.se,2021-09-16T11:45:16Z,eth/tracers: abort evm execution when trace is aborted (#23580),TRUE,valid
84ff152de56b9d65f6888daef9dc00c97a6aafd3,Marius van der Wijden,m.vanderwijden@live.de,2021-09-15T08:52:48Z,Marius van der Wijden,m.vanderwijden@live.de,2021-09-15T08:52:48Z,"cmd/devp2p/internal/ethtest: only use eth66 if eth66 is negotiated (#23568)

* cmd/devp2p/internal/ethtest: only use eth66 if eth66 is negotiated

* cmd/devp2p/internal/ethtest: switch on concrete type not pointer

* cmd/devp2p/internal/ethtest: switch on concrete type not pointer",TRUE,valid
b8d7c662cd8f87f7dae15c7a53be25ec527999cd,Marius van der Wijden,m.vanderwijden@live.de,2021-09-13T16:59:52Z,Marius van der Wijden,m.vanderwijden@live.de,2021-09-13T16:59:52Z,"core, rpc: disable memory output by default in traces (#23558)

* core: cmd: invert disableMemory

* core: fix missed inversion

* cmd/evm: preserve Flags but change default value

* Apply suggestions from code review

Co-authored-by: Martin Holst Swende <martin@swende.se>

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
babe9b993ef9f7ad7b40d47b39520d87fb010b62,Martin Holst Swende,martin@swende.se,2021-09-13T11:57:40Z,Martin Holst Swende,martin@swende.se,2021-09-13T11:57:40Z,"cmd/evm: transaction validation tool (#23494)

* cmd/evm: transaction validation tool

* cmd/evm: add hash to t9n tool

* cmd/evm: lint nits

* cmd/evm: nitpicks",TRUE,valid
578bc8164d64bef89eed0b063ff8175e567a5686,Jonathan Verhees,jonathan@verhe.es,2021-09-13T10:34:00Z,Jonathan Verhees,jonathan@verhe.es,2021-09-13T10:34:00Z,"README: add londonBlock to example genesis config (#23565)

Updated example genesis.json configuration section, added londonBlock within config.",TRUE,valid
9ada4a2e2c415e6b0b51c50e901336872e028872,Peter Szilagyi,peterke@gmail.com,2021-09-10T13:05:06Z,Peter Szilagyi,peterke@gmail.com,2021-09-10T13:05:06Z,"Merge pull request #23561 from karalabe/temp-split-leseh

les: duplicate downloader and fetcher to allow progressive refactoring",TRUE,valid
9e17648d8c991c7243ca99123f010c152b87fce7,Peter Szilagyi,peterke@gmail.com,2021-09-10T07:55:48Z,Peter Szilagyi,peterke@gmail.com,2021-09-10T07:55:48Z,les: duplicate downloader and fetcher to allow progressive refactoring,TRUE,valid
90987db7334c1d10eb866ca550efedb66dea8a20,Felix Lange,fjl@twurst.com,2021-09-08T12:21:59Z,Felix Lange,fjl@twurst.com,2021-09-08T12:21:59Z,appveyor.yml: add linux/amd64 build job (#23548),TRUE,valid
5c1fc3bf547f1e983a95c734bdf8ab42a2d848c4,Felix Lange,fjl@twurst.com,2021-09-07T15:54:15Z,Felix Lange,fjl@twurst.com,2021-09-07T15:54:15Z,"core: 64bit alignment of testBlockChain.gasLimit (#23543)

This fixes crashes in txpool tests on 32bit platforms.",TRUE,valid
51ed39c0933d0d2fffbc5d093d45872a84d960eb,Felix Lange,fjl@twurst.com,2021-09-07T14:15:11Z,Felix Lange,fjl@twurst.com,2021-09-07T14:15:11Z,"core: make txPricedList.stales the first field for 64bit alignment (#23542)

This fixes crashes on 32bit builds.",TRUE,valid
6ef3a168692e34f6e356454e1c361803ded6e712,Peter Szilagyi,peterke@gmail.com,2021-09-07T10:36:48Z,Peter Szilagyi,peterke@gmail.com,2021-09-07T10:36:48Z,"p2p/enode: use unix timestamp as base ENR sequence number (#19903)

This PR ensures that wiping all data associated with a node (apart from its nodekey)
will not generate already used sequence number for the ENRs, since all remote nodes
would reject them until they out-number the previously published largest one.

The big complication with this scheme is that every local update to the ENR can
potentially bump the sequence number by one. In order to ensure that local updates
do not outrun the clock, the sequence number is a millisecond-precision timestamp,
and updates are throttled to occur at most once per millisecond.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
794c6133efa2c7e8376d9d141c900ea541790bce,Martin Holst Swende,martin@swende.se,2021-09-07T10:31:17Z,Martin Holst Swende,martin@swende.se,2021-09-07T10:31:17Z,"core/rawdb: freezer batch write (#23462)

This change is a rewrite of the freezer code.

When writing ancient chain data to the freezer, the previous version first encoded each
individual item to a temporary buffer, then wrote the buffer. For small item sizes (for
example, in the block hash freezer table), this strategy causes a lot of system calls for
writing tiny chunks of data. It also allocated a lot of temporary []byte buffers.

In the new version, we instead encode multiple items into a re-useable batch buffer, which
is then written to the file all at once. This avoids performing a system call for every
inserted item.

To make the internal batching work, the ancient database API had to be changed. While
integrating this new API in BlockChain.InsertReceiptChain, additional optimizations were
also added there.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
9a0df80bbcfd849a9a56ecb0937bf8dbea8a8c79,Zachinquarantine,zachinquarantine@yahoo.com,2021-09-07T08:52:58Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-09-07T08:52:58Z,"cmd/geth, cmd/utils: remove legacy rpc flags (#23358)

* remove rpc flags

* remove legacy rpc flags

* remove legacy rpc flags

* remove legacy rpc commands

* (hopefully) fix most of the build errors

* fix build errors

https://app.travis-ci.com/github/ethereum/go-ethereum/jobs/530318686

* cmd/utils: fix syntax error

* empty commit to unbreak travis ci

* fix syntax error

* syntax fixes

* syntax fixes

* fix

fixes ""cmd/geth/usage.go:234:7: expected '(', found init (typecheck)""

* fix

* various fixes in usage.go

* various fixes in flags.go

* adds extra space

reverts the spacing to how it was before I resolved the merge conflict

* more fixes in usage.go

* fix

fix for cmd/geth/usage.go:243:17: expected operand, found ':=' (typecheck) in travis

* Update cmd/utils/flags.go

Co-authored-by: Martin Holst Swende <martin@swende.se>

* fix error

 fixes these errors:
cmd/utils/flags_legacy.go:21:2: ""strings"" imported but not used (typecheck)

	""strings""

	^

cmd/utils/flags_legacy.go:24:2: ""github.com/ethereum/go-ethereum/node"" imported but not used (typecheck)

	""github.com/ethereum/go-ethereum/node""

	^

* goimports

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
ca5bc676d10d324dddf63bb24932385d0c0b9418,Zachinquarantine,zachinquarantine@yahoo.com,2021-09-07T08:51:33Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-09-07T08:51:33Z,"internal/debug: remove deprecated flags (#23368)

* internal/debug: remove deprecated flags

The removed flags are removed in the main portion of geth, this removes it internally too.

* internal/debug: remove legacy --debug and legacy --backtrace flag

* Update flags.go

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
79575302257b1f5c43b36826d0d5572a11e04987,Martin Holst Swende,martin@swende.se,2021-09-07T07:22:40Z,Martin Holst Swende,martin@swende.se,2021-09-07T07:22:40Z,"docs: add post-mortem (#23518)

* docs: add post-mortem

* Update docs/postmortems/2021-08-22-split-postmortem.md

Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>

* Update docs/postmortems/2021-08-22-split-postmortem.md

Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>

* Update docs/postmortems/2021-08-22-split-postmortem.md

Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>

* Update docs/postmortems/2021-08-22-split-postmortem.md

* Update 2021-08-22-split-postmortem.md

* Update docs/postmortems/2021-08-22-split-postmortem.md

Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>

Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>",TRUE,valid
de2c44ab5c9c5c2e76039388d632841c1c16bff3,aaronbuchwald,aaron.buchwald56@gmail.com,2021-09-07T04:25:54Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-09-07T04:25:54Z,"trie: add missing copyright header (#23530)

* Add missing copyright header

* Update stacktrie_test.go

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
4d88974864c3ee84a24b1088064162b8dbab8ad5,Martin Holst Swende,martin@swende.se,2021-09-02T07:22:43Z,Martin Holst Swende,martin@swende.se,2021-09-02T07:22:43Z,cmd/evm: add tests for evm t8n (#23507),TRUE,valid
067084fedab1d50e224e40e6442a7740fc53611a,Marius van der Wijden,m.vanderwijden@live.de,2021-08-31T08:33:39Z,Marius van der Wijden,m.vanderwijden@live.de,2021-08-31T08:33:39Z,"core: fix race conditions in txpool (#23474)

* core: fix race conditions in txpool

* core: fixed races in the txpool

* core: rebased on master

* core: move reheap mutex

* core: renamed mutex

* core: revert Reheap changes",TRUE,valid
d019e901621e6ce4efe1acc7d4fd6c41fe1349b1,Alexander Yastrebov,yastrebov.alex@gmail.com,2021-08-31T08:22:20Z,Alexander Yastrebov,yastrebov.alex@gmail.com,2021-08-31T08:22:20Z,common: fixes format verb (#23495),TRUE,valid
31be5d41d9a8463e0767ddf21f06ce0edd777e6d,Ikko Ashimine,eltociear@gmail.com,2021-08-31T08:21:42Z,Ikko Ashimine,eltociear@gmail.com,2021-08-31T08:21:42Z,"core: fix typo in iterator.go (#23502)

strorage -> storage",TRUE,valid
f85cf722ffde1b4a309be847ac394f90e9ace8eb,Fredrik Svantes,fredrik@ethereum.org,2021-08-31T07:02:04Z,Fredrik Svantes,fredrik@ethereum.org,2021-08-31T07:02:04Z,docs: add links to more audits in SECURITY.md (#23482),TRUE,valid
3258211f6833394f3ec064154eb214a6e0c02f6c,Pawe? Bylica,chfast@gmail.com,2021-08-30T12:13:06Z,Pawe? Bylica,chfast@gmail.com,2021-08-30T12:13:06Z,"core/vm: rework jumpdest analysis benchmarks (#23499)

* core/vm: rework jumpdest analysis benchmarks

For BenchmarkJumpdestOpAnalysis use fixed code size of ~1.2MB
and classic benchmark loop.

* core/vm: clear bitvec in jumpdest analysis benchmark",TRUE,valid
ffae2043f0482e81ac9f5459bf9fceafd74f52e9,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-27T12:11:15Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-27T12:11:15Z,"internal/ethapi: support both input and data for personal_sendTransaction (#23476)

Currently, setDefaults overwrites the transaction input value if only input is provided. This causes personal_sendTransaction to estimate the gas based on a transaction with empty data. eth_estimateGas never calls setDefaults so it was unaffected by this.",TRUE,valid
62ad17fb0046243255048fbf8cb0882f48d8d850,Martin Holst Swende,martin@swende.se,2021-08-26T06:35:37Z,Martin Holst Swende,martin@swende.se,2021-08-26T06:35:37Z,"Revert ""eth, internal/ethapi: make RPC block miner field show block sealer correctly (#23312)"" (#23466)

This reverts commit 57feabea663496109e59df669238398239438fb1.",TRUE,valid
108eec3feeca2e05d3daf1a198b8286623f56755,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-08-25T20:34:22Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-08-25T20:34:22Z,"node: remove dependency on wallet backend packages (#23019)

* accounts: new AddBackends method in manager

* node,cmd/geth: mv accman backend init to cmd/geth

* node,cmd/geth: mv scrypt config downstreawm from node

* accounts: use static buffer size for accman sub chan

minor fix

* accounts,cmd/geth: update accman backends through its event loop

* accounts,node: add comments

* accounts: un-export newBackendEvent

* accounts: use chan instead of wg in newBlockEvent

* node: rename isKeyDirEphem

* accounts,cmd: AddBackends->AddBackend

* accounts: fix potential blocking when adding backend",TRUE,valid
d584e3986251902bce78369ab4b0f32da70bc82f,Felix Lange,fjl@twurst.com,2021-08-25T19:57:31Z,Felix Lange,fjl@twurst.com,2021-08-25T19:57:31Z,"build: stop publishing deb packages for Ubuntu 20.10 Groovy Gorilla (#23470)

Support for this Ubuntu release has ended on July 22 2021 and
Launchpad no longer accepts uploads for it.",TRUE,valid
7c4cad064cf7a9f48f9d69c6a4f459ebe8bb19ab,Dmitry Zenovich,dzenovich@gmail.com,2021-08-25T17:30:29Z,Dmitry Zenovich,dzenovich@gmail.com,2021-08-25T17:30:29Z,"rpc: add BlockNumber.MarshalText (#23324)

Currently rpc.BlockNumber is marshalled to JSON as a numeric value, which is
wrong because BlockNumber.UnmarshalJSON() wants it to either be hex-encoded
or string ""earliest""/""latest""/""pending"". As a result, the call chain

    rpc.BlockNumberOrHashWithNumber(123) -> json.Marshal() -> json.Unmarshal()

fails with error ""cannot unmarshal object into Go value of type string"".",TRUE,valid
154b525ce8908dfa8e4fa19b9da7aee78ecba156,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-25T17:06:42Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-25T17:06:42Z,"cmd/devp2p/internal/ethtest: remove WriteTo method (#23379)

WriteTo is unused, and go vet warns about it because it
doesn't match the usual signature of the io.WriterTo method.",TRUE,valid
32c576bd3c64bb19e0b6aa7b67342092a2022242,Felix Lange,fjl@twurst.com,2021-08-25T17:01:10Z,Felix Lange,fjl@twurst.com,2021-08-25T17:01:10Z,"rlp: minor optimizations for slice/array encoding (#23467)

As per benchmark results below, these changes speed up encoding/decoding of
consensus objects a bit.

    name                             old time/op    new time/op    delta
    EncodeRLP/legacy-header-8           384ns ± 1%     331ns ± 3%  -13.83%  (p=0.000 n=7+8)
    EncodeRLP/london-header-8           411ns ± 1%     359ns ± 2%  -12.53%  (p=0.000 n=8+8)
    EncodeRLP/receipt-for-storage-8     251ns ± 0%     239ns ± 0%   -4.97%  (p=0.000 n=8+8)
    EncodeRLP/receipt-full-8            319ns ± 0%     300ns ± 0%   -5.89%  (p=0.000 n=8+7)
    EncodeRLP/legacy-transaction-8      389ns ± 1%     387ns ± 1%     ~     (p=0.099 n=8+8)
    EncodeRLP/access-transaction-8      607ns ± 0%     581ns ± 0%   -4.26%  (p=0.000 n=8+8)
    EncodeRLP/1559-transaction-8        627ns ± 0%     606ns ± 1%   -3.44%  (p=0.000 n=8+8)
    DecodeRLP/legacy-header-8           831ns ± 1%     813ns ± 1%   -2.20%  (p=0.000 n=8+8)
    DecodeRLP/london-header-8           824ns ± 0%     804ns ± 1%   -2.44%  (p=0.000 n=8+7)

* rlp: pass length to byteArrayBytes

This makes it possible to inline byteArrayBytes. For arrays, the length is known
at encoder construction time, so the call to v.Len() can be avoided.

* rlp: avoid IsNil for pointer encoding

It's actually cheaper to use Elem first, because it performs less checks
on the value. If the pointer was nil, the result of Elem is 'invalid'.

* rlp: minor optimizations for slice/array encoding

For empty slices/arrays, we can avoid storing a list header entry in the
encoder buffer. Also avoid doing the tail check at encoding time because
it is already known at encoder construction time.",TRUE,valid
8a134014b4b370b4a3632e32a2fc8e84ee2b6947,Felix Lange,fjl@twurst.com,2021-08-25T16:46:29Z,Felix Lange,fjl@twurst.com,2021-08-25T16:46:29Z,"all: add go:build lines (#23468)

Generated by go1.17 fmt ./...",TRUE,valid
887902ea4d7ee77118ce803e05085bd9055aa46d,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-08-25T15:33:09Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-08-25T15:33:09Z,crypto/cloudflare/bn256: fix in-place addition and unmarshalling (#23419),TRUE,valid
d16214228f40079af8db6752ca5f51b2022878c2,Felix Lange,fjl@twurst.com,2021-08-25T13:18:31Z,Felix Lange,fjl@twurst.com,2021-08-25T13:18:31Z,Dockerfile: upgrade to Go 1.17 (#23465),TRUE,valid
3784e15106c8502b0a612d932be2e995fd182ea6,Martin Holst Swende,martin@swende.se,2021-08-25T13:07:58Z,Martin Holst Swende,martin@swende.se,2021-08-25T13:07:58Z,tests: avoid performance tests during CI runs (#23304),TRUE,valid
84c51bc5ec9038db6ab28195384a6bd720a28af9,Martin Holst Swende,martin@swende.se,2021-08-25T13:04:26Z,Martin Holst Swende,martin@swende.se,2021-08-25T13:04:26Z,"cmd/evm: add difficulty calculation to t8n tool (#23353)

This PR adds functionality to the evm t8n to calculate ethash difficulty. If the caller does not provide a currentDifficulty, but instead provides the parentTimestamp (well, semi-optional, will default to 0 if not given), and parentDifficulty, we can calculate it for him.

The caller can also provide a parentUncleHash. In most, but not all cases, the parent uncle hash also affects the formula. If no such hash is provided (or, if the empty all-zero hash is provided), it's assumed that there were no uncles.",TRUE,valid
efee85378ef426ab1dffa2e9045a60ea411415e1,Felix Lange,fjl@twurst.com,2021-08-25T12:22:33Z,Felix Lange,fjl@twurst.com,2021-08-25T12:22:33Z,"build, .travis.yml: upgrade to Go 1.17 (#23464)",TRUE,valid
45f34430fd5fc5a93b666eba90f2c76bd3f770f3,Felix Lange,fjl@twurst.com,2021-08-25T11:21:09Z,Felix Lange,fjl@twurst.com,2021-08-25T11:21:09Z,"build: upgrade to golangci-lint v1.42.0 (#23461)

The new linter version is built with go 1.17 and thus includes the go vet
check for mismatched +build and go:build lines.

Fortunately, no new warnings are reported with this update.",TRUE,valid
83ad92c42191a47b3ded38a9fd22fd0bed2f05f6,gary rong,garyrong0905@gmail.com,2021-08-25T09:56:25Z,gary rong,garyrong0905@gmail.com,2021-08-25T09:56:25Z,les: fix data races in tests (#23457),TRUE,valid
fe2f153b556a0f1225c571fd5df7967a33244bf1,ucwong,ucwong@126.com,2021-08-24T19:02:46Z,ucwong,ucwong@126.com,2021-08-24T19:02:46Z,go.mod: update goleveldb (#23417),TRUE,valid
a5a52371789f2e2a3144c8a842c4238ba92cf301,gary rong,garyrong0905@gmail.com,2021-08-24T19:00:42Z,gary rong,garyrong0905@gmail.com,2021-08-24T19:00:42Z,"core, light, tests, trie: add state metrics (#23433)",TRUE,valid
a789dcc9780e3d2364a7c6879af26aa0ed256fca,Felix Lange,fjl@twurst.com,2021-08-24T18:54:55Z,Felix Lange,fjl@twurst.com,2021-08-24T18:54:55Z,metrics: fix compilation for GOOS=js (#23449),TRUE,valid
b69f5ca7d47e47335b9d19075245f9ee9fa9bd31,Ivan Bogatyy,bogatyi@gmail.com,2021-08-24T18:54:00Z,Ivan Bogatyy,bogatyi@gmail.com,2021-08-24T18:54:00Z,cmd/utils: fix typo in variable name (#23451),TRUE,valid
0db0b277545383d952132f126d4a8edd05138e6a,Peter Szilagyi,peterke@gmail.com,2021-08-24T18:52:58Z,Peter Szilagyi,peterke@gmail.com,2021-08-24T18:52:58Z,"Revert ""Revert ""eth: drop eth/65, the last non-reqid protocol version"" (#23426)"" (#23456)

This reverts commit c368f728c19e7fd7a9613513edda68ffcb503af0.",TRUE,valid
d705f5a5543402a1d505bdc411d264cd4f883402,Martin Holst Swende,martin@swende.se,2021-08-24T18:48:36Z,Martin Holst Swende,martin@swende.se,2021-08-24T18:48:36Z,"core: make txpool reject too sudden changes (#23095)

* core: make txpool reject too sudden changes

* core: add some metrics to txpool",TRUE,valid
5cee33eb7234756939b1ef8b23e990b672a03dff,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-24T12:27:15Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-24T12:27:15Z,tests/fuzzers: fix go vet warning about ReadByte (#23380),TRUE,valid
85126c4eb99ab4b2ccd74c1ee66d2aba0b54a767,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-24T12:10:52Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-24T12:10:52Z,"node: add comment about --nousb being deprecated (#23439)


Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
a0a4a153e98f21b014e7ad289816514751d86568,Martin Holst Swende,martin@swende.se,2021-08-24T11:59:15Z,Martin Holst Swende,martin@swende.se,2021-08-24T11:59:15Z,"core/types: add benchmarks for rlp encoding/decoding (#23190)


Co-authored-by: Felix Lange <fjl@twurst.com>
Co-authored-by: Sina Mahmoodi <1591639+s1na@users.noreply.github.com>",TRUE,valid
0b4097748016395b14ecdc316d2095eb7c968f2a,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-08-24T11:57:05Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-08-24T11:57:05Z,core/vm: fix typo in comment (#23450),TRUE,valid
5c66bab3b8e6368e66f6bc300ac6816ebd1f2c83,ligi,ligi@ligi.de,2021-08-24T11:56:31Z,ligi,ligi@ligi.de,2021-08-24T11:56:31Z,"tests/testdata: make submodule shallow (#23412)

Before:

316M .git/modules/tests/

After:

171M .git/modules/tests/",TRUE,valid
8e0771c21825e9621f29d6c4018038b4505a59f4,Pedro Gomes,otherview@gmail.com,2021-08-24T11:32:19Z,Pedro Gomes,otherview@gmail.com,2021-08-24T11:32:19Z,"core/bloombits: avoid crash when storing errors of different type (#23437)

This fixes a rare crash which could occur when two different errors happened
in the same bloombits.MatcherSession.",TRUE,valid
8dbf261fd9fc4cd6eca64ebeafee17826e608094,Marius van der Wijden,m.vanderwijden@live.de,2021-08-24T10:22:56Z,Marius van der Wijden,m.vanderwijden@live.de,2021-08-24T10:22:56Z,"p2p, p2p/enode: fix data races (#23434)

In p2p/dial.go, conn.flags was accessed without using sync/atomic.
This race is fixed by removing the access.

In p2p/enode/iter_test.go, a similar race is resolved by writing the field atomically.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
79bb9300c1b9fbc00701bd27d5f465df99752870,chuwt,weitaochu@gmail.com,2021-08-24T08:51:28Z,chuwt,weitaochu@gmail.com,2021-08-24T08:51:28Z,"trie, les: add missing calls to Ticker.Stop (#23415)",TRUE,valid
ea4bc2dbff949932050994d5213d9a41cf4cd6ee,Peter Szilagyi,peterke@gmail.com,2021-08-24T07:08:08Z,Peter Szilagyi,peterke@gmail.com,2021-08-24T07:08:08Z,params: begin Geth v1.10.9 release cycle,TRUE,valid
26675454bf93bf904be7a43cce6b3f550115ff90,Peter Szilagyi,peterke@gmail.com,2021-08-24T07:04:30Z,Peter Szilagyi,peterke@gmail.com,2021-08-24T07:04:30Z,params: release Geth v1.10.8,TRUE,valid
1d995731923ca899964371ddb213d40b7e773818,Martin Holst Swende,martin@swende.se,2021-08-24T07:00:10Z,Martin Holst Swende,martin@swende.se,2021-08-24T07:00:10Z,"core/vm: faster code analysis (#23381)

* core/vm: more detailed benchmark for jumpdest analysis

* core/vm: make jd analysis benchmark alloc free

* core/vm: improve jumpdest analysis

* core/vm: improve worst-case

* core/vm: further improvements in analysis

* core/vm: improve jumpdest analysis >PUSH15

* core/vm: make jd analysis ref by value

* core/vm: fix misspell

* core/vm: improve set8 and set16 a bit

* core/vm: reduce amount of code

* core/vm: optimize byte copying",TRUE,valid
f38abc55f135587ce3cf60c9d574ec2a4ebb8197,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-08-23T21:50:24Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-08-23T21:50:24Z,"eth/gasprice: feeHistory improvements (#23422)

* eth/gasprice: cache feeHistory results

* eth/gasprice: changed feeHistory block count limitation

* eth/gasprice: do not use embedded struct in blockFees

* eth/gasprice: fee processing logic cleanup

* eth/gasprice: purge feeHistory cache at chain reorgs",TRUE,valid
dfeb2f7e8001aef1005a8d5e1605bae1de0b4f12,ucwong,ucwong@126.com,2021-08-23T11:45:16Z,ucwong,ucwong@126.com,2021-08-23T11:45:16Z,go.mod: upgrade golang.org/x/sys for go1.17 support (#23406),TRUE,valid
bb1f7ebf203f40dae714a3b8445918cfcfc9a7db,Felix Lange,fjl@twurst.com,2021-08-23T10:20:56Z,Felix Lange,fjl@twurst.com,2021-08-23T10:20:56Z,signer/core/apitypes: remove dependency on internal/ethapi (#23362),TRUE,valid
d02c60536799698888d21f093f7c379acdad3147,Marius van der Wijden,m.vanderwijden@live.de,2021-08-23T09:49:39Z,Marius van der Wijden,m.vanderwijden@live.de,2021-08-23T09:49:39Z,core: only check sendernoeoa in non fake mode (#23424),TRUE,valid
c368f728c19e7fd7a9613513edda68ffcb503af0,Peter Szilagyi,peterke@gmail.com,2021-08-20T12:14:21Z,Peter Szilagyi,peterke@gmail.com,2021-08-20T12:14:21Z,"Revert ""eth: drop eth/65, the last non-reqid protocol version"" (#23426)",TRUE,valid
5566e5d152c490e5e533f3bc7735dddd57a428eb,chuwt,weitaochu@gmail.com,2021-08-18T10:03:41Z,chuwt,weitaochu@gmail.com,2021-08-18T10:03:41Z,eth/downloader: fix typo in comment (#23413),TRUE,valid
57feabea663496109e59df669238398239438fb1,??,chenjiablog@gmail.com,2021-08-17T16:55:18Z,??,chenjiablog@gmail.com,2021-08-17T16:55:18Z,"eth, internal/ethapi: make RPC block miner field show block sealer correctly (#23312)

Makes the RPC block return the POA sealer for clique blocks on the 'miner' field (was previously zeroes)",TRUE,valid
16ecdd583984162923256e563320b8b381da7f46,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-17T16:49:19Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-17T16:49:19Z,"cmd/utils: add --nousb to the list of deprecated flags (#23388)

Adds --nousb as a deprecated flag when someone runs the geth show-deprecated-flags command.",TRUE,valid
85b9bdd6413797f6720c7d9ef46e5fdeb47b0cb6,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-17T16:43:25Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-17T16:43:25Z,"cmd, core: remove calaveras testnet  (#23366)

Removes references to the short-lived Calaveras testnet",TRUE,valid
690248576704d9dc312d5746400e035c6dccaea6,jwasinger,j-wasinger@hotmail.com,2021-08-17T16:40:14Z,jwasinger,j-wasinger@hotmail.com,2021-08-17T16:40:14Z,"cmd, metrics: add support for influxdb-v2 (cherry-picking from italoacasas' changes), leave existing support for v1 to maintain backwards-compatibility. (#23194)

This PR adds flag to enable InfluxDB v2 (--metrics.influxdbv2), flags for v2-specific features (--metrics.influxdb.token, --metrics.influxdb.bucket), also carries over addition of support for specifying organization (--metrics.influxdb.organization), but still retains backwards compatibility with InfluxDB v1.",TRUE,valid
fb4007bb2208a5b76f76287c03001ef906261691,Martin Holst Swende,martin@swende.se,2021-08-17T15:30:21Z,Martin Holst Swende,martin@swende.se,2021-08-17T15:30:21Z,"tests: update, enable legacy tests, remove vm tests (#23350)

* tests: update, enable legacy tests, remove vm tests

* tests: minor fixes",TRUE,valid
0a68558e7e025afebf67b81bf48ecb8b0fa7c06d,Peter Szilagyi,peterke@gmail.com,2021-08-13T12:39:51Z,Peter Szilagyi,peterke@gmail.com,2021-08-13T12:39:51Z,"accounts/external: handle 0 chainid as not-set for the Clef API (#23394)

* accounts/external: handle 0 chainid as not-set for the Clef API

* accounts/external: document SignTx

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
fd604becbb952cc46111a77ea4e5b76b4617fa49,Peter Szilagyi,peterke@gmail.com,2021-08-13T08:52:47Z,Peter Szilagyi,peterke@gmail.com,2021-08-13T08:52:47Z,"Merge pull request #23120 from karalabe/drop-eth-65

eth: drop eth/65, the last non-reqid protocol version",TRUE,valid
5f98020a21d64fa22516c04aaf3bc4ed0629e7cc,Martin Holst Swende,martin@swende.se,2021-08-13T08:51:01Z,Martin Holst Swende,martin@swende.se,2021-08-13T08:51:01Z,"core/rawdb: implement sequential reads in freezer_table (#23117)

* core/rawdb: implement sequential reads in freezer_table

* core/rawdb, ethdb: add sequential reader to db interface

* core/rawdb: lint nitpicks

* core/rawdb: fix some nitpicks

* core/rawdb: fix flaw with deferred reads not being performed

* core/rawdb: better documentation",TRUE,valid
a580f7d6c54812ef47df94c6ffc974c9dbc48245,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:15:49Z,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:15:49Z,params: begin v1.10.8 release cycle,TRUE,valid
12f0ff40b1bfb484cafc3be6e0040262e96743bd,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:14:03Z,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:14:03Z,params: release Geth v1.10.7,TRUE,valid
971df49fe2f5582846c524bd9e173d228e53b378,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:13:05Z,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:13:05Z,"Merge pull request #23385 from karalabe/cht-1.10.7

params: update CHTs for the 1.10.7 release",TRUE,valid
f4ad49387025cad7d278a05c5afaee6089b573a4,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:11:39Z,Peter Szilagyi,peterke@gmail.com,2021-08-12T07:11:39Z,params: update CHTs for the 1.10.7 release,TRUE,valid
2a451f9eb302c9436ab8daa8df59f8e9784609c6,Peter Szilagyi,peterke@gmail.com,2021-08-12T06:57:06Z,Peter Szilagyi,peterke@gmail.com,2021-08-12T06:57:06Z,"Merge pull request #23384 from holiman/fix_gasfoo

internal/ethapi: add back missing check for maxfee < maxPriorityFee",TRUE,valid
278ec7176ab1ec57cc0ab56ba3cbdbc3b2635bf6,Martin Holst Swende,martin@swende.se,2021-08-12T06:14:21Z,Martin Holst Swende,martin@swende.se,2021-08-12T06:14:21Z,internal/ethapi: add back missing check for maxfee < maxPriorityFee,TRUE,valid
deff5056fb817864ceed58efb1b4ff33aa4ba82c,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:52:57Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:52:57Z,"Merge pull request #23374 from karalabe/fix-docker-tag

build: fix docker tag to include `v` prefix in version string",TRUE,valid
c27bd3481e5acb2cd88226eb3d6edf58aa1c5096,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:49:52Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:49:52Z,build: fix docker tag to include `v` prefix in version string,TRUE,valid
0fbc94eabc64f87920076fa68f9a2d3b5c7d170e,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:31:10Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:31:10Z,"Merge pull request #23373 from karalabe/docker-flip

travis: transition from docker auto builds to manual pushes",TRUE,valid
9097d0a325e3309387aa90e01cbe843941d60fb0,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:13:06Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T14:13:06Z,travis: transition from docker auto builds to manual pushes,TRUE,valid
5d0ab0734356db18f260fb2fba10b30128fb81ed,Peter Szilagyi,peterke@gmail.com,2021-08-10T13:59:25Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T13:59:25Z,"Merge pull request #23371 from karalabe/gofmt

core/state/snapshot: gofmt",TRUE,valid
9d6480c3cd7e7380fd9fb90935d108bca12d33e6,Peter Szilagyi,peterke@gmail.com,2021-08-10T13:58:38Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T13:58:38Z,core/state/snapshot: gofmt,TRUE,valid
a879c42bd34e91a4e08c0247138c96957eca2b3f,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-10T13:56:34Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-10T13:56:34Z,"internal/ethapi, accounts/abi/bind: cap highest gas limit by account balance for 1559 fee parameters (#23309)

* internal/ethapi/api: cap highest gas limit by account balance for 1559 fee parameters

* accounts/abi/bind: port gas limit cap for 1559 parameters to simulated backend

* accounts/abi/bind: add test for 1559 gas estimates for the simulated backend

* internal/ethapi/api: fix comment

* accounts/abi/bind/backends, internal/ethapi: unify naming style

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
39fe7eca6b5ce78be8e4fdb88aa13d1ec41090d2,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-10T13:39:06Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-08-10T13:39:06Z,internal/ethapi: return maxFeePerGas for gasPrice for EIP-1559 txs (#23345),TRUE,valid
66948316f7e94f04edbd25906fd09a648a489129,Tyler Chambers,2775339+tylerchambers@users.noreply.github.com,2021-08-10T09:16:53Z,Tyler Chambers,2775339+tylerchambers@users.noreply.github.com,2021-08-10T09:16:53Z,"core/state/snapshot: clarify comment about snapshot repair (#23305)


Co-authored-by: Tyler Chambers <me@tylerchambers.net>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
57d9e0ac759d3ff6bda8bd83016c83af450cbe42,Ziyuan Zhong,zzy.albert@163.com,2021-08-10T09:04:29Z,Ziyuan Zhong,zzy.albert@163.com,2021-08-10T09:04:29Z,core/state/snapshot: fix typo in comment (#23219),TRUE,valid
e4b687cf462870538743b3218906940ae590e7fd,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-10T08:40:54Z,Zachinquarantine,zachinquarantine@yahoo.com,2021-08-10T08:40:54Z,mobile: remove deprecated code (#23357),TRUE,valid
6d175460dfb4ceddd1de41a90b520159902c6bc1,gary rong,garyrong0905@gmail.com,2021-08-10T08:28:33Z,gary rong,garyrong0905@gmail.com,2021-08-10T08:28:33Z,"cmd, core, eth, miner: deprecate miner.gastarget flag (#23213)",TRUE,valid
520f25688aacc62a046d09ac87fdde3b2f1ed28f,Peter Szilagyi,peterke@gmail.com,2021-08-10T08:04:39Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T08:04:39Z,"Merge pull request #23370 from karalabe/windows-pruning-fix-b

core/state/pruner: fix state bloom sync permission in Windows",TRUE,valid
3b38a83274b5fab8afaa5fde78d6007787f77ae9,Peter Szilagyi,peterke@gmail.com,2021-08-10T07:38:49Z,Peter Szilagyi,peterke@gmail.com,2021-08-10T07:38:49Z,core/state/pruner: fix state bloom sync permission in Windows,TRUE,valid
97bd6cd2167d45d557a29f12133c42faccd61efb,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-08-10T06:53:40Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-08-10T06:53:40Z,internal/ethapi: accept both hex and decimal for blockCount (#23363),TRUE,valid
d60cfd2604a4615078696da20d474828be65ab70,shawn,36943337+lxex@users.noreply.github.com,2021-08-09T14:34:20Z,shawn,36943337+lxex@users.noreply.github.com,2021-08-09T14:34:20Z,"core: fix london-check to avoid duplication (#23333)

Co-authored-by: lxex <liuxmzc1@163.com>",TRUE,valid
9e59474e46f383cd2eace981d498dd7176ea1319,Shihao Xia,charlesxsh@hotmail.com,2021-08-08T13:44:42Z,Shihao Xia,charlesxsh@hotmail.com,2021-08-08T13:44:42Z,"core/rawdb: close database in test to avoid goroutine leak (#23287)

* add db close to avoid goroutine leak

* core/rawdb: move close to defer

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
8a24b563312a0ab0a808770e464c5598ab7e35ea,Martin Holst Swende,martin@swende.se,2021-08-07T21:04:34Z,Martin Holst Swende,martin@swende.se,2021-08-07T21:04:34Z,"cmd/evm: implement input txs via rlp in t8n tool (#23138)

In many cases, it's desireable to use already-signed transactions as input to the state transition, instead of having the evm sign them internally (for example to use malformed or not-yet-valid transactions). This PR adds support + docs for that feature.",TRUE,valid
0658712f6599cf8d84309ea8b74f8c0fcd83687d,Martin Holst Swende,martin@swende.se,2021-08-07T17:38:18Z,Martin Holst Swende,martin@swende.se,2021-08-07T17:38:18Z,"core: check if sender is EOA (#23303)

This adds a check to verify that a sender-account does not have code, which means that the codehash is either `emptyCodeHash` _OR_ not present. The latter occurs IFF the sender did not previously exist, a situation which can only occur with zero cost gasprices.",TRUE,valid
d3e3a460ec947c9e1e963d1a35f887d95f23f99d,Patrick O'Grady,prohb125@gmail.com,2021-08-04T08:10:37Z,Patrick O'Grady,prohb125@gmail.com,2021-08-04T08:10:37Z,"core/rawdb: fix logs to print block number, not address (#23328)",TRUE,valid
28ba686cbfa6a46a9b4f03b620460867d502f34e,Marius van der Wijden,m.vanderwijden@live.de,2021-08-03T15:35:25Z,Marius van der Wijden,m.vanderwijden@live.de,2021-08-03T15:35:25Z,"core/state: add trie prefetcher tests (#23216)

* core/state: add trie prefetcher tests

* core/state: add missing license",TRUE,valid
f311488d2cfc25292d9ee8b1ef40a2bdd10a6d94,gary rong,garyrong0905@gmail.com,2021-08-03T15:32:13Z,gary rong,garyrong0905@gmail.com,2021-08-03T15:32:13Z,internal/ethapi: fix trace log marshalling (#23292),TRUE,valid
c38fab912ba817e5f502f4190ab315738e42949b,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-08-03T15:29:47Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-08-03T15:29:47Z,core: get header from block cache (#23299),TRUE,valid
4cd6a1458e37c78ec172cf62b9168e3b92c65ca7,Martin Holst Swende,martin@swende.se,2021-08-03T09:21:39Z,Martin Holst Swende,martin@swende.se,2021-08-03T09:21:39Z,"cmd/devp2p: fix ping/pong race in discv4 tests (#23306)

This PR modifies the post-PING-send expectations to both be laxer and stricter: it doesn't care what order the packets arrive, but also verifies that exactly one PING and one PONG is returned.",TRUE,valid
82c508539939e025ad9f31aa784f6b4307afcbbb,aaronbuchwald,aaron.buchwald56@gmail.com,2021-08-03T06:06:58Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-08-03T06:06:58Z,cre/state: fix outdated statedb Prepare comment (#23320),TRUE,valid
95bbd46eabc5d95d9fb2108ec232dd62df2f44ab,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-02T13:43:01Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-08-02T13:43:01Z,"node, cmd/clef: remove term ""whitelist"" (#23296)

* node: remove term ""whitelist""

* include cmd/clef",TRUE,valid
85afdeef37e17bffd9d098e86312c569995705e0,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T18:23:37Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T18:23:37Z,tests: remove whitelist feature (#23297),TRUE,valid
860184d54285738322ca697b1666040183e05e76,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T15:50:18Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T15:50:18Z,"p2p: remove term ""whitelist"" (#23295)


Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
3526f690478482a02a152988f4d31074c176b136,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T15:36:15Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T15:36:15Z,"all: remove term ""whitelist"" in comments and log messages (#23294)",TRUE,valid
295bc35ecf9b29f72db8d71f61e2d65b4d4bb24c,Martin Holst Swende,martin@swende.se,2021-07-29T14:06:44Z,Martin Holst Swende,martin@swende.se,2021-07-29T14:06:44Z,"signer/core: move API JSON types to separate package (#23275)

This PR moves (some) account types into a standalone package, to avoid
depending on signer/core from accounts/external.",TRUE,valid
8f11d279d241cfdf2571d4fa772dc38efc6175d0,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-29T14:03:50Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-29T14:03:50Z,"p2p/simulations: fix unlikely crash in probabilistic connect (#23200)

When the nodeCount is less than 10, it will panic with the out of bound error.
How about we just skip this round, when rand1 and rand2 are equal?",TRUE,valid
b157bae2c9815fa08be19c7533c079b720bd19a1,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-29T13:20:45Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-29T13:20:45Z,go.mod: bump golang.org/x/text to v0.3.6 (#23291),TRUE,valid
64a5e125c5b61b6182fbbec27dcc78a33fe6ac67,ucwong,ucwong@126.com,2021-07-29T13:20:15Z,ucwong,ucwong@126.com,2021-07-29T13:20:15Z,go.mod: upgrade to goupnp v1.0.2 (#23197),TRUE,valid
fb8ea5993f466bd398d33a42a8273c9fc2bf1fb6,Marius van der Wijden,m.vanderwijden@live.de,2021-07-29T12:05:22Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-29T12:05:22Z,tests: update tests/testdata to v9.0.4 (london) (#23279),TRUE,valid
5c13012b5681218aec6cf6039349adb7308d58e0,Martin Holst Swende,martin@swende.se,2021-07-29T12:00:06Z,Martin Holst Swende,martin@swende.se,2021-07-29T12:00:06Z,"accounts/external, internal/ethapi: fixes for London tx signing  (#23274)

Ticket #23273 found a flaw where we were unable to sign legacy-transactions
using the external signer, even if we're still on non-london network. That's
fixed in this PR.

Additionally, I found that even when supplying all parameters, it was impossible
to sign a london-transaction on an unsynched node. It's a pretty common usecase
that someone wants to sign a transaction using an unsynced 'vanilla' node,
providing all necessary data. Our setDefaults, however, insisted on checking the
current block against the config. This PR therefore adds a case, so that if both
MaxPriorityFeePerGas and MaxFeePerGas are provided, we accept them as given.

OBS This PR fixes a regression -- on current master, we are unable to sign a
london-transaction unless the node is synched, which may break scenarios where
geth (or clef) is used as a cold wallet.

Fixes #23273",TRUE,valid
523866c2ccbfd75ee88b309167cdba7311ba9695,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T08:17:40Z,baptiste-b-pegasys,85155432+baptiste-b-pegasys@users.noreply.github.com,2021-07-29T08:17:40Z,all: change blacklist terms,TRUE,valid
56e9001a1a8ddecc478943170b00207ef46109b9,ligi,ligi@ligi.de,2021-07-28T16:14:46Z,ligi,ligi@ligi.de,2021-07-28T16:14:46Z,README: fix default sync mode (#23282),TRUE,valid
0730acc5a01e683176b31ef0fcdf0d965a47d14a,@edgararout,edgar.factorial@gmail.com,2021-07-28T12:24:41Z,@edgararout,edgar.factorial@gmail.com,2021-07-28T12:24:41Z,consensus/ethash: less allocation during mining (#23199),TRUE,valid
2faf796d2a502ef6d3c02681a649bd3f41999ccc,Marius van der Wijden,m.vanderwijden@live.de,2021-07-28T12:21:35Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-28T12:21:35Z,"internal/ethapi: fix panic in accesslist creation (#23225)

* internal/ethapi: revert + fix properly in al tracer

* internal/ethapi: use toMessage instead of creating new message

* internal/ethapi: remove ineffassign

* core: fix invalid unmarshalling, fix test

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
3aea432b35f0344d9f7c1f1843a4eca496229ffc,Marius van der Wijden,m.vanderwijden@live.de,2021-07-27T14:24:27Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-27T14:24:27Z,accounts/abi/bind: set Context in TransactOpts (#23188),TRUE,valid
b20bc5c0cae6901209610c5f53f01401b6f7974e,Marius van der Wijden,m.vanderwijden@live.de,2021-07-27T14:22:21Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-27T14:22:21Z,"accounts/abi/bind: parse ABI only once, create metadata struct (#22583)",TRUE,valid
5c89ec9b989084dfc67dcaf81736067ebb8f078c,Martin Holst Swende,martin@swende.se,2021-07-27T14:19:48Z,Martin Holst Swende,martin@swende.se,2021-07-27T14:19:48Z,cmd/geth: update vulnerability testdata (#23252),TRUE,valid
bbfa6488ac9e882d30c58b1b380cc894c8ef8a58,lightclient,14004106+lightclient@users.noreply.github.com,2021-07-27T03:27:28Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-07-27T03:27:28Z,"Use `hexutil.Uint` for `blockCount` parameter in `feeHistory` method (#23239)

* internal/ethapi/api: use hexutil.uint for blockCount parameter instead of int for feeHistory

* return hex value for oldestBlock instead of number

* return uint64 from oracle.resolveBlockRange

* eth/gasprice: fixed test

Co-authored-by: Zsolt Felfoldi <zsfelfoldi@gmail.com>",TRUE,valid
a1f16bc74c7efb593db2982c92222d1e4a201c25,Felix Lange,fjl@twurst.com,2021-07-22T14:45:22Z,Felix Lange,fjl@twurst.com,2021-07-22T14:45:22Z,params: begin v1.10.7 release cycle,FALSE,unsigned
576681f29b895dd39e559b7ba17fcd89b42e4833,Felix Lange,fjl@twurst.com,2021-07-22T14:44:28Z,Felix Lange,fjl@twurst.com,2021-07-22T14:44:28Z,params: release go-ethereum v1.10.6 stable,FALSE,unsigned
370680a7a903c0df3f0c06069b7fbf907b9e41d5,gary rong,garyrong0905@gmail.com,2021-07-22T13:43:51Z,gary rong,garyrong0905@gmail.com,2021-07-22T13:43:51Z,"core/types: revert removal of legacy receipt support (#23247)

* Revert ""core/types: go generate (#23177)""

This reverts commit 00b922fc5dcfb1f0a5dbd5614725424a2221da83.

* Revert ""core/types: remove LogForStorage type (#23173)""

This reverts commit 7522642393a24dca53061e3f7c9d9a5c3eac4bc2.

* Revert ""core/types: remove support for legacy receipt/log storage encoding (#22852)""

This reverts commit 643fd0efc6ebc8397311d1ca68fc71d8da247643.",TRUE,valid
97aacd9b359035d6cfeebf186f4420ccc19c7ecc,Marius van der Wijden,m.vanderwijden@live.de,2021-07-22T13:39:40Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-22T13:39:40Z,"core: fix pre-check for account balance under EIP-1559 (#23244)

When processing a transaction with London fork rules, EIP-1559 mandates
checking that the sender must have sufficient balance to cover gas * gasFeeCap.

In the EIP's pseudocode, this check happens after the value transferred by the
transaction has already been deducted. However, in go-ethereum, the balance
has not yet been updated when the check happens, and therefore needs to be
added explicitly.

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
f05419f0fb8c5328dca92ea9fb184d082300344a,gary rong,garyrong0905@gmail.com,2021-07-15T23:52:40Z,gary rong,garyrong0905@gmail.com,2021-07-15T23:52:40Z,les: fix eth_sendTransaction API (#23215),TRUE,valid
a5e3aa693c087cd2f78d0393eaa9f9b22a1e3959,aaronbuchwald,aaron.buchwald56@gmail.com,2021-07-15T18:23:16Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-07-15T18:23:16Z,eth/tracers: fix typo in test name (#23218),TRUE,valid
89fde59a8091670e50c99e2cf3de41051a4723f6,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-15T08:15:08Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-15T08:15:08Z,node: fix stopping websocket rpc.Server (#23211),TRUE,valid
f0b1bddac41a31ff5b86c3d934acd19016aeb1d1,Peter Szilagyi,peterke@gmail.com,2021-07-14T08:04:36Z,Peter Szilagyi,peterke@gmail.com,2021-07-14T08:04:36Z,params: begin v1.10.6 release cycle,TRUE,valid
33ca98ece985f5085ac8ec19a49239d726850004,Peter Szilagyi,peterke@gmail.com,2021-07-14T08:01:38Z,Peter Szilagyi,peterke@gmail.com,2021-07-14T08:01:38Z,"params: release Geth v1.10.5, Exodus Cluster",TRUE,valid
1fac96c1f926db49edea349564295551b5211b98,gary rong,garyrong0905@gmail.com,2021-07-14T07:57:07Z,gary rong,garyrong0905@gmail.com,2021-07-14T07:57:07Z,internal/web3ext: remove unused console APIs (#23208),TRUE,valid
b9e6e43722ecc80ecc8ed6f4321c5f4bf6061222,Marius van der Wijden,m.vanderwijden@live.de,2021-07-13T11:40:22Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-13T11:40:22Z,"consensus/clique: implement getSigner API method (#22987)

* clique: implement getSignerForBlock

* consensus/clique: use blockNrOrHash in getSignerForBlock

* consensus/clique: implement getSigner

* consensus/clique: fixed rlp decoding

* consensus/clique: use Author instead of getSigner

* consensus/clique: nit nit nit

* consensus/clique: nit nit nit",TRUE,valid
c49e065fea78a5d3759f7853a608494913e5824e,Mark,markya0616@gmail.com,2021-07-13T10:40:58Z,Mark,markya0616@gmail.com,2021-07-13T10:40:58Z,"internal: get pending and queued transaction by address (#22992)

* core, eth, internal, les, light: get pending and queued transaction by address

* core: tiny nitpick fixes

* light: tiny nitpick

Co-authored-by: mark <mark@amis.com>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
846badc4806795a477c7d2c3d502f9de087ab4d5,gary rong,garyrong0905@gmail.com,2021-07-13T10:40:01Z,gary rong,garyrong0905@gmail.com,2021-07-13T10:40:01Z,"internal/ethapi: fix transaction APIs (#23179)

* internal/ethapi: fix transaction APIs

* internal/ethapi: fix typo

* internal/ethapi: address comments

* internal/ethapi: address comment from Peter",TRUE,valid
8fe47b0a0d4280020c246fee817a87e358f868f3,Marius van der Wijden,m.vanderwijden@live.de,2021-07-12T19:34:20Z,Marius van der Wijden,m.vanderwijden@live.de,2021-07-12T19:34:20Z,core/state: avoid unnecessary alloc in trie prefetcher (#23198),TRUE,valid
58b0420a8a5d7809981eab119ae64218ea53bc4c,Peter Szilagyi,peterke@gmail.com,2021-07-12T08:25:08Z,Peter Szilagyi,peterke@gmail.com,2021-07-12T08:25:08Z,"Merge pull request #23183 from karalabe/cht-1.10.5

params: update CHTs for the 1.10.5 release",TRUE,valid
afd4227df883d0b4d3ec153612ce6b74c11ebaf3,Peter Szilagyi,peterke@gmail.com,2021-07-09T11:27:41Z,Peter Szilagyi,peterke@gmail.com,2021-07-09T11:27:41Z,params: update CHTs for the 1.10.5 release,TRUE,valid
9624f92edef5e0a76a97efd302e983077acb6e35,Peter Szilagyi,peterke@gmail.com,2021-07-09T04:47:23Z,Peter Szilagyi,peterke@gmail.com,2021-07-09T04:47:23Z,"Merge pull request #23178 from karalabe/feeapi-fixes

eth/gasprice, internal/ethapi, miner: minor feehistory fixes",TRUE,valid
dea71556ccb101d805d354a1fbd94f81518e6cee,Peter Szilagyi,peterke@gmail.com,2021-07-08T06:57:51Z,Peter Szilagyi,peterke@gmail.com,2021-07-08T06:57:51Z,"eth/gasprice, internal/ethapi, miner: minor feehistory fixes",TRUE,valid
ff4ff30a68b613a598a1e674c13063be58cbefa1,Martin Holst Swende,martin@swende.se,2021-07-08T09:34:56Z,Martin Holst Swende,martin@swende.se,2021-07-08T09:34:56Z,"core, params: define london block at 12965000 (#23176)

* core, params: define london block at 12965000

* core/forkid: fix test",TRUE,valid
00b922fc5dcfb1f0a5dbd5614725424a2221da83,ucwong,ucwong@126.com,2021-07-08T05:53:28Z,ucwong,ucwong@126.com,2021-07-08T05:53:28Z,core/types: go generate (#23177),TRUE,valid
7522642393a24dca53061e3f7c9d9a5c3eac4bc2,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-07T17:52:55Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-07T17:52:55Z,"core/types: remove LogForStorage type (#23173)

The encoding of Log and LogForStorage is exactly the same
now. After tracking it down it seems like #17106 changed the
storage schema of logs to be the same as the consensus
encoding.

Support for the legacy format was dropped in #22852 and if
I'm not wrong there's no reason anymore to have these two
equivalent types.

Since the RLP encoding simply contains the first three fields
of Log, we can also avoid creating a temporary struct for
encoding/decoding, and use the rlp:""-"" tag in Log instead.

Note: this is an API change in core/types. We decided it's OK
to make this change because LogForStorage is an implementation
detail of go-ethereum and the type has zero uses outside of
package core/types.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
b9d4412715ccacd0a8adac13b0b587db193936c6,Martin Holst Swende,martin@swende.se,2021-07-07T15:28:14Z,Martin Holst Swende,martin@swende.se,2021-07-07T15:28:14Z,"cmd/devp2p: fixes for eth and discv4 tests (#23155)

This PR fixes a false positive PONG 'to' endpoint mismatch seen in hive tests:

    got {IP:172.17.0.7 UDP:44025 TCP:44025}, want {IP:172.17.0.7 UDP:44025 TCP:0}

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
5441a8fa47249a9165ece43a2924efe2c7bcdba0,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-06T20:03:09Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-07-06T20:03:09Z,"all: remove noop vm config flags (#23111)

* all: rm external interpreter and ewasm config

* core/vm: rm Interpreter interface

* cmd/geth: deprecate interpreter config fields",TRUE,valid
e13d14e6a31dd83fa9b65dfea55374fa6085556f,Peter Szilagyi,peterke@gmail.com,2021-07-06T20:02:38Z,Peter Szilagyi,peterke@gmail.com,2021-07-06T20:02:38Z,core/types: sanity check the basefee length inside a header (#23171),TRUE,valid
d21a0696197cd87165aed2d7bc5b8bf965580f91,Martin Holst Swende,martin@swende.se,2021-07-06T08:35:39Z,Martin Holst Swende,martin@swende.se,2021-07-06T08:35:39Z,"eth, miner: add RPC method to modify miner gaslimit (pre london: ceiling) (#23134)",TRUE,valid
13bc9c0c6e74f36f6f8039d0041fb93740d25a4a,Martin Holst Swende,martin@swende.se,2021-07-06T07:48:29Z,Martin Holst Swende,martin@swende.se,2021-07-06T07:48:29Z,fuzzing: fix typo in fuzzer definitions (#23169),TRUE,valid
5afc82de6e617f8613577401b0e9e612703b97b6,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-06T07:33:51Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-07-06T07:33:51Z,p2p: fix array out of bounds issue (#23165),TRUE,valid
bd566977e80f0d1c71a4ec08f83f78410f54ba04,gary rong,garyrong0905@gmail.com,2021-07-06T07:32:26Z,gary rong,garyrong0905@gmail.com,2021-07-06T07:32:26Z,core: fix bad parent hash when jumping to genesis in setHead (#23162),TRUE,valid
99169016d2065f930ba988526e1d2bd885377738,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:59:24Z,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:59:24Z,"Merge pull request #23168 from karalabe/puppeth-fix-dashboard

cmd/puppeth: fix dashboard crash caused by updated base image",TRUE,valid
78c34fdc3c44770b121f8f430d0b00c629e4e091,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:58:24Z,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:58:24Z,cmd/puppeth: fix dashboard crash caused by updated base image,TRUE,valid
d081c935d764060119946300761130e19f1cf69c,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:34:54Z,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:34:54Z,"Merge pull request #23167 from karalabe/docker-nomake

dockerfile: get rid of make and env, see if that fixes builds",TRUE,valid
bb0191f22bae96c842bd8729ab8c958d90a46dad,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:29:55Z,Peter Szilagyi,peterke@gmail.com,2021-07-06T06:29:55Z,"dockerfile: get rid of make and env, see if that fixes builds",TRUE,valid
c6195623138a995e5c8ec700ba2b0aa3f605951d,Peter Szilagyi,peterke@gmail.com,2021-07-05T08:18:51Z,Peter Szilagyi,peterke@gmail.com,2021-07-05T08:18:51Z,"Merge pull request #23159 from karalabe/ethstats-fix-fullnode

ethstats: fix full node interface post 1559",TRUE,valid
6b6d3190cf9508e96ad28b236fda050776576989,Peter Szilagyi,peterke@gmail.com,2021-07-05T07:49:52Z,Peter Szilagyi,peterke@gmail.com,2021-07-05T07:49:52Z,ethstats: fix full node interface post 1559,TRUE,valid
3b053185254959b2c52129b8d146d300a78eb1ad,ucwong,ucwong@126.com,2021-07-02T09:08:53Z,ucwong,ucwong@126.com,2021-07-02T09:08:53Z,"cmd/evm, eth/ethconfig: regenerate struct codecs (#23140)",TRUE,valid
a182c768158eb52da391bb52ce61c0c4bc2b20a3,ucwong,ucwong@126.com,2021-07-02T07:18:50Z,ucwong,ucwong@126.com,2021-07-02T07:18:50Z,"consensus/clique: avoid a copy in clique (#23149)

* consensus/clique:optimize to avoid a copy in clique

* consensus/clique: test for sealhash

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
6ed812db131b0186e1023a5c5c389c4c9dbd08a3,Martin Holst Swende,martin@swende.se,2021-07-01T12:01:19Z,Martin Holst Swende,martin@swende.se,2021-07-01T12:01:19Z,les: avoid shutdown hang (#23139),TRUE,valid
3212fb6838d113d0979126543eb6d4962e8000a8,ucwong,ucwong@126.com,2021-07-01T11:21:54Z,ucwong,ucwong@126.com,2021-07-01T11:21:54Z,go.mod: update UPNP dependency (#23116),TRUE,valid
f5f906dd0d5c40dc2ca3436b79f5b65294de5ad0,Martin Holst Swende,martin@swende.se,2021-07-01T07:15:04Z,Martin Holst Swende,martin@swende.se,2021-07-01T07:15:04Z,"eth/tracers: improve tracing performance (#23016)

Improves the performance of debug.traceTransaction",TRUE,valid
bbbeb7d8ba0f27e43f71775ff784af3f95cddfe9,Martin Holst Swende,martin@swende.se,2021-06-30T21:04:28Z,Martin Holst Swende,martin@swende.se,2021-06-30T21:04:28Z,crypto: gofuzz build directives (#23137),TRUE,valid
c131e812aed43a24f8bd9aead9bde9cd3cfdbca5,Martin Holst Swende,martin@swende.se,2021-06-30T20:24:17Z,Martin Holst Swende,martin@swende.se,2021-06-30T20:24:17Z,"eth/fetcher, trie: unit test reliability fixes (#23020)

Some tests take quite some time during exit, which I think causes
some appveyor fails like this:

    https://ci.appveyor.com/project/ethereum/go-ethereum/builds/39511210/job/xhom84eg2e4uulq3

One of the things that seem to take time during exit is waiting
(up to 100ms) for the syncbloom to close. This PR changes it to use
a channel, instead of looping with a 100ms wait.

This also includes some unrelated changes improving the reliability of
eth/fetcher tests, which fail a lot because they are time-dependent.",TRUE,valid
686b2884ee3e17fed83c56f7f3515da2897e8d6e,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T13:17:01Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T13:17:01Z," all: removed blockhash from statedb (#23126)

This PR removes the blockhash from the statedb",TRUE,valid
e7c86936359db6b88571a5fb40496e4ffafdcda5,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T12:23:20Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T12:23:20Z,"internal/ethapi: fix panic in access list creation (#23133)

Fixes test failure in the last commit.",TRUE,valid
ec88bd0cd0ffa16260803b8291d6a987e54c8d68,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-06-30T10:57:32Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-06-30T10:57:32Z,cmd/geth: dont fail on deprecated toml config fields (#23118),TRUE,valid
acdf9238fb03d79c9b1c20c2fa476a7e6f4ac2ac,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T09:03:01Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-30T09:03:01Z,"ethclient/gethclient: RPC client wrapper for geth-specific API (#22977)

This commit adds the package gethclient which is similar to the ethclient
and implements some geth specific functionality.

Co-authored-by: Edgar Aroutiounian <edgar.factorial@gmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
d3f018fde839fa7ee3fb5eeb14a9eb7e34870636,Peter Szilagyi,peterke@gmail.com,2021-06-28T15:40:56Z,Peter Szilagyi,peterke@gmail.com,2021-06-28T15:40:56Z,"eth: drop eth/65, the last non-reqid protocol version",TRUE,valid
4fcc93d9229e99b14d3d1500f05ada6ba1f789bb,Ahyun,urbanart2251@gmail.com,2021-06-29T09:14:47Z,Ahyun,urbanart2251@gmail.com,2021-06-29T09:14:47Z,p2p/server: fix method name in comment (#23123),TRUE,valid
61f4b5aa8927c224eacc7e9e87f63e67c4aea1dc,Pierre R,p.rousset@gmail.com,2021-06-29T08:57:29Z,Pierre R,p.rousset@gmail.com,2021-06-29T08:57:29Z,"accounts/abi/bind: fix gas price suggestion with pre EIP-1559 clients (#23102)

This fixes transaction sending in the case where an app using go-ethereum v1.10.4
is talking to a pre-EIP-1559 RPC node. In this case, the eth_maxPriorityFeePerGas
endpoint is not available and we can only rely on eth_gasPrice.",TRUE,valid
35dbf7a8a35dd4e216b2dee5330ed48b0c1702b7,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-06-28T14:16:32Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-06-28T14:16:32Z,"eth/gasprice: implement feeHistory API (#23033)

* eth/gasprice: implement feeHistory API

* eth/gasprice: factored out resolveBlockRange

* eth/gasprice: add sanity check for missing block

* eth/gasprice: fetch actual gas used from receipts

* miner, eth/gasprice: add PendingBlockAndReceipts

* internal/ethapi: use hexutil.Big

* eth/gasprice: return error when requesting beyond head block

* eth/gasprice: fixed tests and return errors correctly

* eth/gasprice: rename receiver name

* eth/gasprice: return directly if blockCount == 0

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
1b5582acf731a88e690f3959906b6b5ca8ceaa9b,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-06-28T12:13:27Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-06-28T12:13:27Z,"core, eth: fix precompile addresses for tracers (#23097)

* core,eth/tracers: make isPrecompiled dependent on HF

* eth/tracers: use keys when constructing chain config struct

* eth/tracers: dont initialize activePrecompiles with random value",TRUE,valid
dde6f1e92d3c7c17e16bb7ff050ce5d334a2a035,ForLina,471133417@qq.com,2021-06-28T07:48:17Z,ForLina,471133417@qq.com,2021-06-28T07:48:17Z,"p2p/enode: fix method doc (#23115)

This is an obvious spelling error

Co-authored-by: liuyaxiong <liuyaxiong@inspur.com>",TRUE,valid
2d4eff21ca798bcba833dae3ae719c1d6773ed3d,Martin Holst Swende,martin@swende.se,2021-06-25T12:53:22Z,Martin Holst Swende,martin@swende.se,2021-06-25T12:53:22Z,"eth/downloader: increase downloader block body allowance (#23074)

This change increases the cache size from 64 to 256 Mb for block bodies.
Benchmarks have shown this to be one bottleneck when trying to achieve
higher download speeds.

The commit also includes a minor optimization for header inserts in package
core: previously, the presence of headers in the database was checked for
every header before writing it. With the change, if one header fails the
presence check, all subsequent headers are also assumed to be missing.
This is an improvement because in practice, the headers are almost always
missing during sync.",TRUE,valid
bca8c03e570f311ab18f8f41f0b906ea0c17941c,Li Dongwei,lidw1988@126.com,2021-06-25T12:34:09Z,Li Dongwei,lidw1988@126.com,2021-06-25T12:34:09Z,"core/state: remove unused methods ReturnGas, GetStorageProofByHash (#23092)

Co-authored-by: lidongwei <lidongwei@huobi.com>",TRUE,valid
c07918e7d81a0004e39cc418f6be9fdf83c15537,haryu703,34744512+haryu703@users.noreply.github.com,2021-06-25T10:48:06Z,haryu703,34744512+haryu703@users.noreply.github.com,2021-06-25T10:48:06Z,eth/gasprice: fix typo in comment (#22998),TRUE,valid
0e6961366a8c5fb2e86fc9c847684704b8c1c399,piersy,pierspowlesland@gmail.com,2021-06-25T10:40:37Z,piersy,pierspowlesland@gmail.com,2021-06-25T10:40:37Z,"cmd/geth: fix IPC probe in les test (#23094)

Previously, the test waited a second and then failed if geth had not
started. This caused the test to fail intermittently. This change checks
whether the IPC is open 10 times over a 5 second period and then fails
if geth is still not available.",TRUE,valid
948a600ed590ec46c8f294e164852de8c292a077,williamberman,wlbberman@gmail.com,2021-06-25T06:02:15Z,williamberman,wlbberman@gmail.com,2021-06-25T06:02:15Z,"eth/tracers: convert int/hash values from context into js object (#23108)

* Convert int/hash values from context into js object

* Use js fixed buffer

Co-authored-by: William <william.berman@coinbase.com>",TRUE,valid
9e23610b0f49c5b9b173825d74507461452741cf,Peter Szilagyi,peterke@gmail.com,2021-06-24T10:50:07Z,Peter Szilagyi,peterke@gmail.com,2021-06-24T10:50:07Z,"Merge pull request #23104 from karalabe/tracer-context

eth/tracers: expose contextual infos (block hash, tx hash, tx index)",TRUE,valid
29905d86aef336bb6a12ba61403008e068226a10,Peter Szilagyi,peterke@gmail.com,2021-06-24T09:46:26Z,Peter Szilagyi,peterke@gmail.com,2021-06-24T09:46:26Z,"eth/tracers: expose contextual infos (block hash, tx hash, tx index)",TRUE,valid
10eb654f27282bf634953fbe5d7d95f01d2b9bac,Peter Szilagyi,peterke@gmail.com,2021-06-23T04:34:35Z,Peter Szilagyi,peterke@gmail.com,2021-06-23T04:34:35Z,"Merge pull request #23089 from holiman/fix_fuzzers

crypto: fix build directives",TRUE,valid
4dde0665c89362e90d46748a3a4358863a361ebb,Nye Liu,nyet@nyet.org,2021-06-23T04:29:20Z,Nye Liu,nyet@nyet.org,2021-06-23T04:29:20Z,core: transaction journal should not be executable (#23090),TRUE,valid
a750bf8686e0da3407242859197312bdd8a45a90,Martin Holst Swende,martin@swende.se,2021-06-22T13:21:11Z,Martin Holst Swende,martin@swende.se,2021-06-22T13:21:11Z,crypto: fix build directives,TRUE,valid
bef78efb49aff3ef059e8fb8a2435bf8670ff113,gary rong,garyrong0905@gmail.com,2021-06-22T09:13:48Z,gary rong,garyrong0905@gmail.com,2021-06-22T09:13:48Z,graphql: fix transaction API (#23052),TRUE,valid
ddf10250c75c0f8289dc60225c9cf3d614a9d8cf,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-06-22T09:06:34Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-06-22T09:06:34Z,accounts/abi/bind: replace context.TODO with context.Background (#23088),TRUE,valid
fcd7bdc2b7b69134ddc29eac0297e39217a731a8,Peter Szilagyi,peterke@gmail.com,2021-06-22T08:47:48Z,Peter Szilagyi,peterke@gmail.com,2021-06-22T08:47:48Z,"Merge pull request #23062 from nfeignon/fix-abi-bind-ensure-context

accounts/abi/bind: call ensureContext on every context",TRUE,valid
1e44c3585f69edf8de61319f745448108d6bd814,Sachin Kumar Singh,sachinkumarsingh092@gmail.com,2021-06-22T08:33:49Z,Sachin Kumar Singh,sachinkumarsingh092@gmail.com,2021-06-22T08:33:49Z,"README: Discord server instead of gitter for communication with devs (#23080)

The `README.md` links the Gitter channel for discussions, but the
official docs and even the Gitter channel itself recommend using the
official Discord Server for such discussions.
This PR simply changes the Gitter link and provides Discord invite link.",TRUE,valid
5228b2a353726c7b163a534f5145e2f554c497dc,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:44:23Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:44:23Z,"Merge pull request #23083 from karalabe/docker-fix-experimental

travis: enable experimental docker for manifest building",TRUE,valid
e0123026b6840c86ccfe63e4c25045041115799b,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:43:37Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:43:37Z,travis: enable experimental docker for manifest building,TRUE,valid
653a30f4ca89cb6a409675246506395e827ee745,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:32:45Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:32:45Z,"Merge pull request #23082 from karalabe/docker-flat-publish

travis, Dockerfile, build: docker build and multi-arch publish combo",TRUE,valid
0f2347d070e0ee8f2a10fb6e1d429f00f3816127,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:16:51Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T16:16:51Z,"travis, Dockerfile, build: docker build and multi-arch publish combo",TRUE,valid
da000c831421588a34650f8cdf35ee9ba73a6b23,Peter Szilagyi,peterke@gmail.com,2021-06-21T10:50:24Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T10:50:24Z,"Merge pull request #23078 from karalabe/docker-post-publish

travis: move docker steps further to prevent hanging other builders",TRUE,valid
f915a4bf204fa6d7868a7c59f8700aa80d1fd50f,Peter Szilagyi,peterke@gmail.com,2021-06-21T10:01:24Z,Peter Szilagyi,peterke@gmail.com,2021-06-21T10:01:24Z,travis: move docker steps further to prevent hanging other builders,TRUE,valid
732a6a36664b62af0877d0e1c6ba7d0c7c154cfe,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-20T13:59:00Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-20T13:59:00Z,"trie: small optimization of delete in fullNode case (#22979)

When deleting in fullNode, and the new child node nn is not nil, there is no need
to check the number of non-nil entries in the node. This is because the fullNode 
must've contained at least two children before deletion, so there must be another
child node other than nn.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
7b6c8363dac3c609f01ec9ae54698581a9821048,Oliver Tale-Yazdi,oliver@perun.network,2021-06-20T13:52:04Z,Oliver Tale-Yazdi,oliver@perun.network,2021-06-20T13:52:04Z,"core: copy CliqueConfig in DeveloperGenesisBlock (#23068)

Copy the CliqueConfig instead of reusing the pointer.
This makes DeveloperGenesisBlock thread safe and prevents it from
changing params.AllCliqueProtocolChanges.Clique.Epoch.",TRUE,valid
4695117f2eda6f97bd193ecb7610e8eccb27fbc7,Peter Szilagyi,peterke@gmail.com,2021-06-18T12:35:09Z,Peter Szilagyi,peterke@gmail.com,2021-06-18T12:35:09Z,"Merge pull request #23069 from karalabe/docker-multi-arch

travis, build: add support for multi-arch docker images",TRUE,valid
e9f99d1c916bf498d63a822bc2b57cad2a2b0d84,Peter Szilagyi,peterke@gmail.com,2021-06-18T12:28:30Z,Peter Szilagyi,peterke@gmail.com,2021-06-18T12:28:30Z,"travis, build: add support for multi-arch docker images",TRUE,valid
ef946a6c87fe85cba6241ace281b2519bd52f2f5,Marius van der Wijden,m.vanderwijden@live.de,2021-06-18T10:34:31Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-18T10:34:31Z,tests: fix eip1559 tx on non-eip1559 network (#23054),TRUE,valid
58aeab77d219204af414602d30ae34d5adf10382,Marius van der Wijden,m.vanderwijden@live.de,2021-06-18T10:21:34Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-18T10:21:34Z,tests: fix nil pointer panic on failure (#23053),TRUE,valid
97ce6dfa6d425ba4b76278627a91c7285d6d00b2,lightclient,14004106+lightclient@users.noreply.github.com,2021-06-18T10:16:34Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-06-18T10:16:34Z,internal/ethapi: fix typo in comment (#23057),TRUE,valid
bbb2b30506f1b1a2365a61c8cd8196e5864489e3,Afanasii Kurakin,afanasy@users.noreply.github.com,2021-06-18T10:15:51Z,Afanasii Kurakin,afanasy@users.noreply.github.com,2021-06-18T10:15:51Z,params: fix typo in gas cost comments (#23065),TRUE,valid
15fe3050a156af1e13ea2f7d7b48bfefe41d72ad,Jeff Wentworth,jeff@curvegrid.com,2021-06-17T17:54:37Z,Jeff Wentworth,jeff@curvegrid.com,2021-06-17T17:54:37Z,core/types: add DynamicFeeTx to TxData implementation list in docs (#23063),TRUE,valid
c63c2d855e6febeb351fa190a442cb37f6609ca1,Nicolas Feignon,nfeignon@gmail.com,2021-06-17T12:04:24Z,Nicolas Feignon,nfeignon@gmail.com,2021-06-17T12:04:24Z,accounts/abi/bind: call ensureContext on every context,FALSE,unsigned
87a11a87c2bcbeedce9e088698b48d8fa2a09450,Felix Lange,fjl@twurst.com,2021-06-17T10:36:42Z,Felix Lange,fjl@twurst.com,2021-06-17T10:36:42Z,params: begin v1.10.5 release cycle,FALSE,unsigned
aa637fd38a379db6da98df0d520fb1c5139a18ce,Felix Lange,fjl@twurst.com,2021-06-17T10:35:17Z,Felix Lange,fjl@twurst.com,2021-06-17T10:35:17Z,params: release go-ethereum v1.10.4 stable,FALSE,unsigned
e1f244a6e6688244b7ffaae2c2d70369bde6aa55,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:23:16Z,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:23:16Z,"Merge pull request #23061 from karalabe/docker-noarm

travis: don't overwrite amd64 images with arm64",TRUE,valid
40a11d644c7e65984ba6eee81cacba2d9bfadbc3,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:22:22Z,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:22:22Z,travis: don't overwrite amd64 images with arm64,TRUE,valid
b28f8c0c4322104dbdc78b61eb6cbed33bc76f0d,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:02:18Z,Peter Szilagyi,peterke@gmail.com,2021-06-17T09:02:18Z,"Merge pull request #23060 from karalabe/travis-docker

travis, build: own docker builder and hub pusher",TRUE,valid
90ffcfde896f5fe6555125acb58ed60b50f11b7b,Peter Szilagyi,peterke@gmail.com,2021-06-17T07:47:45Z,Peter Szilagyi,peterke@gmail.com,2021-06-17T07:47:45Z,"travis, build: own docker builder and hub pusher",TRUE,valid
a675c89c75c799f93fecaed13994b98674eaf9ad,Marius van der Wijden,m.vanderwijden@live.de,2021-06-16T13:00:36Z,Marius van der Wijden,m.vanderwijden@live.de,2021-06-16T13:00:36Z,core: readded state processor error tests (#23055),TRUE,valid
080b6ebe9138b19d0757c57d1f537eea9b20a782,Martin Holst Swende,martin@swende.se,2021-06-16T06:53:27Z,Martin Holst Swende,martin@swende.se,2021-06-16T06:53:27Z,"core/vm: evm fix panic (#23047)

* core/vm: evm fix panic

* core/vm/runtime: default to params.initialbasefee",TRUE,valid
ae315ef7a19a7f87ebfba4978750634c1e892a65,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:52:31Z,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:52:31Z,"Merge pull request #23050 from karalabe/1559-receipt-rpc

core, graphql, internal: expose effectiveGasPrice in receipts",TRUE,valid
aa69d36152becdc819f323b5ae05e249d984d609,Peter Szilagyi,peterke@gmail.com,2021-06-16T05:23:50Z,Peter Szilagyi,peterke@gmail.com,2021-06-16T05:23:50Z,"core, graphql, internal: expose effectiveGasPrice in receipts",TRUE,valid
0aadb49c8634804b1b600ede090bdd6de3c506d4,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:37:09Z,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:37:09Z,"Merge pull request #23051 from karalabe/cht-1.10.4

params: bump CHTs for Geth v1.10.4",TRUE,valid
cdb9fefc484ccbf7cc846be75edc4b55c2f07389,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:14:58Z,Peter Szilagyi,peterke@gmail.com,2021-06-16T06:14:58Z,params: bump CHTs for Geth v1.10.4,TRUE,valid
7a7abe3de84d8f2c6b591fec11d67edcb82ae63d,Peter Szilagyi,peterke@gmail.com,2021-06-15T10:56:14Z,Peter Szilagyi,peterke@gmail.com,2021-06-15T10:56:14Z,"accounts/abi/bind: fix bounded contracts and sim backend for 1559 (#23038)

* accounts/abi/bind: fix bounded contracts and sim backend for 1559

* accounts/abi/bind, ethclient: don't rely on chain config for gas prices

* all: enable London for all internal tests

* les: get receipt type info in les tests

* les: fix weird test

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
087ed9c92ecfe41109c1e039693fc126952a3718,Martin Holst Swende,martin@swende.se,2021-06-14T17:35:01Z,Martin Holst Swende,martin@swende.se,2021-06-14T17:35:01Z,"params, core/forkid: add london testnet blocks (#23041)

* params: add london testnet blocks

* core/forkid: update fork hashes",TRUE,valid
7530803065c17dd34e7413d5ec1342a8bf00a898,Peter Szilagyi,peterke@gmail.com,2021-06-14T12:54:20Z,Peter Szilagyi,peterke@gmail.com,2021-06-14T12:54:20Z,"Merge pull request #23039 from holiman/basefeepergas

core: change baseFee into baseFeePerGas in genesis json",TRUE,valid
8a4460c47edc4b01c9b713e3d5b439c07116b962,Martin Holst Swende,martin@swende.se,2021-06-14T12:04:44Z,Martin Holst Swende,martin@swende.se,2021-06-14T12:04:44Z,core: change baseFee into baseFeePerGas in genesis json,TRUE,valid
1d57f22d58f91bcb4e1052f82cc4d6532cc611fc,Oliver Tale-Yazdi,oliver@perun.network,2021-06-14T05:55:44Z,Oliver Tale-Yazdi,oliver@perun.network,2021-06-14T05:55:44Z,"accounts/abi/bind/backends: add simulated reorgs (#22624)

* accounts/abi/bind/backends: add blockByHashNoLock

Signed-off-by: Oliver Tale-Yazdi <oliver@perun.network>

* accounts/abi/bind/backends: add 'parent' arg to rollback

Signed-off-by: Oliver Tale-Yazdi <oliver@perun.network>

* accounts/abi/bind/backends: add simulated forks

Signed-off-by: Oliver Tale-Yazdi <oliver@perun.network>

* accounts/abi/bind/backends: minor nitpicks

* accounts/abi/bind/backends: don't add defensive panics

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
ccf53daee1961e3287908c6ca3264b3fefbc9167,Peter Szilagyi,peterke@gmail.com,2021-06-14T04:52:33Z,Peter Szilagyi,peterke@gmail.com,2021-06-14T04:52:33Z,"Merge pull request #23013 from holiman/genesis_fix

core: make genesis parse baseFee correctly",TRUE,valid
eff998effbf466d4acbe599583dd8ec75f2af6a1,Peter Szilagyi,peterke@gmail.com,2021-06-11T09:27:30Z,Peter Szilagyi,peterke@gmail.com,2021-06-11T09:27:30Z,"Merge pull request #23027 from karalabe/1559-call

core, internal: support various eth_call invocations post 1559",TRUE,valid
a2ea537a6fb4c69543ed8045337516eb61c7afe8,Paul-Armand Verhaegen,paularmand.verhaegen@gmail.com,2021-06-10T07:53:23Z,Paul-Armand Verhaegen,paularmand.verhaegen@gmail.com,2021-06-10T07:53:23Z,"common: rename unused function with typo (#23025)

This function is not used in the code base, so probably safe to do rename, or remove in its entirety, but I'm assuming the logic from the original creator still applies so rename probably better.",TRUE,valid
1fc0eba50d9b4d611340e63f48d915e123c59ce8,Peter Szilagyi,peterke@gmail.com,2021-06-10T07:52:31Z,Peter Szilagyi,peterke@gmail.com,2021-06-10T07:52:31Z,"Merge pull request #23028 from karalabe/1559-rpcgascap

eth/ethconfig: bump the RPC gas cap to 50M, since 1559 exceeds 25",TRUE,valid
be1267ced5ebfd84737fb1869cab18ff5096455a,Peter Szilagyi,peterke@gmail.com,2021-06-10T06:07:03Z,Peter Szilagyi,peterke@gmail.com,2021-06-10T06:07:03Z,"eth/ethconfig: bump the RPC gas cap to 50M, since 1559 exceeds 25",TRUE,valid
f68a68a313a7a5806b0e414965e500fef453306a,Peter Szilagyi,peterke@gmail.com,2021-06-10T05:02:51Z,Peter Szilagyi,peterke@gmail.com,2021-06-10T05:02:51Z,"core, internal: support various eth_call invocations post 1559",TRUE,valid
7a00378e2baa2430d997f2dab9e29a9082cbf32a,Martin Holst Swende,martin@swende.se,2021-06-09T11:48:47Z,Martin Holst Swende,martin@swende.se,2021-06-09T11:48:47Z,"cmd/clef, signer: support for eip-1559 txs in clef (#22966)",TRUE,valid
c503f98f6d5e80e079c1d8a3601d188af2a899da,Peter Szilagyi,peterke@gmail.com,2021-06-08T10:05:41Z,Peter Szilagyi,peterke@gmail.com,2021-06-08T10:05:41Z,"all: rename internal 1559 gas fields, add support for graphql (#23010)

* all: rename internal 1559 gas fields, add support for graphql

* cmd/evm/testdata, core: use public 1559 gas names on API surfaces",TRUE,valid
f763846e6e30105183a4fcb1b333724e8e1f7681,Martin Holst Swende,martin@swende.se,2021-06-08T09:07:27Z,Martin Holst Swende,martin@swende.se,2021-06-08T09:07:27Z,core: make genesis parse baseFee correctly,TRUE,valid
248572ee54630af1a7ff951ceb5bda03fc83d863,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-08T08:39:24Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-08T08:39:24Z,"core/rawdb: db inspect move 'config' and 'shutdown' into 'meta data' (#22978)

* core/rawdb: db inspect move 'config' and 'shutdown' into 'meta data'

* gofmt",TRUE,valid
ddeeb89c036cbc913a6694480263bdf2b3f9470e,ucwong,ucwong@126.com,2021-06-08T08:39:05Z,ucwong,ucwong@126.com,2021-06-08T08:39:05Z,go.mod: upgrade to fastcache v1.6.0 (#22982),TRUE,valid
0e9c7d564d6000a372cd3df914ec6c969aea29f2,Martin Holst Swende,martin@swende.se,2021-06-07T12:37:56Z,Martin Holst Swende,martin@swende.se,2021-06-07T12:37:56Z,"tests: update for London  (#22976)

This updates the tests submodule to the London fork tests, and
also updates the test runner to support the new EIP-1559 fields in
test JSON.",TRUE,valid
08379b553303586dcd6fff704776bb61ea8746db,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-07T07:11:07Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-06-07T07:11:07Z,trie: remove the duplicate batch-write for 'preimage' (#23001),TRUE,valid
92b8f28df3255c6cef9605063850d77b46146763,Peter Szilagyi,peterke@gmail.com,2021-06-04T07:57:22Z,Peter Szilagyi,peterke@gmail.com,2021-06-04T07:57:22Z,"Merge pull request #22995 from karalabe/enforce-miner-tip

core, eth, miner: enforce configured mining reward post 1559 too",TRUE,valid
71ff65b188f7a0b9fc3963ac312c4372f44854a8,gary rong,garyrong0905@gmail.com,2021-06-04T07:32:35Z,gary rong,garyrong0905@gmail.com,2021-06-04T07:32:35Z,"miner/stress: add stress test for eip 1559 (#22930)

* miner/stress/1559: add 1559 stress tests

* miner/stress: add 1559 stress test",TRUE,valid
7e915ee37988b487437a512efa4fcd6a24397396,Peter Szilagyi,peterke@gmail.com,2021-06-04T06:55:00Z,Peter Szilagyi,peterke@gmail.com,2021-06-04T06:55:00Z,"core, eth, miner: enforce configured mining reward post 1559 too",TRUE,valid
3094e7f3b8c4dc1567b84aa2a77e81cce117fa23,gary rong,garyrong0905@gmail.com,2021-06-03T15:12:47Z,gary rong,garyrong0905@gmail.com,2021-06-03T15:12:47Z,"catalyst: runs every transaction in a snapshot in assembleBlock handler (#7) (#22989)

Co-authored-by: Gary Rong <garyrong0905@gmail.com>
Co-authored-by: Mikhail Kalinin <noblesse.knight@gmail.com>",TRUE,valid
216ed05c6e6100c9b06dadb98a01d7f069874720,Martin Holst Swende,martin@swende.se,2021-06-03T12:35:40Z,Martin Holst Swende,martin@swende.se,2021-06-03T12:35:40Z,cmd/faucet: disable flaky facebook test (#22988),TRUE,valid
7760a6079488afd992ad437329194f7b997de9fa,Peter Szilagyi,peterke@gmail.com,2021-06-03T09:05:08Z,Peter Szilagyi,peterke@gmail.com,2021-06-03T09:05:08Z,"Merge pull request #22973 from karalabe/the-switch

eth/ethconfig: flip the default from fast to snap sync",TRUE,valid
5cff9754d795971451f2f4e8a2cc0c6f51ce9802,Martin Holst Swende,martin@swende.se,2021-06-02T13:13:10Z,Martin Holst Swende,martin@swende.se,2021-06-02T13:13:10Z,"core, eth, internal, les: RPC methods and fields for EIP 1559 (#22964)

* internal/ethapi: add baseFee to RPCMarshalHeader

* internal/ethapi: add FeeCap, Tip and correct GasPrice to EIP-1559 RPCTransaction results

* core,eth,les,internal: add support for tip estimation in gas price oracle

* internal/ethapi,eth/gasprice: don't suggest tip larger than fee cap

* core/types,internal: use correct eip1559 terminology for json marshalling

* eth, internal/ethapi: fix rebase problems

* internal/ethapi: fix rpc name of basefee

* internal/ethapi: address review concerns

* core, eth, internal, les: simplify gasprice oracle (#25)

* core, eth, internal, les: simplify gasprice oracle

* eth/gasprice: fix typo

* internal/ethapi: minor tweak in tx args

* internal/ethapi: calculate basefee for pending block

* internal/ethapi: fix panic

* internal/ethapi, eth/tracers: simplify txargs ToMessage

* internal/ethapi: remove unused param

* core, eth, internal: fix regressions wrt effective gas price in the evm

* eth/gasprice: drop weird debug println

* internal/jsre/deps: hack in 1559 gas conversions into embedded web3

* internal/jsre/deps: hack basFee to decimal conversion

* internal/ethapi: init feecap and tipcap for legacy txs too

* eth, graphql, internal, les: fix gas price suggestion on all combos

* internal/jsre/deps: handle decimal tipcap and feecap

* eth, internal: minor review fixes

* graphql, internal: export max fee cap RPC endpoint

* internal/ethapi: fix crash in transaction_args

* internal/ethapi: minor refactor to make the code safer

Co-authored-by: Ryan Schneider <ryanleeschneider@gmail.com>
Co-authored-by: lightclient@protonmail.com <lightclient@protonmail.com>
Co-authored-by: gary rong <garyrong0905@gmail.com>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
2dee31930c9977af2a9fcb518fb9838aa609a7cf,Mathijs de Bruin,mathijs@visualspace.nl,2021-06-01T08:50:54Z,Mathijs de Bruin,mathijs@visualspace.nl,2021-06-01T08:50:54Z,"metrics: use golang.org/x/sys/unix to support Solaris (#22584)

Fixes #11113

Co-authored-by: rene <41963722+renaynay@users.noreply.github.com>",TRUE,valid
2cde472650e27634b9e2243d687629dfcffa211a,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-05-31T10:43:18Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-05-31T10:43:18Z,core/state: fix typos in test error message (#22962),TRUE,valid
9aaa4208a896394ec557a3dc5a99c9e5eafff4de,Peter Szilagyi,peterke@gmail.com,2021-05-31T07:21:48Z,Peter Szilagyi,peterke@gmail.com,2021-05-31T07:21:48Z,eth/ethconfig: flip the default from fast to snap sync,TRUE,valid
08ea52e77a522540161d051b2777b34ee64cec88,Martin Holst Swende,martin@swende.se,2021-05-31T07:06:48Z,Martin Holst Swende,martin@swende.se,2021-05-31T07:06:48Z,"cmd/geth, core, params: replace baikal with calaveras (#22972)

* cmd/geth, core, params: replace baikal with calaveras

* params: fix genesis hash for Calaveras

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
2d716c4b01037f7f7c96795784909ec8230ac523,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-05-30T17:37:52Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-05-30T17:37:52Z,"core: add new eip-1559 tx constraints (#22970)

This PR adds the new consensus constraints of EIP-1559 transactions as specified in https://github.com/ethereum/EIPs#3594",TRUE,valid
966ee3ae6d0e8201eae682d22312a600307a65d8,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-05-28T08:28:07Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-05-28T08:28:07Z,"all: EIP-1559 tx pool support (#22898)

This pull request implements EIP-1559 compatible transaction pool with dual heap eviction ordering.
It is based on #22791
The eviction ordering scheme and the reasoning behind it is described here: https://gist.github.com/zsfelfoldi/9607ad248707a925b701f49787904fd6",TRUE,valid
ee35ddc8fdf5fe12f42cac3bd7a40d8fe7a384f2,Felix Lange,fjl@twurst.com,2021-05-27T18:53:33Z,Felix Lange,fjl@twurst.com,2021-05-27T18:53:33Z,cmd/devp2p/internal/ethtest: ignore block announcement in tx test (#22957),TRUE,valid
04cb5e2be30e1aa6c0cca657e10fec7239a6334f,Marius van der Wijden,m.vanderwijden@live.de,2021-05-27T16:45:13Z,Marius van der Wijden,m.vanderwijden@live.de,2021-05-27T16:45:13Z,cmd/puppeth: remove outdated mist support (#22940),TRUE,valid
427175153c0e33a7f640f86bf2ce4c97f03ede72,Felix Lange,fjl@twurst.com,2021-05-27T16:43:55Z,Felix Lange,fjl@twurst.com,2021-05-27T16:43:55Z,"p2p/msgrate: return capacity as integer, clamp to max uint32 (#22943)

* p2p/msgrate: return capacity as integer

* eth/protocols/snap: remove conversions

* p2p/msgrate: add overflow test

* p2p/msgrate: make the capacity overflow test actually overflow

* p2p/msgrate: clamp capacity to max int32

* p2p/msgrate: fix min/max confusion",TRUE,valid
0703ef62d388eafa177540ff722c3a0871c4979d,Marius van der Wijden,m.vanderwijden@live.de,2021-05-27T11:30:25Z,Marius van der Wijden,m.vanderwijden@live.de,2021-05-27T11:30:25Z,"crypto/secp256k1: fix undefined behavior in BitCurve.Add (#22621)

This commit changes the behavior of BitCurve.Add to be more inline
with btcd. It fixes two different bugs:

1) When adding a point at infinity to another point, the other point
   should be returned. While this is undefined behavior, it is better
   to be more inline with the go standard library.
   Thus (0,0) + (a, b) = (a,b)

2) Adding the same point to itself produced the point at infinity.
   This is incorrect, now doubleJacobian is used to correctly calculate it.
   Thus (a,b) + (a,b) == 2* (a,b) and not (0,0) anymore.

The change also adds a differential fuzzer for Add, testing it against btcd.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
d836ad141ef4842be494cd5156fc6bd25a13e463,rene,41963722+renaynay@users.noreply.github.com,2021-05-27T09:57:49Z,rene,41963722+renaynay@users.noreply.github.com,2021-05-27T09:57:49Z,cmd/devp2p/internal/ethtest: add block hash announcement test (#22535),TRUE,valid
7194c847b6e7f545f2aad57d8eae0a046e08d7a4,Felix Lange,fjl@twurst.com,2021-05-27T08:19:13Z,Felix Lange,fjl@twurst.com,2021-05-27T08:19:13Z,"p2p/rlpx: reduce allocation and syscalls (#22899)

This change significantly improves the performance of RLPx message reads
and writes. In the previous implementation, reading and writing of
message frames performed multiple reads and writes on the underlying
network connection, and allocated a new []byte buffer for every read.

In the new implementation, reads and writes re-use buffers, and perform
much fewer system calls on the underlying connection. This doubles the
theoretically achievable throughput on a single connection, as shown by
the benchmark result:

    name             old speed      new speed       delta
    Throughput-8     70.3MB/s ± 0%  155.4MB/s ± 0%  +121.11%  (p=0.000 n=9+8)

The change also removes support for the legacy, pre-EIP-8 handshake encoding.
As of May 2021, no actively maintained client sends this format.",TRUE,valid
2e7714f8648b375f69f4146e702d5f19b36e55ba,Martin Holst Swende,martin@swende.se,2021-05-27T08:13:35Z,Martin Holst Swende,martin@swende.se,2021-05-27T08:13:35Z,"cmd/utils: avoid large alloc in --dev mode (#22949)

* cmd/utils: avoid 1Gb alloc in --dev mode

* cmd/geth: avoid 512Mb alloc in genesis query tests",TRUE,valid
5869789d7500dba00e8f78382d5af82ef73a9b0e,Mike Burr,mburr@nightmare.com,2021-05-26T20:33:00Z,Mike Burr,mburr@nightmare.com,2021-05-26T20:33:00Z,"ethstats: fix typo in comment (#22952)

Trivial but helpful to understanding.",TRUE,valid
c73652da0bb0ca4a4ecf3b88b0efed085be9adc4,gary rong,garyrong0905@gmail.com,2021-05-26T07:58:09Z,gary rong,garyrong0905@gmail.com,2021-05-26T07:58:09Z,"core/state/snapshot: fix flaky tests (#22944)

* core/state/snapshot: fix flaky tests

* core/state/snapshot: fix tests",TRUE,valid
05dab7f6bde376d1608ee7800b38cee7ce600d4d,aaronbuchwald,aaron.buchwald56@gmail.com,2021-05-26T06:39:41Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-05-26T06:39:41Z,internal/ethapi: remove unused vm.Config parameter of DoCall (#22942),TRUE,valid
10962b685ef08579846342b3ab80507306ccd494,meowsbits,b5c6@protonmail.com,2021-05-25T21:22:46Z,meowsbits,b5c6@protonmail.com,2021-05-25T21:22:46Z,"ethstats: fix URL parser for '@' or ':' in node name/password (#21640)

Fixes the case (example below) where the value passed
to --ethstats flag would be parsed wrongly because the
node name and/or password value contained the special
characters '@' or ':'

    --ethstats ""ETC Labs Metrics @meowsbits"":mypass@ws://mordor.dash.fault.dev:3000",TRUE,valid
49bde05a55260469abcbeb64fd3c7b85c7536b5c,rene,41963722+renaynay@users.noreply.github.com,2021-05-25T21:09:11Z,rene,41963722+renaynay@users.noreply.github.com,2021-05-25T21:09:11Z,"cmd/devp2p: refactor eth test suite (#22843)

This PR refactors the eth test suite to make it more readable and
easier to use. Some notable differences:

- A new file helpers.go stores all of the methods used between
  both eth66 and eth65 and below tests, as well as methods shared
  among many test functions.
- suite.go now contains all of the test functions for both eth65
  tests and eth66 tests.
- The utesting.T object doesn't get passed through to other helper methods,
  but is instead only used within the scope of the test function,
  whereas helper methods return errors, so only the test function
  itself can fatal out in the case of an error.
- The full test suite now only takes 13.5 seconds to run.",TRUE,valid
6c7d6cf886484805ae218af9b372c96e3ca8315c,Eugene Lepeico,eugenelepeico@gmail.com,2021-05-25T20:47:14Z,Eugene Lepeico,eugenelepeico@gmail.com,2021-05-25T20:47:14Z,"tests: get test name from testing.T (#22941)

There were 2 TODOs about that fix after Golang 1.8 release.
It's here for 3 years already, so now should be the right time.",TRUE,valid
750115ff3903a4d54267e0934a3391e4e2c2e84a,meowsbits,b5c6@protonmail.com,2021-05-25T20:37:30Z,meowsbits,b5c6@protonmail.com,2021-05-25T20:37:30Z,"p2p/nat: skip TestUPNP in non-CI environments if discover fails (#22877)

Fixes #21476",TRUE,valid
51b32cc7e44e174316d3ae970680cfa9b77f6146,gary rong,garyrong0905@gmail.com,2021-05-25T20:30:21Z,gary rong,garyrong0905@gmail.com,2021-05-25T20:30:21Z,"internal/ethapi: merge CallArgs and SendTxArgs (#22718)

There are two transaction parameter structures defined in
the codebase, although for different purposes. But most of
the parameters are shared. So it's nice to reduce the code
duplication by merging them together.

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
836c647bdd65896c0e5bef97466d5d514db419e7,Felix Lange,fjl@twurst.com,2021-05-25T20:20:36Z,Felix Lange,fjl@twurst.com,2021-05-25T20:20:36Z,"eth: unregister peer only when handler exits (#22908)

This removes the error log message that says 

    Ethereum peer removal failed ... err=""peer not registered""

The error happened because removePeer was called multiple
times: once to disconnect the peer, and another time when the
handler exited. With this change, removePeer now has the sole
purpose of disconnecting the peer. Unregistering happens exactly
once, when the handler exits.",TRUE,valid
4d33de9b4975be0f3450fa44d6c912e4331ca0c8,Felix Lange,fjl@twurst.com,2021-05-25T19:56:25Z,Felix Lange,fjl@twurst.com,2021-05-25T19:56:25Z,"rlp: optimize big.Int decoding for size <= 32 bytes (#22927)

This change grows the static integer buffer in Stream to 32 bytes,
making it possible to decode 256bit integers without allocating a
temporary buffer.

In the recent commit 088da24, Stream struct size decreased from 120
bytes down to 88 bytes. This commit grows the struct to 112 bytes again,
but the size change will not degrade performance because Stream
instances are internally cached in sync.Pool.

    name             old time/op    new time/op    delta
    DecodeBigInts-8    12.2µs ± 0%     8.6µs ± 4%  -29.58%  (p=0.000 n=9+10)

    name             old speed      new speed      delta
    DecodeBigInts-8   230MB/s ± 0%   326MB/s ± 4%  +42.04%  (p=0.000 n=9+10)",TRUE,valid
017cf71fbd51ede510dd0e40e02f89b5340eea93,ucwong,ucwong@126.com,2021-05-25T08:14:39Z,ucwong,ucwong@126.com,2021-05-25T08:14:39Z,"rlp, tests/fuzzers/bls12381: gofmt (#22937)",TRUE,valid
93407b14a66287d1a0ad0140b9c5f754c11ad437,Fire Man,55934298+basdevelop@users.noreply.github.com,2021-05-24T12:34:38Z,Fire Man,55934298+basdevelop@users.noreply.github.com,2021-05-24T12:34:38Z,core: make txpool free space calculation more accurate (#22933),TRUE,valid
154ca32a8ade0a7d2461d0eb432361261a51a395,Felix Lange,fjl@twurst.com,2021-05-22T13:10:16Z,Felix Lange,fjl@twurst.com,2021-05-22T13:10:16Z,"rlp: optimize byte array handling (#22924)

This change improves the performance of encoding/decoding [N]byte.

    name                     old time/op    new time/op    delta
    DecodeByteArrayStruct-8     336ns ± 0%     246ns ± 0%  -26.98%  (p=0.000 n=9+10)
    EncodeByteArrayStruct-8     225ns ± 1%     148ns ± 1%  -34.12%  (p=0.000 n=10+10)

    name                     old alloc/op   new alloc/op   delta
    DecodeByteArrayStruct-8      120B ± 0%       48B ± 0%  -60.00%  (p=0.000 n=10+10)
    EncodeByteArrayStruct-8     0.00B          0.00B          ~     (all equal)",TRUE,valid
0d076d92db39940ff181a0b07970c21bbe3521c2,Felix Lange,fjl@twurst.com,2021-05-22T11:34:29Z,Felix Lange,fjl@twurst.com,2021-05-22T11:34:29Z,"rlp: use atomic.Value for type cache (#22902)

All encoding/decoding operations read the type cache to find the
writer/decoder function responsible for a type. When analyzing CPU
profiles of geth during sync, I found that the use of sync.RWMutex in
cache lookups appears in the profiles. It seems we are running into
CPU cache contention problems when package rlp is heavily used
on all CPU cores during sync.

This change makes it use atomic.Value + a writer lock instead of
sync.RWMutex. In the common case where the typeinfo entry is present in
the cache, we simply fetch the map and lookup the type.",TRUE,valid
59f259b058b85eea38cd2686051a9076abb1e712,gary rong,garyrong0905@gmail.com,2021-05-21T18:52:51Z,gary rong,garyrong0905@gmail.com,2021-05-21T18:52:51Z,"miner/stress: update stress tests (#22919)

This PR updates the miner stress tests and moves them to standalone
packages, so that they can be run directly.",TRUE,valid
6bc72783f6d15aa06e71b904b4a1a3bbbb1a40db,Peter Szilagyi,peterke@gmail.com,2021-05-21T09:51:56Z,Peter Szilagyi,peterke@gmail.com,2021-05-21T09:51:56Z,"Merge pull request #22921 from karalabe/les-simplify-reqids

les: generate random nums directly, not via strange conversions",TRUE,valid
835fe06f1dba8ce2764d6d501f977c22e97eac9c,Peter Szilagyi,peterke@gmail.com,2021-05-21T09:36:04Z,Peter Szilagyi,peterke@gmail.com,2021-05-21T09:36:04Z,"les: generate random nums directly, not via strange conversions",TRUE,valid
81662fe82788a7b66aa95de86d7afd2cb4567370,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-05-21T08:33:59Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-05-21T08:33:59Z,core/rawdb: handle prefix in table.compact method (#22911),TRUE,valid
a6c462781f2ebac39b8bbcbbfeb01a6e70b46997,Martin Holst Swende,martin@swende.se,2021-05-21T07:59:26Z,Martin Holst Swende,martin@swende.se,2021-05-21T07:59:26Z,"EIP-1559: miner changes (#22896)

* core/types, miner: create TxWithMinerFee wrapper, add EIP-1559 support to TransactionsByMinerFeeAndNonce

miner: set base fee when creating a new header, handle gas limit, log miner fees

* all: rename to NewTransactionsByPriceAndNonce

* core/types, miner: rename to NewTransactionsByPriceAndNonce + EffectiveTip

miner: activate 1559 for testGenerateBlockAndImport tests

* core,miner: revert naming to TransactionsByPriceAndTime

* core/types/transaction: update effective tip calculation logic

* miner: update aleut to london

* core/types/transaction_test: use correct signer for 1559 txs + add back sender check

* miner/worker: calculate gas target from gas limit

* core, miner: fix block  gas limits for 1559

Co-authored-by: Ansgar Dietrichs <adietrichs@gmail.com>
Co-authored-by: lightclient@protonmail.com <lightclient@protonmail.com>",TRUE,valid
16bc57438bd3d28e947d12f6f295da62e4ca9e26,Felix Lange,fjl@twurst.com,2021-05-20T07:24:41Z,Felix Lange,fjl@twurst.com,2021-05-20T07:24:41Z,p2p/dnsdisc: fix crash when iterator closed before first call to Next (#22906),TRUE,valid
3e795881ea6d68c32da5da3c95f0d458a64e35c3,Peter Szilagyi,peterke@gmail.com,2021-05-19T12:09:03Z,Peter Szilagyi,peterke@gmail.com,2021-05-19T12:09:03Z,"eth, p2p/msgrate: move peer QoS tracking to its own package and use it for snap (#22876)

This change extracts the peer QoS tracking logic from eth/downloader, moving
it into the new package p2p/msgrate. The job of msgrate.Tracker is determining
suitable timeout values and request sizes per peer.

The snap sync scheduler now uses msgrate.Tracker instead of the hard-coded 15s
timeout. This should make the sync work better on network links with high latency.",TRUE,valid
b3a1fda6509c8dd64b5f5916f62a6602bcdc7a9d,lightclient,14004106+lightclient@users.noreply.github.com,2021-05-18T17:54:10Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-05-18T17:54:10Z,cmd/utils: expand tilde in --jspath (#22900),TRUE,valid
088da24ebfb17a50652d4f9c3657670abcf055c8,Felix Lange,fjl@twurst.com,2021-05-18T10:10:27Z,Felix Lange,fjl@twurst.com,2021-05-18T10:10:27Z,"rlp: improve decoder stream implementation (#22858)

This commit makes various cleanup changes to rlp.Stream.

* rlp: shrink Stream struct

This removes a lot of unused padding space in Stream by reordering the
fields. The size of Stream changes from 120 bytes to 88 bytes. Stream
instances are internally cached and reused using sync.Pool, so this does
not improve performance.

* rlp: simplify list stack

The list stack kept track of the size of the current list context as
well as the current offset into it. The size had to be stored in the
stack in order to subtract it from the remaining bytes of any enclosing
list in ListEnd. It seems that this can be implemented in a simpler
way: just subtract the size from the enclosing list context in List instead.",TRUE,valid
3e6f46caec51d82aef363632517eb5842eef6db6,Felix Lange,fjl@twurst.com,2021-05-18T09:48:41Z,Felix Lange,fjl@twurst.com,2021-05-18T09:48:41Z,"p2p/discover/v4wire: use optional RLP field for EIP-868 seq (#22842)

This changes the definitions of Ping and Pong, adding an optional field
for the sequence number. This field was previously encoded/decoded using
the ""tail"" struct tag, but using ""optional"" is much nicer.",TRUE,valid
32c1ed8a9c963dbf75faa80116b37f8cf53d4a38,Shane Bammel,sjb933@gmail.com,2021-05-18T08:37:18Z,Shane Bammel,sjb933@gmail.com,2021-05-18T08:37:18Z,"core/forkid: fix off-by-one bug (#22879)

* forkid: added failing test

* forkid: fixed off-by-one bug",TRUE,valid
b7a91663ab93abe360ae1b4bc68b75b5944625c4,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-05-18T08:22:58Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-05-18T08:22:58Z,"core/asm: fix the bug of ""00"" prefix number (#22883)",TRUE,valid
bb9f9ccf4fdc1256a31abe634ab882baa6f1c888,Martin Holst Swende,martin@swende.se,2021-05-17T23:30:01Z,Martin Holst Swende,martin@swende.se,2021-05-17T23:30:01Z,core/rawdb: wait for background freezing to exit when closing freezer (#22878),TRUE,valid
67e7f61af7fffbc47aadf48777e2dd5da39796ff,Martin Holst Swende,martin@swende.se,2021-05-17T23:10:28Z,Martin Holst Swende,martin@swende.se,2021-05-17T23:10:28Z,"core: fix failing tests (#22888)

This PR fixes two errors that regressed when EIP-1559 was merged.",TRUE,valid
94451c2788295901c302c9bf5fa2f7b021c924e2,Martin Holst Swende,martin@swende.se,2021-05-17T13:13:22Z,Martin Holst Swende,martin@swende.se,2021-05-17T13:13:22Z,"all: implement EIP-1559 (#22837)

This is the initial implementation of EIP-1559 in packages core/types and core.
Mining, RPC, etc. will be added in subsequent commits.

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>
Co-authored-by: lightclient@protonmail.com <lightclient@protonmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
14bc6e5130ebd291026da82f9ad9684bde895479,Martin Holst Swende,martin@swende.se,2021-05-17T08:49:23Z,Martin Holst Swende,martin@swende.se,2021-05-17T08:49:23Z,consensus/ethash: change eip3554 from 9.5M to 9.7M (#22870),TRUE,valid
597ecb39cc963eb3b85b01b759c75c45e71f41d0,lightclient,14004106+lightclient@users.noreply.github.com,2021-05-17T06:52:32Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-05-17T06:52:32Z,"cmd/evm: return json error if unmarshalling from stdin fails (#22871)

* cmd/evm: return json error if unmarshalling from stdin fails

* cmd/evm: make error capitalizations uniform (all lowercase starts)

* cmd/evm: capitalize error sent directly to stderror",TRUE,valid
addd8824cf3ad6133c1b1bbc3387a621eafba6a3,Martin Holst Swende,martin@swende.se,2021-05-12T08:05:39Z,Martin Holst Swende,martin@swende.se,2021-05-12T08:05:39Z,"cmd/geth, eth, core: snapshot dump + unify with trie dump (#22795)

* cmd/geth, eth, core: snapshot dump + unify with trie dump

* cmd/evm: dump API fixes

* cmd/geth, core, eth: fix some remaining errors

* cmd/evm: dump - add limit, support address startkey, address review concerns

* cmd, core/state, eth: minor polishes, fix snap dump crash, unify format

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
1cca781a02ade61f0f16c80017c573fc8dd2dd6a,Peter Szilagyi,peterke@gmail.com,2021-05-12T07:19:08Z,Peter Szilagyi,peterke@gmail.com,2021-05-12T07:19:08Z,"Merge pull request #22840 from holiman/eip_3554

consensus/ethash: implement EIP-3554 (bomb delay)",TRUE,valid
a2c456a526ae9c07944f12913c6830add93a553f,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-05-11T15:12:10Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-05-11T15:12:10Z,"core: ensure a broken trie invariant crashes genesis creation (#22780)

* Ensure state could be created in ToBlock

* Fix rebase errors

* use a panic instead",TRUE,valid
f34f749e8141aa96c25d9ef5d52a7e1235dcad0e,Peter Szilagyi,peterke@gmail.com,2021-05-11T14:21:04Z,Peter Szilagyi,peterke@gmail.com,2021-05-11T14:21:04Z,"Merge pull request #22857 from karalabe/tracer-stack-fix-2

eth/tracers: do the JSON serialization via .js to capture C faults",TRUE,valid
0524cede37508068b3031912989493e10eb0544a,Peter Szilagyi,peterke@gmail.com,2021-05-11T13:23:54Z,Peter Szilagyi,peterke@gmail.com,2021-05-11T13:23:54Z,eth/tracers: do the JSON serialization via .js to capture C faults,TRUE,valid
ca9808079844c55961cad6ddd9df04fbe21ff78c,Ryan Schneider,ryanleeschneider@gmail.com,2021-05-11T09:25:51Z,Ryan Schneider,ryanleeschneider@gmail.com,2021-05-11T09:25:51Z,"cmd/geth, eth/gasprice: add configurable threshold to gas price oracle (#22752)

This adds a cmd line parameter `--gpo.ignoreprice`, to make the gas price oracle ignore transactions below the given threshold.",TRUE,valid
643fd0efc6ebc8397311d1ca68fc71d8da247643,Felix Lange,fjl@twurst.com,2021-05-11T08:43:35Z,Felix Lange,fjl@twurst.com,2021-05-11T08:43:35Z,"core/types: remove support for legacy receipt/log storage encoding (#22852)

* core/types: remove support for legacy receipt storage encoding

* core/types: remove support for legacy log storage encoding",TRUE,valid
e536bb52ff87cfffe9b413d02dfcf80e7f265e5a,Felix Lange,fjl@twurst.com,2021-05-10T11:35:07Z,Felix Lange,fjl@twurst.com,2021-05-10T11:35:07Z,eth/protocols/snap: adapt to uint256 API changes (#22851),TRUE,valid
c0e201b69039b50a28ec7f8beee79306c9844cff,Felix Lange,fjl@twurst.com,2021-05-10T10:38:54Z,Felix Lange,fjl@twurst.com,2021-05-10T10:38:54Z,"eth/protocols/eth, les: avoid Raw() when decoding HashOrNumber (#22841)

Getting the raw value is not necessary to decode this type, and
decoding it directly from the stream is faster.",TRUE,valid
ae5fcdc67fbfa208de257487cb86271b429545df,Martin Holst Swende,martin@swende.se,2021-05-10T10:29:33Z,Martin Holst Swende,martin@swende.se,2021-05-10T10:29:33Z,go.mod: upgrade to github.com/holiman/uint256 v1.2.0 (#22745),TRUE,valid
f19a679b09500e63b2fd134a4e829591174d9e48,Ceelog,chenwei@ceelog.org,2021-05-10T10:19:32Z,Ceelog,chenwei@ceelog.org,2021-05-10T10:19:32Z,"cmd/geth: remove reference to monitor command (#22844)

'geth monitor' subcommand is no longer supported.",TRUE,valid
7ab7acfded9d121e39ef0dc99ba427211693e4ef,Marius Kjærstad,sandakersmann@users.noreply.github.com,2021-05-10T10:18:42Z,Marius Kjærstad,sandakersmann@users.noreply.github.com,2021-05-10T10:18:42Z,build: upgrade -dlgo version to Go 1.16.4 (#22848),TRUE,valid
700df1442d714cb3c42a602c39c042ce88be463f,Felix Lange,fjl@twurst.com,2021-05-07T12:37:13Z,Felix Lange,fjl@twurst.com,2021-05-07T12:37:13Z,"rlp: add support for optional struct fields (#22832)

This adds support for a new struct tag ""optional"". Using this tag, structs used
for RLP encoding/decoding can be extended in a backwards-compatible way,
by adding new fields at the end.",TRUE,valid
17b1be26617268504a8ef3a6ee3c5c6400bfb63a,Martin Holst Swende,martin@swende.se,2021-05-07T12:04:54Z,Martin Holst Swende,martin@swende.se,2021-05-07T12:04:54Z,consensus/ethash: implement EIP-3554 (bomb delay),TRUE,valid
8a070e8f7d45eca745c29d4523cc2e05ff2f117f,Martin Holst Swende,martin@swende.se,2021-05-07T08:31:01Z,Martin Holst Swende,martin@swende.se,2021-05-07T08:31:01Z,consensus/clique: add some missing checks (#22836),TRUE,valid
a5669ae292274d3b0a223cda07ebe64f943bded4,Martin Holst Swende,martin@swende.se,2021-05-07T06:25:32Z,Martin Holst Swende,martin@swende.se,2021-05-07T06:25:32Z,"core, params: implement EIP-3529 (#22733)

* core, params: implement EIP-3529

* core/vm: add london instructionset

* core/vm: add method doc for EIP enabler

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
e77ef8fa8ab219524618125bcfa8f28b3dbb6b7c,Peter Szilagyi,peterke@gmail.com,2021-05-07T05:19:21Z,Peter Szilagyi,peterke@gmail.com,2021-05-07T05:19:21Z,"Merge pull request #22809 from holiman/alt_3541

core: implement EIP-3541",TRUE,valid
e69130d9f15d85c5955e1fa94abc74d606accba7,Pawe? Bylica,chfast@gmail.com,2021-04-29T09:46:03Z,Pawe? Bylica,chfast@gmail.com,2021-04-29T09:46:03Z,"core/vm, params: implement EIP 3541",TRUE,valid
cc606be74c6f1f05b0b0a6226a400e734b9aac31,Martin Holst Swende,martin@swende.se,2021-05-06T09:07:42Z,Martin Holst Swende,martin@swende.se,2021-05-06T09:07:42Z,"all: define London+baikal, undefine yolov3, add london override flag (#22822)

* all: define London+baikal, undefine yolov3, add london override flag

* cmd, core, params: add baikal genesis definition",TRUE,valid
df20b3b98286c9333c143c0a873d09e27b0e0693,Evgeny Danilenko,6655321@bk.ru,2021-05-06T08:46:27Z,Evgeny Danilenko,6655321@bk.ru,2021-05-06T08:46:27Z,core/vm: avoid duplicate log in json logger (#22825),TRUE,valid
37b5595456e7049e3ed487c41564281de52e00ab,Felix Lange,fjl@twurst.com,2021-05-05T11:21:13Z,Felix Lange,fjl@twurst.com,2021-05-05T11:21:13Z,params: begin v1.10.4 release cycle,FALSE,unsigned
991384a7f6719e1125ca0be7fb27d0c4d1c5d2d3,Felix Lange,fjl@twurst.com,2021-05-05T11:20:06Z,Felix Lange,fjl@twurst.com,2021-05-05T11:20:06Z,params: go-ethereum v1.10.3 stable,FALSE,unsigned
0f3a1e7f9b069c7dcc934238bd75ace72c166f36,rene,41963722+renaynay@users.noreply.github.com,2021-05-05T10:27:27Z,rene,41963722+renaynay@users.noreply.github.com,2021-05-05T10:27:27Z,"cmd/devp2p/internal/ethtest: send simultaneous requests on one connection (#22801)

This changes the SimultaneousRequests test to send the requests from the same
connection, as it doesn't really make sense to test whether a node can respond
to two requests with different request IDs from separate connections.",TRUE,valid
41671d449f5b3a19119eef070151ec72fdbb31f8,Felix Lange,fjl@twurst.com,2021-05-05T10:19:51Z,Felix Lange,fjl@twurst.com,2021-05-05T10:19:51Z,"build: fix windows installer build for NSIS v3.05 (#22821)

With the update to a newer AppVeyor build image, creating the Windows
installer no longer worked because of a string quoting error in EnvVarUpdate.nsh.

This applies the fix recommended in https://stackoverflow.com/questions/62081765.",TRUE,valid
3a2b29c1ed91e1099318c3829a44926a1c2a37d9,Felix Lange,fjl@twurst.com,2021-05-04T20:39:09Z,Felix Lange,fjl@twurst.com,2021-05-04T20:39:09Z,appveyor.yml: upgrade to VisualStudio 2019 image (#22811),TRUE,valid
973ad66b498546468c66ec3cc9d5aa111c1df948,Felix Lange,fjl@twurst.com,2021-05-04T19:45:45Z,Felix Lange,fjl@twurst.com,2021-05-04T19:45:45Z,"build: fix iOS framework build (#22813)

This fixes a regression introduced in #22804.",TRUE,valid
d107f90d1ce74c5d60c11a7171c0178bde12f14f,Felix Lange,fjl@twurst.com,2021-05-04T19:45:21Z,Felix Lange,fjl@twurst.com,2021-05-04T19:45:21Z,"go.mod: go mod tidy (#22814)

This updates go.mod for the addition of golang.org/x/sync.",TRUE,valid
effaf185234533b787926a67a6f73eb8d636e7af,Felix Lange,fjl@twurst.com,2021-05-04T11:01:20Z,Felix Lange,fjl@twurst.com,2021-05-04T11:01:20Z,"build: improve cross compilation setup (#22804)

This PR cleans up the CI build system and fixes a couple of issues.

- The go tool launcher code has been moved to internal/build. With the new
  toolchain functions, the environment of the host Go (i.e. the one that built
  ci.go) and the target Go (i.e. the toolchain downloaded by -dlgo) are isolated
  more strictly. This is important to make cross compilation and -dlgo work
  correctly in more cases.
- The -dlgo option now skips the download and uses the host Go if the running Go
  version matches dlgoVersion exactly.
- The 'test' command now supports -dlgo, -cc and -arch. Running unit tests with
  foreign GOARCH is occasionally useful. For example, it can be used to run
  32-bit tests on Windows. It can also be used to run darwin/amd64 tests on
  darwin/arm64 using Rosetta 2.
- The 'aar', 'xcode' and 'xgo' commands now use a slightly different method to
  install external tools. They previously used `go get`, but this comes with the
  annoying side effect of modifying go.mod. They now use `go install` instead,
  which is the recommended way of installing tools without modifying the local
  module.
- The old build warning about outdated Go version has been removed because we're
  much better at keeping backwards compatibility now.",TRUE,valid
b8040a430e34117f121c67e8deee4a5e889e8372,Felix Lange,fjl@twurst.com,2021-05-04T09:29:32Z,Felix Lange,fjl@twurst.com,2021-05-04T09:29:32Z,"cmd/utils: use eth DNS tree for snap discovery (#22808)

This removes auto-configuration of the snap.*.ethdisco.net DNS discovery tree.
Since measurements have shown that > 75% of nodes in all.*.ethdisco.net support
snap, we have decided to retire the dedicated index for snap and just use the eth
tree instead.

The dial iterators of eth and snap now use the same DNS tree in the default configuration,
so both iterators should use the same DNS discovery client instance. This ensures that
the record cache and rate limit are shared. Records will not be requested multiple times.

While testing the change, I noticed that duplicate DNS requests do happen even
when the client instance is shared. This is because the two iterators request the tree
root, link tree root, and first levels of the tree in lockstep. To avoid this problem, the
change also adds a singleflight.Group instance in the client. When one iterator
attempts to resolve an entry which is already being resolved, the singleflight object
waits for the existing resolve call to finish and returns the entry to both places.",TRUE,valid
640d2c5e30d86e0245446b9b4b6b517bd07b8509,Peter Szilagyi,peterke@gmail.com,2021-05-04T07:54:25Z,Peter Szilagyi,peterke@gmail.com,2021-05-04T07:54:25Z,"Merge pull request #22803 from karalabe/silence-scary-warning

eth: don't print db upgrade warning on db init",TRUE,valid
856c379626c2ff6d37dc28e79596cfbb814bf1dc,Peter Szilagyi,peterke@gmail.com,2021-05-03T12:42:43Z,Peter Szilagyi,peterke@gmail.com,2021-05-03T12:42:43Z,eth: don't print db upgrade warning on db init,TRUE,valid
fc1c1cbea9123cfe6e403b8e21479fa90ee6f9ab,Peter Szilagyi,peterke@gmail.com,2021-05-03T12:37:46Z,Peter Szilagyi,peterke@gmail.com,2021-05-03T12:37:46Z,"Merge pull request #22739 from holiman/remove_code

core: remove old conversion to shuffle leveldb blocks into ancients",TRUE,valid
8f94fc26e3a9de7a756df455f12f6a8fe2a6ed09,Marius van der Wijden,m.vanderwijden@live.de,2021-05-03T12:29:05Z,Marius van der Wijden,m.vanderwijden@live.de,2021-05-03T12:29:05Z,cmd/utils: don't crash on nonexistent datadir (#22738),TRUE,valid
afb097eda83bbc5d69d7fa9aa5ed18b1869af4ba,Felix Lange,fjl@twurst.com,2021-05-03T12:28:02Z,Felix Lange,fjl@twurst.com,2021-05-03T12:28:02Z,"params: remove dependency on crypto (#22788)

* params: remove dependency on crypto

Package params should not depend on package crypto because building
crypto requires cgo.

Since build/ci.go needs package params to get the go-ethereum version
number, C code must be compiled in order to run the build tool, which is
annoying for certain cross-compilation setups.

* params: add SectionHead",TRUE,valid
ca9c576e6214d7d9607e59dd9912e3def4095d85,aaronbuchwald,aaron.buchwald56@gmail.com,2021-05-03T08:58:00Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-05-03T08:58:00Z,"core/vm: fix interpreter comments (#22797)

* Fix interpreter comment

* Fix comment",TRUE,valid
0e00ee42ec4e43ce3b9b1ffdadea3c66aa6eeba4,Pawe? Bylica,chfast@gmail.com,2021-05-01T11:19:24Z,Pawe? Bylica,chfast@gmail.com,2021-05-01T11:19:24Z,"core/vm: clean up contract creation error handling (#22766)

Do not keep separate flag for ""max code size exceeded"" case, but instead
assign appropriate error for it sooner.",TRUE,valid
8ff98108e53c01acb4266f23a272c9d707cb3dcd,rene,41963722+renaynay@users.noreply.github.com,2021-04-30T20:47:36Z,rene,41963722+renaynay@users.noreply.github.com,2021-04-30T20:47:36Z,"cmd/devp2p: fix flakey tests in CI (#22757)

This PR fixes a couple of issues in the eth test suite that caused flakiness when run in the CI.",TRUE,valid
afc1abd878351e318513bed8974f1eb4a321f16c,Peter Szilagyi,peterke@gmail.com,2021-04-30T18:12:09Z,Peter Szilagyi,peterke@gmail.com,2021-04-30T18:12:09Z,"Merge pull request #22789 from karalabe/snap-fix-batch

eth/protocols/snap: use storage batch, not account batch in st task",TRUE,valid
52b5d2d8699c2ffea6ea6a2de69b30a1911359bf,Peter Szilagyi,peterke@gmail.com,2021-04-30T15:24:34Z,Peter Szilagyi,peterke@gmail.com,2021-04-30T15:24:34Z,"eth/protocols/snap: use storage batch, not account batch in st task",TRUE,valid
8681a2536c7169201b621fc3a0fbc01e96aa9f29,Peter Szilagyi,peterke@gmail.com,2021-04-30T14:04:05Z,Peter Szilagyi,peterke@gmail.com,2021-04-30T14:04:05Z,"Merge pull request #22777 from karalabe/snapshots-abort-resume-on-sync

core, eth: abort snapshot generation on snap sync and resume later",TRUE,valid
745757ac6bb10c296ab30874ddde774f4fcdec1e,Peter Szilagyi,peterke@gmail.com,2021-04-29T14:33:45Z,Peter Szilagyi,peterke@gmail.com,2021-04-29T14:33:45Z,"core, eth: abort snapshot generation on snap sync and resume later",TRUE,valid
bbb57fd64b70e3c843b5171d0a4719cf457374fc,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T11:10:12Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T11:10:12Z,core/state: remove toAddr helper in tests (#22772),TRUE,valid
f66f1a16b3c480d3a43ac7e8a09ab3e362e96ae4,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T11:00:48Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T11:00:48Z,eth/filters: fix comment on PublicFilterAPI timeoutLoop (#22782),TRUE,valid
ff75b21f255d112b9a828150da25e9528451a574,Martin Holst Swende,martin@swende.se,2021-04-30T10:52:25Z,Martin Holst Swende,martin@swende.se,2021-04-30T10:52:25Z,"README.md: update commands table, add note about web3.js version (#22748)",TRUE,valid
b778e37daa915f1b0d53e8ce3beb3884ee58120b,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:50:02Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:50:02Z,core: fix typo in comment (#22773),TRUE,valid
dde6cb0b9248f5bc7ac3619304ee3b1fce35f5d4,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:49:13Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:49:13Z,core/vm: replace repeated string with variable in tests (#22774),TRUE,valid
1e57ab5de6612f9b3bea4d3eb6f08641be36944c,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:47:05Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:47:05Z,core: remove unused else branch in reorg (#22783),TRUE,valid
8130dd5cefb11fe6bf70264087368c318692b9ff,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:46:34Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-30T10:46:34Z,core/vm: fix typo in comment (#22785),TRUE,valid
bb43cd7a792ce3e89961d29410b692073b935ac8,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-29T20:14:57Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-29T20:14:57Z,core/types: add license header (#22781),TRUE,valid
b50b17ac695ffcaa9a084f87a8ea6f53e37d2a75,ligi,ligi@ligi.de,2021-04-29T17:30:37Z,ligi,ligi@ligi.de,2021-04-29T17:30:37Z,github: add note about screenshots in issue template (#22764),TRUE,valid
63bad18c33e215c6ef6f33aae7e686211cf945bb,Pawe? Bylica,chfast@gmail.com,2021-04-29T17:30:16Z,Pawe? Bylica,chfast@gmail.com,2021-04-29T17:30:16Z,evm: remove unused errors left after EIP-2315 removal (#22767),TRUE,valid
56f533d00ceea30b9111e1d6572b29a32f490ac2,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-29T17:23:07Z,aaronbuchwald,aaron.buchwald56@gmail.com,2021-04-29T17:23:07Z,docs: fix docstring on read head block (#22776),TRUE,valid
793c8f889f7c565c4775385e5197c199bfde01a5,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-29T16:36:22Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-29T16:36:22Z,add myself as code owner for catalyst (#22778),TRUE,valid
c7d07294a6f855d1c0fef9dcb55e0f87fb0e4962,Diederik Loerakker,proto@protolambda.com,2021-04-29T14:42:21Z,Diederik Loerakker,proto@protolambda.com,2021-04-29T14:42:21Z,catalyst: check if block exists in assemble-block call with unknown parent-hash (#22770),TRUE,valid
871f50b9115976d127aaf4b8a53d9b64259e2fa0,Peter Szilagyi,peterke@gmail.com,2021-04-29T09:03:15Z,Peter Szilagyi,peterke@gmail.com,2021-04-29T09:03:15Z,"Merge pull request #22765 from karalabe/revert-eth-hashrate

eth: restore eth_hashrate API endpoint",TRUE,valid
06f44c0fd425a0a3d82c7f3470da0314d6dc369e,Peter Szilagyi,peterke@gmail.com,2021-04-29T09:02:30Z,Peter Szilagyi,peterke@gmail.com,2021-04-29T09:02:30Z,eth: restore eth_hashrate API endpoint,TRUE,valid
64b60c799555a5662b0c9a78fee1ca8c73941e42,Peter Szilagyi,peterke@gmail.com,2021-04-29T08:29:28Z,Peter Szilagyi,peterke@gmail.com,2021-04-29T08:29:28Z,"Merge pull request #22762 from karalabe/snap-lower-complexity

core, eth, ethdb, trie: simplify range proofs",TRUE,valid
fae165a5def1a335594cf6761164e31fa4e8d27d,Peter Szilagyi,peterke@gmail.com,2021-04-28T20:09:15Z,Peter Szilagyi,peterke@gmail.com,2021-04-28T20:09:15Z,"core, eth, ethdb, trie: simplify range proofs",TRUE,valid
a81cf0d2b3497e5d78b2c06427953b90c1a0d70f,Martin Holst Swende,martin@swende.se,2021-04-28T19:47:48Z,Martin Holst Swende,martin@swende.se,2021-04-28T19:47:48Z,"trie: remove redundant returns + use stacktrie where applicable (#22760)

* trie: add benchmark for proofless range

* trie: remove unused returns + use stacktrie",TRUE,valid
abb6cfae6a490c5665b13f0f143a144e02499f86,Peter Szilagyi,peterke@gmail.com,2021-04-28T19:40:38Z,Peter Szilagyi,peterke@gmail.com,2021-04-28T19:40:38Z,"Merge pull request #22761 from karalabe/snap-small-packets

eth/protocols/snap: lower the packet size to avoid overloading link",TRUE,valid
e4270cacf4aa26875affc619dbf82ad18d06226e,rene,41963722+renaynay@users.noreply.github.com,2021-04-28T19:38:38Z,rene,41963722+renaynay@users.noreply.github.com,2021-04-28T19:38:38Z,cmd/devp2p: fix flaky SameRequestID test (#22754),TRUE,valid
558bff40083ccb96165be17e4e40cad4fa8193b5,Peter Szilagyi,peterke@gmail.com,2021-04-28T18:40:06Z,Peter Szilagyi,peterke@gmail.com,2021-04-28T18:40:06Z,eth/protocols/snap: lower the packet size to avoid overloading link,TRUE,valid
6d7c9566df5d0dcb0797ef505db91287fa9ac7ce,gary rong,garyrong0905@gmail.com,2021-04-28T12:18:25Z,gary rong,garyrong0905@gmail.com,2021-04-28T12:18:25Z,"les, tests: fix les clientpool (#22756)

* les, tests: fix les clientpool

* tests: disable debug mode

* les: polish code",TRUE,valid
9e5bb84c0e162c54f4532641084b9c0627b15e85,Gautam Botrel,gautam.botrel@gmail.com,2021-04-28T10:04:25Z,Gautam Botrel,gautam.botrel@gmail.com,2021-04-28T10:04:25Z,"tests/fuzzers: crypto/bn256 and crypto/bls12381 tests against gnark-crypto  (#22755)

Add more cross-fuzzers to fuzz bls with gnark versus geth's own bls12-381 library",TRUE,valid
256c5d68b245899f6d37c72636fdd795f66397ee,Gregory Markou,16929357+GregTheGreek@users.noreply.github.com,2021-04-28T07:06:34Z,Gregory Markou,16929357+GregTheGreek@users.noreply.github.com,2021-04-28T07:06:34Z,"eth/gasprice: improve stability of estimated price (#22722)

This PR makes the gas price oracle ignore transactions priced at `<=1 wei`.",TRUE,valid
0c998684167278fb09d2f5412a64fc225dc08392,Martin Holst Swende,martin@swende.se,2021-04-28T06:48:07Z,Martin Holst Swende,martin@swende.se,2021-04-28T06:48:07Z,"cmd/devp2p, eth/protocols/eth: fix tests + make sanity checks earlier (#22749)",TRUE,valid
d9c9ee5ac9631c434380f73b6e6e50030a04f8ee,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:49:54Z,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:49:54Z,"Merge pull request #22753 from karalabe/p2p-tracker-stopfix

p2p/tracker: only reschedule wake if previous didn't run",TRUE,valid
ff3535e8e03ea56207109f57ec3b4a30481d2fa2,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:47:59Z,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:47:59Z,p2p/tracker: only reschedule wake if previous didn't run,TRUE,valid
55043eec457e939a35cdb6e5c7978c13aa8dd7fd,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:43:07Z,Peter Szilagyi,peterke@gmail.com,2021-04-27T18:43:07Z,"Merge pull request #22751 from holiman/tracker_fix

p2p/tracker: properly clean up fulfilled requests",TRUE,valid
45fca44c24a1067285f341ccd9b4abdf1334604f,Martin Holst Swende,martin@swende.se,2021-04-27T16:09:34Z,Martin Holst Swende,martin@swende.se,2021-04-27T16:09:34Z,p2p/tracker: properly clean up fulfilled requests,TRUE,valid
caea6c466147752ed726a79f69e71215131065dc,Peter Szilagyi,peterke@gmail.com,2021-04-27T14:19:59Z,Peter Szilagyi,peterke@gmail.com,2021-04-27T14:19:59Z,"eth/protocols/snap: generate storage trie from full dirty snap data (#22668)

* eth/protocols/snap: generate storage trie from full dirty snap data

* eth/protocols/snap: get rid of some more dead code

* eth/protocols/snap: less frequent logs, also log during trie generation

* eth/protocols/snap: implement dirty account range stack-hashing

* eth/protocols/snap: don't loop on account trie generation

* eth/protocols/snap: fix account format in trie

* core, eth, ethdb: glue snap packets together, but not chunks

* eth/protocols/snap: print completion log for snap phase

* eth/protocols/snap: extended tests

* eth/protocols/snap: make testcase pass

* eth/protocols/snap: fix account stacktrie commit without defer

* ethdb: fix key counts on reset

* eth/protocols: fix typos

* eth/protocols/snap: make better use of delivered data (#44)

* eth/protocols/snap: make better use of delivered data

* squashme

* eth/protocols/snap: reduce chunking

* squashme

* eth/protocols/snap: reduce chunking further

* eth/protocols/snap: break out hash range calculations

* eth/protocols/snap: use sort.Search instead of looping

* eth/protocols/snap: prevent crash on storage response with no keys

* eth/protocols/snap: nitpicks all around

* eth/protocols/snap: clear heal need on 1-chunk storage completion

* eth/protocols/snap: fix range chunker, add tests

Co-authored-by: Peter Szilagyi <peterke@gmail.com>

* trie: fix test API error

* eth/protocols/snap: fix some further liter issues

* eth/protocols/snap: fix accidental batch reuse

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
65a1c2d829ca11ba2a9b08aad977807731b6f009,Martin Holst Swende,martin@swende.se,2021-04-27T11:21:41Z,Martin Holst Swende,martin@swende.se,2021-04-27T11:21:41Z,"core/vm: make gas cost reporting to tracers correct (#22702)

Previously, the makeCallVariantGasCallEIP2929 charged the cold account access cost directly, leading to an incorrect gas cost passed to the tracer from the main execution loop.
This change still temporarily charges the cost (to allow for an accurate calculation of the available gas for the call), but then afterwards refunds it and instead returns the correct total gas cost to be then properly charged in the main loop.",TRUE,valid
a0a99e610df1485b685138ddd9efd12bddb8a945,Felix Lange,fjl@twurst.com,2021-04-27T10:43:47Z,Felix Lange,fjl@twurst.com,2021-04-27T10:43:47Z,build: upgrade -dlgo version to Go 1.16.3 (#22746),TRUE,valid
ad983b300b138b2300402187c2e50f9afdc4b2a3,lightclient,14004106+lightclient@users.noreply.github.com,2021-04-27T09:36:57Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-04-27T09:36:57Z,cmd/puppeth: add support for authentication via ssh agent (#22634),TRUE,valid
85a0bab6d7f0157cd635b0ae1c278d1b23b8ff1f,Peter Szilagyi,peterke@gmail.com,2021-04-27T09:26:46Z,Peter Szilagyi,peterke@gmail.com,2021-04-27T09:26:46Z,"Merge pull request #21467 from holiman/minor_ethashfix

consensus/ethash: less lookups of block data",TRUE,valid
a3f0da1ac42cf78769921ebf6974e4e4c6a197ae,Felix Lange,fjl@twurst.com,2021-04-27T08:49:06Z,Felix Lange,fjl@twurst.com,2021-04-27T08:49:06Z,"build: upgrade to golangci-lint v1.39.0 (#22696)

* build: upgrade to golangci-lint v1.39.0

* consensus/ethash: fix go vet warning regarding reflect.SliceHeader

* eth/catalyst: fix lint issue

* consensus/ethash: fix bug in memoryMapFile",TRUE,valid
854f068ed60918c624857594a703a6724b8efb3a,gary rong,garyrong0905@gmail.com,2021-04-27T07:44:59Z,gary rong,garyrong0905@gmail.com,2021-04-27T07:44:59Z,"les: polish code (#22625)

* les: polish code

* les/vflus/server: fixes

* les: fix lint",TRUE,valid
9b99e3dfe04baabdb51917673bc046e33731caca,Martin Holst Swende,martin@swende.se,2021-04-26T16:19:07Z,Martin Holst Swende,martin@swende.se,2021-04-26T16:19:07Z,"core/rawdb: fix datarace in freezer (#22728)

The Append / truncate operations were racy. When a datafile reaches 2Gb, a new file is needed. For this operation, we require a writelock, which is not needed in the 99.99% of all cases where the data does fit in the current head-file.

This transition from readlock to writelock was incorrect, and as the readlock was released, a truncate operation could slip in between, and truncate the data. This would have been fine, however, the Append operation continued writing as if no truncation had occurred, e.g writing item 5 where item 0 should reside.

This PR changes the behaviour, so that if when we run into the situation that a new file is needed, it aborts, and retries, this time with a writelock.

The outcome of the situation described above, running on this PR, would instead be that the Append operation exits with a failure.",TRUE,valid
83375b08731d95fdc91b6e1576db596c21384a3d,Martin Holst Swende,martin@swende.se,2021-04-26T12:27:56Z,Martin Holst Swende,martin@swende.se,2021-04-26T12:27:56Z,core: remove old conversion to shuffle leveldb blocks into ancients,TRUE,valid
34f3c9539b49396b17524ee72ea20498f96600b9,Nishant Das,nishdas93@gmail.com,2021-04-23T16:18:10Z,Nishant Das,nishdas93@gmail.com,2021-04-23T16:18:10Z,"p2p/discover: improve discv5 handling of IPv4-in-IPv6 addresses (#22703)

When receiving PING from an IPv4 address over IPv6, the implementation sent
back a IPv4-in-IPv6 address. This change makes it reflect the IPv4 address.",TRUE,valid
cac1b21d392370f8768a9ee45a9a10c0b5ddcc9b,rene,41963722+renaynay@users.noreply.github.com,2021-04-23T16:14:39Z,rene,41963722+renaynay@users.noreply.github.com,2021-04-23T16:14:39Z,"cmd/devp2p/internal/ethtest: add more tx propagation tests (#22630)

This adds a test for large tx announcement messages, as well as a test to
check that announced tx hashes are requested by the node.",TRUE,valid
49281ab84fa5d2dd5704ce35ad984d415b529c4f,Martin Holst Swende,martin@swende.se,2021-04-23T11:39:18Z,Martin Holst Swende,martin@swende.se,2021-04-23T11:39:18Z,"core/state/snapshot, true: reuse dirty data instead of hitting disk when generating (#22667)

* core/state/snapshot: reuse memory data instead of hitting disk when generating

* trie: minor nitpicks wrt the resolver optimization

* core/state/snapshot, trie: use key/value store for resolver

* trie: fix linter

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
ea54c58d4f37d8cd4563332989caf943f4964333,rene,41963722+renaynay@users.noreply.github.com,2021-04-23T09:15:42Z,rene,41963722+renaynay@users.noreply.github.com,2021-04-23T09:15:42Z,"cmd/devp2p/internal/ethtest: run test suite as Go unit test (#22698)

This change adds a Go unit test that runs the protocol test suite
against the go-ethereum implementation of the eth protocol.",TRUE,valid
1fb9a6dd32b581c912d672634882d7e2eb2775cd,Peter Szilagyi,peterke@gmail.com,2021-04-22T08:42:46Z,Peter Szilagyi,peterke@gmail.com,2021-04-22T08:42:46Z,"eth/protocols, prp/tracker: add support for req/rep rtt tracking (#22608)

* eth/protocols, prp/tracker: add support for req/rep rtt tracking

* p2p/tracker: sanity cap the number of pending requests

* pap/tracker: linter <3

* p2p/tracker: disable entire tracker if no metrics are enabled",TRUE,valid
9357280fce5c5d57111d690a336cca5f89e34da6,ryanc414,ryan@tokencard.io,2021-04-21T13:51:30Z,ryanc414,ryan@tokencard.io,2021-04-21T13:51:30Z,"rpc: add HTTPError type for HTTP error responses (#22677)

The new error type is returned by client operations contains details of
the response error code and response body.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
67da83aca51d30df9ba2d00b9ec694422626a3ad,Martin Holst Swende,martin@swende.se,2021-04-21T11:03:33Z,Martin Holst Swende,martin@swende.se,2021-04-21T11:03:33Z,"accounts/external, signer/core: add support for EIP-2930 transactions (#22585)

This adds support for signing EIP-2930 with clef.",TRUE,valid
4b783c0064661be55fd35b765c2a90d1f9b9abcb,Martin Holst Swende,martin@swende.se,2021-04-21T10:25:26Z,Martin Holst Swende,martin@swende.se,2021-04-21T10:25:26Z,"trie: improve the node iterator seek operation (#22470)

This change improves the efficiency of the nodeIterator seek
operation. Previously, seek essentially ran the iterator forward
until it found the matching node. With this change, it skips
over fullnode children and avoids resolving them from the database.",TRUE,valid
3e68d627b1b930a824942204ae3cd0b042cd1dbb,Martin Holst Swende,martin@swende.se,2021-04-21T08:19:28Z,Martin Holst Swende,martin@swende.se,2021-04-21T08:19:28Z,les: fix goroutine leaks in tests (#22707),TRUE,valid
96828c90f5ff9b73dc1a85da5999fe409324ee95,gary rong,garyrong0905@gmail.com,2021-04-21T08:18:27Z,gary rong,garyrong0905@gmail.com,2021-04-21T08:18:27Z,"eth/tracers, internal/ethapi: fix typos causing lint issue (#22711)",TRUE,valid
dd9c3225cf06dab0acf783fad671b4f601a4470e,gary rong,garyrong0905@gmail.com,2021-04-21T07:21:22Z,gary rong,garyrong0905@gmail.com,2021-04-21T07:21:22Z,"eth, internal: extend the TraceCall API (#22245)

Adds an an optional parameter `overrides *map[common.Address]account` to the `eth_call` API in order for the caller to  can customize the state.",TRUE,valid
cc33398cef4d9faeaec1e68e13029e1a0e1d6e41,Martin Holst Swende,martin@swende.se,2021-04-20T10:28:20Z,Martin Holst Swende,martin@swende.se,2021-04-20T10:28:20Z,tests: disable blockchain tests based on general state tests (#22704),TRUE,valid
beee6b77a0ca8c26881dc2bb17c58e996c90a0c6,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-20T08:54:41Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-20T08:54:41Z,"go.mod: upgrade gopsutils to v3.21.4 (#22693)

This fixes the OpenBSD/arm64 build.",TRUE,valid
581539c6ee795f17b631b0ae6c2ce4948d41c3ba,Martin Holst Swende,martin@swende.se,2021-04-20T08:42:02Z,Martin Holst Swende,martin@swende.se,2021-04-20T08:42:02Z,trie: make stacktrie support binary marshal/unmarshal (#22685),TRUE,valid
d7bfb978ba9a96f638890f1abb6e5bff760832fc,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-20T08:29:36Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-20T08:29:36Z,ethash: no block reward in catalyst mode (#22697),TRUE,valid
d6ffa140359d24262903962f145a1236836aeeb4,gary rong,garyrong0905@gmail.com,2021-04-20T05:27:46Z,gary rong,garyrong0905@gmail.com,2021-04-20T05:27:46Z,core: nuke legacy snapshot supporting (#22663),TRUE,valid
653b7e959d57bea49ba3628e4336a74ef4363ce2,Felix Lange,fjl@twurst.com,2021-04-19T12:54:55Z,Felix Lange,fjl@twurst.com,2021-04-19T12:54:55Z,cmd/devp2p: add dns nuke-route53 command (#22695),TRUE,valid
424656519a0bfc0841b112c935279c787cecd904,Felix Lange,fjl@twurst.com,2021-04-19T12:54:38Z,Felix Lange,fjl@twurst.com,2021-04-19T12:54:38Z,"cmd/devp2p: add support for -limit option in nodeset filter command (#22694)

The new -limit option makes the filter operate on top N nodes by score.
This also adds ENR attribute stats in the nodeset info command.
Node set commands are now documented in README.",TRUE,valid
e43ac53264429e430450fc1054ae294900172e0d,Peter Szilagyi,peterke@gmail.com,2021-04-18T14:53:01Z,Peter Szilagyi,peterke@gmail.com,2021-04-18T14:53:01Z,"Merge pull request #22686 from holiman/minor_fixes

core/state/snapshot: avoid copybytes for stacktrie",TRUE,valid
f79cce5de98332e6d54eb298fce85c69d1082ee2,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-16T19:29:22Z,Guillaume Ballet,3272758+gballet@users.noreply.github.com,2021-04-16T19:29:22Z,"eth/catalyst: add catalyst API prototype (#22641)

This change adds the --catalyst flag, enabling an RPC API for eth2 integration.
In this initial version, catalyst mode also disables all peer-to-peer networking.

Co-authored-by: Mikhail Kalinin <noblesse.knight@gmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
09d44e9925a5a3f983ae1861f7ecdf69f49ab888,Martin Holst Swende,martin@swende.se,2021-04-16T12:58:23Z,Martin Holst Swende,martin@swende.se,2021-04-16T12:58:23Z,core/state/snapshot: avoid copybytes for stacktrie,TRUE,valid
4f3ba6742fbf1cc585048fcc45072523c6de173d,Martin Holst Swende,martin@swende.se,2021-04-16T12:21:01Z,Martin Holst Swende,martin@swende.se,2021-04-16T12:21:01Z,"trie: make stacktrie not mutate input values (#22673)

The stacktrie is a bit un-untuitive, API-wise: since it mutates input values.
Such behaviour is dangerous, and easy to get wrong if the calling code 'forgets' this quirk. The behaviour is fixed by this PR, so that the input values are not modified by the stacktrie. 

Note: just as with the Trie, the stacktrie still references the live input objects, so it's still _not_ safe to mutate the values form the callsite.",TRUE,valid
65689e7fcea8f3a813aea659e1b49f9052883ce0,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-04-16T07:52:33Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-04-16T07:52:33Z,"les/vflux/server: fix priority cornercase causing fuzzer timeout (#22650)

* les/vflux/server: fix estimatePriority corner case

* les/vflux/server: simplify inactiveAllowance == 0 case",TRUE,valid
f8afb681ddd00892e7b85370d31dcf7a49c10f91,Peter Szilagyi,peterke@gmail.com,2021-04-16T06:27:39Z,Peter Szilagyi,peterke@gmail.com,2021-04-16T06:27:39Z,"Merge pull request #22678 from karalabe/snap-ephemeral-channels

eth/protocols/snap: use ephemeral channels to avoid cross-sync delveries",TRUE,valid
fda93f643efa5dd6aafde1df7f086862a5dad9e3,Felix Lange,fjl@twurst.com,2021-04-16T06:27:16Z,Felix Lange,fjl@twurst.com,2021-04-16T06:27:16Z,"log: fix formatting of big.Int (#22679)

* log: fix formatting of big.Int

The implementation of formatLogfmtBigInt had two issues: it crashed when
the number was actually large enough to hit the big integer case, and
modified the big.Int while formatting it.

* log: don't call FormatLogfmtInt64 for int16

* log: separate from decimals back, not front

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
3cfd0fe7a8d8e175f5d0bff1e926d5d92a7ca6ce,meowsbits,b5c6@protonmail.com,2021-04-15T22:32:16Z,meowsbits,b5c6@protonmail.com,2021-04-15T22:32:16Z,"core: add TestGenesisHashes and fix YoloV3 (#22559)

This adds simple unit test checking if the hard-coded genesis
hash values in package params match the actual genesis block hashes.",TRUE,valid
9553c98de8f730e77b612a642089824f1c35bf3e,Peter Szilagyi,peterke@gmail.com,2021-04-15T18:01:16Z,Peter Szilagyi,peterke@gmail.com,2021-04-15T18:01:16Z,eth/protocols/snap: use ephemeral channels to avoid cross-sync delveries,TRUE,valid
1e207342b545fb5992e2e8f38e60f219f379e5e0,Peter Szilagyi,peterke@gmail.com,2021-04-15T17:35:00Z,Peter Szilagyi,peterke@gmail.com,2021-04-15T17:35:00Z,"all: make logs a bit easier on the eye to digest (#22665)

* all: add thousandths separators for big numbers on log messages

* p2p/sentry: drop accidental file

* common, log: add fast number formatter

* common, eth/protocols/snap: simplifty fancy num types

* log: handle nil big ints",TRUE,valid
d8ff53dfb8a516f47db37dbc7fd7ad18a1e8a125,Peter Szilagyi,peterke@gmail.com,2021-04-14T23:14:09Z,Peter Szilagyi,peterke@gmail.com,2021-04-14T23:14:09Z,"Merge pull request #22666 from karalabe/remove-stale-datatype

core/types: drop some relice data types",TRUE,valid
d5e57948d1d889b129be87e2cbcdbfaa727ef5ce,Peter Szilagyi,peterke@gmail.com,2021-04-14T20:39:42Z,Peter Szilagyi,peterke@gmail.com,2021-04-14T20:39:42Z,core/types: drop some relice data types,TRUE,valid
7088f1e81456bdc0bbe801e266ea6ca6c15c1835,gary rong,garyrong0905@gmail.com,2021-04-14T20:23:11Z,gary rong,garyrong0905@gmail.com,2021-04-14T20:23:11Z,"core, eth: faster snapshot generation (#22504)

* eth/protocols: persist received state segments

* core: initial implementation

* core/state/snapshot: add tests

* core, eth: updates

* eth/protocols/snapshot: count flat state size

* core/state: add metrics

* core/state/snapshot: skip unnecessary deletion

* core/state/snapshot: rename

* core/state/snapshot: use the global batch

* core/state/snapshot: add logs and fix wiping

* core/state/snapshot: fix

* core/state/snapshot: save generation progress even if the batch is empty

* core/state/snapshot: fixes

* core/state/snapshot: fix initial account range length

* core/state/snapshot: fix initial account range

* eth/protocols/snap: store flat states during the healing

* eth/protocols/snap: print logs

* core/state/snapshot: refactor (#4)

* core/state/snapshot: refactor

* core/state/snapshot: tiny fix and polish

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>

* core, eth: fixes

* core, eth: fix healing writer

* core, trie, eth: fix paths

* eth/protocols/snap: fix encoding

* eth, core: add debug log

* core/state/generate: release iterator asap (#5)

core/state/snapshot: less copy

core/state/snapshot: revert split loop

core/state/snapshot: handle storage becoming empty, improve test robustness

core/state: test modified codehash

core/state/snapshot: polish

* core/state/snapshot: optimize stats counter

* core, eth: add metric

* core/state/snapshot: update comments

* core/state/snapshot: improve tests

* core/state/snapshot: replace secure trie with standard trie

* core/state/snapshot: wrap return as the struct

* core/state/snapshot: skip wiping correct states

* core/state/snapshot: updates

* core/state/snapshot: fixes

* core/state/snapshot: fix panic due to reference flaw in closure

* core/state/snapshot: fix errors in state generation logic + fix log output

* core/state/snapshot: remove an error case

* core/state/snapshot: fix condition-check for exhausted snap state

* core/state/snapshot: use stackTrie for small tries

* core/state/snapshot: don't resolve small storage tries in vain

* core/state/snapshot: properly clean up storage of deleted accounts

* core/state/snapshot: avoid RLP-encoding in some cases + minor nitpicks

* core/state/snapshot: fix error (+testcase)

* core/state/snapshot: clean up tests a bit

* core/state/snapshot: work in progress on better tests

* core/state/snapshot: polish code

* core/state/snapshot: fix trie iteration abortion trigger

* core/state/snapshot: fixes flaws

* core/state/snapshot: remove panic

* core/state/snapshot: fix abort

* core/state/snapshot: more tests (plus failing testcase)

* core/state/snapshot: more testcases + fix for failing test

* core/state/snapshot: testcase for malformed data

* core/state/snapshot: some test nitpicks

* core/state/snapshot: improvements to logging

* core/state/snapshot: testcase to demo error in abortion

* core/state/snapshot: fix abortion

* cmd/geth: make verify-state report the root

* trie: fix failing test

* core/state/snapshot: add timer metrics

* core/state/snapshot: fix metrics

* core/state/snapshot: udpate tests

* eth/protocols/snap: write snapshot account even if code or state is needed

* core/state/snapshot: fix diskmore check

* core/state/snapshot: review fixes

* core/state/snapshot: improve error message

* cmd/geth: rename 'error' to 'err' in logs

* core/state/snapshot: fix some review concerns

* core/state/snapshot, eth/protocols/snap: clear snapshot marker when starting/resuming snap sync

* core: add error log

* core/state/snapshot: use proper timers for metrics collection

* core/state/snapshot: address some review concerns

* eth/protocols/snap: improved log message

* eth/protocols/snap: fix heal logs to condense infos

* core/state/snapshot: wait for generator termination before restarting

* core/state/snapshot: revert timers to counters to track total time

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
a50251e6cbfecfaf26040d42c70d2812bc422a4a,xD AKA Rapper King Of cn background diablo & revelations,33193253+r1cs@users.noreply.github.com,2021-04-14T10:44:32Z,xD AKA Rapper King Of cn background diablo & revelations,33193253+r1cs@users.noreply.github.com,2021-04-14T10:44:32Z,"eth/fetcher: avoid spurious timer events at startup (#22652)


Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
72e37942f3f777129b6cfa2d28b1ba7bbdf6437a,Mudit Gupta,guptamudit@ymail.com,2021-04-13T21:51:46Z,Mudit Gupta,guptamudit@ymail.com,2021-04-13T21:51:46Z,"cmd/faucet: support testnet flags in the faucet (#22545)


Co-authored-by: Felix Lange <fjl@twurst.com>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
271e5b7fc921709bd57ec672912f63a4586717dd,Martin Holst Swende,martin@swende.se,2021-04-13T13:45:30Z,Martin Holst Swende,martin@swende.se,2021-04-13T13:45:30Z,"cmd/geth: add db-command to inspect freezer index (#22633)

This PR makes it easier to inspect the freezer index, which could be useful to investigate things like #22111",TRUE,valid
6c27d8f996ee8bc0dd7ed3e8ec195dd38e14acab,Balaji Shetty Pachai,32358081+balajipachai@users.noreply.github.com,2021-04-13T08:00:48Z,Balaji Shetty Pachai,32358081+balajipachai@users.noreply.github.com,2021-04-13T08:00:48Z,"accounts: documentation fixes (#22645)

* replaces `an chance` with `a chance`
* replaces `SignHashWithPassphrase` with `SignTextWithPassphrase` as there was no SignHashWithPasspharse function in the file",TRUE,valid
9c653ff6625df1ff0f6c6612958b2a1da0021e40,Peter Szilagyi,peterke@gmail.com,2021-04-09T10:52:21Z,Peter Szilagyi,peterke@gmail.com,2021-04-09T10:52:21Z,"Merge pull request #22636 from karalabe/drop-eth64

eth, les: drop support for eth/64",TRUE,valid
fe1586b094048d7f661be93a04117e92e5ebeaf3,Peter Szilagyi,peterke@gmail.com,2021-04-08T15:06:03Z,Peter Szilagyi,peterke@gmail.com,2021-04-08T15:06:03Z,"eth, les: drop support for eth/64, fix eth/66 tests",TRUE,valid
04dcc9378dc38d54eeb6a688d81e8b5e13446519,Felix Lange,fjl@twurst.com,2021-04-08T11:04:30Z,Felix Lange,fjl@twurst.com,2021-04-08T11:04:30Z,params: begin v1.10.3 release cycle,FALSE,unsigned
97d11b0187b4695ccf44e3b71b54155fe405a36f,Felix Lange,fjl@twurst.com,2021-04-08T11:02:25Z,Felix Lange,fjl@twurst.com,2021-04-08T11:02:25Z,params: release go-ethereum v1.10.2 stable,FALSE,unsigned
a665f5d2d6f62203f611dbc9ecc28a05130cb88f,Peter Szilagyi,peterke@gmail.com,2021-04-08T10:27:01Z,Peter Szilagyi,peterke@gmail.com,2021-04-08T10:27:01Z,"Merge pull request #22632 from karalabe/cht-1.10.2

params: update CHTs for v1.10.2",TRUE,valid
e3ff37c47a5aedd363e32c16c83be42e364253e3,Peter Szilagyi,peterke@gmail.com,2021-04-08T10:23:34Z,Peter Szilagyi,peterke@gmail.com,2021-04-08T10:23:34Z,params: update CHTs for v1.10.2,TRUE,valid
264fff7dd468246d9b6aaa1f5db51d08935d1093,Peter Szilagyi,peterke@gmail.com,2021-04-07T15:52:29Z,Peter Szilagyi,peterke@gmail.com,2021-04-07T15:52:29Z,"Merge pull request #22629 from karalabe/fix-chain-tracing-from-0

eth: fix tracing state retrieval if requesting the non-dirty genesis",TRUE,valid
2a7c4b62a9cce1b3d9cd3ad68d0c8b2acd25630c,Peter Szilagyi,peterke@gmail.com,2021-04-07T15:14:24Z,Peter Szilagyi,peterke@gmail.com,2021-04-07T15:14:24Z,eth: fix tracing state retrieval if requesting the non-dirty genesis,TRUE,valid
9d10856e84e884936c2390360e60e9ebca6d7a34,Marius van der Wijden,m.vanderwijden@live.de,2021-04-07T14:54:31Z,Marius van der Wijden,m.vanderwijden@live.de,2021-04-07T14:54:31Z,"core, eth, internal/ethapi: create access list RPC API (#22550)

* core/vm: implement AccessListTracer

* eth: implement debug.createAccessList

* core/vm: fixed nil panics in accessListTracer

* eth: better error messages for createAccessList

* eth: some fixes on CreateAccessList

* eth: allow for provided accesslists

* eth: pass accesslist by value

* eth: remove created acocunt from accesslist

* core/vm: simplify access list tracer

* core/vm: unexport accessListTracer

* eth: return best guess if al iteration times out

* eth: return best guess if al iteration times out

* core: docstring, unexport methods

* eth: typo

* internal/ethapi: move createAccessList to eth package

* internal/ethapi: remove reexec from createAccessList

* internal/ethapi: break if al is equal to last run, not if gas is equal

* internal/web3ext: fixed arguments

* core/types: fixed equality check for accesslist

* core/types: no hardcoded vals

* core, internal: simplify access list generation, make it precise

* core/vm: fix typo

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
a600dab7e58a72968f111f8430c0e92a0511bc9c,gary rong,garyrong0905@gmail.com,2021-04-07T07:30:26Z,gary rong,garyrong0905@gmail.com,2021-04-07T07:30:26Z,"eth, les: fix tracers (#22473)

* eth, les: fix tracer

* eth: isolate live trie database in tracer

* eth: fix nil

* eth: fix

* eth, les: add checkLive param

* eth/tracer: fix",TRUE,valid
2d89fe0883f0ebb5f0145763d46f5335febab3c0,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-04-06T18:42:50Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-04-06T18:42:50Z,"les: move client pool to les/vflux/server (#22495)

* les: move client pool to les/vflux/server

* les/vflux/server: un-expose NodeBalance, remove unused fn, fix bugs

* tests/fuzzers/vflux: add ClientPool fuzzer

* les/vflux/server: fixed balance tests

* les: rebase fix

* les/vflux/server: fixed more bugs

* les/vflux/server: unexported NodeStateMachine fields and flags

* les/vflux/server: unexport all internal components and functions

* les/vflux/server: fixed priorityPool test

* les/vflux/server: polish balance

* les/vflux/server: fixed mutex locking error

* les/vflux/server: priorityPool bug fixed

* common/prque: make Prque wrap-around priority handling optional

* les/vflux/server: rename funcs, small optimizations

* les/vflux/server: fixed timeUntil

* les/vflux/server: separated balance.posValue and negValue

* les/vflux/server: polish setup

* les/vflux/server: enforce capacity curve monotonicity

* les/vflux/server: simplified requestCapacity

* les/vflux/server: requestCapacity with target range, no iterations in SetCapacity

* les/vflux/server: minor changes

* les/vflux/server: moved default factors to balanceTracker

* les/vflux/server: set inactiveFlag in priorityPool

* les/vflux/server: moved related metrics to vfs package

* les/vflux/client: make priorityPool temp state logic cleaner

* les/vflux/server: changed log.Crit to log.Error

* add vflux fuzzer to oss-fuzz

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
e275b1a293bdbc8170a01c1612c1cdf8e82c1ca1,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-04-06T18:02:52Z,Evolution404,35091674+Evolution404@users.noreply.github.com,2021-04-06T18:02:52Z,consensus/ethash: replace a magic number with it's constant (#22618),TRUE,valid
95219ae62dd157414e4ab9b3a63d2c80cf10efab,Peter Simard,petesimard56@gmail.com,2021-04-06T14:23:35Z,Peter Simard,petesimard56@gmail.com,2021-04-06T14:23:35Z,"cmd/utils: move cache sanity check to SetEthConfig (#22510)

Move the cache sanity check to the SetEthConfig function
to allow the config file to load.",TRUE,valid
5338ce44475191eb8708509a44d92f1219a8a798,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-04-06T14:09:51Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-04-06T14:09:51Z,"internal/debug: add JSON log format and rename logging flags (#22341)

This change adds support for logging JSON records when the --log.json flag is
given. The --debug and --backtrace flags are deprecated and replaced by
--log.debug and --log.backtrace.

While changing this, it was noticed that the --memprofilerate and
--blockprofilerate were ineffective (they were always overridden even if
--pprof.memprofilerate was not set). This is also fixed.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
adf09aeab1fc091e4ab56c04852b18b4b924eb50,AmitBRD,60668103+AmitBRD@users.noreply.github.com,2021-04-06T13:58:36Z,AmitBRD,60668103+AmitBRD@users.noreply.github.com,2021-04-06T13:58:36Z,"graphql: add support for tx types and tx access lists (#22491)

This adds support for EIP-2718 access list transactions in the GraphQL API.

Co-authored-by: Amit Shah <amitshah0t7@gmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
706683ea72c1b711bd3b56327fe6c08e70bd37e3,piersy,pierspowlesland@gmail.com,2021-04-06T10:24:39Z,piersy,pierspowlesland@gmail.com,2021-04-06T10:24:39Z,"internal/ethapi: fix eth_chainId method (#22243)

This removes the duplicated definition of eth_chainID
in package eth and updates the definition in internal/ethapi
to treat chain ID as a bigint.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
c79fc209cdcdd3ec28e4643b12c954fdbeeba452,Edgar Aroutiounian,edgar.factorial@gmail.com,2021-04-06T08:57:00Z,Edgar Aroutiounian,edgar.factorial@gmail.com,2021-04-06T08:57:00Z,core/state/snapshot: fix data race in diff layer (#22540),TRUE,valid
73ed68988fbbe2f55758d30c583b1b8d7879cf37,Peter Szilagyi,peterke@gmail.com,2021-03-31T16:27:23Z,Peter Szilagyi,peterke@gmail.com,2021-03-31T16:27:23Z,"Merge pull request #22604 from karalabe/hashrate-capitalization-fix

all: fix miner hashRate -> hashrate on API calls",TRUE,valid
55300d4fdbfda751a7a3d4baadd9db65c50b22b8,Peter Szilagyi,peterke@gmail.com,2021-03-31T07:56:51Z,Peter Szilagyi,peterke@gmail.com,2021-03-31T07:56:51Z,all: fix miner hashRate -> hashrate on API calls,TRUE,valid
4a37ae510eb02bb7daf1fa5982f326e92a401c60,Felix Lange,fjl@twurst.com,2021-03-30T18:09:30Z,Felix Lange,fjl@twurst.com,2021-03-30T18:09:30Z,"rpc: tighter shutdown synchronization in client subscription (#22597)

This fixes a rare issue where the client subscription forwarding loop
would attempt send on the subscription's channel after Unsubscribe has
returned, leading to a panic if the subscription channel was already
closed by the user. Example:

    sub, _ := client.Subscribe(..., channel, ...)
    sub.Unsubscribe()
    close(channel)

The race occurred because Unsubscribe called quitWithServer to tell the
forwarding loop to stop sending on sub.channel, but did not wait for the
loop to actually come down. This is fixed by adding an additional channel
to track the shutdown, on which Unsubscribe now waits.

Fixes #22322",TRUE,valid
61ff3e86b2d33f32566cae4f9bd1be973d84d757,Peter Szilagyi,peterke@gmail.com,2021-03-30T16:04:22Z,Peter Szilagyi,peterke@gmail.com,2021-03-30T16:04:22Z,"core/state/snapshot, ethdb: track deletions more accurately (#22582)

* core/state/snapshot, ethdb: track deletions more accurately

* core/state/snapshot: don't reset the iterator, leveldb's screwy

* ethdb: don't mess with the insert batches for now",TRUE,valid
3faae5defc0066a95c234da84462535aed1db463,Marius van der Wijden,m.vanderwijden@live.de,2021-03-30T13:52:03Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-30T13:52:03Z,"ethstats: avoid creating subscriptions on background goroutine (#22587)

This fixes an issue where the ethstats service could crash if geth was
started and then immediately stopped due to an internal error. The
cause of the crash was a nil subscription being returned by the backend,
because the background goroutine creating them was scheduled after
the backend had already shut down.

Moving the creation of subscriptions into the Start method, which runs
synchronously during startup of the node, means the returned subscriptions
can never be 'nil'.

Co-authored-by: Felix Lange <fjl@twurst.com>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
44fe466999ce7f8b02de7e83de955f8847342309,nebojsa94,nebojsa94@users.noreply.github.com,2021-03-30T13:38:53Z,nebojsa94,nebojsa94@users.noreply.github.com,2021-03-30T13:38:53Z,core/vm: fix Byzantium address list (#22603),TRUE,valid
59ac3c9fd30eb4134da60d0549cfd84b27a3a3f7,Martin Holst Swende,martin@swende.se,2021-03-30T11:57:21Z,Martin Holst Swende,martin@swende.se,2021-03-30T11:57:21Z,"cmd/geth: add db dumptrie command (#22563)

Adds the command ""geth db dumptrie <root> <seek> <max>"", to better help investigate the trie data",TRUE,valid
43a37680665aab365b1816890aaeb6b8601126be,Peter Szilagyi,peterke@gmail.com,2021-03-30T11:49:59Z,Peter Szilagyi,peterke@gmail.com,2021-03-30T11:49:59Z,"Merge pull request #22596 from holiman/snap_timelimits

eth/protocols/snap: try to prevent requests timing out",TRUE,valid
24588bacfd81bb991f9832f6557a34ae5078b06e,Marius van der Wijden,m.vanderwijden@live.de,2021-03-29T18:58:58Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-29T18:58:58Z,cmd/puppeth: specify working directory for nodejs 15 (#22549),TRUE,valid
b6912c10476bf24c25b780b91a892a71fba268b6,rene,41963722+renaynay@users.noreply.github.com,2021-03-29T18:54:49Z,rene,41963722+renaynay@users.noreply.github.com,2021-03-29T18:54:49Z,core: add BlockGen.GetBalance method  (#22589),TRUE,valid
7644795950481432f6ba230421d41349b69774e8,Martin Holst Swende,martin@swende.se,2021-03-29T12:17:35Z,Martin Holst Swende,martin@swende.se,2021-03-29T12:17:35Z,eth/protocols/snap: try to prevent requests timing out,TRUE,valid
76700ac892f6fe3d7865fbe2f724626c72a04227,gary rong,garyrong0905@gmail.com,2021-03-29T09:09:29Z,gary rong,garyrong0905@gmail.com,2021-03-29T09:09:29Z,"core/state/pruner: move the compaction out of the pruning procedure (#22579)

The main idea behind it is: the range compaction is very expensive
which can take a few hours to finish. During this long procedure,
a lot of exceptions can occur, e.g.
- Geth is killed manually
- Geth is killed because of machine crash
- etc

In order to minimize the effect of the exceptions, the compaction
is moved out of the pruning. So that even the compaction is not
finished, the pruning is regarded as done.",TRUE,valid
27056f62e57e55ae91cfac95d7af24d1f707fb99,Felix Lange,fjl@twurst.com,2021-03-26T21:15:20Z,Felix Lange,fjl@twurst.com,2021-03-26T21:15:20Z,"cmd/devp2p: update to newer cloudflare API client (#22588)

This upgrades the cloudflare client dependency to v0.14.0. The new
version changes the API because all methods now require a context
parameter. This change also reduces the log level of the 'Skipping...'
message to debug, following a similar change in the AWS deployer.",TRUE,valid
e7f3962612237a285495b470a214280e90962244,Peter Szilagyi,peterke@gmail.com,2021-03-26T21:14:16Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T21:14:16Z,"Merge pull request #22591 from karalabe/snap-detailed-timeout-logs

eth/protocols/snap: add peer id and req id to the timeout logs",TRUE,valid
099be0410048c65f885b9112f09238523fe19b1d,Peter Szilagyi,peterke@gmail.com,2021-03-26T20:29:22Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T20:29:22Z,eth/protocols/snap: add peer id and req id to the timeout logs,TRUE,valid
063f78c6bacc53a95de14b00bd6d509c7b75c7ad,Peter Szilagyi,peterke@gmail.com,2021-03-26T19:43:09Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T19:43:09Z,"Merge pull request #22590 from karalabe/nil-histogram

metrics/influxdb: don't push empty histograms, no measurement != 0",TRUE,valid
62379f02c61f459020a1fb8d7fdea4935a1d8701,Peter Szilagyi,peterke@gmail.com,2021-03-26T19:13:52Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T19:13:52Z,"metrics/influxdb: don't push empty histograms, no measurement != 0",TRUE,valid
cae6b5527e34befb05d21e2c3d635d82d8c32582,Felix Lange,fjl@twurst.com,2021-03-26T17:30:10Z,Felix Lange,fjl@twurst.com,2021-03-26T17:30:10Z,"cmd/geth, consensus/ethash: add support for --miner.notify.full flag (#22558)

The PR implements the --miner.notify.full flag that enables full pending block
notifications. When this flag is used, the block notifications sent to mining
endpoints contain the complete block header JSON instead of a work package
array.

Co-authored-by: AlexSSD7 <alexandersadovskyi7@protonmail.com>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
955727181be3d4f6d919440f9709e3bf736ff8a4,Zou Guangxian,zouguangxian@gmail.com,2021-03-26T17:06:25Z,Zou Guangxian,zouguangxian@gmail.com,2021-03-26T17:06:25Z,"eth: fix corner case in sync head determination (#21695)

This avoids synchronisation failures when the local header is ahead of
the local full block.",TRUE,valid
6477ea6502fe53cf6139f1cf3ec2b444e246cde8,Peter Szilagyi,peterke@gmail.com,2021-03-26T14:49:37Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T14:49:37Z,"Merge pull request #22586 from karalabe/resettting-histogram

eth/protocols, metrics: use resetting histograms for rare packets",TRUE,valid
2550e46269b05aa89127b06c1e18d51ebadd9da3,Peter Szilagyi,peterke@gmail.com,2021-03-26T14:14:12Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T14:14:12Z,"eth/protocols, metrics: use resetting histograms for rare packets",TRUE,valid
efe022976851281fcd785a1ee21f4cec07d5c43e,Peter Szilagyi,peterke@gmail.com,2021-03-26T12:26:51Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T12:26:51Z,"Merge pull request #22581 from karalabe/network-latency-monitoring

eth/protocols, metrics, p2p: add handler performance metrics",TRUE,valid
6d7ff6acea32b19b7c23c411748925a24873de9a,Peter Szilagyi,peterke@gmail.com,2021-03-26T12:00:06Z,Peter Szilagyi,peterke@gmail.com,2021-03-26T12:00:06Z,"eth/protocols, metrics, p2p: add handler performance metrics",TRUE,valid
54c0d573d75ab9baa239db3f071d6cb4d1ec6aad,Marius van der Wijden,m.vanderwijden@live.de,2021-03-25T14:37:51Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-25T14:37:51Z,eth: dump rpc gas cap and tx fee cap (#22574),TRUE,valid
4adf0b9187060539e8c0dd9eda2ad5a7d3c53cac,Peter Szilagyi,peterke@gmail.com,2021-03-25T11:33:53Z,Peter Szilagyi,peterke@gmail.com,2021-03-25T11:33:53Z,"Merge pull request #22573 from holiman/checkfreq

core: fix condition on header verification",TRUE,valid
bed74b38d985e48d1e8b4b8c132e97a8987e07ac,Felix Lange,fjl@twurst.com,2021-03-25T11:32:32Z,Felix Lange,fjl@twurst.com,2021-03-25T11:32:32Z,"cmd/devp2p: fix comparison of TXT record value (#22572)

* cmd/devp2p: fix comparison of TXT record value

The AWS API returns quoted DNS strings, so we must encode the new value
before comparing it against the existing record content.

* cmd/devp2p: add test

* cmd/devp2p: fix typo and rename val -> newValue",TRUE,valid
497448bf90226eb088a41d1d102ffbb6cb2d1d6f,Martin Holst Swende,martin@swende.se,2021-03-25T10:50:14Z,Martin Holst Swende,martin@swende.se,2021-03-25T10:50:14Z,core: fix condition on header verification,TRUE,valid
0fda25e471aa0e061396050c3d5e59fbaaf1e7b0,Martin Holst Swende,martin@swende.se,2021-03-25T09:13:14Z,Martin Holst Swende,martin@swende.se,2021-03-25T09:13:14Z,"eth/tracers, core: use scopecontext in tracers, provide statedb in capturestart (#22333)

Fixes the CaptureStart api to include the EVM, thus being able to set the statedb early on. This pr also exposes the struct we used internally in the interpreter to encapsulate the contract, mem, stack, rstack, so we pass it as a single struct to the tracer, and removes the error returns on the capture methods.",TRUE,valid
c5df05b9a9529cb17b4416e23cd24583335c6a9d,gary rong,garyrong0905@gmail.com,2021-03-24T14:33:34Z,gary rong,garyrong0905@gmail.com,2021-03-24T14:33:34Z,"eth/protocols/snap: fix the flaws in the snap sync (#22553)

* eth/protocols/snap: fix snap sync

* eth/protocols/snap: fix tests

* eth: fix tiny

* eth: update tests

* eth: update tests

* core/state/snapshot: testcase for #22534

* eth/protocols/snap: fix boundary loss on full-but-proven range

* core/state/snapshot: lintfix

* eth: address comment

* eth: fix handler

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
ab8fd4d005bd8d3fdf677f12c3b59f636c06f1a8,Felix Lange,fjl@twurst.com,2021-03-24T12:37:20Z,Felix Lange,fjl@twurst.com,2021-03-24T12:37:20Z,"p2p/dnsdisc: rate limit resolving before checking cache (#22566)

This makes the rate limit apply regardless of whether the node is
already cached.",TRUE,valid
15e6c27f8bcc6a30b47b956701d70f5eb14c1b7c,Chen Quan,terasum@163.com,2021-03-24T12:18:29Z,Chen Quan,terasum@163.com,2021-03-24T12:18:29Z,p2p: fix minor typo and remove fd parameter in checkInboundConn (#22547),TRUE,valid
5129cdc4f04889d3f21cadba5a246d62391301a6,Felix Lange,fjl@twurst.com,2021-03-24T11:32:39Z,Felix Lange,fjl@twurst.com,2021-03-24T11:32:39Z,"cmd/devp2p: skip ENR field tails properly in nodeset filter (#22565)

In Geth v1.10, we changed the structure of the ""les"" ENR entry. As a result, the DHT crawler that creates the DNS lists
no longer recognizes the les nodes, which is fixed in this commit. 

* cmd/devp2p: skip ENR field tails properly in nodeset filter
* cmd/devp2p: fix tail decoder for snap as well
* les: fix tail decoding in ""eth"" ENR entry",TRUE,valid
e862cbff95ef76daf49779cff94aecaa54538aa4,meowsbits,b5c6@protonmail.com,2021-03-23T09:41:23Z,meowsbits,b5c6@protonmail.com,2021-03-23T09:41:23Z,"internal/web3ext, node: migrate node admin API (Start|Stop)RPC->HTTP (#22461)

* internal/web3ext,node: migrate node admin API (Start|Stop)RPC->HTTP

Corresponding CLI flags --rpc have been moved to --http.

This moves the admin module HTTP RPC start/stop
methods to an equivalent namespace.

Rel https://github.com/ethereum/go-ethereum/pull/22263

Date: 2021-03-08 08:00:11-06:00
Signed-off-by: meows <b5c6@protonmail.com>

* internal/web3ext: fix startRPC/HTTP param count (4->5)

Date: 2021-03-16 06:13:23-05:00
Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
477ec753230778147af9682d6ffa595b005590e9,Peter Szilagyi,peterke@gmail.com,2021-03-23T09:37:32Z,Peter Szilagyi,peterke@gmail.com,2021-03-23T09:37:32Z,"Merge pull request #22513 from holiman/no_snap_bloom

eth/protocols/snap, eth/downloader: don't use bloom filter in snap sync",TRUE,valid
f304290b7dd771c07a7580741ec51567d1d9bcd9,Peter Szilagyi,peterke@gmail.com,2021-03-22T21:34:12Z,Peter Szilagyi,peterke@gmail.com,2021-03-22T21:34:12Z,"Merge pull request #22551 from karalabe/snapshot-parent-get-panic

core/state/snapshot: fix panic on missing parent",TRUE,valid
a31f6d54dfd49e277b78017c3c5e34d544687f7f,Peter Szilagyi,peterke@gmail.com,2021-03-22T20:41:28Z,Peter Szilagyi,peterke@gmail.com,2021-03-22T20:41:28Z,core/state/snapshot: fix panic on missing parent,TRUE,valid
8d6cc1674252371c7441279fd9d482d9416dc8aa,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-03-22T18:11:10Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-03-22T18:11:10Z,"cmd/geth: check block range against chain head in export cmd (#22387)

Check the input parameters against the actual head block, exit on error",TRUE,valid
0c70b83e0012ce0f9c7b76e61eef7dde5a360838,gary rong,garyrong0905@gmail.com,2021-03-22T18:06:30Z,gary rong,garyrong0905@gmail.com,2021-03-22T18:06:30Z,"all: add read-only option to database (#22407)

* all: add read-only option to database

* all: fixes tests

* cmd/geth: migrate flags

* cmd/geth: fix the compact

* cmd/geth: fix the format

* cmd/geth: fix log

* cmd: add chain-readonly

* core: add readonly notion to freezer

* core/rawdb: add log

* core/rawdb: fix freezer close

* cmd: fix

* cmd, core: construct db

* core: update tests",TRUE,valid
aab35600bcfbf1c7cfff39c4b7b8b594d19ce358,MrChico,martin.lundfall@protonmail.com,2021-03-22T08:29:32Z,MrChico,martin.lundfall@protonmail.com,2021-03-22T08:29:32Z,"accounts: eip-712 signing for ledger (#22378)

* accounts: eip-712 signing for ledger

* address review comments",TRUE,valid
eaccdba4ab310e3fb98edbc4b340b5e7c4d767fd,Derek Chiang,me@derekchiang.com,2021-03-22T07:10:51Z,Derek Chiang,me@derekchiang.com,2021-03-22T07:10:51Z,core: fix method comment for `txpool.requestReset` (#22543),TRUE,valid
ec73ec092d149e20e13cdb0f4b9dbefa9d21a19e,Tobias Hildebrandt,79341166+tobias-hildebrandt@users.noreply.github.com,2021-03-20T18:54:17Z,Tobias Hildebrandt,79341166+tobias-hildebrandt@users.noreply.github.com,2021-03-20T18:54:17Z,cmd/utils: fix compilation issue on openbsd (#22511),TRUE,valid
36b51b8156a4079952d646aac2800423dd8df163,rene,41963722+renaynay@users.noreply.github.com,2021-03-20T18:50:44Z,rene,41963722+renaynay@users.noreply.github.com,2021-03-20T18:50:44Z,"cmd/devp2p: add old block announcement test to eth test suite (#22474)

Add old block announcement test to eth test suite, checks to make sure old block announcement isn't propagated",TRUE,valid
5bf6612a2e19693b7faa032187f02a019cbea700,Martin Holst Swende,martin@swende.se,2021-03-20T09:35:22Z,Martin Holst Swende,martin@swende.se,2021-03-20T09:35:22Z,"cmd/devp2p: fix error in updating the cursor when collecting records for route53 (#22538)

This PR fixes a regression introduced in #22360, when we updated to the v2 of the AWS sdk, which causes current crawler to just get the same first 100 results over and over, and get stuck in a loop.",TRUE,valid
9429ab14727f55d3d0231a86a3cf37039ea79c9a,Felix Lange,fjl@twurst.com,2021-03-19T23:22:24Z,Felix Lange,fjl@twurst.com,2021-03-19T23:22:24Z,cmd/devp2p: add flag for AWS region (#22537),TRUE,valid
d3040a80d7a0721297cfac93b82e0e9428ddd3d1,rene,41963722+renaynay@users.noreply.github.com,2021-03-19T14:15:39Z,rene,41963722+renaynay@users.noreply.github.com,2021-03-19T14:15:39Z,cmd/devp2p/internal/ethtest: skip eth/66 tests when v66 not supported (#22460),TRUE,valid
c454717fa67df71b4a3c2f16cd0f6bc186148a04,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-03-19T12:32:57Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-03-19T12:32:57Z,core: fix potential race in chainIndexerTest (#22346),TRUE,valid
5bc0343ed3de7dd491edf42f9714ad6b93930408,Martin Holst Swende,martin@swende.se,2021-03-19T12:20:27Z,Martin Holst Swende,martin@swende.se,2021-03-19T12:20:27Z,"p2p/dnsdisc: fix flaw in dns size calculation (#22533)

This fixes the calculation of the tree branch factor. With the new
formula, we now creat at most 13 children instead of 30, ensuring
the TXT record size will be below 370 bytes.",TRUE,valid
e3a3f7cd6472f692f4fad97a302d09fb60f53430,Quest Henkart,qhenkart@gmail.com,2021-03-19T12:15:57Z,Quest Henkart,qhenkart@gmail.com,2021-03-19T12:15:57Z,"cmd/devp2p: use AWS-SDK v2 (#22360)

This updates the DNS deployer to use AWS SDK v2. Migration is relatively
seamless, although there were two locations that required a slightly
different approach to achieve the same results. In particular, waiting for
DNS change propagation is very different with SDK v2. 

This change also optimizes DNS updates by publishing all changes before
waiting for propagation.",TRUE,valid
d50e9d24be6ae410af7b5975f453456367a7b28c,jacksoom,lifengliu1994@gmail.com,2021-03-19T11:04:15Z,jacksoom,lifengliu1994@gmail.com,2021-03-19T11:04:15Z,consensus/ethash: remove unnecessary variable definition (#22512),TRUE,valid
345890a558257a76acb92a3ae88fbfb0dfea4520,ucwong,ucwong@126.com,2021-03-19T11:03:33Z,ucwong,ucwong@126.com,2021-03-19T11:03:33Z,"go.mod: upgrade goupnp to commit 0ca76305 (#22479)

This pulls in a fix to skip the broadcast on interfaces which are down.",TRUE,valid
a90861ae0c2a5d294fb4abb46eac65181d560264,ucwong,ucwong@126.com,2021-03-19T10:58:12Z,ucwong,ucwong@126.com,2021-03-19T10:58:12Z,"go.mod: upgrade goleveldb to commit 64b5b1c (#22436)

This pulls in a fix for a corruption issue when the process crashes
while a new manifest file is being added.",TRUE,valid
38ea7f2cf460fb12a5769f8c0767726334111b99,Martin Redmond,21436+reds@users.noreply.github.com,2021-03-19T10:56:10Z,Martin Redmond,21436+reds@users.noreply.github.com,2021-03-19T10:56:10Z,"accounts/abi/bind: add NoSend transact option (#22446)

This adds a new option to avoid sending the transaction which is
created by calling a bound contract method.",TRUE,valid
aa8b2189c6ad5148377076b3fab7ca5e0d8c0b62,meowsbits,b5c6@protonmail.com,2021-03-19T10:14:23Z,meowsbits,b5c6@protonmail.com,2021-03-19T10:14:23Z,"ethclient: fix error handling for header test (#22514)

The wantErr field was disused, and the error returned by HeaderByNumber
was not properly tested.

This simplifies the error checking using errors.Is and asserts that getting
an expected missing header returns ethereum.NotFound. Also adds a nil
check condition for header.Number before using big.Int's Sign method.",TRUE,valid
6a528fce3357176e2da2fe07b379842f596bb566,rene,41963722+renaynay@users.noreply.github.com,2021-03-19T09:57:23Z,rene,41963722+renaynay@users.noreply.github.com,2021-03-19T09:57:23Z,"cmd/devp2p/internal/ethtest: return request ID in BlockHeaders response (#22508)

This PR fixes an issue with the eth66 test suite where, during a readAndServe when
the test is manually responding to GetBlockHeader requests, it now responds
with a BlockHeaders eth66 packet that includes the inbound request ID.",TRUE,valid
117fa7d4a1ac0211b6a59aac5f3c5f7e5890e053,wuff1996,33193253+wuff1996@users.noreply.github.com,2021-03-19T07:49:24Z,wuff1996,33193253+wuff1996@users.noreply.github.com,2021-03-19T07:49:24Z,eth/protocols/snap: fix typo (#22530),TRUE,valid
410089afea1907d4abbf1dc4d1b42bda1094a5e5,Martin Holst Swende,martin@swende.se,2021-03-17T08:36:34Z,Martin Holst Swende,martin@swende.se,2021-03-17T08:36:34Z,"eth/protocols/snap, eth/downloader: don't use bloom filter in snap sync",TRUE,valid
91726e8aadeebc4bda8f136aebf4b5c7da8b9d74,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:55:43Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:55:43Z,les: allow either full enode strings or raw hex ids in the API (#22423),TRUE,valid
6d9707a458ad0d82e7f53722219656c432c9bb92,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:54:45Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:54:45Z,"les: fix UDP connection query (#22451)

This PR fixes multiple issues with the UDP connection pre-negotiation feature:
- the enable condition was wrong (it checked the existence of the DiscV5 struct where it wasn't initialized yet, disabling the feature even if discv5 was enabled)
- the server pool queried already connected nodes when the discovery iterators returned them again
- servers responded positively before they were synced and really willing to accept connections

Metrics are also added on the server side that count the positive and negative replies to served connection queries.",TRUE,valid
62d8022b513772666d92c3ba45312b61c403fea7,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:53:54Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-16T11:53:54Z,"les: fix UDP connection query (#22451)

This PR fixes multiple issues with the UDP connection pre-negotiation feature:

- the enable condition was wrong (it checked the existence of the DiscV5 struct where it wasn't initialized yet, disabling the feature even if discv5 was enabled)
- the server pool queried already connected nodes when the discovery iterators returned them again
- servers responded positively before they were synced and really willing to accept connections

Metrics are also added on the server side that count the positive and negative replies to served connection queries.",TRUE,valid
94ab4ea341c34ee692b707928a6da285fab85ea3,Martin Holst Swende,martin@swende.se,2021-03-16T10:15:14Z,Martin Holst Swende,martin@swende.se,2021-03-16T10:15:14Z,"core/rawdb: fix transaction indexing/unindexing hashing error (#22457)

* core/rawdb: more verbose error logs + better hashing

* core/rawdb: add failing testcase

* core/rawdb: properly hash transactions while indexing/unindexing

* core/rawdb: exit on error + better log msg",TRUE,valid
7cbf1d70a7428fdd247882a840c416c80c30454f,ligi,ligi@ligi.de,2021-03-16T08:55:03Z,ligi,ligi@ligi.de,2021-03-16T08:55:03Z,"cmd/clef (docs): fix image background (#22399)

Flatten the image so we do not have dark text on dark background",TRUE,valid
7076e8e42ff528e0ff058da3e357343dfb6fd71d,ligi,ligi@ligi.de,2021-03-16T08:53:43Z,ligi,ligi@ligi.de,2021-03-16T08:53:43Z,cmd/clef: docs - link to ethereum org repo (#22400),TRUE,valid
99830720f681e5120fc131daaf0ad74d329bb074,lightclient,14004106+lightclient@users.noreply.github.com,2021-03-16T08:48:54Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-03-16T08:48:54Z,"core/types: improve comments in new EIP-2718 code (#22402)

Responding to these comments:

    https://github.com/ethereum/go-ethereum/pull/21502/files#r579010962
    https://github.com/ethereum/go-ethereum/pull/21502/files#r579021565
    https://github.com/ethereum/go-ethereum/pull/21502/files#r579023510
    https://github.com/ethereum/go-ethereum/pull/21502/files#r578983734",TRUE,valid
bc47993692a446437b0d91cae758fb6be664050e,Martin Holst Swende,martin@swende.se,2021-03-16T08:43:33Z,Martin Holst Swende,martin@swende.se,2021-03-16T08:43:33Z,"tests/fuzzers: fix goroutine leak in les fuzzer (#22455)

The oss-fuzz fuzzer has been reporting some failing testcases for les. They're all spurious, and cannot reliably be reproduced. However, running them showed that there was a goroutine leak: the tests created a lot of new clients, which started an exec queue that was never torn down.

This PR fixes the goroutine leak, and also a log message which was erroneously formatted.",TRUE,valid
faacc8e0faa89f5b3a7055e86924a95b6a9be944,Martin Holst Swende,martin@swende.se,2021-03-15T14:25:45Z,Martin Holst Swende,martin@swende.se,2021-03-15T14:25:45Z,"cmd/geth, eth/downloader: remove copydb command (#22501)

* cmd/geth: remove copydb command

* eth/downloader: remove fakepeer",TRUE,valid
c6d45009f1ab46f61ebaa66d71d08d48097cc1a9,Martin Holst Swende,martin@swende.se,2021-03-14T15:13:25Z,Martin Holst Swende,martin@swende.se,2021-03-14T15:13:25Z,"eth, les: properly init statedb accesslist during tracing (#22480)

* eth/state, les/state: properly init statedb accesslist when tracing, fixes #22475

* eth: review comments

* eth/tracers: fix compilation err

* eth/tracers: apply @karalabe's suggested fix",TRUE,valid
3f74c8e0e504fe7606bc970dff71cf1266a4a9ed,Martin Holst Swende,martin@swende.se,2021-03-13T20:33:30Z,Martin Holst Swende,martin@swende.se,2021-03-13T20:33:30Z,cmd/devp2p: better testcase failure output for ethtests (#22482),TRUE,valid
6387c520b724525861539c43b8da98372fc42534,michael1011,me@michael1011.at,2021-03-12T09:16:19Z,michael1011,me@michael1011.at,2021-03-12T09:16:19Z,cmd/geth: add ancient datadir flag to snapshot subcommands (#22486),TRUE,valid
aae7660410f0ef90279e14afaaf2f429fdc2a186,Felix Lange,fjl@twurst.com,2021-03-11T14:09:25Z,Felix Lange,fjl@twurst.com,2021-03-11T14:09:25Z,"p2p/enr: fix decoding of incomplete lists (#22484)

Given a list of less than two elements DecodeRLP returned rlp.EOL,
leading to issues in outer decoders.",TRUE,valid
22082f9e565665f7da045b9ff708e4698f383c77,gary rong,garyrong0905@gmail.com,2021-03-09T09:50:25Z,gary rong,garyrong0905@gmail.com,2021-03-09T09:50:25Z,cmd: extend dumpgenesis to support network flags on the cmd (#22406),TRUE,valid
3d299b746893e39f580dfcca3cef90604d05f4b6,Martin Holst Swende,martin@swende.se,2021-03-09T08:04:03Z,Martin Holst Swende,martin@swende.se,2021-03-09T08:04:03Z,"les: fix errors in metric namespace (#22459)

* les: add trailing slash to metric namespace

* les: omit '.' in metric namespace",TRUE,valid
be87f769f676cbe3bf028e856160396ed08c64fc,Marius van der Wijden,m.vanderwijden@live.de,2021-03-08T13:23:28Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-08T13:23:28Z,core/types: reduce allocations in GasPriceCmp (#22456),TRUE,valid
182670849eafdde729d009ec99d12358f996fbd0,Peter Szilagyi,peterke@gmail.com,2021-03-08T09:34:08Z,Peter Szilagyi,peterke@gmail.com,2021-03-08T09:34:08Z,params: begin v1.10.2 release cycle,TRUE,valid
c2d2f4ed8f232bb11663a1b01a2e578aa22f24bd,Peter Szilagyi,peterke@gmail.com,2021-03-08T09:32:20Z,Peter Szilagyi,peterke@gmail.com,2021-03-08T09:32:20Z,params: release Geth v1.10.1,TRUE,valid
5aba9461646e4b0ef45a4d78287b23385d5cdd7b,Peter Szilagyi,peterke@gmail.com,2021-03-07T20:27:53Z,Peter Szilagyi,peterke@gmail.com,2021-03-07T20:27:53Z,"Merge pull request #22452 from holiman/testupdate_berlin

tests: update reference tests with 2315 removed from Berlin",TRUE,valid
72b8cacf132cb6deed7ae3352ccbf32b9d429417,Martin Holst Swende,martin@swende.se,2021-03-07T19:55:01Z,Martin Holst Swende,martin@swende.se,2021-03-07T19:55:01Z,tests: update reference tests with 2315 removed from Berlin,TRUE,valid
44c0bb2b44ca71790ccf8a842eccaa72619a2a02,Peter Szilagyi,peterke@gmail.com,2021-03-07T17:39:11Z,Peter Szilagyi,peterke@gmail.com,2021-03-07T17:39:11Z,"Merge pull request #22426 from ethereum/revert-22413-unship-berlin

Revert ""core/forkid, params: unset Berlin fork number""",TRUE,valid
658cb9fc4fc6d3667cf2174ac498390c299794f5,Peter Szilagyi,peterke@gmail.com,2021-03-07T17:38:49Z,Peter Szilagyi,peterke@gmail.com,2021-03-07T17:38:49Z,"Merge pull request #22414 from karalabe/unship-2315

core, eth: unship EIP 2315",TRUE,valid
dab90e4d42b5ed76b5a2422f87249ebfede2a06c,Peter Szilagyi,peterke@gmail.com,2021-03-04T12:03:54Z,Peter Szilagyi,peterke@gmail.com,2021-03-04T12:03:54Z,"Merge pull request #22432 from karalabe/add-hirsute

build: add support for Ubuntu Hirsute Hippo",TRUE,valid
5b95453ef2a52820147332af2c0d98432f470c0d,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:57:02Z,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:57:02Z,build: add support for Ubuntu Hirsute Hippo,TRUE,valid
89026d5d70835a6587577fcd96f1d49c5aa4e909,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:12:03Z,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:12:03Z,"Merge pull request #22431 from karalabe/builder-fix-ppa

build: fix PPA failure due to updated debsrc",TRUE,valid
de61da99c49146200b0f0db07dd2be6afe1232ec,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:04:50Z,Peter Szilagyi,peterke@gmail.com,2021-03-04T11:04:50Z,build: fix PPA failure due to updated debsrc,TRUE,valid
9230ca4924ef3a75f1653d828a2cd845d54977e6,Peter Szilagyi,peterke@gmail.com,2021-03-04T08:44:37Z,Peter Szilagyi,peterke@gmail.com,2021-03-04T08:44:37Z,"Revert ""core/forkid, params: unset Berlin fork number (#22413)""

This reverts commit ba999105ef89473cfe39e5e53354f7099e67a290.",FALSE,unsigned
63385374ec0e0a513ff30b9360471769e937244a,Felix Lange,fjl@twurst.com,2021-03-03T17:01:31Z,Felix Lange,fjl@twurst.com,2021-03-03T17:01:31Z,params: begin v1.10.1 release cycle,FALSE,unsigned
56dec25ae26bf749b93c3ea69538fabea60c5768,Felix Lange,fjl@twurst.com,2021-03-03T16:44:17Z,Felix Lange,fjl@twurst.com,2021-03-03T16:44:17Z,params: release geth 1.10.0 stable,FALSE,unsigned
cd316d7c7158f1ffc99910c8c07b951ec05ed067,Marius van der Wijden,m.vanderwijden@live.de,2021-03-03T14:50:07Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-03T14:50:07Z,"tests: update to latest tests (#22290)

This updates the consensus tests to commit 31d6630 and
adds support for access list transactions in the test runner.

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
5a81dd97d5f3347457e640631564fa5b893720c2,gary rong,garyrong0905@gmail.com,2021-03-03T14:08:14Z,gary rong,garyrong0905@gmail.com,2021-03-03T14:08:14Z,"cmd: retire whisper flags (#22421)

* cmd: retire whisper flags

* cmd/geth: remove whisper configs",TRUE,valid
b24804d88cdbd38edc85ee9f2afaa9e6cb7a767e,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-03T14:05:24Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-03T14:05:24Z,les: fix nodiscover option on the client side (#22422),TRUE,valid
ba999105ef89473cfe39e5e53354f7099e67a290,Peter Szilagyi,peterke@gmail.com,2021-03-03T10:05:27Z,Peter Szilagyi,peterke@gmail.com,2021-03-03T10:05:27Z,"core/forkid, params: unset Berlin fork number (#22413)",TRUE,valid
07e907c7d4ce01fff663aa7b5a378f647518996f,gary rong,garyrong0905@gmail.com,2021-03-03T10:04:50Z,gary rong,garyrong0905@gmail.com,2021-03-03T10:04:50Z,"cmd/utils: fix txlookuplimit for archive node (#22419)

* cmd/utils: fix exclusive check for archive node

* cmd/utils: set the txlookuplimit to 0",TRUE,valid
c539a052bd5a31dfaeabf65d789b691f5d03f300,gary rong,garyrong0905@gmail.com,2021-03-03T10:04:25Z,gary rong,garyrong0905@gmail.com,2021-03-03T10:04:25Z,params: update chts (#22418),TRUE,valid
0540d3c6f60d1cba6a3dd384790f5d1fa0d799bd,Marius van der Wijden,m.vanderwijden@live.de,2021-03-03T07:42:59Z,Marius van der Wijden,m.vanderwijden@live.de,2021-03-03T07:42:59Z,cmd/geth: put allowUnsecureTx flag in RPC section (#22412),TRUE,valid
430f69e01eb33a1b2f4f3c9372da14d01aaba62e,Peter Szilagyi,peterke@gmail.com,2021-03-02T21:51:03Z,Peter Szilagyi,peterke@gmail.com,2021-03-02T21:51:03Z,core/vm/runtime: more unshipping,TRUE,valid
7834e4a278038e57b741ee826b3a46ff9d809fcc,Peter Szilagyi,peterke@gmail.com,2021-03-02T21:40:57Z,Peter Szilagyi,peterke@gmail.com,2021-03-02T21:40:57Z,"core, eth: unship EIP 2315",TRUE,valid
19d7a37abb9f3b9bf1a94baf6bd8c7d5042e54f8,gary rong,garyrong0905@gmail.com,2021-03-01T09:26:10Z,gary rong,garyrong0905@gmail.com,2021-03-01T09:26:10Z,core/rawdb: fix the transaction indexer (#22395),TRUE,valid
d96870428f116494d5190a8e595189e283dd144b,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-01T09:24:20Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-03-01T09:24:20Z,"les: UDP pre-negotiation of available server capacity (#22183)

This PR implements the first one of the ""lespay"" UDP queries which
is already useful in itself: the capacity query. The server pool is making
use of this query by doing a cheap UDP query to determine whether it is
worth starting the more expensive TCP connection process.",TRUE,valid
498458b4102c0d32d7453035a115e6b9df5e485d,Martin Holst Swende,martin@swende.se,2021-02-26T15:33:37Z,Martin Holst Swende,martin@swende.se,2021-02-26T15:33:37Z,core/state: fix eta calculation on pruning (#22386),TRUE,valid
3822b09904edcd92bc203b5739115208daa38765,Marius van der Wijden,m.vanderwijden@live.de,2021-02-26T14:28:34Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-26T14:28:34Z,"accounts/keystore: use github.com/google/uuid (#22217)

This replaces the github.com/pborman/uuid dependency with
github.com/google/uuid because the former is only a wrapper for
the latter (since v1.0.0).

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
744707a490705f292b0558aa6807b3848a9c4bf9,Peter Szilagyi,peterke@gmail.com,2021-02-26T13:04:56Z,Peter Szilagyi,peterke@gmail.com,2021-02-26T13:04:56Z,"Merge pull request #22380 from karalabe/berlin

all: define and enable the Berlin hard fork on all networks",TRUE,valid
27b31371d46bc932853cce36078b28a53088b2b2,Felix Lange,fjl@twurst.com,2021-02-26T12:40:35Z,Felix Lange,fjl@twurst.com,2021-02-26T12:40:35Z,"rpc: add separate size limit for websocket (#22385)

This makes the WebSocket message size limit independent of the
limit used for HTTP requests. The new limit for WebSocket messages 
is 15MB.",TRUE,valid
092856267067dd78b527a773f5b240d5c9f5693a,Peter Szilagyi,peterke@gmail.com,2021-02-25T07:10:30Z,Peter Szilagyi,peterke@gmail.com,2021-02-25T07:10:30Z,all: define Berlin hard fork spec,TRUE,valid
dc109cce26da8a93f74a998f9dd7fc2ac0ab98d2,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-25T20:08:34Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-25T20:08:34Z,"les: move server pool to les/vflux/client (#22377)

* les: move serverPool to les/vflux/client

* les: add metrics

* les: moved ValueTracker inside ServerPool

* les: protect against node registration before server pool is started

* les/vflux/client: fixed tests

* les: make peer registration safe",TRUE,valid
de9465f991916e183a504ce79988c6cef544f7f1,rene,41963722+renaynay@users.noreply.github.com,2021-02-25T17:36:01Z,rene,41963722+renaynay@users.noreply.github.com,2021-02-25T17:36:01Z,"cmd/devp2p: add eth66 test suite (#22363)

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
bbfb1e4008a359a8b57ec654330c0e674623e52f,lightclient,14004106+lightclient@users.noreply.github.com,2021-02-25T14:26:57Z,lightclient,14004106+lightclient@users.noreply.github.com,2021-02-25T14:26:57Z,"all: add support for EIP-2718, EIP-2930 transactions (#21502)

This adds support for EIP-2718 typed transactions as well as EIP-2930
access list transactions (tx type 1). These EIPs are scheduled for the
Berlin fork.

There very few changes to existing APIs in core/types, and several new APIs
to deal with access list transactions. In particular, there are two new
constructor functions for transactions: types.NewTx and types.SignNewTx.
Since the canonical encoding of typed transactions is not RLP-compatible,
Transaction now has new methods for encoding and decoding: MarshalBinary
and UnmarshalBinary.

The existing EIP-155 signer does not support the new transaction types.
All code dealing with transaction signatures should be updated to use the
newer EIP-2930 signer. To make this easier for future updates, we have
added new constructor functions for types.Signer: types.LatestSigner and
types.LatestSignerForChainID. 

This change also adds support for the YoloV3 testnet.

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Felix Lange <fjl@twurst.com>
Co-authored-by: Ryan Schneider <ryanleeschneider@gmail.com>",TRUE,valid
7a3c890009535bc3b87b01d9af19566e654be9da,gary rong,garyrong0905@gmail.com,2021-02-25T13:24:04Z,gary rong,garyrong0905@gmail.com,2021-02-25T13:24:04Z,"les, light: improve txstatus retrieval (#22349)

Transaction unindexing will be enabled by default as of 1.10, which causes tx status retrieval will be broken without this PR. 

This PR introduces a retry mechanism in TxStatus retrieval.",TRUE,valid
378e961d857e02a1ce032727da08dfebf2d96cac,gary rong,garyrong0905@gmail.com,2021-02-25T12:55:07Z,gary rong,garyrong0905@gmail.com,2021-02-25T12:55:07Z,"cmd, eth, les: enable serving light clients when non-synced (#22250)

This PR adds a more CLI flag, so that the les-server can serve light clients even the local node is not synced yet.

This functionality is needed in some testing environments(e.g. hive). After launching the les server, no more blocks will be imported so the node is always marked as ""non-synced"".",TRUE,valid
96d9306413a4effc5b887582945ac4561d299750,Peter Szilagyi,peterke@gmail.com,2021-02-25T11:03:07Z,Peter Szilagyi,peterke@gmail.com,2021-02-25T11:03:07Z,"Merge pull request #22381 from karalabe/lower-error-log

eth/protocols/snap: lower abortion and resumption logs to debug",TRUE,valid
b2b5c82acaa89387960805d53359629e854814bd,Peter Szilagyi,peterke@gmail.com,2021-02-25T10:56:18Z,Peter Szilagyi,peterke@gmail.com,2021-02-25T10:56:18Z,eth/protocols/snap: lower abortion and resumption logs to debug,TRUE,valid
8e547eecd592fe3306e39a4fea703dc1307b8651,rene,41963722+renaynay@users.noreply.github.com,2021-02-24T13:07:58Z,rene,41963722+renaynay@users.noreply.github.com,2021-02-24T13:07:58Z,"cmd/utils: remove deprecated command line flags (#22263)

This removes support for all deprecated flags except --rpc*.",TRUE,valid
f54dc4ab3db0592cf81b3b7ca2ed7a5136ea38a7,Peter Szilagyi,peterke@gmail.com,2021-02-24T09:36:08Z,Peter Szilagyi,peterke@gmail.com,2021-02-24T09:36:08Z,travis: manually install Android since Travis is stale (#22373),TRUE,valid
bf5b379b13056db09405123054b5625e24189582,Peter Szilagyi,peterke@gmail.com,2021-02-23T18:52:40Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T18:52:40Z,"Merge pull request #22369 from karalabe/android-bionic-builder

travis: bump builders to Bionic",TRUE,valid
70afe15f680250e69b459d8d9539f594b5fb7491,Peter Szilagyi,peterke@gmail.com,2021-02-23T18:31:09Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T18:31:09Z,travis: bump builders to Bionic,TRUE,valid
b502c86662b22a80dc4b9e1f6ecda66baaacc848,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:58:37Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:58:37Z,"Merge pull request #22368 from karalabe/ndk-bump

travis: bump Android NDK version",TRUE,valid
c9aa2670499a874a28c44424c29268889b18d027,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:57:39Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:57:39Z,travis: bump Android NDK version,TRUE,valid
cdb6a84339c0b622df7c2d79d0d24f2fc2ab2fbe,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:29:36Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T17:29:36Z,"Merge pull request #22350 from karalabe/disable-preimage-collection

cmd/utils: disable caching preimages by default",TRUE,valid
4ee8d2d3054872b6aa7201a77cc5663d35c7476f,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:42:43Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:42:43Z,"travis, appveyor, build, Dockerfile: bump Go to 1.16 (#22351)

* travis, appveyor, build: bump Go to 1.16

* accounts/abi/bind: fix up Go mod files for Go 1.16",TRUE,valid
2743fb042945add8dfe4ca782310e123318c7d79,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:28:24Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:28:24Z,Dockerfile: bump to Go 1.16 base images,TRUE,valid
2d1a0e9b03f636babe8785dc833960a5d11e4403,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:12:25Z,Peter Szilagyi,peterke@gmail.com,2021-02-23T16:12:25Z,accounts/abi/bind: fix up Go mod files for Go 1.16,TRUE,valid
142fbcfd6f4fad825e2ce2684f9d5a487ffb3f84,Marius van der Wijden,m.vanderwijden@live.de,2021-02-23T12:09:19Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-23T12:09:19Z,"internal/ethapi: reject non-replay-protected txs over RPC (#22339)

This PR prevents users from submitting transactions without EIP-155 enabled. This behaviour can be overridden by specifying the flag --rpc.allow-unprotected-txs=true.",TRUE,valid
c4a2b682ff3ea2465417671de76c4d1e9a29fef8,Martin Holst Swende,martin@swende.se,2021-02-23T10:27:32Z,Martin Holst Swende,martin@swende.se,2021-02-23T10:27:32Z,"cmd/geth: add db commands stats, compact, put, get, delete (#22014)

This PR introduces:

- db.put to put a value into the database
- db.get to read a value from the database
- db.delete to delete a value from the database
- db.stats to check compaction info from the database
- db.compact to trigger a db compaction

It also moves inspectdb to db.inspect.",TRUE,valid
3ecfdccd9a0065365a00e7c8b60de7ee2df4e40b,gary rong,garyrong0905@gmail.com,2021-02-22T13:33:11Z,gary rong,garyrong0905@gmail.com,2021-02-22T13:33:11Z,les: clean up server handler (#22357),TRUE,valid
8f03e3b107c0f7a39de31a9e7deb658431a937ac,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-20T09:40:38Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-20T09:40:38Z,"tests/fuzzers/les: add fuzzer for les server handler (#22282)

* les: refactored server handler

* tests/fuzzers/les: add fuzzer for les server handler

* tests, les: update les fuzzer

tests: update les fuzzer

tests/fuzzer/les: release resources

tests/fuzzer/les: pre-initialize all resources

* les: refactored server handler and fuzzer

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
8647233a8ec2a2410a078013ca12c38fdc229866,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-19T14:53:12Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-19T14:53:12Z,"les: fix balance expiration (#22343)

* les/lespay/server: fix balance expiration and add test

* les: move client balances to a new db

* les: rename lespayDb to lesDb",TRUE,valid
c5023e1dc56f3ced0e3a24733e533bf962515844,Peter Szilagyi,peterke@gmail.com,2021-02-19T14:03:17Z,Peter Szilagyi,peterke@gmail.com,2021-02-19T14:03:17Z,"travis, appveyor, build: bump Go to 1.16",TRUE,valid
ca76db6116b64bb10c83085a70898750668593d2,Peter Szilagyi,peterke@gmail.com,2021-02-19T13:53:05Z,Peter Szilagyi,peterke@gmail.com,2021-02-19T13:53:05Z,cmd/utils: disable caching preimages by default,TRUE,valid
c027507e036683f555f63baa4cd02a81696fea6c,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-19T13:44:16Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-19T13:44:16Z,les: renamed lespay to vflux (#22347),TRUE,valid
d36276d85e39f7a0071d3f5d948785e008ca1519,Felix Lange,fjl@twurst.com,2021-02-19T08:54:46Z,Felix Lange,fjl@twurst.com,2021-02-19T08:54:46Z,"p2p/dnsdisc: fix hot-spin when all trees are empty (#22313)

In the random sync algorithm used by the DNS node iterator, we first pick a random
tree and then perform one sync action on that tree. This happens in a loop until any
node is found. If no trees contain any nodes, the iterator will enter a hot loop spinning
at 100% CPU.

The fix is complicated. The iterator now checks if a meaningful sync action can
be performed on any tree. If there is nothing to do, it waits for the next root record
recheck time to arrive and then tries again.

Fixes #22306",TRUE,valid
6ec15610443b28eabf665199f1dc5be2b3e3f7cb,Martin Holst Swende,martin@swende.se,2021-02-18T16:54:29Z,Martin Holst Swende,martin@swende.se,2021-02-18T16:54:29Z,"eth: implement eth66 (#22241)

* eth/protocols/eth: split up the eth protocol handlers

* eth/protocols/eth: define eth-66 protocol messages

* eth/protocols/eth: poc implement getblockheaders on eth/66

* eth/protocols/eth: implement remaining eth-66 handlers

* eth/protocols: define handler map for eth 66

* eth/downloader: use protocol constants from eth package

* eth/protocols/eth: add ETH66 capability

* eth/downloader: tests for eth66

* eth/downloader: fix error in tests

* eth/protocols/eth: use eth66 for outgoing requests

* eth/protocols/eth: remove unused error type

* eth/protocols/eth: define protocol length

* eth/protocols/eth: fix pooled tx over eth66

* protocols/eth/handlers: revert behavioural change which caused tests to fail

* eth/downloader: fix failing test

* eth/protocols/eth: add testcases + fix flaw with header requests

* eth/protocols: change comments

* eth/protocols/eth: review fixes + fixed flaw in RequestOneHeader

* eth/protocols: documentation

* eth/protocols/eth: review concerns about types",TRUE,valid
b1835b3855ebee0aa8c63d18b8f0671168ceced5,Martin Holst Swende,martin@swende.se,2021-02-18T09:40:19Z,Martin Holst Swende,martin@swende.se,2021-02-18T09:40:19Z,node: always show websocket url in logs (#22307),TRUE,valid
9ec32a9e7b2a39103c905d57e270d99463e6aa99,Or Neeman,oneeman@gmail.com,2021-02-18T09:19:49Z,Or Neeman,oneeman@gmail.com,2021-02-18T09:19:49Z,"rlp: handle case of normal EOF in Stream.readFull (#22336)

io.Reader may return n > 0 and io.EOF at the end of the input stream.
readFull did not handle this correctly, looking only at the error. This fixes
it to check for n == len(buf) as well.",TRUE,valid
52e5c38aa5dcc01566bb6d05a5312b5b642899b4,Martin Holst Swende,martin@swende.se,2021-02-18T08:05:47Z,Martin Holst Swende,martin@swende.se,2021-02-18T08:05:47Z,"core/state: copy the snap when copying the state (#22340)

* core/state: copy the snap when copying the state

* core/state: deep-copy snap stuff during state Copy",TRUE,valid
e01096f531862b982833732514376cead8d58e82,Martin Holst Swende,martin@swende.se,2021-02-17T13:59:00Z,Martin Holst Swende,martin@swende.se,2021-02-17T13:59:00Z,"eth/handler, broadcast: optimize tx broadcast mechanism (#22176)

This PR optimizes the broadcast loop. Instead of iterating twice through a given set of transactions to weed out which peers have and which do not have a tx, to send/announce transactions, we do it only once.",TRUE,valid
1489c3f4942aa50bb97659d800e9c2840f285dfc,Peter Szilagyi,peterke@gmail.com,2021-02-16T14:30:07Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T14:30:07Z,"Merge pull request #22334 from karalabe/fix-snap-cancel

eth: fix snap sync cancellation",TRUE,valid
f9445e93bb72aedec953e65734ec18b4e1eaac3d,rene,41963722+renaynay@users.noreply.github.com,2021-02-16T14:23:03Z,rene,41963722+renaynay@users.noreply.github.com,2021-02-16T14:23:03Z,"cmd/devp2p/internal/ethtest: use shared message types (#22315)

This updates the eth protocol test suite to use the message type
definitions of the 'production' protocol implementation in eth/protocols/eth.",TRUE,valid
bfdff4c5b83cc09b2f91377f87e7757ddbe7fd63,Peter Szilagyi,peterke@gmail.com,2021-02-16T14:11:33Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T14:11:33Z,eth: fix snap sync cancellation,TRUE,valid
6291fc92307d8ab804a15f7eb2daceba32488a2e,Peter Szilagyi,peterke@gmail.com,2021-02-16T13:26:37Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T13:26:37Z,"Merge pull request #22331 from karalabe/enforce-min-snap-difflayers

core/state/snapshot: ensure Cap retains a min number of layers",TRUE,valid
9ec3329899a0ff62ed2f83c61b50140881a577a8,Peter Szilagyi,peterke@gmail.com,2021-02-16T07:04:07Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T07:04:07Z,core/state/snapshot: ensure Cap retains a min number of layers,TRUE,valid
915c614959024940515e044b2ea9c07317ce4b4a,Peter Szilagyi,peterke@gmail.com,2021-02-16T11:30:15Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T11:30:15Z,"Merge pull request #22332 from karalabe/fix-fastsync-restart-bloom-crash

trie: fix bloom crash on fast sync restart",TRUE,valid
f4fcd4f506661c7cece755b90b8a84e51d5925ac,Guillaume Ballet,gballet@gmail.com,2021-02-16T09:40:59Z,Guillaume Ballet,gballet@gmail.com,2021-02-16T09:40:59Z,rpc: increase the number of subscriptions in storm test (#22316),TRUE,valid
e991bdae2458dbee5a28addd188a897858aa34dd,Peter Szilagyi,peterke@gmail.com,2021-02-16T08:44:38Z,Peter Szilagyi,peterke@gmail.com,2021-02-16T08:44:38Z,trie: fix bloom crash on fast sync restart,TRUE,valid
77787802fe8f8415638480066ecace73037f1eed,Alex Mazalov,mazalov@gmail.com,2021-02-15T18:47:47Z,Alex Mazalov,mazalov@gmail.com,2021-02-15T18:47:47Z,cmd/geth: fix js unclean shutdown (#22302),TRUE,valid
08c878acd235fdc908b3a7a3c43dfc9fc5e9b2ef,Guillaume Ballet,gballet@gmail.com,2021-02-15T18:37:09Z,Guillaume Ballet,gballet@gmail.com,2021-02-15T18:37:09Z,"cmd/utils: add workaround for FreeBSD statfs quirk (#22310)

Make geth build on FreeBSD, fixes #22309.",TRUE,valid
7d1b711c7d0f27efd7772c81bb73b9b29720515a,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-12T19:48:18Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-02-12T19:48:18Z,les: enable les/4 and add tests (#22321),TRUE,valid
2fc465a7be6f29f75f0528d7867fe3e5f49c4e65,Peter Szilagyi,peterke@gmail.com,2021-02-12T13:34:35Z,Peter Szilagyi,peterke@gmail.com,2021-02-12T13:34:35Z,"Merge pull request #22319 from karalabe/fix-defer-leak

core: fix temp memory blowup caused by defers holding on to state",TRUE,valid
ef227c5f42a2e180b0e3b57d38ef5018fc8733d8,Peter Szilagyi,peterke@gmail.com,2021-02-12T10:45:34Z,Peter Szilagyi,peterke@gmail.com,2021-02-12T10:45:34Z,core: fix temp memory blowup caused by defers holding on to state,TRUE,valid
111abdcfbdc3c73b527589dce7863d3b93eca91d,rene,41963722+renaynay@users.noreply.github.com,2021-02-11T11:09:13Z,rene,41963722+renaynay@users.noreply.github.com,2021-02-11T11:09:13Z,cmd/devp2p: fix documentation for eth-test (#22298),TRUE,valid
1bbc8a1944312b91ca72a298c2438133906e9503,Peter Szilagyi,peterke@gmail.com,2021-02-10T14:02:35Z,Peter Szilagyi,peterke@gmail.com,2021-02-10T14:02:35Z,"Merge pull request #22293 from karalabe/txunindex-1year

cmd/utils, eth/ethconfig: unindex txs older than ~1 year",TRUE,valid
409b16e5abac3a48c21142fdfa68d33cf6c95fca,Peter Szilagyi,peterke@gmail.com,2021-02-08T18:44:05Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T18:44:05Z,"cmd/utils, eth/ethconfig: unindex txs older than ~1 year",TRUE,valid
cb3c7e431978f0bd5efb19b378aa9e42d940986d,Marius van der Wijden,m.vanderwijden@live.de,2021-02-10T12:12:13Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-10T12:12:13Z,"accounts/abi/bind: fixed unpacking error (#22230)

There was a dormant error with structured inputs that failed unpacking.
This commit fixes the error by switching casting to the better abi.ConvertType function.
It also adds a test for calling a view function that returns a struct",TRUE,valid
27786671d28705159f15cd458045d29d732110e5,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-02-09T09:42:55Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-02-09T09:42:55Z,"internal/debug: add switch to format logs with json (#22207)

adds a flag --log.json which if enabled makes the client format logs with JSON.",TRUE,valid
2fdba3aacb0f766345cbc8c4fd270e4da93b48e6,Peter Szilagyi,peterke@gmail.com,2021-02-09T09:01:21Z,Peter Szilagyi,peterke@gmail.com,2021-02-09T09:01:21Z,"Merge pull request #22294 from holiman/pruner_compact_fix

core/state/pruner: fix compaction range error",TRUE,valid
74dbc20260caac0159ca59bfad1f41321130e676,Martin Holst Swende,martin@swende.se,2021-02-08T19:31:52Z,Martin Holst Swende,martin@swende.se,2021-02-08T19:31:52Z,core/state/pruner: fix compaction range error,TRUE,valid
944d9014362c69303710aeb909fc44a63f159c29,Peter Szilagyi,peterke@gmail.com,2021-02-08T17:19:38Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T17:19:38Z,"Merge pull request #22291 from karalabe/fix-pruner-compaction

core/state/pruner: fix compaction after pruning",TRUE,valid
2728672c28183da21028379ea5497debe92325b4,Peter Szilagyi,peterke@gmail.com,2021-02-08T15:02:30Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T15:02:30Z,core/state/pruner: fix compaction after pruning,TRUE,valid
123e934e72dbbc63281858ec20c29beb6f70d9ba,Peter Szilagyi,peterke@gmail.com,2021-02-08T11:16:50Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T11:16:50Z,"Merge pull request #22288 from karalabe/1.10.unstable

params: just to make snapshots a bit more official",TRUE,valid
f566dd305e7db3a629a783ce89697f49c4ba4a75,gary rong,garyrong0905@gmail.com,2021-02-08T11:16:30Z,gary rong,garyrong0905@gmail.com,2021-02-08T11:16:30Z,"all: bloom-filter based pruning mechanism (#21724)

* cmd, core, tests: initial state pruner

core: fix db inspector

cmd/geth: add verify-state

cmd/geth: add verification tool

core/rawdb: implement flatdb

cmd, core: fix rebase

core/state: use new contract code layout

core/state/pruner: avoid deleting genesis state

cmd/geth: add helper function

core, cmd: fix extract genesis

core: minor fixes

contracts: remove useless

core/state/snapshot: plugin stacktrie

core: polish

core/state/snapshot: iterate storage concurrently

core/state/snapshot: fix iteration

core: add comments

core/state/snapshot: polish code

core/state: polish

core/state/snapshot: rebase

core/rawdb: add comments

core/rawdb: fix tests

core/rawdb: improve tests

core/state/snapshot: fix concurrent iteration

core/state: run pruning during the recovery

core, trie: implement martin's idea

core, eth: delete flatdb and polish pruner

trie: fix import

core/state/pruner: add log

core/state/pruner: fix issues

core/state/pruner: don't read back

core/state/pruner: fix contract code write

core/state/pruner: check root node presence

cmd, core: polish log

core/state: use HEAD-127 as the target

core/state/snapshot: improve tests

cmd/geth: fix verification tool

cmd/geth: use HEAD as the verification default target

all: replace the bloomfilter with martin's fork

cmd, core: polish code

core, cmd: forcibly delete state root

core/state/pruner: add hash64

core/state/pruner: fix blacklist

core/state: remove blacklist

cmd, core: delete trie clean cache before pruning

cmd, core: fix lint

cmd, core: fix rebase

core/state: fix the special case for clique networks

core/state/snapshot: remove useless code

core/state/pruner: capping the snapshot after pruning

cmd, core, eth: fixes

core/rawdb: update db inspector

cmd/geth: polish code

core/state/pruner: fsync bloom filter

cmd, core: print warning log

core/state/pruner: adjust the parameters for bloom filter

cmd, core: create the bloom filter by size

core: polish

core/state/pruner: sanitize invalid bloomfilter size

cmd: address comments

cmd/geth: address comments

cmd/geth: address comment

core/state/pruner: address comments

core/state/pruner: rename homedir to datadir

cmd, core: address comments

core/state/pruner: address comment

core/state: address comments

core, cmd, tests: address comments

core: address comments

core/state/pruner: release the iterator after each commit

core/state/pruner: improve pruner

cmd, core: adjust bloom paramters

core/state/pruner: fix lint

core/state/pruner: fix tests

core: fix rebase

core/state/pruner: remove atomic rename

core/state/pruner: address comments

all: run go mod tidy

core/state/pruner: avoid false-positive for the middle state roots

core/state/pruner: add checks for middle roots

cmd/geth: replace crit with error

* core/state/pruner: fix lint

* core: drop legacy bloom filter

* core/state/snapshot: improve pruner

* core/state/snapshot: polish concurrent logs to report ETA vs. hashes

* core/state/pruner: add progress report for pruning and compaction too

* core: fix snapshot test API

* core/state: fix some pruning logs

* core/state/pruner: support recovering from bloom flush fail

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
d86906f1e6040e4e57c164fc5dfab0f97329b229,Peter Szilagyi,peterke@gmail.com,2021-02-08T11:03:06Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T11:03:06Z,params: just to make snapshots a bit more official,TRUE,valid
bbe694fc52705e3cb128f21453ae1fcea6873fb2,Peter Szilagyi,peterke@gmail.com,2021-02-08T10:58:54Z,Peter Szilagyi,peterke@gmail.com,2021-02-08T10:58:54Z,"Merge pull request #22280 from karalabe/snapshot-default

cmd/utils: enable snapshots by default",TRUE,valid
477fd420b393e3e5b962ac8c5af90a1add54d9d7,isdyaufh8o7cq,sebaskil@icloud.com,2021-02-08T10:36:49Z,isdyaufh8o7cq,sebaskil@icloud.com,2021-02-08T10:36:49Z,"metrics: fix cast omission in cpu_syscall.go (#22262)

fixes an regression which caused build failure on certain platforms",TRUE,valid
994cdc69c8ab79b97f490c64721f2908df2070d7,Peter Szilagyi,peterke@gmail.com,2021-02-07T18:13:59Z,Peter Szilagyi,peterke@gmail.com,2021-02-07T18:13:59Z,cmd/utils: enable snapshots by default,TRUE,valid
e74bd587f730fcdb5a9b625390da8aa85a2cbbc8,Guillaume Ballet,gballet@gmail.com,2021-02-05T18:44:34Z,Guillaume Ballet,gballet@gmail.com,2021-02-05T18:44:34Z,consensus: remove seal verification from the consensus engine interface (#22274),TRUE,valid
7ed860d4f17884ac9f1f6b927244a70e2e92eb94,Martin Holst Swende,martin@swende.se,2021-02-05T13:15:22Z,Martin Holst Swende,martin@swende.se,2021-02-05T13:15:22Z,"eth: don't wait for snap registration if we're not running snap (#22272)

Prevents a situation where we (not running snap) connects with a peer running snap, and get stalled waiting for snap registration to succeed (which will never happen), which cause a waitgroup wait to halt shutdown",TRUE,valid
fba5a63afe0993da70896c763b4fdfa953e066ff,Marius van der Wijden,m.vanderwijden@live.de,2021-02-05T12:51:53Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-05T12:51:53Z,internal/ethapi: fix typo in comment (#22271),TRUE,valid
098a2b6e26e59ce09c72869f7919724ba7fd97ee,gary rong,garyrong0905@gmail.com,2021-02-05T12:51:15Z,gary rong,garyrong0905@gmail.com,2021-02-05T12:51:15Z,"eth: move eth.Config to a common package (#22205)

This moves the eth config definition into a separate package, eth/ethconfig. 
Packages eth and les can now import this common package instead of
importing eth from les, reducing dependencies.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
28121324ac42ad88b911da514ae2c092f5718f5d,Marius van der Wijden,m.vanderwijden@live.de,2021-02-05T10:35:55Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-05T10:35:55Z,internal/ethapi: comment nitpick (#22270),TRUE,valid
54735a67239d19d3f29e3f8ebd348a6c88ed31fa,Marius van der Wijden,m.vanderwijden@live.de,2021-02-03T14:04:28Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-03T14:04:28Z,"fuzzers: added consensys/gurvy library to bn256 differential fuzzer (#21812)

This pr adds consensys' gurvy bn256 variant into the code for differential fuzzing.",TRUE,valid
3512b41c5cd024421a2048c70688c1b82f122dff,Marius van der Wijden,m.vanderwijden@live.de,2021-02-03T10:02:35Z,Marius van der Wijden,m.vanderwijden@live.de,2021-02-03T10:02:35Z,"core: reset txpool state on sethead (#22247)

fixes an issue where local transactions that were included in the chain before a SetHead were rejected if resubmitted, since the txpool had not reset the state to the current (older) state.",TRUE,valid
83e4c49e2b8d3fa83675cf5647e45a6ade7b8b4f,ucwong,ucwong@126.com,2021-02-02T12:09:23Z,ucwong,ucwong@126.com,2021-02-02T12:09:23Z,"trie : use trie.NewStackTrie instead of new(trie.Trie) (#22246)

The PR makes use of the stacktrie, which is is more lenient on resource consumption, than the regular trie, in cases where we only need it for DeriveSha",TRUE,valid
ef84da8481feedce8616c43ec48e15b7a4838290,Alex Prut,1648497+alexprut@users.noreply.github.com,2021-02-02T09:32:44Z,Alex Prut,1648497+alexprut@users.noreply.github.com,2021-02-02T09:32:44Z,"all: remove unneeded parentheses (#21921)

* remove uneeded convertion type

* remove redundant type in composite literal

* omit explicit type where implicit

* remove unused redundant parenthesis

* remove redundant import alias duktape",TRUE,valid
4eae0c6b6f2bcaa450df50077bb991e3bbbb106f,rene,41963722+renaynay@users.noreply.github.com,2021-02-02T09:05:46Z,rene,41963722+renaynay@users.noreply.github.com,2021-02-02T09:05:46Z,"cmd/geth, node: allow configuring JSON-RPC on custom path prefix (#22184)

This change allows users to set a custom path prefix on which to mount the http-rpc
or ws-rpc handlers via the new flags --http.rpcprefix and --ws.rpcprefix.

Fixes #21826

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
e3430ac7df8a7c232f6374120eb1297c7fdfe5ee,Peter Szilagyi,peterke@gmail.com,2021-02-02T08:44:36Z,Peter Szilagyi,peterke@gmail.com,2021-02-02T08:44:36Z,"eth: check snap satelliteness, delegate drop to eth (#22235)

* eth: check snap satelliteness, delegate drop to eth

* eth: better handle eth/snap satellite relation, merge reg/unreg paths",TRUE,valid
3c728fb129210c044ae71aad55e4c059d70a318d,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-02-01T13:41:43Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-02-01T13:41:43Z,eth/tracers: fix unigram tracer (#22248),TRUE,valid
f25b437b70dd8be8ab7677fae607e01cd86c1ef4,Martin Holst Swende,martin@swende.se,2021-01-29T15:53:44Z,Martin Holst Swende,martin@swende.se,2021-01-29T15:53:44Z,"cmd/clef: don't check file permissions on windows (#22251)

Fixes #20123",TRUE,valid
7a800f98f66103d934f24231ffec1a656d25b496,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-01-28T21:47:15Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-01-28T21:47:15Z,"les/utils: UDP rate limiter (#21930)

* les/utils: Limiter

* les/utils: dropped prior weight vs variable cost logic, using fixed weights

* les/utils: always create node selector in addressGroup

* les/utils: renamed request weight to request cost

* les/utils: simplified and improved the DoS penalty mechanism

* les/utils: minor fixes

* les/utils: made selection weight calculation nicer

* les/utils: fixed linter warning

* les/utils: more precise and reliable probabilistic test

* les/utils: fixed linter warning",TRUE,valid
eb21c652c0a9d8f651efc0251cc5797a3328d863,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-01-28T20:19:07Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-01-28T20:19:07Z,"cmd,core,eth,params,tests: define yolov3 + enable EIP-2565 (#22213)

Removes the yolov2 definition, adds yolov3, including EIP-2565. This PR also disables some of the erroneously generated blockchain and statetests, and adds the new genesis hash + alloc for yolov3. 
This PR disables the CLI switches for yolo, since it's not complete until we merge support for 2930.",TRUE,valid
2e5d14170846ae72adc47467a1129e41d6800349,Guillaume Ballet,gballet@gmail.com,2021-01-27T09:20:34Z,Guillaume Ballet,gballet@gmail.com,2021-01-27T09:20:34Z,"rpc: deprecate Client.ShhSubscribe (#22239)

It never worked, whisper uses polling.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
a72fa88a0d661f86a06d3d89c755a4e7dcff1e4e,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-01-26T20:41:35Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2021-01-26T20:41:35Z,"les: switch to new discv5 (#21940)

This PR enables running the new discv5 protocol in both LES client
and server mode. In client mode it mixes discv5 and dnsdisc iterators
(if both are enabled) and filters incoming ENRs for ""les"" tag and fork ID.
The old p2p/discv5 package and all references to it are removed.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
9c5729311e89bff5acc1f33c1f4a646dfcce7dab,Guillaume Ballet,gballet@gmail.com,2021-01-26T15:43:12Z,Guillaume Ballet,gballet@gmail.com,2021-01-26T15:43:12Z,accounts/scwallet: update documentation (#22242),TRUE,valid
ad038b62899ae59160f9871573ec6786e95cb918,Felix Lange,fjl@twurst.com,2021-01-26T15:01:13Z,Felix Lange,fjl@twurst.com,2021-01-26T15:01:13Z,"accounts/scwallet: use go-ethereum crypto instead of go-ecdh (#22212)

* accounts/scwallet: use go-ethereum crypto instead of go-ecdh

github.com/wsddn/go-ecdh is a wrapper package for ECDH functionality
with any elliptic curve.

Since 'generic' ECDH is not required in accounts/scwallet (the curve is
always secp256k1), we can just use the standard library functionality
and our own crypto libraries to perform ECDH and save a dependency.

* Update accounts/scwallet/securechannel.go

Co-authored-by: Guillaume Ballet <gballet@gmail.com>

* Use the correct key

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
681618275cc5a4819af446029a064d266190ae8c,Martin Holst Swende,martin@swende.se,2021-01-26T11:17:11Z,Martin Holst Swende,martin@swende.se,2021-01-26T11:17:11Z,"core: speed up header import (#21967)

This PR implements the following modifications

- Don't shortcut check if block is present, thus avoid disk lookup
- Don't check hash ancestry in early-check (it's still done in parallel checker)
- Don't check time.Now for every single header

Charts and background info can be found here: https://github.com/holiman/headerimport/blob/main/README.md
With these changes, writing 1M headers goes down to from 80s to 62s.",TRUE,valid
14d495491ddf31464135563720705fc2c1e5eb22,Martin Holst Swende,martin@swende.se,2021-01-26T11:15:31Z,Martin Holst Swende,martin@swende.se,2021-01-26T11:15:31Z,core/state: fix panic in state dumping (#22225),TRUE,valid
573f373d2bb264af6a2e39c3b219c999fc242122,Peter Szilagyi,peterke@gmail.com,2021-01-26T11:13:55Z,Peter Szilagyi,peterke@gmail.com,2021-01-26T11:13:55Z,"internal/ethapi: print tx details when submitting (#22170)

This adds more info about submitted transactions in log messages.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
7202b410b064c17c0648c4c6c212dc4c2a787907,Marius van der Wijden,m.vanderwijden@live.de,2021-01-25T20:40:14Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-25T20:40:14Z,"tests/fuzzers/abi: fixed one-off panic with int.Min64 value (#22233)

* tests/fuzzers/abi: fixed one-off panic with int.Min64 value

* tests/fuzzers/abi: fixed one-off panic with int.Min64 value",TRUE,valid
d2779ed7acde5d0fa3ab53fcdc11ab1697703300,Martin Holst Swende,martin@swende.se,2021-01-25T18:06:52Z,Martin Holst Swende,martin@swende.se,2021-01-25T18:06:52Z,"eth, p2p: reserve half peer slots for snap peers during snap sync (#22171)

* eth, p2p: reserve half peer slots for snap peers during snap sync

* eth: less logging

* eth: rework the eth/snap peer reservation logic

* eth: rework the eth/snap peer reservation logic (again)",TRUE,valid
adf130def83fbf7b7902ff4bacab7bb369517dcb,gary rong,garyrong0905@gmail.com,2021-01-25T13:36:39Z,gary rong,garyrong0905@gmail.com,2021-01-25T13:36:39Z,"eth/tracers: move tracing APIs into eth/tracers (#22161)

This moves the tracing RPC API implementation to package eth/tracers.
By doing so, package eth no longer depends on tracing and the duktape JS engine.

The change also enables tracing using the light client. All tracing methods work with the
light client, but it's a lot slower compared to using a full node.",TRUE,valid
49cdcf5c70735dc85bd9c22b45811a3ec7cef54d,gary rong,garyrong0905@gmail.com,2021-01-25T13:29:45Z,gary rong,garyrong0905@gmail.com,2021-01-25T13:29:45Z,"core: reset to genesis when middle block is missing (#22135)

When a sethead/rewind finds that the targeted block is missing, it resets to genesis instead of crashing. Closes #22129",TRUE,valid
04a72260c5bcca0ec7c4a63532fb29f68db03384,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-25T13:25:55Z,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-25T13:25:55Z,snapshot: merge loops for better performance (#22160),TRUE,valid
59a79137b9c8740a3623cdf35512e1eb49c8a20b,ucwong,ucwong@126.com,2021-01-25T11:46:09Z,ucwong,ucwong@126.com,2021-01-25T11:46:09Z,"go.mod: upgrade github.com/huin/goupnp (#22227)

This updates the goupnp dependency, fixing huin/goupnp#33",TRUE,valid
c0862f4f4c21c0ff54636d5122f09f310133d504,rene,41963722+renaynay@users.noreply.github.com,2021-01-25T10:31:18Z,rene,41963722+renaynay@users.noreply.github.com,2021-01-25T10:31:18Z,"graphql: change receipt status to decimal instead of hex (#22187)

This PR fixes the receipt status field to be decimal instead of a hex string,
as called for by the spec.

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
1770fe718af661334391766455c43157e378b9fa,Marius van der Wijden,m.vanderwijden@live.de,2021-01-25T09:42:07Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-25T09:42:07Z,"go.mod: update dependencies (#22216)

This updates go module dependencies as discussed in #22050.",TRUE,valid
797b0812ab742b2a24e3c9277fa6564ff9eb9094,Martin Holst Swende,martin@swende.se,2021-01-25T06:17:05Z,Martin Holst Swende,martin@swende.se,2021-01-25T06:17:05Z,"eth/protocols/snap: snap sync testing (#22179)

* eth/protocols/snap: make timeout configurable

* eth/protocols/snap: snap sync testing

* eth/protocols/snap: test to trigger panic

* eth/protocols/snap: fix race condition on timeouts

* eth/protocols/snap: return error on cancelled sync

* squashme: updates + test causing panic + properly serve accounts in order

* eth/protocols/snap: revert failing storage response

* eth/protocols/snap: revert on bad responses (storage, code)

* eth/protocols/snap: fix account handling stall

* eth/protocols/snap: fix remaining revertal-issues

* eth/protocols/snap: timeouthandler for bytecode requests

* eth/protocols/snap: debugging + fix log message

* eth/protocols/snap: fix misspelliings in docs

* eth/protocols/snap: fix race in bytecode handling

* eth/protocols/snap: undo deduplication of storage roots

* synctests: refactor + minify panic testcase

* eth/protocols/snap: minor polishes

* eth: minor polishes to make logs more useful

* eth/protocols/snap: remove excessive logs from the test runs

* eth/protocols/snap: stress tests with concurrency

* eth/protocols/snap: further fixes to test cancel channel handling

* eth/protocols/snap: extend test timeouts on CI

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
3708454f58923582585c5a231243324729011a39,ligi,ligi@ligi.de,2021-01-24T10:37:39Z,ligi,ligi@ligi.de,2021-01-24T10:37:39Z,"cmd, geth: CLI help fixes (#22220)

* cmd, geth: Reflect command being optional - closes 22218

* cmd, geth: Set current year to 2021",TRUE,valid
db35d77b63ab462990ad95481e116f9340d52de2,ligi,ligi@ligi.de,2021-01-24T10:37:08Z,ligi,ligi@ligi.de,2021-01-24T10:37:08Z,"cmd, geth: CLI help fixes (#22220)

* cmd, geth: Reflect command being optional - closes 22218

* cmd, geth: Set current year to 2021",TRUE,valid
f26c19cbcd60175598824c7e09b64b8896daf721,Felix Lange,fjl@twurst.com,2021-01-22T19:15:27Z,Felix Lange,fjl@twurst.com,2021-01-22T19:15:27Z,"common/mclock: remove dependency on github.com/aristanetworks/goarista (#22211)

It takes three lines of code to get to runtime.nanotime, no need to
pull a dependency for that.",TRUE,valid
9e1bd0f3671d19d4964ed8c8a95edfd12413d8c3,gary rong,garyrong0905@gmail.com,2021-01-22T09:11:24Z,gary rong,garyrong0905@gmail.com,2021-01-22T09:11:24Z,"trie: fix range prover (#22210)

Fixes a special case when the trie only has a single trie node and the range proof only contains a single element.",TRUE,valid
231040c633f24b2b0d56aaeb704a0738ba4adb9c,?ukasz Zimnoch,lukaszzimnoch1994@gmail.com,2021-01-21T12:47:38Z,?ukasz Zimnoch,lukaszzimnoch1994@gmail.com,2021-01-21T12:47:38Z,"event: add ResubscribeErr (#22191)

This adds a way to get the error of the failing subscription
for logging/debugging purposes.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
c4307a9339fd4e66598fd5c378e8f6f97ad878e2,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-01-21T11:17:10Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2021-01-21T11:17:10Z,"eth/filters: fix potential deadlock in filter timeout loop (#22178)

This fixes #22131 and adds a test reproducing the issue.",TRUE,valid
ddadc3d27379a3326fd1b78278e5e5da44a91d94,Peter Szilagyi,peterke@gmail.com,2021-01-20T23:48:08Z,Peter Szilagyi,peterke@gmail.com,2021-01-20T23:48:08Z,"Merge pull request #21047 from holiman/improve_updates_2

core: improve trie updates (part 2)",TRUE,valid
42f9f1f0738bde1126eaa6f6bed9c1ae03e304a3,Peter Szilagyi,peterke@gmail.com,2021-01-08T13:01:49Z,Peter Szilagyi,peterke@gmail.com,2021-01-08T13:01:49Z,core/state: convert prefetcher to concurrent per-trie loader,TRUE,valid
1e1865b73f6b0d2fef656d2f37e20e41d13a5ef0,Martin Holst Swende,martin@swende.se,2020-02-05T12:12:09Z,Martin Holst Swende,martin@swende.se,2020-02-05T12:12:09Z,"core: implement background trie prefetcher

Squashed from the following commits:

core/state: lazily init snapshot storage map
core/state: fix flawed meter on storage reads
core/state: make statedb/stateobjects reuse a hasher
core/blockchain, core/state: implement new trie prefetcher
core: make trie prefetcher deliver tries to statedb
core/state: refactor trie_prefetcher, export storage tries
blockchain: re-enable the next-block-prefetcher
state: remove panics in trie prefetcher
core/state/trie_prefetcher: address some review concerns

sq",TRUE,valid
81bf9f97c9edf0169e47b5b700715e2eae58e08a,meowsbits,b5c6@protonmail.com,2021-01-20T21:45:01Z,meowsbits,b5c6@protonmail.com,2021-01-20T21:45:01Z,"downloader: extract findAncestor search functions (#21744)

This is a simple refactoring, extracting common ancestor
negotiation logic to named function",TRUE,valid
7da8f75d5bab50ad5477d50bc96d383e5c8359b8,ucwong,ucwong@126.com,2021-01-20T18:34:21Z,ucwong,ucwong@126.com,2021-01-20T18:34:21Z,go.mod: upgrade golang-lru (#22134),TRUE,valid
d1301eb0df07219d576c56400128c56f4f65beab,Marius van der Wijden,m.vanderwijden@live.de,2021-01-20T17:21:13Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-20T17:21:13Z,oss-fuzz: fix abi fuzzer (#22199),TRUE,valid
45cb1a580abad0d4e8caa1c8b7dfacd5ef3d27bc,gary rong,garyrong0905@gmail.com,2021-01-19T09:52:45Z,gary rong,garyrong0905@gmail.com,2021-01-19T09:52:45Z,"eth, les: add new config field SyncFromCheckpoint (#22123)

This PR introduces a new config field SyncFromCheckpoint for light client.

In some special scenarios, it's required to start synchronization from some
arbitrary checkpoint or even from the scratch. So this PR offers this
flexibility to users so that the synchronization start point can be configured.

There are two relevant configs: SyncFromCheckpoint and Checkpoint.

- If the SyncFromCheckpoint is true, the light client will try to sync from the
  specified checkpoint.

- If the Checkpoint is not configured, then the light client will sync from the
  scratch(from the latest header if the database is not empty)

Additional notes: these two configs are not visible in the CLI flags but only
accessable in the config file.

Example Usage:

[Eth]
SyncFromCheckpoint = true

[Eth.Checkpoint]
SectionIndex = 100
SectionHead = ""0xabc""
CHTRoot = ""0xabc""
BloomRoot = ""0xabc""

PS. Historical checkpoint can be retrieved from the synced full node or light
client via les_getCheckpoint API.",TRUE,valid
24c1e3053b6767add29bf257c7943dc6aa5fa91d,Alex Mazalov,mazalov@gmail.com,2021-01-19T08:26:42Z,Alex Mazalov,mazalov@gmail.com,2021-01-19T08:26:42Z,"cmd/geth: graceful shutdown if disk is full (#22103)

Adding warnings of free disk space left and graceful shutdown when there is not enough space left.
This also adds a flag datadir.minfreedisk which can be used to set the trigger for low disk space, and setting it to zero disables the check. 

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
5e9f5ca5d302298b933668af539ad1e213bdfa6e,gary rong,garyrong0905@gmail.com,2021-01-18T13:39:43Z,gary rong,garyrong0905@gmail.com,2021-01-18T13:39:43Z,"core/state/snapshot: write snapshot generator in batch (#22163)

* core/state/snapshot: write snapshot generator in batch

* core: refactor the tests

* core: update tests

* core: update tests",TRUE,valid
10555d46849fc805aa28921fed4d46e4bdaf0c4c,Marius van der Wijden,m.vanderwijden@live.de,2021-01-18T13:36:05Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-18T13:36:05Z,"cmd/geth: dump config for metrics (#22083)

* cmd/geth: dump config

* cmd/geth: dump config

* cmd/geth: properly read config again

* cmd/geth: override metrics if flags are set

* cmd/geth: write metrics regardless if enabled

* cmd/geth: renamed to metricsfromcliargs

* metrics: add default configuration",TRUE,valid
398182284cb1635be833017e87d484795a5e5c56,Marius van der Wijden,m.vanderwijden@live.de,2021-01-18T13:33:15Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-18T13:33:15Z,"tests/fuzzers/abi: better test generation (#22158)

* tests/fuzzers/abi: better test generation

* tests/fuzzers/abi: fixed packing issue

* oss-fuzz: enable abi fuzzer",TRUE,valid
034ecc3210623d1585f0ffd6a2c8a64d4b7ee0c1,gary rong,garyrong0905@gmail.com,2021-01-16T18:06:18Z,gary rong,garyrong0905@gmail.com,2021-01-16T18:06:18Z,"les: remove useless protocol defines (#22115)

This PR has two changes in the les protocol:

- the auxRoot is not supported. See ethereum/devp2p#171 for more information
- the empty response will be returned in GetHelperTrieProofsMsg request if the merkle
   proving is failed. note, for backward compatibility, the empty merkle proof as well as
   the request auxiliary data will still be returned in  les2/3 protocol no matter the proving
   is successful or not. the proving failure can happen e.g. request the proving for a
   non-included entry in helper trie (unstable header).",TRUE,valid
c76573a97b15e28c0d5c783cab3a62e9203db1c9,Dan DeGreef,dan.degreef@gmail.com,2021-01-16T17:15:18Z,Dan DeGreef,dan.degreef@gmail.com,2021-01-16T17:15:18Z,eth/protocols/eth: fix slice resize flaw (#22181),TRUE,valid
8d62ee65b2d3100da0292232f8169282237f5487,gary rong,garyrong0905@gmail.com,2021-01-15T22:04:38Z,gary rong,garyrong0905@gmail.com,2021-01-15T22:04:38Z,les: don't drop sentTo for normal cases (#22048),TRUE,valid
3944976a9adc376a9868ab41c7b4bc0b38507981,Peter Szilagyi,peterke@gmail.com,2021-01-15T10:54:34Z,Peter Szilagyi,peterke@gmail.com,2021-01-15T10:54:34Z,"Merge pull request #22177 from karalabe/snapshot-storage-logs

core/state/snapshot: add generation logs to storage too",TRUE,valid
c4deebbf1e186e3b7e96c4e0ab395d3207cec55e,Peter Szilagyi,peterke@gmail.com,2021-01-15T10:26:46Z,Peter Szilagyi,peterke@gmail.com,2021-01-15T10:26:46Z,core/state/snapshot: add generation logs to storage too,TRUE,valid
d13c59fef0926af0ef0cff0a2e793f95d46442f0,Peter Szilagyi,peterke@gmail.com,2021-01-14T10:19:57Z,Peter Szilagyi,peterke@gmail.com,2021-01-14T10:19:57Z,"Merge pull request #22169 from karalabe/faucet-regen

cmd/faucet: update the embedded website asset",TRUE,valid
12969084d17878ccb7978f24574bafacfe99f4dd,Peter Szilagyi,peterke@gmail.com,2021-01-14T10:10:52Z,Peter Szilagyi,peterke@gmail.com,2021-01-14T10:10:52Z,cmd/faucet: update the embedded website asset,TRUE,valid
96157a897be2032be5fdb87f947fbe5df8a53bd4,Martin Holst Swende,martin@swende.se,2021-01-13T21:43:07Z,Martin Holst Swende,martin@swende.se,2021-01-13T21:43:07Z,"graphql: fix spurious travis failure (#22166)

The tests sometimes failed with certain go versions because
the behavior of http.Server.Shutdown changed over time. A bug
that was fixed in Go 1.15 could cause active connections on unrelated
servers to close unexpectedly. This is fixed by avoiding use of the
same port number in all tests.",TRUE,valid
2aaff0ad76991be8851ae30454d2e2e967704102,Marius van der Wijden,m.vanderwijden@live.de,2021-01-13T10:44:20Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-13T10:44:20Z,"consensus/ethash: increase seal timeout for tests (#22162)

It seems that the 2 second timeout is not enough for Travis CI:

   --- FAIL: TestTestMode (2.00s)
       ethash_test.go:53: sealing result timeout",TRUE,valid
6296211a3ee2502bdec73256eadaf9185fb4d946,Martin Holst Swende,martin@swende.se,2021-01-13T10:42:26Z,Martin Holst Swende,martin@swende.se,2021-01-13T10:42:26Z,"graphql: fix spurious error in test (#22164)

This solves an issue in graphql tests:

    graphql_test.go:38: could not create new node: datadir already used by another process",TRUE,valid
c94081774f6c8c43e10deb5735c3f9a09a7bcd04,Martin Holst Swende,martin@swende.se,2021-01-13T10:29:28Z,Martin Holst Swende,martin@swende.se,2021-01-13T10:29:28Z,tests: update the reference tests (#22009),TRUE,valid
c7a6be163f07c967172dfcb3fe2ef25ff08dd4de,Guillaume Ballet,gballet@gmail.com,2021-01-13T10:14:36Z,Guillaume Ballet,gballet@gmail.com,2021-01-13T10:14:36Z,"cmd/utils: don't enumerate USB unless --usb is set (#22130)

USB enumeration still occured. Make sure it will only occur if --usb is set.
This also deprecates the 'NoUSB' config file option in favor of a new option 'USB'.",TRUE,valid
93a89b26819c9b21ff32ab650b8916076b53b471,Martin Holst Swende,martin@swende.se,2021-01-12T16:39:31Z,Martin Holst Swende,martin@swende.se,2021-01-12T16:39:31Z,"go.mod: use github.com/holiman/bloomfilter/v2 (#22044)

* deps: use improved bloom filter implementation

* eth/handler, trie: use 4 keys for syncbloom + minor fixes

* eth/protocols, trie: revert change on syncbloom method signature",TRUE,valid
23f837c38827d7c1ea67b71eb6f79934562f0d98,meowsbits,b5c6@protonmail.com,2021-01-12T14:50:11Z,meowsbits,b5c6@protonmail.com,2021-01-12T14:50:11Z,"cmd/utils: avoid making console preloads absolute (#22109)

Resolves https://github.com/etclabscore/core-geth/issues/273

jsre.JSRE already handles establishing preload
file paths relative to the 'assets' path (aka docroot),
where it joins the assets dir and the file path if relative,
or uses the file path only if absolute.

The duplication of this logic by MakeConsolePreloads
caused preloaded files to have paths which contained
duplicate references to the assets dir path.

Date: 2020-12-30 08:25:01-06:00
Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
984e752ce52b09142ed936c337456df27128e3bc,rene,41963722+renaynay@users.noreply.github.com,2021-01-12T09:52:13Z,rene,41963722+renaynay@users.noreply.github.com,2021-01-12T09:52:13Z,"eth: return error from eth_chainID during sync before EIP-155 activates (#21686)

This changes the chainID RPC method to return an error when EIP-155 is not yet
active at the current block height. It used to simply return zero in this case, but
that's confusing.",TRUE,valid
39b3b8ffb44983a260031d5077226d952ddfb9bf,rene,41963722+renaynay@users.noreply.github.com,2021-01-11T13:55:42Z,rene,41963722+renaynay@users.noreply.github.com,2021-01-11T13:55:42Z, graphql: fix issue with unmarshalling int32 into `Long` type #22153,TRUE,valid
49c2816d5464ed208389d52ed7cf47f35630b1c2,Marius van der Wijden,m.vanderwijden@live.de,2021-01-11T11:53:13Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-11T11:53:13Z,"eth: improve log message (#22146)

* eth: fixed typos

* eth: fixed log message",TRUE,valid
79e2174e4d58ede93cce8fafbd13dd5566cbb729,Peter Szilagyi,peterke@gmail.com,2021-01-11T08:52:46Z,Peter Szilagyi,peterke@gmail.com,2021-01-11T08:52:46Z,"Merge pull request #22157 from karalabe/prque-tests

common/prque: pull in tests and benchmarks from upstream",TRUE,valid
ab5e3f400f9dd3832508208ecef8b75c681728ce,Peter Szilagyi,peterke@gmail.com,2021-01-11T08:31:03Z,Peter Szilagyi,peterke@gmail.com,2021-01-11T08:31:03Z,common/prque: pull in tests and benchmarks from upstream,TRUE,valid
5a1b38435270336fd86fe742c9951abad870b84d,gary rong,garyrong0905@gmail.com,2021-01-10T11:54:15Z,gary rong,garyrong0905@gmail.com,2021-01-10T11:54:15Z,"core: persist bad blocks (#21827)

* core: persist bad blocks

* core, eth, internal: address comments

* core/rawdb: add badblocks to inspector

* core, eth: update

* internal: revert

* core, eth: only save 10 bad blocks

* core/rawdb: address comments

* core/rawdb: fix

* core: address comments",TRUE,valid
89030ec0b442a08fb82d4452f3132ab1602b8182,Chris Ziogas,ziogaschr@gmail.com,2021-01-09T16:29:19Z,Chris Ziogas,ziogaschr@gmail.com,2021-01-09T16:29:19Z,"eth/downloader: fix race condition in tests (#22140)

* downloader: fix race condition in tests

* eth/downloader: fix race condition in tests

* Revert ""downloader: fix race condition in tests""

This reverts commit 108033ebc6985de83791d375b6e6647a77d28d5a.",TRUE,valid
889f5645b57dde5b5d4cccf1561bdb449293d2d8,Marius van der Wijden,m.vanderwijden@live.de,2021-01-08T20:29:25Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-08T20:29:25Z,"ethclient: better test suite for ethclient package (#22127)

This commit extends the ethclient test suite and increases code coverage of the ethclient
package from ~15% to >55%. These tests act as early smoke tests to signal issues in the
RPC-interface. E.g. if a functionality like eth_chainId or eth_call breaks, the test
will break.",TRUE,valid
6b88ab75bcbc5eaecaf5619ec730aa00f5e7c941,Martin Holst Swende,martin@swende.se,2021-01-08T10:17:15Z,Martin Holst Swende,martin@swende.se,2021-01-08T10:17:15Z,"cmd/faucet: fix nonce-gap problem (#22145)

* cmd/faucet: avoid encoding for each client

* cmd/faucet: fix flaw in clearing of txs, avoid sending more than necessary

* cmd/faucet: fix flaw in tx cropping

* cmd/faucet: revert change to not always send tx info

* cmd/faucet: review fixes

* cmd/faucet: revert #22018, fix order in UI

* cmd/faucet: fix lock error

* cmd/faucet: revert json changes

* squashme",TRUE,valid
165f53fc6e9e904054c67462000a19fc83dcc12f,gary rong,garyrong0905@gmail.com,2021-01-07T22:39:35Z,gary rong,garyrong0905@gmail.com,2021-01-07T22:39:35Z,les: remove transaction propagation limits (#22125),TRUE,valid
d3952898c33fe2647eed27dd86df3c7ae4c9ddcc,Peter Szilagyi,peterke@gmail.com,2021-01-07T16:45:27Z,Peter Szilagyi,peterke@gmail.com,2021-01-07T16:45:27Z,"Merge pull request #22137 from karalabe/faucet-fb-fix

cmd/faucet: switch Facebook auth over to mobile site",TRUE,valid
3c6665e7d62ed166d9f1cf4519ad23ab77c5cae3,Peter Szilagyi,peterke@gmail.com,2021-01-07T11:04:20Z,Peter Szilagyi,peterke@gmail.com,2021-01-07T11:04:20Z,cmd/faucet: switch Facebook auth over to mobile site,TRUE,valid
4bb5c6ca7a19f5ad0230879205380adaca12ef4f,Martin Holst Swende,martin@swende.se,2021-01-07T16:12:41Z,Martin Holst Swende,martin@swende.se,2021-01-07T16:12:41Z,"eth/protocols/snap: speed up hash checks (#22023)

* eth/protocols/snap: speed up hash checks

* eth/protocols/snap: nit fix

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
38310f9022466348310dd6f09c64790c4e5a765b,Peter Szilagyi,peterke@gmail.com,2021-01-07T10:58:42Z,Peter Szilagyi,peterke@gmail.com,2021-01-07T10:58:42Z,"Merge pull request #22136 from karalabe/faucet-websocket-fix

cmd/faucet: fix websocket race regression after switching to gorilla",TRUE,valid
58b9db5f7cf7a3db4d9d0afa3772fb8da32ebc3a,Martin Holst Swende,martin@swende.se,2021-01-07T10:58:07Z,Martin Holst Swende,martin@swende.se,2021-01-07T10:58:07Z,"eth/protocols/snap: track reverts when peer rejects request (#22016)

* eth/protocols/snap: reschedule missed deliveries

* eth/protocols/snap: clarify log message

* eth/protocols/snap: revert failures async and update runloop

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
44208d925811dc309b9e26df6dc1752ba359a0a8,Peter Szilagyi,peterke@gmail.com,2021-01-07T08:23:50Z,Peter Szilagyi,peterke@gmail.com,2021-01-07T08:23:50Z,cmd/faucet: fix websocket race regression after switching to gorilla,TRUE,valid
8bd8e1b24afeb5b19bc6709c7358f325c039750b,Peter Szilagyi,peterke@gmail.com,2021-01-07T07:12:20Z,Peter Szilagyi,peterke@gmail.com,2021-01-07T07:12:20Z,"Merge pull request #22122 from karalabe/snapshot-polishes

cmd/utils, eth/downloader: minor snap nitpicks",TRUE,valid
d2e1b17f1828424906c9033b1dcbd3f2756a0c2c,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-07T06:36:21Z,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-07T06:36:21Z,"snapshot, trie: fixed typos, mostly in snapshot pkg (#22133)",TRUE,valid
072fd9625472b585dc7c0bd5fab17e289c0d91a9,rene,41963722+renaynay@users.noreply.github.com,2021-01-06T16:19:16Z,rene,41963722+renaynay@users.noreply.github.com,2021-01-06T16:19:16Z,"graphql: return decimal for `estimateGas` and `cumulativeGas` queries  (#22126)

* estimateGas, cumulativeGas
* linted
* add test for estimateGas",TRUE,valid
d667ee2d1063faad0b4347db498bda00f34a1ba6,Marius van der Wijden,m.vanderwijden@live.de,2021-01-06T11:06:44Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-06T11:06:44Z,"crypto: fix ineffectual assignments (#22124)

* crypto/bls12381: fixed ineffectual assignment

* crypto/signify: fix ineffectual assignment",TRUE,valid
83d317cff937940395fcb7ece29effc9c7779c13,Peter Szilagyi,peterke@gmail.com,2021-01-06T06:37:45Z,Peter Szilagyi,peterke@gmail.com,2021-01-06T06:37:45Z,"cmd/utils, eth/downloader: minor snap nitpicks",TRUE,valid
618454214b70124646dc1c6333a59138b97d6b0a,jk-jeongkyun,45347815+jeongkyun-oh@users.noreply.github.com,2021-01-05T13:56:01Z,jk-jeongkyun,45347815+jeongkyun-oh@users.noreply.github.com,2021-01-05T13:56:01Z,eth/downloader: enhanced test cases for downloader queue (#22114),TRUE,valid
9ba306d47ef3211de83bb858643abab77faf0528,Marius van der Wijden,m.vanderwijden@live.de,2021-01-05T13:48:22Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-05T13:48:22Z,"common/compiler: fix parsing of solc output with solidity v.0.8.0 (#22092)

Solidity 0.8.0 changes the way that output is marshalled. This patch allows to parse both
the legacy format used previously and the new format.

See also https://docs.soliditylang.org/en/breaking/080-breaking-changes.html#interface-changes",TRUE,valid
4714ce9430d2519e869a993d9f973a062dfc52d6,Marius van der Wijden,m.vanderwijden@live.de,2021-01-05T13:31:23Z,Marius van der Wijden,m.vanderwijden@live.de,2021-01-05T13:31:23Z,"cmd/geth: added --mainnet flag (#21932)

* cmd/geth: added --mainnet flag

* cmd/utils: set default genesis if --mainnet is specified

* cmd/utils: addressed comments",TRUE,valid
eb2a1dfdd21eeb89fcd6f9c06d42770e5078a6ed,Antoine Toulme,atoulme@users.noreply.github.com,2021-01-05T10:22:32Z,Antoine Toulme,atoulme@users.noreply.github.com,2021-01-05T10:22:32Z,"graphql: use a decimal representation for gas limit and gas used (#21883)

This changes the JSON encoding of blocks returned by the API
to have decimal instead of hexadecimal numbers. The spec wants
it this way.

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
664903dc889ec295b8eea292964547dc7910a26d,Guillaume Ballet,gballet@gmail.com,2021-01-05T10:18:22Z,Guillaume Ballet,gballet@gmail.com,2021-01-05T10:18:22Z,cmd/geth: usb is off by default (#21984),TRUE,valid
9584f56b9d2fe950b8fa70f5c7398de404f6b71c,Martin Holst Swende,martin@swende.se,2021-01-05T09:44:33Z,Martin Holst Swende,martin@swende.se,2021-01-05T09:44:33Z,"miner: avoid sleeping in miner (#22108)

This PR removes a logic in the miner, which was originally intended to help temporary testnets based on ethash from ""running off into the future"". If the difficulty was low, and a few computers started mining several blocks per second, the ethash rules (which demand 1s delay between blocks) would push the blocktimes further and further away.
The solution was to make the miner sleep while this happened.

Nowadays, this problem is solved instead by PoA chains, and it's recommended to let testnets and devnets be based on clique instead. The existing logic is problematic, since it can cause stalls within the miner making it difficult for remote workers to submit work if the channel is blocked on a sleep.

Credits to Saar Tochner for reporting this via the bug bounty",TRUE,valid
6ada9f0f38d14941ab02144319dba9482da18da5,Peter Szilagyi,peterke@gmail.com,2021-01-05T08:27:33Z,Peter Szilagyi,peterke@gmail.com,2021-01-05T08:27:33Z,"Merge pull request #22107 from karalabe/faucet-twitter

cmd: support v1.1 Twitter API in faucet, fix puppeth",TRUE,valid
e4571d8c12be5aaa380ee58ea35a5617823e5324,Peter Szilagyi,peterke@gmail.com,2021-01-04T11:58:46Z,Peter Szilagyi,peterke@gmail.com,2021-01-04T11:58:46Z,"cmd: support v1.1 Twitter API in faucet, fix puppeth",TRUE,valid
1951e20d1040627faf3b6722c88ddf0e86ecf50e,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2021-01-04T11:42:47Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2021-01-04T11:42:47Z,"SECURITY.md: link to release page (#22067)

Add links to go-ethereum's GitHub release page.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
5c2a7ce2ccace9f453bcd320b4ac52e1f5ce3ab2,rene,41963722+renaynay@users.noreply.github.com,2021-01-04T11:39:25Z,rene,41963722+renaynay@users.noreply.github.com,2021-01-04T11:39:25Z,node: rename startNetworking to openEndpoints (#22105),TRUE,valid
47820ef726a7b08ea2e22baff8fff64231c3046b,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2021-01-04T10:58:51Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2021-01-04T10:58:51Z,.github: Replace wiki links with new doc pages (#22065) (#22068),TRUE,valid
f83fc302a504919f6668060110cbb8b64c26dd07,Vie,yangchenzhong@gmail.com,2021-01-04T10:52:23Z,Vie,yangchenzhong@gmail.com,2021-01-04T10:52:23Z,cmd/geth: update copyright year (#22099),TRUE,valid
167ff563d16a405a89ce449fdb34eb6d99631053,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-04T08:07:43Z,Melvin Junhee Woo,melvin.woo@groundx.xyz,2021-01-04T08:07:43Z,core/state/snapshot: gethring -> gathering typo (#22104),TRUE,valid
0a3993c558616868e35f9730e92c704ac16ee437,yumiel yoomee1313,yumiel.ko@groundx.xyz,2020-12-30T12:10:11Z,yumiel yoomee1313,yumiel.ko@groundx.xyz,2020-12-30T12:10:11Z,"accounts/abi/bind: fix erroneous test (#22053)

closes #22049",TRUE,valid
a425a47ddcb6078e2ae6ab062bb73f2c0939fd1d,ucwong,ucwong@126.com,2020-12-27T21:38:16Z,ucwong,ucwong@126.com,2020-12-27T21:38:16Z,"core/rawdb, eth/protocols : Method name typo fix (#22026)",TRUE,valid
c17a7733df3aa7f68d4e0ff5ce9d5c2919284faa,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:28:08Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:28:08Z,docs: replace wiki links with new doc pages in readme.md (#22065) (#22066),TRUE,valid
653e8b9dd9b7a1565b0e26c71ad70a83803ad529,jk-jeongkyun,45347815+jeongkyun-oh@users.noreply.github.com,2020-12-27T21:26:42Z,jk-jeongkyun,45347815+jeongkyun-oh@users.noreply.github.com,2020-12-27T21:26:42Z,eth/downloader: remove unnecessary condition (#22052),TRUE,valid
ab0979f9306e87025d821b2629985e8bffe130ef,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:18:57Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:18:57Z,signer: docs - replace wiki links with new doc pages (#22069),TRUE,valid
0a09a39325814a2acbf4486c74b9aa9e6cff04d6,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:09:05Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:09:05Z,eth/filters: replace wiki links with new doc pages (#22070),TRUE,valid
2f8100615ad1d8335e38024221143163f09d54fe,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:01:28Z,Suriyaa Sundararuban,isc.suriyaa@gmail.com,2020-12-27T21:01:28Z,cmd/geth: replace wiki links with new doc pages (#22071),TRUE,valid
b13e9c4e3d603955f92c1542a5e86c740f43f33e,Martin Holst Swende,martin@swende.se,2020-12-27T20:58:39Z,Martin Holst Swende,martin@swende.se,2020-12-27T20:58:39Z,tests/fuzzers: fix false positive in bitutil fuzzer (#22076),TRUE,valid
9c6b5b904a0ea050a0ffda7cf7b60678b457783d,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2020-12-27T20:57:19Z,Sina Mahmoodi,1591639+s1na@users.noreply.github.com,2020-12-27T20:57:19Z,"eth, eth/tracers: include intrinsic gas in calltracer, expose for all tracers (#22038)

* eth/tracers: share tx gas price with js tracer

* eth/tracers: use `go generate`

* eth/tracers: try with another version of go-bindata

* eth/tracers: export txGas

* eth, eth/tracers: pass intrinsic gas to js tracers

eth/tracers: include tx gas in tracers usedGas

eth/tracers: fix prestate tracer's sender balance

eth/tracers: rm unnecessary import

eth/tracers: pass intrinsicGas separately to tracer

eth/tracers: fix tests broken by lack of txdata

eth, eth/tracers: minor fix

* eth/tracers: regenerate assets + unexport test-struct + add testcase

* eth/tracers: simplify tests + make table-driven

Co-authored-by: Guillaume Ballet <gballet@gmail.com>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
25c0bd9b43da2c5b64e17b3847a8490d6abbe5c1,Timo Tijhof,krinklemail@gmail.com,2020-12-27T17:56:50Z,Timo Tijhof,krinklemail@gmail.com,2020-12-27T17:56:50Z,"README.md: update Travis badge (#22079)

The legacy dot-org URL was displaying a message about the repository
having migrated to the dot-com service, which now covers open-source
projects as well.",TRUE,valid
b9012a039b8aaf3e68ccc3826bb17d27eaf0fa1c,Martin Holst Swende,martin@swende.se,2020-12-23T16:44:45Z,Martin Holst Swende,martin@swende.se,2020-12-23T16:44:45Z,"common,crypto: move fuzzers out of core (#22029)

* common,crypto: move fuzzers out of core

* fuzzers: move vm fuzzer out from core

* fuzzing: rework cover package logic

* fuzzers: lint",TRUE,valid
158f72cc0c889739f49dde42210328902073353d,Marius van der Wijden,m.vanderwijden@live.de,2020-12-23T12:43:22Z,Marius van der Wijden,m.vanderwijden@live.de,2020-12-23T12:43:22Z,"internal/ethapi: restore net_version RPC method (#22061)

During the snap and eth refactor, the net_version rpc call was falsely deprecated.
This restores the net_version RPC handler as most eth2 nodes and other software
depend on it.",TRUE,valid
61469cfeaf2a6d0b1598afbaf35dd2d1872604ce,ucwong,ucwong@126.com,2020-12-21T14:39:58Z,ucwong,ucwong@126.com,2020-12-21T14:39:58Z,eth/downloader: fix typo in comment (#22019),TRUE,valid
c5a3ffa3638c8fbcb694881efa7e89f69717cdd3,ucwong,ucwong@126.com,2020-12-21T10:54:39Z,ucwong,ucwong@126.com,2020-12-21T10:54:39Z,"eth/download/statesync : optimize to avoid a copy in state sync hashing  (#22035)

* eth/download/statesync : state hash sum optimized

* go fmt with blank in imports

* keccak read arg fix",TRUE,valid
3c46f5570bd674cf49c0113352ff79a4e026a5b8,Marius van der Wijden,m.vanderwijden@live.de,2020-12-17T00:20:20Z,Marius van der Wijden,m.vanderwijden@live.de,2020-12-17T00:20:20Z,cmd/faucet: sort requests by newest first (#22018),TRUE,valid
c7f2536735a1a47ae63edb488e15ae597dbaf1d1,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-12-15T19:12:14Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-12-15T19:12:14Z,"les: les/4 minimalistic version (#21909)

* les: allow tx unindexing in les/4 light server mode

* les: minor fixes

* les: more small fixes

* les: add meaningful constants for recentTxIndex handshake field",TRUE,valid
8cde2966af916d85805a47a4350f3567d9e51dbe,Martin Holst Swende,martin@swende.se,2020-12-15T17:52:51Z,Martin Holst Swende,martin@swende.se,2020-12-15T17:52:51Z,"eth, core: speed up some tests (#22000)",TRUE,valid
0fe66f8ae41d2ca773f6b01080ddda10bec24377,Mr-Leshiy,leshiy12345678@gmail.com,2020-12-14T13:31:23Z,Mr-Leshiy,leshiy12345678@gmail.com,2020-12-14T13:31:23Z,eth/protocols/eth: remove magic numbers in test (#21999),TRUE,valid
485992979827596d92e622fec25ce68fe1bfd35b,Marius van der Wijden,m.vanderwijden@live.de,2020-12-14T13:08:53Z,Marius van der Wijden,m.vanderwijden@live.de,2020-12-14T13:08:53Z,cmd/geth: fixed parallelization flaw in account import test (#22002),TRUE,valid
017831dd5b33a68076aed7c9ff05e62b0dcb5f92,Peter Szilagyi,peterke@gmail.com,2020-12-14T09:27:15Z,Peter Szilagyi,peterke@gmail.com,2020-12-14T09:27:15Z," core, eth: split eth package, implement snap protocol (#21482)

This commit splits the eth package, separating the handling of eth and snap protocols. It also includes the capability to run snap sync (https://github.com/ethereum/devp2p/blob/master/caps/snap.md) , but does not enable it by default. 

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
00d10e610f9fef56b5ee9c27f7fe7c842eba2e9b,Shiming,codingmylife@gmail.com,2020-12-12T16:36:32Z,Shiming,codingmylife@gmail.com,2020-12-12T16:36:32Z,"cmd/abigen: clarify abigen alias flag usage (#21875)

* doc: clarify abigen alias flag usage

update the `abigen --alias` flag help info, give an example to make it more clear

related issue: https://github.com/ethereum/go-ethereum/issues/21846

* Update cmd/abigen/main.go

Co-authored-by: ligi <ligi@ligi.de>

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: ligi <ligi@ligi.de>",TRUE,valid
38c1d592b7121f26dc661c1bc2bf0e32eba9d888,Connor Stein,connor.stein@mail.mcgill.ca,2020-12-12T09:16:34Z,Connor Stein,connor.stein@mail.mcgill.ca,2020-12-12T09:16:34Z,"abi/bind: fix error-handling in generated wrappers for functions returning structs (#22005)

Fixes the template used when generating code, which in some scenarios would lead to panic instead of returning an error.",TRUE,valid
4d48980e74e7925d40fb89683eac0b43f3540d77,Martin Holst Swende,martin@swende.se,2020-12-11T14:56:00Z,Martin Holst Swende,martin@swende.se,2020-12-11T14:56:00Z,"core, eth, les: implement unclean-shutdown marker (#21893)

This PR implements unclean shutdown marker. Every time geth boots, it adds a timestamp to a list of timestamps in the database. This list is capped at 10. At a clean shutdown, the timestamp is removed again. 
Thus, when geth exits unclean, the marker remains, and at boot up we show the most recent unclean shutdowns to the user, which makes it easier to diagnose root-causes to certain problems. 

Co-authored-by: Nagy Salem <me@muhnagy.com>",TRUE,valid
c49aae987040b3c0b846c5acb006fdba1eae282b,Mr-Leshiy,alex_pozhilenkov@adoriasoft.com,2020-12-11T14:49:44Z,Mr-Leshiy,alex_pozhilenkov@adoriasoft.com,2020-12-11T14:49:44Z,consensus: refactor FinalizeAndAssemble to use Finalize (#21993),TRUE,valid
efe6dd29042b36d543420a422fc21d123f1e67e3,Martin Holst Swende,martin@swende.se,2020-12-11T10:06:44Z,Martin Holst Swende,martin@swende.se,2020-12-11T10:06:44Z,"consensus/ethash: implement faster difficulty calculators (#21976)

This PR adds re-written difficulty calculators, which are based on uint256. It also adds a fuzzer + oss-fuzz integration for the new fuzzer. It does differential fuzzing between the new and old calculators.

Note: this PR does not actually enable the new calculators.",TRUE,valid
88c696240dc7dfd99588d9e2ef0b04f03a06d1a5,gary rong,garyrong0905@gmail.com,2020-12-11T09:44:57Z,gary rong,garyrong0905@gmail.com,2020-12-11T09:44:57Z,"core/txpool: remove ""local"" notion from the txpool price heap (#21478)

* core: separate the local notion from the pricedHeap

* core: add benchmarks

* core: improve tests

* core: address comments

* core: degrade the panic to error message

* core: fix typo

* core: address comments

* core: address comment

* core: use PEAK instead of POP

* core: address comments",TRUE,valid
b47f4ca5cf3adf7c29e9ee00a6056196f295763c,Mudit Gupta,guptamudit@ymail.com,2020-12-11T09:35:39Z,Mudit Gupta,guptamudit@ymail.com,2020-12-11T09:35:39Z,"cmd/faucet: use Twitter API instead of scraping webpage (#21850)

This PR adds support for using Twitter API to query the tweet and author details. There are two reasons behind this change:

- Twitter will be deprecating the legacy website on 15th December. The current method is expected to stop working then.
- More importantly, the current system uses Twitter handle for spam protection but the Twitter handle can be changed via automated calls. This allows bots to use the same tweet to withdraw funds infinite times as long as they keep changing their handle between every request. The Rinkeby as well as the Goerli faucet are being actively drained via this method. This PR changes the spam protection to be based on Twitter IDs instead of usernames. A user can not change their Twitter ID.",TRUE,valid
62dc59c2bd6c80b711e873300d7cb91afa91e830,lzhfromustc,43191155+lzhfromustc@users.noreply.github.com,2020-12-11T09:29:42Z,lzhfromustc,43191155+lzhfromustc@users.noreply.github.com,2020-12-11T09:29:42Z,"miner, test: fix potential goroutine leak (#21989)

In miner/worker.go, there are two goroutine using channel w.newWorkCh: newWorkerLoop() sends to this channel, and mainLoop() receives from this channel. Only the receive operation is in a select.

However, w.exitCh may be closed by another goroutine. This is fine for the receive since receive is in select, but if the send operation is blocking, then it will block forever. This commit puts the send in a select, so it won't block even if w.exitCh is closed.

Similarly, there are two goroutines using channel errc: the parent that runs the test receives from it, and the child created at line 573 sends to it. If the parent goroutine exits too early by calling t.Fatalf() at line 614, then the child goroutine will be blocked at line 574 forever. This commit adds 1 buffer to errc. Now send will not block, and receive is not influenced because receive still needs to wait for the send.",TRUE,valid
1a715d7db57997307d309a498e8f819dd08725ad,Guillaume Ballet,gballet@gmail.com,2020-12-11T09:28:01Z,Guillaume Ballet,gballet@gmail.com,2020-12-11T09:28:01Z,"les: rework float conversion on arm64 and other architectures (#21994)

The previous fix #21960 converted the float to an intermediate signed int, before attempting the uint conversion. Although this works, this doesn't guarantee that other architectures will work the same.",TRUE,valid
fc0662bb2372f9a94dea60c3dcf122afd6bda55f,Felix Lange,fjl@twurst.com,2020-12-11T07:59:46Z,Felix Lange,fjl@twurst.com,2020-12-11T07:59:46Z,params: begin v1.9.26 release cycle,FALSE,unsigned
e7872729012a4871397307b12cc3f4772ffcbec6,Felix Lange,fjl@twurst.com,2020-12-11T07:59:12Z,Felix Lange,fjl@twurst.com,2020-12-11T07:59:12Z,params: go-ethereum v1.9.25 stable,FALSE,unsigned
1d1f5fea4a3327dd59e39bf1324501f9b43f3354,Felix Lange,fjl@twurst.com,2020-12-11T08:02:55Z,Felix Lange,fjl@twurst.com,2020-12-11T08:02:55Z,build: upgrade to Go 1.15.6 (#21986),TRUE,valid
004541098d28ed2d76ac4aa524b0e3fa80140f97,gary rong,garyrong0905@gmail.com,2020-12-10T16:20:55Z,gary rong,garyrong0905@gmail.com,2020-12-10T16:20:55Z,"les: introduce forkID (#21974)

* les: introduce forkID

* les: address comment",TRUE,valid
b44f24e3e6644a2034ce23037827b21aa59e441d,Martin Holst Swende,martin@swende.se,2020-12-10T13:48:32Z,Martin Holst Swende,martin@swende.se,2020-12-10T13:48:32Z,"core, trie: speed up some tests with quadratic processing flaw (#21987)

This commit fixes a flaw in two testcases, and brings down the exec-time from ~40s to ~8s for trie/TestIncompleteSync.

The checkConsistency was performed over and over again on the complete set of nodes, not just the recently added, turning it into a quadratic runtime.",TRUE,valid
9f6bb492bbcd6def92d0bc195faeb751e1591535,gary rong,garyrong0905@gmail.com,2020-12-10T13:33:52Z,gary rong,garyrong0905@gmail.com,2020-12-10T13:33:52Z,"les, light: remove untrusted header retrieval in ODR (#21907)

* les, light: remove untrusted header retrieval in ODR

* les: polish

* light: check the hash equality in odr",TRUE,valid
817a3fb5622c8704116e9847661c16f9f3d785c6,Felix Lange,fjl@twurst.com,2020-12-09T19:21:31Z,Felix Lange,fjl@twurst.com,2020-12-09T19:21:31Z,"p2p/enode: avoid crashing for invalid IP (#21981)

The database panicked for invalid IPs. This is usually no problem
because all code paths leading to node DB access verify the IP, but it's
dangerous because improper validation can turn this panic into a DoS
vulnerability. The quick fix here is to just turn database accesses
using invalid IP into a noop. This isn't great, but I'm planning to
remove the node DB for discv5 long-term, so it should be fine to have
this quick fix for half a year.

Fixes #21849",TRUE,valid
f935b1d5426b7c4147914b9f120b07f1f983f0ef,Felix Lange,fjl@twurst.com,2020-12-09T14:43:36Z,Felix Lange,fjl@twurst.com,2020-12-09T14:43:36Z,"crypto/signify, build: fix archive signing with signify (#21977)

This fixes some issues in crypto/signify and makes release signing work.

The archive signing step in ci.go used getenvBase64, which decodes the key data.
This is incorrect here because crypto/signify already base64-decodes the key.",TRUE,valid
915643a3e5a487899d925250b922824fb3d65708,Martin Holst Swende,martin@swende.se,2020-12-09T12:59:24Z,Martin Holst Swende,martin@swende.se,2020-12-09T12:59:24Z,cmd/geth: add test to verify regexps in version check (#21962),TRUE,valid
40b6ccf383cba1471971767039a3071b8c57d28b,Martin Holst Swende,martin@swende.se,2020-12-09T10:13:02Z,Martin Holst Swende,martin@swende.se,2020-12-09T10:13:02Z,"core,les: headerchain import in batches (#21471)

* core: add test for headerchain inserts

* core, light: write headerchains in batches

* core: change to one callback per batch of inserted headers + review concerns

* core: error-check on batch write

* core: unexport writeHeaders

* core: remove callback parameter in InsertHeaderChain

The semantics of InsertHeaderChain are now much simpler: it is now an
all-or-nothing operation. The new WriteStatus return value allows
callers to check for the canonicality of the insertion. This change
simplifies use of HeaderChain in package les, where the callback was
previously used to post chain events.

* core: skip some hashing when writing headers

* core: less hashing in header validation

* core: fix headerchain flaw regarding blacklisted hashes

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
bd848aad7c4e1f7d1eaecd9ea7ee23785090768a,"Li, Cheng",lob4tt@gmail.com,2020-12-08T18:19:09Z,"Li, Cheng",lob4tt@gmail.com,2020-12-08T18:19:09Z,"common: improve printing of Hash and Address (#21834)

Both Hash and Address have a String method, which returns the value as
hex with 0x prefix. They also had a Format method which tried to print
the value using printf of []byte. The way Format worked was at odds with
String though, leading to a situation where fmt.Sprintf(""%v"", hash)
returned the decimal notation and hash.String() returned a hex string.

This commit makes it consistent again. Both types now support the %v,
%s, %q format verbs for 0x-prefixed hex output. %x, %X creates
unprefixed hex output. %d is also supported and returns the decimal
notation ""[1 2 3...]"".

For Address, the case of hex characters in %v, %s, %q output is
determined using the EIP-55 checksum. Using %x, %X with Address
disables checksumming.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
ed0670cb17a96aafeb9eaaeb9765a42fb6bb5663,Marius van der Wijden,m.vanderwijden@live.de,2020-12-08T13:44:56Z,Marius van der Wijden,m.vanderwijden@live.de,2020-12-08T13:44:56Z,"accounts/abi/bind: allow specifying signer on transactOpts (#21356)

This commit enables users to specify which signer they want to use while creating their transactOpts.
Previously all contract interactions used the homestead signer. Now a user can specify whether they
want to sign with homestead or EIP155 and specify the chainID which adds another layer of security.

Closes #16484",TRUE,valid
6a4e730003d4adec28fa14baa78020c8c8b53887,Steve Ruckdashel,steven.ruckdashel@optum.com,2020-12-08T09:47:56Z,Steve Ruckdashel,steven.ruckdashel@optum.com,2020-12-08T09:47:56Z,"crypto/secp256k1: add workaround for go mod vendor (#21735)

Go won't vendor C files if there are no Go files present in the directory.
Workaround is to add dummy Go files.

Fixes: #20232",TRUE,valid
581c028d181cc4582c8435ced5c0b104ac63346f,Guillaume Ballet,gballet@gmail.com,2020-12-07T13:04:27Z,Guillaume Ballet,gballet@gmail.com,2020-12-07T13:04:27Z,"les: cosmetic rewrite of the arm64 float bug workaround (#21960)

* les: revert arm float bug workaround to check go 1.15

* add traces to reproduce outside travis

* simpler workaround",TRUE,valid
15339cf1c9af2b1242c2574869fa7afca1096cdf,Martin Holst Swende,martin@swende.se,2020-12-04T14:01:47Z,Martin Holst Swende,martin@swende.se,2020-12-04T14:01:47Z,"cmd/geth: implement vulnerability check (#21859)

* cmd/geth: implement vulnerability check

* cmd/geth: use minisign to verify vulnerability feed

* cmd/geth: add the test too

* cmd/geth: more minisig/signify testing

* cmd/geth: support multiple pubfiles for signing

* cmd/geth: add @holiman minisig pubkey

* cmd/geth: polishes on vulnerability check

* cmd/geth: fix ineffassign linter nit

* cmd/geth: add CVE to version check struct

* cmd/geth/testdata: add missing testfile

* cmd/geth: add more keys to versionchecker

* cmd/geth: support file:// URLs in version check

* cmd/geth: improve key ID printing when signature check fails

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
7770e41cb5fcc386a7d2329d1187174839122f24,Martin Holst Swende,martin@swende.se,2020-12-04T11:22:19Z,Martin Holst Swende,martin@swende.se,2020-12-04T11:22:19Z,"core: improve contextual information on core errors (#21869)

A lot of times when we hit 'core' errors, example: invalid tx, the information provided is
insufficient. We miss several pieces of information: what account has nonce too high,
and what transaction in that block was offending?

This PR adds that information, using the new type of wrapped errors.
It also adds a testcase which (partly) verifies the output from the errors.

The first commit changes all usage of direct equality-checks on core errors, into
using errors.Is. The second commit adds contextual information. This wraps most
of the core errors with more information, and also wraps it one more time in
stateprocessor, to further provide tx index and tx hash, if such a tx is encoutered in
a block. The third commit uses the chainmaker to try to generate chains with such
errors in them, thus triggering the errors and checking that the generated string meets
expectations.",TRUE,valid
62cedb3aabf5db260b74830285975116ba464e86,Chris Ziogas,ziogas_chr@hotmail.com,2020-12-04T07:54:07Z,Chris Ziogas,ziogas_chr@hotmail.com,2020-12-04T07:54:07Z,"core/vm/runtime: remove duplicated line (#21956)


This line is duplicated, though it doesn't cause any issues.",TRUE,valid
d7a64dc02b788b9a77904108b49d19a7b4a1a224,Martin Holst Swende,martin@swende.se,2020-12-03T12:16:20Z,Martin Holst Swende,martin@swende.se,2020-12-03T12:16:20Z,cmd/devp2p: add node filter for snap + fix arg error (#21950),TRUE,valid
0b2f1446bbece9bb4e7abef0bf8de1a267aba654,Martin Holst Swende,martin@swende.se,2020-12-02T15:42:38Z,Martin Holst Swende,martin@swende.se,2020-12-02T15:42:38Z,"go.mod: update github.com/golang/snappy(#21934)

This updates the snappy library depency to include a fix for
a Go 1.16 incompatibility issue.",TRUE,valid
e9e86aeacbfc810016c2451e8b21616a3ea0b927,Martin Holst Swende,martin@swende.se,2020-12-02T11:49:20Z,Martin Holst Swende,martin@swende.se,2020-12-02T11:49:20Z,"eth: fix error in tracing if reexec is set (#21830)

* eth: fix error in tracing if reexec is set

* eth: change pointer embedding to value-embedding",TRUE,valid
908c18073a4df12866c84c4ff5f63430e28a62d0,gary rong,garyrong0905@gmail.com,2020-12-02T08:17:59Z,gary rong,garyrong0905@gmail.com,2020-12-02T08:17:59Z,params: update CHTs (#21941),TRUE,valid
a2795c8055988ce231ff4abf1731514c75c4be5b,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-12-01T09:03:41Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-12-01T09:03:41Z,les: fix nodiscover option (#21906),TRUE,valid
e7db1dbc96fb366c13e05ee9b3b0a57ba26ca49b,Martin Holst Swende,martin@swende.se,2020-11-30T17:58:47Z,Martin Holst Swende,martin@swende.se,2020-11-30T17:58:47Z,"p2p/nodestate: fix deadlock during shutdown of les server (#21927)

This PR fixes a deadlock reported here: #21925

The cause is that many operations may be pending, but if the close happens, only one of them gets awoken and exits, the others remain waiting for a signal that never comes.",TRUE,valid
a1ddd9e1d313553b0f584d5d3aeb2a4026a1b0c4,Marius van der Wijden,m.vanderwijden@live.de,2020-11-30T14:23:48Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-30T14:23:48Z,cmd/devp2p/internal/ethtest: add transaction tests (#21857),TRUE,valid
aba0c234c29c72860c369ec97553716a3fad11cd,Martin Holst Swende,martin@swende.se,2020-11-30T13:43:20Z,Martin Holst Swende,martin@swende.se,2020-11-30T13:43:20Z,cmd/geth: make tests run quicker + use less memory and disk (#21919),TRUE,valid
566cb4c5f098a132d485a375cb7a02883c88a48f,Pascal Dierich,pascal@merkleplant.xyz,2020-11-30T08:03:24Z,Pascal Dierich,pascal@merkleplant.xyz,2020-11-30T08:03:24Z,"accounts/keystore: add missing function doc for SignText (#21914)

Co-authored-by: Pascal Dierich <pascal@pascaldierich.com>",TRUE,valid
b71334ac3de38338e618aaf8ea6b4a884d2d80f5,Kristofer Peterson,svenski123@users.noreply.github.com,2020-11-29T12:43:15Z,Kristofer Peterson,svenski123@users.noreply.github.com,2020-11-29T12:43:15Z,"accounts, signer: fix Ledger Live account derivation path (clef) (#21757)

* signer/core/api: fix derivation of ledger live accounts

For ledger hardware wallets, change account iteration as follows:

- ledger legacy: m/44'/60'/0'/X; for 0<=X<5
- ledger live: m/44'/60'/0'/0/X; for 0<=X<5

- ledger legacy: m/44'/60'/0'/X; for 0<=X<10
- ledger live: m/44'/60'/X'/0/0; for 0<=X<10

Non-ledger derivation is unchanged and remains as:
- non-ledger: m/44'/60'/0'/0/X; for 0<=X<10

* signer/core/api: derive ten default paths for all hardware wallets, plus ten legacy and ten live paths for ledger wallets

* signer/core/api: as .../0'/0/0 already included by default paths, do not include it again with ledger live paths

* accounts, signer: implement path iterators for hd wallets

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
fa572cd2971fda0bf773d2817acb23385bac66c7,Guillaume Ballet,gballet@gmail.com,2020-11-27T11:13:54Z,Guillaume Ballet,gballet@gmail.com,2020-11-27T11:13:54Z,"crypto: signing builds with signify/minisign (#21798)

* internal/build: implement signify's signing func
* Add signify to the ci utility
* fix output file format
* Add unit test for signify
* holiman's + travis' feedback
* internal/build: verify signify's output
* crypto: move signify to common dir
* use go-minisign to verify binaries
* more holiman feedback
* crypto, ci: support minisign output
* only accept one-line trusted comments
* configurable untrusted comments
* code cleanup in tests
* revert to use ed25519 from the stdlib
* bug: fix for empty untrusted comments
* write timestamp as comment if trusted comment isn't present
* rename line checker to commentHasManyLines
* crypto: added signify fuzzer (#6)
* crypto: added signify fuzzer
* stuff
* crypto: updated signify fuzzer to fuzz comments
* crypto: repro signify crashes
* rebased fuzzer on build-signify branch
* hide fuzzer behind gofuzz build flag
* extract key data inside a single function
* don't treat \r as a newline
* travis: fix signing command line
* do not use an external binary in tests
* crypto: move signify to crypto/signify
* travis: fix formatting issue
* ci: fix linter build after package move

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>",TRUE,valid
429e7141f2f41c1d66dd4dd711a47ca9e0f0c2cb,Nishant Das,nishdas93@gmail.com,2020-11-25T21:16:36Z,Nishant Das,nishdas93@gmail.com,2020-11-25T21:16:36Z,"p2p/discover: fix deadlock in discv5 message dispatch (#21858)

This fixes a deadlock that could occur when a response packet arrived
after a call had already received enough responses and was about to
signal completion to the dispatch loop.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
810f9e057daccda9eb5c04721b6dd4660f001cc5,Alex Prut,1648497+alexprut@users.noreply.github.com,2020-11-25T20:00:23Z,Alex Prut,1648497+alexprut@users.noreply.github.com,2020-11-25T20:00:23Z,all: remove redundant conversions and import names (#21903),TRUE,valid
f59ed3565d18c1fa676fd34f4fd41ecccad707e8,Antoine Toulme,atoulme@users.noreply.github.com,2020-11-25T09:19:36Z,Antoine Toulme,atoulme@users.noreply.github.com,2020-11-25T09:19:36Z,"graphql: always return 400 if errors are present in the response (#21882)

* Make sure to return 400 when errors are present in the response

* graphql: use less memory in chainconfig for tests

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
c92faee66e8823de50fbe1dab4b0c4549802e730,Alex Prut,1648497+alexprut@users.noreply.github.com,2020-11-25T08:24:50Z,Alex Prut,1648497+alexprut@users.noreply.github.com,2020-11-25T08:24:50Z,"all: simplify nested complexity and if blocks ending with a return statement (#21854)

Changes:

    Simplify nested complexity
    If an if blocks ends with a return statement then remove the else nesting.

Most of the changes has also been reported in golint https://goreportcard.com/report/github.com/ethereum/go-ethereum#golint",TRUE,valid
29efe1fc7eccf3eb99a69c52427efbdb30de1a9f,Marius van der Wijden,m.vanderwijden@live.de,2020-11-25T07:53:20Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-25T07:53:20Z,core/types: fixed typo (#21897),TRUE,valid
59b480ab4bf49e56d4564be9a1b5173d9612aa74,Marius van der Wijden,m.vanderwijden@live.de,2020-11-24T15:09:17Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-24T15:09:17Z,"cmd/devp2p/internal/ethtest: add 'large announcement' tests (#21792)

* cmd/devp2p/internal/ethtest: added large announcement tests

* cmd/devp2p/internal/ethtest: added large announcement tests

* cmd/devp2p/internal/ethtest: refactored stuff a bit

* cmd/devp2p/internal/ethtest: added TestMaliciousStatus/Handshake

* cmd/devp2p/internal/ethtest: fixed rebasing issue

* happy linter, happy life

* cmd/devp2p/internal/ethtest: used readAndServe

* stuff

* cmd/devp2p/internal/ethtest: fixed test cases",TRUE,valid
7e7a3f0f71d60510afb5cd06282c1db729c1f60b,ligi,ligi@ligi.de,2020-11-24T15:02:53Z,ligi,ligi@ligi.de,2020-11-24T15:02:53Z,"github: Remove vulnerability.md (#21894)

This type is automatically offered by github after changing to the new style and a security.md being present",TRUE,valid
bddd103a9f0af27ef533f04e06ea429cf76b6d46,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-11-24T09:55:17Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-11-24T09:55:17Z,les: fix GetProofsV2 bug (#21896),TRUE,valid
6b5840961407960a06ed20cb5dd1b782080653ff,LieutenantRoger,dijsky_2015@hotmail.com,2020-11-24T09:33:58Z,LieutenantRoger,dijsky_2015@hotmail.com,2020-11-24T09:33:58Z,"cmd/faucet: improve handling of facebook post url (#21838)

Resolves #21532

Co-authored-by: roger <dengjun@huobi.com>",TRUE,valid
ead814616c094331915b03edd82d4200a7880178,Peter Szilagyi,peterke@gmail.com,2020-11-23T15:47:20Z,Peter Szilagyi,peterke@gmail.com,2020-11-23T15:47:20Z,"Merge pull request #21890 from ligi/issue_templates

github: Add new style of issue-templates",TRUE,valid
6104ab6b6d201df9e9d6372d1c35835d10c8f6ff,Martin Holst Swende,martin@swende.se,2020-11-23T14:49:16Z,Martin Holst Swende,martin@swende.se,2020-11-23T14:49:16Z,"tests/fuzzers/bls1381: add bls fuzzer (#21796)

* added bls fuzzer

* crypto/bls12381: revert bls-changes, fixup fuzzer tests

* fuzzers: split bls fuzzing into 8 different units

* fuzzers/bls: remove (now stale) corpus

* crypto/bls12381: added blsfuzz corpus

* fuzzers/bls12381: fix the bls corpus

* fuzzers: fix oss-fuzz script

* tests/fuzzers: fixups on bls corpus

* test/fuzzers: remove leftover corpus

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>",TRUE,valid
f6e1aed504d70197884da3031ae003755ef8e4d5,ligi,ligi@ligi.de,2020-11-23T12:12:42Z,ligi,ligi@ligi.de,2020-11-23T12:12:42Z,"github: Add new style of issue-templates

closes #20024",TRUE,valid
bddf5aaa2f737569e5f96de3676c5123b82e60f0,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-11-23T09:18:33Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-11-23T09:18:33Z,"les/utils: protect against WeightedRandomSelect overflow (#21839)

Also fixes a bug in les/flowcontrol that caused the overflow.",TRUE,valid
3ef52775c4756b7cbdc28b807eb4600127a9a873,Martin Holst Swende,martin@swende.se,2020-11-20T14:14:25Z,Martin Holst Swende,martin@swende.se,2020-11-20T14:14:25Z,"p2p: avoid spinning loop on out-of-handles (#21878)

* p2p: avoid busy-loop on temporary errors

* p2p: address review concerns",TRUE,valid
ebb9591c4d860e85fe1a015e6c9d7e85b7500b9a,Martin Holst Swende,martin@swende.se,2020-11-20T07:53:10Z,Martin Holst Swende,martin@swende.se,2020-11-20T07:53:10Z,"crypto/bn256: fix bn256Mul fuzzer to not hang on large input (#21872)

* crypto/bn256: fix bn256Mul fuzzer to not hang on large input

* Update crypto/bn256/bn256_fuzz.go

Co-authored-by: ligi <ligi@ligi.de>

Co-authored-by: ligi <ligi@ligi.de>",TRUE,valid
6f88d6530a819a3a65c4b95681e6c52115365622,Martin Holst Swende,martin@swende.se,2020-11-19T21:50:47Z,Martin Holst Swende,martin@swende.se,2020-11-19T21:50:47Z,"trie, rpc, cmd/geth: fix tests on 32-bit and windows + minor rpc fixes (#21871)

* trie: fix tests to work on 32-bit systems

* les: make test work on 32-bit platform

* cmd/geth: fix windows-issues on tests

* trie: improve balance

* cmd/geth: make account tests less verbose + less mem intense

* rpc: make debug-level log output less verbose

* cmd/geth: lint",TRUE,valid
f1e1d9f874eca8430ccf2fbfd1b899592a2fcdac,wbt,wbt@users.noreply.github.com,2020-11-19T13:54:49Z,wbt,wbt@users.noreply.github.com,2020-11-19T13:54:49Z,"node: support expressive origin rules in ws.origins (#21481)

* Only compare hostnames in ws.origins

Also using a helper function for ToLower consolidates all preparation steps in one function for more maintainable consistency.

Spaces => tabs

Remove a semicolon

Add space at start of comment

Remove parens around conditional

Handle case wehre parsed hostname is empty

When passing a single word like ""localhost"" the parsed hostname is an empty string. Handle this and the error-parsing case together as default, and the nonempty hostname case in the conditional.

Refactor with new originIsAllowed functions

Adds originIsAllowed() & ruleAllowsOrigin(); removes prepOriginForComparison

Remove blank line

Added tests for simple allowed-orign rule

which does not specify a protocol or port, just a hostname

Fix copy-paste: `:=` => `=`

Remove parens around conditional

Remove autoadded whitespace on blank lines

Compare scheme, hostname, and port with rule

if the rule specifies those portions.

Remove one autoadded trailing whitespace

Better handle case where only origin host is given

e.g. ""localhost""

Remove parens around conditional

Refactor: attemptWebsocketConnectionFromOrigin DRY

Include return type on helper function

Provide srv obj in helper fn

Provide srv to helper fn

Remove stray underscore

Remove blank line

parent 93e666b4c1e7e49b8406dc83ed93f4a02ea49ac1
author wbt <wbt@users.noreply.github.com> 1598559718 -0400
committer Martin Holst Swende <martin@swende.se> 1605602257 +0100
gpgsig -----BEGIN PGP SIGNATURE-----

 iQFFBAABCAAvFiEEypmrtbNuJK1doP1AaDtDjAWl3fAFAl+zi9ARHG1hcnRpbkBz
 d2VuZGUuc2UACgkQaDtDjAWl3fDRiwgAoMtzU8dwRV7Q9xkCwWEx9Wz2f3n6jUr2
 VWBycDKGKwRkPPOER3oc9kzjGU/P1tFlK07PjfnAKZ9KWzxpDcJZwYM3xCBurG7A
 16y4YsQnzgPNONv3xIkdi3RZtDBIiPFFEmdZFFvZ/jKexfI6JIYPngCAoqdTIFb9
 On/aPvvVWQn1ExfmarsvvJ7kUDUG77tZipuacEH5FfFsfelBWOEYPe+I9ToUHskv
 +qO6rOkV1Ojk8eBc6o0R1PnApwCAlEhJs7aM/SEOg4B4ZJJneiFuEXBIG9+0yS2I
 NOicuDPLGucOB5nBsfIKI3USPeE+3jxdT8go2lN5Nrhm6MimoILDsQ==
 =sgUp
 -----END PGP SIGNATURE-----

Refactor: drop err var for more concise test lines

Add several tests for new WebSocket origin checks

Remove autoadded whitespace on blank lines

Restore TestWebsocketOrigins originally-named test

and rename the others to be helpers rather than full tests

Remove autoadded whitespace on blank line

Temporarily comment out new test sets

Uncomment test around origin rule with scheme

Remove tests without scheme on browser origin

per https://github.com/ethereum/go-ethereum/pull/21481/files#r479371498

Uncomment tests with port; remove some blank lines

Handle when browser does not specify scheme/port

Uncomment test for including scheme & port in rule

Add IP tests

* node: more tests + table-driven, ws origin changes

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
28080463d2834dfc4e36061930ad721bf8a2482f,Peter Szilagyi,peterke@gmail.com,2020-11-19T05:49:40Z,Peter Szilagyi,peterke@gmail.com,2020-11-19T05:49:40Z,"Merge pull request #21861 from holiman/remove_retesteth

cmd/geth: remove retesteth",TRUE,valid
b9ff57c59e3705eb963d39001192ab3a0ecd2d1e,gary rong,garyrong0905@gmail.com,2020-11-18T20:50:11Z,gary rong,garyrong0905@gmail.com,2020-11-18T20:50:11Z,metrics: fix the panic for reading empty cpu stats (#21864),TRUE,valid
23524f8900bceb0c921b61cbf6f51f38325e2971,gary rong,garyrong0905@gmail.com,2020-11-18T09:51:33Z,gary rong,garyrong0905@gmail.com,2020-11-18T09:51:33Z,"all: disable recording preimage of trie keys (#21402)

* cmd, core, eth, light, trie: disable recording preimage by default

* core, eth: fix unit tests

* core: fix import

* all: change to nopreimage

* cmd, core, eth, trie: use cache.preimages flag

* cmd: enable preimages for archive node

* cmd/utils, trie: simplify preimage tracking a bit

* core: fix linter

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
6b9858085f8e10d50df3bf09d0a5dfd59b683d05,Martin Holst Swende,martin@swende.se,2020-11-17T11:01:19Z,Martin Holst Swende,martin@swende.se,2020-11-17T11:01:19Z,cmd/geth: improve les test on windows (#21860),TRUE,valid
db87223269ca0986af312df78b84257ed9836dcf,Abd ar-Rahman Hamidi,bakhtiyor.h@gmail.com,2020-11-17T10:47:17Z,Abd ar-Rahman Hamidi,bakhtiyor.h@gmail.com,2020-11-17T10:47:17Z,"crypto/secp256k1: add checking z sign in affineFromJacobian (#18419)

The z == 0 check is hit whenever we Add two points with the same x1/x2
coordinate. crypto/elliptic uses the same check in their affineFromJacobian
function. This change does not affect block processing or tx signature verification
in any way, because it does not use the Add or Double methods.",TRUE,valid
d513584e5280096efb096a92d512f6dc8771a658,Martin Holst Swende,martin@swende.se,2020-11-17T10:44:38Z,Martin Holst Swende,martin@swende.se,2020-11-17T10:44:38Z,cmd/geth: remove retesteth,TRUE,valid
844485ec6aa2da15f203dda43b919f842c866750,Preston Van Loon,preston@prysmaticlabs.com,2020-11-17T09:35:58Z,Preston Van Loon,preston@prysmaticlabs.com,2020-11-17T09:35:58Z,"consensus/ethash: fix usage of *reflect.SliceHeader (#21372)

* consensus/ethash: only use *reflect.SliceHeader, not reflect.SliceHeader. See comment here: https://github.com/golang/go/issues/40397\#issuecomment-663748689

* consensus/ethash: pr feedback from @mdempsky, makes a copy of dest such that is not mutated

* consensus/ethash: remove noop assign

* consensus/ethash: apply same fix to another location

Co-authored-by: Peter Szilagyi <peterke@gmail.com>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
1ea7537997d1c5444f78ec87f8b309b2f908c76e,Sad Pencil,sadpencil@outlook.com,2020-11-17T08:51:36Z,Sad Pencil,sadpencil@outlook.com,2020-11-17T08:51:36Z,"crypto/bn256: refine comments according to #19577, #21595, and #21836 (#21847)",TRUE,valid
92c56eb820eff839e062947cd6231cc8593823e5,Pascal Dierich,pascal@pascaldierich.com,2020-11-16T13:08:13Z,Pascal Dierich,pascal@pascaldierich.com,2020-11-16T13:08:13Z,common: fix documentation of Address.SetBytes (#21814),TRUE,valid
cf856ea1ad96ac39ea477087822479b63417036a,Nicolas Feignon,nfeignon@gmail.com,2020-11-13T12:43:15Z,Nicolas Feignon,nfeignon@gmail.com,2020-11-13T12:43:15Z,accounts/abi: template: set events Raw field in Parse methods (#21807),TRUE,valid
2045a2bba3cd2f93fd913c692be146adabd8940c,Marius van der Wijden,m.vanderwijden@live.de,2020-11-13T12:42:19Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-13T12:42:19Z,"core, all: split vm.Context into BlockContext and TxContext (#21672)

* all: core: split vm.Config into BlockConfig and TxConfig

* core: core/vm: reset EVM between tx in block instead of creating new

* core/vm: added docs",TRUE,valid
6f4cccf8d27265e197261c717e95ae10e30d7abe,Martin Holst Swende,martin@swende.se,2020-11-13T12:39:59Z,Martin Holst Swende,martin@swende.se,2020-11-13T12:39:59Z,"core/vm, protocol_params: implement eip-2565 modexp repricing (#21607)

* core/vm, protocol_params: implement eip-2565 modexp repricing

* core/vm: fix review concerns",TRUE,valid
0703c91fbad6653dc7aa809816e5698b0b868693,Martin Holst Swende,martin@swende.se,2020-11-13T11:36:38Z,Martin Holst Swende,martin@swende.se,2020-11-13T11:36:38Z,"tests/fuzzers: improve the fuzzers (#21829)

* tests/fuzzers, common/bitutil: make fuzzers use correct returnvalues + remove output

* tests/fuzzers/stacktrie: fix duplicate-key insertion in stacktrie (false positive)

* tests/fuzzers/stacktrie: fix compilation error

* tests/fuzzers: linter nits",TRUE,valid
9ded4e33c5b6976657018b23ba4cc76939c165c7,Marius van der Wijden,m.vanderwijden@live.de,2020-11-13T09:17:23Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-13T09:17:23Z,"crypto/bn256: better comments for u, P and Order (#21836)",TRUE,valid
a19b4235c71a1d440e585b13be90677e3572261e,Martin Holst Swende,martin@swende.se,2020-11-13T08:27:57Z,Martin Holst Swende,martin@swende.se,2020-11-13T08:27:57Z,"crypto/bn256: improve bn256 fuzzer (#21815)

* crypto/cloudflare: fix nil deref in random G1/G2 reading

* crypto/bn256: improve fuzzer

* crypto/bn256: fix some flaws in fuzzer",TRUE,valid
919229d63c9c138160816d007866bf3daeb6c6f0,Felix Lange,fjl@twurst.com,2020-11-12T20:21:24Z,Felix Lange,fjl@twurst.com,2020-11-12T20:21:24Z,params: begin v1.9.25 release cycle,FALSE,unsigned
cc05b050df5f88e80bb26aaf6d2f339c49c2d702,Peter Szilagyi,peterke@gmail.com,2020-11-12T20:10:15Z,Peter Szilagyi,peterke@gmail.com,2020-11-12T20:10:15Z,params: release Geth v1.9.24 with Go 1.15.5 (#21842),TRUE,valid
920a28711746c8e44ef3e6270a41f038d767d92b,Felix Lange,fjl@twurst.com,2020-11-11T22:52:50Z,Felix Lange,fjl@twurst.com,2020-11-11T22:52:50Z,.travis.yml: move test builders after install builders (#21833),TRUE,valid
d49407427d1b2642184166bd36ae43070db13e36,Felix Lange,fjl@twurst.com,2020-11-11T21:08:22Z,Felix Lange,fjl@twurst.com,2020-11-11T21:08:22Z,"build: fix regressions with the -dlgo change (#21831)

This fixes cross-build and mobile framework failures.
It also disables the mac test builder because it was failing
all the time in hard to understand ways and we can't afford
it anymore under Travis CI's new pricing.",TRUE,valid
d990df909d7839640143344e79356754384dcdd0,Slava Karpenko,slavikus@gmail.com,2020-11-11T20:13:12Z,Slava Karpenko,slavikus@gmail.com,2020-11-11T20:13:12Z,"consensus/ethash: use 64bit indexes for the DAG generation (#21793)

* Bit boundary fix for the DAG generation routine

* Fix unnecessary conversion warnings

Co-authored-by: Sergey Pavlov <spavlov@gmail.com>",TRUE,valid
27d93c1848846b75d0e67fcac284a0d417acd47c,Felix Lange,fjl@twurst.com,2020-11-11T13:34:43Z,Felix Lange,fjl@twurst.com,2020-11-11T13:34:43Z,"build: add -dlgo flag in ci.go (#21824)

This new flag downloads a known version of Go and builds with it. This
is meant for environments where we can't easily upgrade the installed Go
version.

* .travis.yml: remove install step for PR test builders

We added this step originally to avoid re-building everything
for every test. go test has become much smarter in recent go
releases, so we no longer need to install anything here.",TRUE,valid
70868b1e4ab099d36d68ca86e1a569f9ebfc12dc,Marius van der Wijden,m.vanderwijden@live.de,2020-11-10T19:54:59Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-10T19:54:59Z,"fuzzers: removed fuzzbuzz configuration (#21813)

We decided to move our fuzzing efforts to oss-fuzz since fuzzbuzz is still early access.",TRUE,valid
941d8b5c5c3b797251378c30125630313f041106,Martin Holst Swende,martin@swende.se,2020-11-10T14:21:41Z,Martin Holst Swende,martin@swende.se,2020-11-10T14:21:41Z,scripts: create oss-fuzz script in go-ethereum (#21808),TRUE,valid
c52dfd55fb375a798ef2e3d2620dbb38d83624c1,gary rong,garyrong0905@gmail.com,2020-11-10T13:19:44Z,gary rong,garyrong0905@gmail.com,2020-11-10T13:19:44Z,"p2p/simulations/adapters/exec: fix some issues (#21801)

- Remove the ws:// prefix from the status endpoint since
  the ws:// is already included in the stack.WSEndpoint().
- Don't register the services again in the node start.
  Registration is already done in the initialization stage.
- Expose admin namespace via websocket.
  This namespace is necessary for connecting the peers via websocket.
- Offer logging relevant options for exec adapter.
  It's really painful to mix all log output in the single console. So
  this PR offers two additional options for exec adapter in this case
  testers can config the log output(e.g. file output) and log level
  for each p2p node.",TRUE,valid
0c34eae172d07d4c7778f80aac0b2e96a04e5154,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:57:23Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:57:23Z,"Merge pull request #21803 from holiman/ethash

consensus/ethash: fix the percentage progress report",TRUE,valid
7c30f4d08580aa0de5e88b55f8abe96e50e0f441,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:50:26Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:50:26Z,"Merge pull request #21804 from karalabe/snapshot-marker-sync

core/state/snapshot: update generator marker in sync with flushes",TRUE,valid
040928d8bb11cc6e2147c0caa430fab2f2887394,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:49:56Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:49:56Z,"Merge pull request #21805 from karalabe/travis-drop-1.13

travis: drop Go 1.13 builders as it's not supported any more",TRUE,valid
9e688fb64c13f5bc14512d3638a561ccb691196c,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:49:21Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:49:21Z,"Merge pull request #21806 from karalabe/deprecate-eoan

build: stop building for Ubuntu Eoan, not supported any more",TRUE,valid
1143dc6e295e6f312b18542b3454f52ccd46f53d,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:43:54Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:43:54Z,"build: stop building for Ubuntu Eoan, not supported any more",TRUE,valid
eb694ea7067b275058d41061bf175ef2da62491d,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:39:42Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T15:39:42Z,travis: drop Go 1.13 builders as it's not supported any more,TRUE,valid
81678971dbd578751896c71f8724fb61f8f22ad7,Martin Holst Swende,martin@swende.se,2020-11-09T14:08:12Z,Martin Holst Swende,martin@swende.se,2020-11-09T14:08:12Z,"trie, tests/fuzzers: implement a stacktrie fuzzer + stacktrie fixes (#21799)

* trie: fix error in stacktrie not committing small roots

* fuzzers: make trie-fuzzer use correct returnvalues

* trie: improved tests

* tests/fuzzers: fuzzer for stacktrie vs regular trie

* test/fuzzers: make stacktrie fuzzer use 32-byte keys

* trie: fix error in stacktrie with small nodes

* trie: add (skipped) testcase for stacktrie

* tests/fuzzers: address review comments for stacktrie fuzzer

* trie: fix docs in stacktrie",TRUE,valid
7b7b327ff294201fa4f7cf460c4a73a4212c06cf,Peter Szilagyi,peterke@gmail.com,2020-11-09T14:03:58Z,Peter Szilagyi,peterke@gmail.com,2020-11-09T14:03:58Z,core/state/snapshot: update generator marker in sync with flushes,TRUE,valid
81ff7000775b279e9c6ccf2ca3a3ebd6f406a2f0,Martin Holst Swende,martin@swende.se,2020-11-09T10:48:18Z,Martin Holst Swende,martin@swende.se,2020-11-09T10:48:18Z,consensus/ethash: fix the percentage progress report,TRUE,valid
97fc1c3b1d054a1345934e18fa6c3489e9119666,Peter Szilagyi,peterke@gmail.com,2020-11-05T09:55:50Z,Peter Szilagyi,peterke@gmail.com,2020-11-05T09:55:50Z,"Merge pull request #21787 from karalabe/pod-non-verbose

build: stop verbose output to keep travis from overflowing",TRUE,valid
6cfe494276c097c0e6f5ca31092da747b44943e6,Peter Szilagyi,peterke@gmail.com,2020-11-05T09:52:35Z,Peter Szilagyi,peterke@gmail.com,2020-11-05T09:52:35Z,build: stop verbose output to keep travis from overflowing,TRUE,valid
175506e7fd9601b66355b5cd3f7df4256637586f,Martin Holst Swende,martin@swende.se,2020-11-04T18:29:24Z,Martin Holst Swende,martin@swende.se,2020-11-04T18:29:24Z,"core/types, rlp: optimize derivesha (#21728)

This PR contains a minor optimization in derivesha, by exposing the RLP
int-encoding and making use of it to write integers directly to a
buffer (an RLP integer is known to never require more than 9 bytes
total). rlp.AppendUint64 might be useful in other places too.

The code assumes, just as before, that the hasher (a trie) will copy the
key internally, which it does when doing keybytesToHex(key).

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
36bb7ac083c31d57519c6e2877588fee01339c9b,rene,41963722+renaynay@users.noreply.github.com,2020-11-04T16:36:56Z,rene,41963722+renaynay@users.noreply.github.com,2020-11-04T16:36:56Z,"cmd/devp2p/internal/ethtest: add correct chain files and improve test output (#21782)

This PR replaces the old test genesis.json and chain.rlp files in the testdata
directory for the eth protocol test suite, and also adds documentation for
running the eth test suite locally.

It also improves the test output text and adds more timeouts.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
5d20fbbb6fb90f06bd5592f2c926f21dc8aa6fa2,Felix Lange,fjl@twurst.com,2020-11-04T14:02:58Z,Felix Lange,fjl@twurst.com,2020-11-04T14:02:58Z,"cmd/devp2p, internal/utesting: implement TAP output (#21760)

TAP is a text format for test results. Parsers for it are available in many languages,
making it easy to consume. I want TAP output from our protocol tests because the
Hive wrapper around them needs to know about the test names and their individual
results and logs. It would also be possible to just write this info as JSON, but I don't
want to invent a new format.

This also improves the normal console output for tests (when running without --tap).
It now prints -- RUN lines before any output from the test, and indents the log output
by one space.",TRUE,valid
e6402677c2bbcc6c26fd1c401f95f9a79bf65ea9,gary rong,garyrong0905@gmail.com,2020-11-04T11:41:46Z,gary rong,garyrong0905@gmail.com,2020-11-04T11:41:46Z,"core/state/snapshot: fix journal recovery from generating old journal (#21775)

* core/state/snapshot: print warning if failed to resolve journal

* core/state/snapshot: fix snapshot recovery

When we meet the snapshot journal consisted with:
- disk layer generator with new-format
- diff layer journal with old-format

The base layer should be returned without error.
The broken diff layer can be reconstructed later
but we definitely don't want to reconstruct the
huge diff layer.

* core: add tests",TRUE,valid
3eebf340386dee2f6a008664bf8a1e82842a053e,Marius van der Wijden,m.vanderwijden@live.de,2020-11-04T10:20:39Z,Marius van der Wijden,m.vanderwijden@live.de,2020-11-04T10:20:39Z,"common: remove ToHex and ToHexArray (#21610)

ToHex was deprecated a couple years ago. The last remaining use
was in ToHexArray, which itself only had a single call site.

This just moves ToHexArray near its only remaining call site and
implements it using hexutil.Encode. This changes the default behaviour
of ToHexArray and with it the behaviour of eth_getProof. Previously we
encoded an empty slice as 0, now the empty slice is encoded as 0x.",TRUE,valid
b63bffe8202d46ea10ac8c4f441c582642193ac8,gary rong,garyrong0905@gmail.com,2020-10-30T17:04:38Z,gary rong,garyrong0905@gmail.com,2020-10-30T17:04:38Z,"les, p2p/simulations/adapters: fix issues found while simulating les  (#21761)

This adds a few tiny fixes for les and the p2p simulation framework:

LES Parts

- Keep the LES-SERVER connection even it's non-synced

  We had this idea to reject the connections in LES protocol if the les-server itself is
  not synced. However, in LES protocol we will also receive the connection from another
  les-server. In this case even the local node is not synced yet, we should keep the tcp
  connection for other protocols(e.g. eth protocol).

- Don't count ""invalid message"" for non-existing GetBlockHeadersMsg request

  In the eth syncing mechanism (full sync, fast sync, light sync), it will try to fetch
  some non-existent blocks or headers(to ensure we indeed download all the missing chain).
  In this case, it's possible that the les-server will receive the request for
  non-existent headers. So don't count it as the ""invalid message"" for scheduling
  dropping.

- Copy the announce object in the closure

  Before the les-server pushes the latest headers to all connected clients, it will create
  a closure and queue it in the underlying request scheduler. In some scenarios it's
  problematic. E.g, in private networks, the block can be mined very fast. So before the
  first closure is executed, we may already update the latest_announce object. So actually
  the ""announce"" object we want to send is replaced.

  The downsize is the client will receive two announces with the same td and then drop the
  server.

P2P Simulation Framework

- Don't double register the protocol services in p2p-simulation ""Start"".

  The protocols upon the devp2p are registered in the ""New node stage"". So don't reigster
  them again when starting a node in the p2p simulation framework

- Add one more new config field ""ExternalSigner"", in order to use clef service in the
  framework.",TRUE,valid
b63e3c37a62b4ff7dfafb06e05e760d22be94d86,gary rong,garyrong0905@gmail.com,2020-10-29T19:01:58Z,gary rong,garyrong0905@gmail.com,2020-10-29T19:01:58Z,"core: improve snapshot journal recovery (#21594)

* core/state/snapshot: introduce snapshot journal version

* core: update the disk layer in an atomic way

* core: persist the disk layer generator periodically

* core/state/snapshot: improve logging

* core/state/snapshot: forcibly ensure the legacy snapshot is matched

* core/state/snapshot: add debug logs

* core, tests: fix tests and special recovery case

* core: polish

* core: add more blockchain tests for snapshot recovery

* core/state: fix comment

* core: add recovery flag for snapshot

* core: add restart after start-after-crash tests

* core/rawdb: fix imports

* core: fix tests

* core: remove log

* core/state/snapshot: fix snapshot

* core: avoid callbacks in SetHead

* core: fix setHead cornercase where the threshold root has state

* core: small docs for the test cases

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
43c278cdf93d5469702fd1c2f570dbf3c1718ff0,gary rong,garyrong0905@gmail.com,2020-10-28T12:27:37Z,gary rong,garyrong0905@gmail.com,2020-10-28T12:27:37Z,"core/state: disable snapshot iteration if it's not fully constructed (#21682)

* core/state/snapshot: add diskRoot function

* core/state/snapshot: disable iteration if the snapshot is generating

* core/state/snapshot: simplify the function

* core/state: panic for undefined layer",TRUE,valid
18145adf084b9659c41343609677e6e94c0640c6,gary rong,garyrong0905@gmail.com,2020-10-28T12:00:22Z,gary rong,garyrong0905@gmail.com,2020-10-28T12:00:22Z,"core/state: maintain one more diff layer (#21730)

* core/state: maintain one more diff layer

* core/state: address comment",TRUE,valid
296a27d10624fa07b4fcb8c1964eefa6a0ba850d,Marius van der Wijden,m.vanderwijden@live.de,2020-10-27T16:22:44Z,Marius van der Wijden,m.vanderwijden@live.de,2020-10-27T16:22:44Z,"accounts/abi/bind: restore error functionality (#21743)

* accounts/abi/bind: restore error functionality

* Update accounts/abi/bind/base.go

Co-authored-by: Guillaume Ballet <gballet@gmail.com>

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
1a55e20d3562b08a4cf31b5b6b66d39d9acc43df,James Prestwich,10149425+prestwich@users.noreply.github.com,2020-10-26T12:45:08Z,James Prestwich,10149425+prestwich@users.noreply.github.com,2020-10-26T12:45:08Z,cmd/geth: fix dir path in geth attach for yolov2 network (#21749),TRUE,valid
7b748e550a3234c5240427d0164a058829dc83dc,Peter Szilagyi,peterke@gmail.com,2020-10-23T14:48:43Z,Peter Szilagyi,peterke@gmail.com,2020-10-23T14:48:43Z,"Merge pull request #21747 from holiman/yolov2update

params: update yolov2 bootnode with elastic ip",TRUE,valid
68ac4eb796a243b9c79405ffdafab2a6125acb7a,Martin Holst Swende,martin@swende.se,2020-10-23T14:47:26Z,Martin Holst Swende,martin@swende.se,2020-10-23T14:47:26Z,params: update yolov2 bootnode with elastic ip,TRUE,valid
8a94aa91fbe4985e8e48f81f2e89fb447b0dfd37,Peter Szilagyi,peterke@gmail.com,2020-10-23T13:42:08Z,Peter Szilagyi,peterke@gmail.com,2020-10-23T13:42:08Z,"Merge pull request #21745 from holiman/yolov2_bootnodes

utils, params: add yolov2 bootnode",TRUE,valid
f5182c7b9c874aa77e90cc4c104ca01352fac6d2,Martin Holst Swende,martin@swende.se,2020-10-23T13:40:48Z,Martin Holst Swende,martin@swende.se,2020-10-23T13:40:48Z,"utils, params: add yolov2 bootnode",TRUE,valid
95f720fffc9cb366b69abc52d1a64834e92f00a4,Felix Lange,fjl@twurst.com,2020-10-23T11:34:44Z,Felix Lange,fjl@twurst.com,2020-10-23T11:34:44Z,"cmd/devp2p/internal/ethtest: update test chain (#21742)

The old one was wrong in two ways: the first block in chain.rlp was the
genesis block, and the genesis difficulty was below minimum difficulty.

This also contains some other fixes to the test.",TRUE,valid
6487c002f6b47e08cb9814f16712c6789b313a97,Martin Holst Swende,martin@swende.se,2020-10-23T06:26:57Z,Martin Holst Swende,martin@swende.se,2020-10-23T06:26:57Z,"all: implement EIP-2929 (gas cost increases for state access opcodes) + yolo-v2 (#21509)

* core/vm, core/state: implement EIP-2929 + YOLOv2

* core/state, core/vm: fix some review concerns

* core/state, core/vm: address review concerns

* core/vm: address review concerns

* core/vm: better documentation

* core/vm: unify sload cost as fully dynamic

* core/vm: fix typo

* core/vm/runtime: fix compilation flaw

* core/vm/runtime: fix renaming-err leftovers

* core/vm: renaming

* params/config: use correct yolov2 chainid for config

* core, params: use a proper new genesis for yolov2

* core/state/tests: golinter nitpicks",TRUE,valid
fb2c79df1995b4e8dfe79f9c75464d29d23aaaf4,Kristofer Peterson,svenski123@users.noreply.github.com,2020-10-21T14:56:45Z,Kristofer Peterson,svenski123@users.noreply.github.com,2020-10-21T14:56:45Z,"accounts/usbwallet: fix ledger version check (#21733)

The version check logic did not take into account the second digit (i.e. the '4' in v1.4.0) - this one line patch corrects this.",TRUE,valid
91c460797967da491077cf23f9e25e76e0301d32,hwanjo,34005989+hwanjo@users.noreply.github.com,2020-10-21T14:53:30Z,hwanjo,34005989+hwanjo@users.noreply.github.com,2020-10-21T14:53:30Z,core: fix blockchain insert report time interval calculation (#21723),TRUE,valid
85d81b2cdde6f5377fa3af6e108ca0b84a6266bd,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-10-21T08:56:33Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-10-21T08:56:33Z,"les: remove clientPeerSet and serverSet (#21566)

* les: move NodeStateMachine from clientPool to LesServer

* les: new header broadcaster

* les: peerCommons.headInfo always contains last announced head

* les: remove clientPeerSet and serverSet

* les: fixed panic

* les: fixed --nodiscover option

* les: disconnect all peers at ns.Stop()

* les: added comments and fixed signed broadcasts

* les: removed unused parameter, fixed tests",TRUE,valid
3e82c9ef67b9948bc90ba244b9537054188ebaf8,aaronbuchwald,aaron.buchwald56@gmail.com,2020-10-20T18:19:21Z,aaronbuchwald,aaron.buchwald56@gmail.com,2020-10-20T18:19:21Z,"eth/api: fix potential nil deref in AccountRange (#21710)

* Fix potential nil pointer error when neither block number nor hash is specified to accountRange

* Update error description",TRUE,valid
9d25f34263fa0621bd0b70a53057df7c6a5eaa41,gary rong,garyrong0905@gmail.com,2020-10-20T14:34:50Z,gary rong,garyrong0905@gmail.com,2020-10-20T14:34:50Z,"core: track and improve tx indexing/unindexing (#21331)

* core: add background indexer to waitgroup

* core: make indexer stopable

* core/rawdb: add unit tests

* core/rawdb: fix lint

* core/rawdb: fix tests

* core/rawdb: fix linter",TRUE,valid
6e7137103c63f471bf577d857f179110622d8804,Marius van der Wijden,m.vanderwijden@live.de,2020-10-20T08:58:26Z,Marius van der Wijden,m.vanderwijden@live.de,2020-10-20T08:58:26Z,miner: fixed race condition in tests (#21664),TRUE,valid
cef3e2dc5a563fccb4c54b7bea2fddc071bf9541,rene,41963722+renaynay@users.noreply.github.com,2020-10-20T08:56:51Z,rene,41963722+renaynay@users.noreply.github.com,2020-10-20T08:56:51Z,"console: don't exit on ctrl-c, only on ctrl-d (#21660)

* add interrupt counter

* remove interrupt counter, allow ctrl-C to clear ONLY, ctrl-D will terminate console, stop node

* format

* add instructions to exit

* fix tests",TRUE,valid
b305591e1491229c35a4551f18bd5e745405700f,Marius van der Wijden,m.vanderwijden@live.de,2020-10-16T09:28:03Z,Marius van der Wijden,m.vanderwijden@live.de,2020-10-16T09:28:03Z,"core/vm: marshall returnData as hexstring in trace logs (#21715)

* core/vm: marshall returnData as hexstring in trace logs

* core/vm: marshall returnData as hexstring in trace logs",TRUE,valid
51d026ca8554a04fccd5c5008aadffbd5c0594c7,Felix Lange,fjl@twurst.com,2020-10-15T10:30:41Z,Felix Lange,fjl@twurst.com,2020-10-15T10:30:41Z,params: begin v1.9.24 release cycle,FALSE,unsigned
8c2f271528f9cccf541c6ea1c022e98407f26872,Felix Lange,fjl@twurst.com,2020-10-15T10:29:42Z,Felix Lange,fjl@twurst.com,2020-10-15T10:29:42Z,params: go-ethereum v1.9.23 stable,FALSE,unsigned
524aaf5ec65826e19c35f66ddaf1882ad85caf9c,Felix Lange,fjl@twurst.com,2020-10-14T10:28:17Z,Felix Lange,fjl@twurst.com,2020-10-14T10:28:17Z,"p2p/discover: implement v5.1 wire protocol (#21647)

This change implements the Discovery v5.1 wire protocol and
also adds an interactive test suite for this protocol.",TRUE,valid
4eb01b21c8691e277ea9d4048038ede7f9621a82,Martin Holst Swende,martin@swende.se,2020-10-14T09:59:11Z,Martin Holst Swende,martin@swende.se,2020-10-14T09:59:11Z,miner: set etherbase even if mining isn't possible at the moment (#21707),TRUE,valid
bdc755491874426323d245918478e49b1998e427,gary rong,garyrong0905@gmail.com,2020-10-14T09:57:37Z,gary rong,garyrong0905@gmail.com,2020-10-14T09:57:37Z,params: update CHTs (#21706),TRUE,valid
1fed2234833aa49ff728474208a65cbc23682ee4,Marius van der Wijden,m.vanderwijden@live.de,2020-10-13T17:46:43Z,Marius van der Wijden,m.vanderwijden@live.de,2020-10-13T17:46:43Z,"accounts/keystore: fix flaky test (#21703)

* accounts/keystore: add timeout to test to prevent failure on travis

The TestWalletNotifications test sporadically fails on travis.
This is because we shutdown the event collection before all events are received.
Adding a small timeout (10 milliseconds) allows the collector to be scheduled
and to consume all pending events before we shut it down.

* accounts/keystore: added newlines back in

* accounts/keystore: properly fix the walletNotifications test",TRUE,valid
1e10489196fd42ed553ba4ef8bbb547c38042eed,Martin Holst Swende,martin@swende.se,2020-10-13T12:12:06Z,Martin Holst Swende,martin@swende.se,2020-10-13T12:12:06Z,"miner: don't interrupt mining after successful sync (#21701)

* miner: exit loop when downloader Done or Failed

Following the logic of the comment at the method,
this fixes a regression introduced at 7cf56d6f064869cb62b1673f9ee437020c595391
, which would allow external parties to DoS with
blocks, preventing mining progress.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: remove ineff assign (lint)

Signed-off-by: meows <b5c6@protonmail.com>

* miner: update test re downloader events

Signed-off-by: meows <b5c6@protonmail.com>

* Revert ""miner: remove ineff assign (lint)""

This reverts commit eaefcd34ab4862ebc936fb8a07578aa2744bc058.

* Revert ""miner: exit loop when downloader Done or Failed""

This reverts commit 23abd34265aa246c38fc390bb72572ad6ae9fe3b.

* miner: add test showing imprecise TestMiner

Signed-off-by: meows <b5c6@protonmail.com>

* miner: fix waitForMiningState precision

This helper function would return an affirmation
on the first positive match on a desired bool.

This was imprecise; it return false positives
by not waiting initially for an 'updated' value.

This fix causes TestMiner_2 to fail, which is
expected.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: remove TestMiner_2 demonstrating broken test

This test demonstrated the imprecision of the test
helper function waitForMiningState. This function
has been fixed with 6d365c2851, and this test test
may now be removed.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: fix test regarding downloader event/mining expectations

See comment for logic.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: add test describing expectations for downloader/mining events

We expect that once the downloader emits a DoneEvent,
signaling a successful sync, that subsequent StartEvents
are not longer permitted to stop the miner.

This prevents a security vulnerability where forced syncs via
fake high blocks would stall mining operation.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: use 'canStop' state to fix downloader event handling

- Break downloader event handling into event
separating Done and Failed events. We need to
treat these cases differently since a DoneEvent
should prevent the miner from being stopped on
subsequent downloader Start events.

- Use canStop state to handle the one-off
case when a downloader first succeeds.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: improve comment wording

Signed-off-by: meows <b5c6@protonmail.com>

* miner: start mining on downloader events iff not already mining

Signed-off-by: meows <b5c6@protonmail.com>

* miner: refactor miner update logic w/r/t downloader events

This makes mining pause/start logic regarding downloader
events more explicit. Instead of eternally handling downloader
events after the first done event, the subscription is closed
when downloader events are no longer actionable.

Signed-off-by: meows <b5c6@protonmail.com>

* miner: fix handling downloader events on subcription closed

Signed-off-by: meows <b5c6@protonmail.com>

* miner: (lint:gosimple) use range over chan instead of for/select

Signed-off-by: meows <b5c6@protonmail.com>

* miner: refactor update loop to remove race condition

The go routine handling the downloader events handling
vars in parallel with the parent routine, causing a
race condition.

This change, though ugly, remove the condition while
still allowing the downloader event subscription to be
closed when the miner has no further use for it (ie DoneEvent).

* miner: alternate fix for miner-flaw

Co-authored-by: meows <b5c6@protonmail.com>",TRUE,valid
2a9ea6be87a282ae3d0171a631076ea983d02477,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-10-13T11:33:10Z,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-10-13T11:33:10Z,"cmd/geth, cmd/utils: fixed flags name (#21700)",TRUE,valid
7a5a822905d95456a108db52ee68871a73dc54f1,Martin Holst Swende,martin@swende.se,2020-10-13T11:28:24Z,Martin Holst Swende,martin@swende.se,2020-10-13T11:28:24Z,"eth, p2p: use truncated names  (#21698)

* peer: return localAddr instead of name to prevent spam

We currently use the name (which can be freely set by the peer) in several log messages.
This enables malicious actors to write spam into your geth log.
This commit returns the localAddr instead of the freely settable name.

* p2p: reduce usage of peer.Name in warn messages

* eth, p2p: use truncated names

* Update peer.go

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
5c6155f9f49bfef173c4107979185aec59806c38,mr_franklin,mr_franklin@126.com,2020-10-13T11:24:08Z,mr_franklin,mr_franklin@126.com,2020-10-13T11:24:08Z,"internal/web3ext: improve some web3 apis (#21639)

* imporve some web3-ext apis

* Update web3ext.go

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
348c3bc47d8173ce24c5b92d697a5be289eea9a0,Martin Holst Swende,martin@swende.se,2020-10-13T11:21:25Z,Martin Holst Swende,martin@swende.se,2020-10-13T11:21:25Z,trie: fix flaw in stacktrie pool reuse (#21699),TRUE,valid
94d1f5888af495a2ce08d16cbd753cc1cc947d11,mr_franklin,mr_franklin@126.com,2020-10-13T09:00:42Z,mr_franklin,mr_franklin@126.com,2020-10-13T09:00:42Z,consensus/clique: unexport calcDifficulty and improve comment (#21619),TRUE,valid
c37e68e7c114c4783557eff727b8fb5e657549d2,mr_franklin,mr_franklin@126.com,2020-10-13T08:58:41Z,mr_franklin,mr_franklin@126.com,2020-10-13T08:58:41Z,all: replace RWMutex with Mutex in places where RLock is not used (#21622),TRUE,valid
32341f88e30f55e722f9d335938c4d1ab099f892,Hanjiang Yu,delacroix.yu@gmail.com,2020-10-13T08:55:57Z,Hanjiang Yu,delacroix.yu@gmail.com,2020-10-13T08:55:57Z,console: fix admin.sleepBlocks (#21629),TRUE,valid
66c3eb2f1a5c6bb4b5a678ce819f9984ac09e246,mr_franklin,mr_franklin@126.com,2020-10-12T13:02:38Z,mr_franklin,mr_franklin@126.com,2020-10-12T13:02:38Z,"accouts, consensus, core: fix some comments (#21617)",TRUE,valid
86dd005544179818edd78ef6c9396b9574e8a614,gary rong,garyrong0905@gmail.com,2020-10-12T10:08:04Z,gary rong,garyrong0905@gmail.com,2020-10-12T10:08:04Z,"trie: polish commit function (#21692)

* trie: polish commit function

* trie: fix typo",TRUE,valid
706f5e3b98a419e8b93653d21876b74a60ab3ee6,Martin Holst Swende,martin@swende.se,2020-10-09T09:23:46Z,Martin Holst Swende,martin@swende.se,2020-10-09T09:23:46Z,core: fix txpool off-by-one error (#21683),TRUE,valid
19a1c950467db58171532bbfcdc354f50a6e5f8e,Marius van der Wijden,m.vanderwijden@live.de,2020-10-09T07:09:10Z,Marius van der Wijden,m.vanderwijden@live.de,2020-10-09T07:09:10Z,eth/downloader: cache parent hash instead of recomputing (#21678),TRUE,valid
905ed109edfda340ccd3641ebad4e0ff5dc73440,gary rong,garyrong0905@gmail.com,2020-10-09T06:58:30Z,gary rong,garyrong0905@gmail.com,2020-10-09T06:58:30Z,"eth/downloader: fix data race around the ancientlimit (#21681)

* eth/downloader: fix data race around the ancientlimit

* eth/downloader: initialize the ancientlimit as 0",TRUE,valid
43cd31ea9f57e26f8f67aa8bd03bbb0a50814465,Guillaume Ballet,gballet@gmail.com,2020-10-08T12:03:24Z,Guillaume Ballet,gballet@gmail.com,2020-10-08T12:03:24Z,"core/vm: dedup config check in markdown logger (#21655)

* core/vm: dedup config check

* review feedback: reuse buffer",TRUE,valid
5e86e4ed291ef0133670f0974b5511618e43e297,Felix Lange,fjl@twurst.com,2020-10-08T09:19:54Z,Felix Lange,fjl@twurst.com,2020-10-08T09:19:54Z,"p2p/discover: remove use of shared hash instance for key derivation (#21673)

For some reason, using the shared hash causes a cryptographic incompatibility
when using Go 1.15. I noticed this during the development of Discovery v5.1
when I added test vector verification.

The go library commit that broke this is golang/go@97240d5, but the
way we used HKDF is slightly dodgy anyway and it's not a regression.",TRUE,valid
6d29e192e92ed51beaad3792b33a0b6c5043a00c,Martin Holst Swende,martin@swende.se,2020-10-08T08:10:58Z,Martin Holst Swende,martin@swende.se,2020-10-08T08:10:58Z,"signer/core: don't mismatch reject and no accounts (#21677)

* signer/core: don't mismatch reject and zero accounts, fixes #21674

* signer/core: docs",TRUE,valid
015e78928a374afb016a12db137d9ca7f1a37a03,Felix Lange,fjl@twurst.com,2020-10-07T18:05:14Z,Felix Lange,fjl@twurst.com,2020-10-07T18:05:14Z,"node: relax websocket connection header check (#21646)

This makes it accept the ""upgrade,keep-alive"" header value, which
apparently is a thing.",TRUE,valid
716864deba26d2afea6b3cb62eeb573613d6b86b,rene,41963722+renaynay@users.noreply.github.com,2020-10-07T15:22:44Z,rene,41963722+renaynay@users.noreply.github.com,2020-10-07T15:22:44Z,"cmd/devp2p/internal/ethtest: improve eth test suite (#21615)

This fixes issues with the protocol handshake and status exchange
and adds support for responding to GetBlockHeaders requests.",TRUE,valid
e43d827a1987c362dce6efd0afd8e753a6ecf9ae,Martin Holst Swende,martin@swende.se,2020-10-06T13:57:00Z,Martin Holst Swende,martin@swende.se,2020-10-06T13:57:00Z,"core/types: optimize bloom filters (#21624)

* core/types: tests for bloom

* core/types: refactored bloom filter for receipts, added tests

core/types: replaced old bloom implementation

core/types: change interface of bloom add+test

* core/types: refactor bloom

* core/types: minor tweak on LogsBloom

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>",TRUE,valid
eb87121300725623d7f504f7761fb7277579d689,Martin Holst Swende,martin@swende.se,2020-10-06T13:34:29Z,Martin Holst Swende,martin@swende.se,2020-10-06T13:34:29Z,"core/bloombits: faster generator (#21625)

* core/bloombits: add benchmark

* core/bloombits: optimize inserts",TRUE,valid
2b2fd74158795bfccaff053558b4c1d1d60fa2fa,Raw Pong Ghmoa,58883403+q9f@users.noreply.github.com,2020-10-06T05:35:21Z,Raw Pong Ghmoa,58883403+q9f@users.noreply.github.com,2020-10-06T05:35:21Z,"params: update goerli testnet bootnodes (#21659)

* params: update pegasys besu bootnode

* params: update goerli initiative bootnodes",TRUE,valid
d9890a6a8fc245c31dd0852c5fb0e1081708c4bc,Felix Lange,fjl@twurst.com,2020-10-05T10:50:26Z,Felix Lange,fjl@twurst.com,2020-10-05T10:50:26Z,cmd/faucet: enable DNS discovery for known networks (#21636),TRUE,valid
a15d71a255686541e04f446dd92aadbf9ff496a8,Peter Szilagyi,peterke@gmail.com,2020-10-05T08:52:36Z,Peter Szilagyi,peterke@gmail.com,2020-10-05T08:52:36Z,"core/state/snapshot: stop generator if it hits missing trie nodes (#21649)

* core/state/snapshot: exit Geth if generator hits missing trie nodes

* core/state/snapshot: error instead of hard die on generator fault

* core/state/snapshot: don't enable logging on the tests",TRUE,valid
9d1e2027a05ed099b9ef43021a6cb09839e94a3a,Martin Holst Swende,martin@swende.se,2020-09-30T17:49:20Z,Martin Holst Swende,martin@swende.se,2020-09-30T17:49:20Z,trie: add Commit-sequence tests for stacktrie commit (#21643),TRUE,valid
053ed9cc847647a9b3ef707d0efe7104c4ab2a4c,gary rong,garyrong0905@gmail.com,2020-09-30T11:45:56Z,gary rong,garyrong0905@gmail.com,2020-09-30T11:45:56Z,"trie: polishes to trie committer (#21351)

* trie: update tests to check commit integrity

* trie: polish committer

* trie: fix typo

* trie: remove hasvalue notion

According to the benchmarks, type assertion between the pointer and
interface is extremely fast.

BenchmarkIntmethod-12           1000000000               1.91 ns/op
BenchmarkInterface-12           1000000000               2.13 ns/op
BenchmarkTypeSwitch-12          1000000000               1.81 ns/op
BenchmarkTypeAssertion-12       2000000000               1.78 ns/op

So the overhead for asserting whether the shortnode has ""valuenode""
child is super tiny. No necessary to have another field.

* trie: linter nitpicks

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
dad26582b6ec5e3870a27db9f25ad1743ae00cbf,Martin Holst Swende,martin@swende.se,2020-09-29T15:40:08Z,Martin Holst Swende,martin@swende.se,2020-09-29T15:40:08Z,"accounts, signer: implement gnosis safe support (#21593)

* accounts, signer: implement gnosis safe support

* common/math: add type for marshalling big to dec

* accounts, signer: properly sign gnosis requests

* signer, clef: implement account_signGnosisTx

* signer: fix auditlog print, change rpc-name (signGnosisTx to signGnosisSafeTx)

* signer: pass validation-messages/warnings to the UI for gnonsis-safe txs

* signer/core: minor change to validationmessages of typed data",TRUE,valid
6c8310ebb40d260811580d188e0a815ba314ff9d,Guillaume Ballet,gballet@gmail.com,2020-09-29T15:38:13Z,Guillaume Ballet,gballet@gmail.com,2020-09-29T15:38:13Z,"trie: use stacktrie for Derivesha operation (#21407)

core/types: use stacktrie for derivesha

trie: add stacktrie file

trie: fix linter

core/types: use stacktrie for derivesha

rebased: adapt stacktrie to the newer version of DeriveSha

Co-authored-by: Martin Holst Swende <martin@swende.se>

More linter fixes

review feedback: no key offset for nodes converted to hashes

trie: use EncodeRLP for full nodes

core/types: insert txs in order in derivesha

trie: tests for derivesha with stacktrie

trie: make stacktrie use pooled hashers

trie: make stacktrie reuse tmp slice space

trie: minor polishes on stacktrie

trie/stacktrie: less rlp dancing

core/types: explain the contorsions in DeriveSha

ci: fix goimport errors

trie: clear mem on subtrie hashing

squashme: linter fix

stracktrie: use pooling, less allocs (#3)

trie: in-place hex prefix, reduce allocs and add rawNode.EncodeRLP

Reintroduce the `[]node` method, add the missing `EncodeRLP` implementation for `rawNode` and calculate the hex prefix in place.

Co-authored-by: Martin Holst Swende <martin@swende.se>

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
4ee11b072e8b3ebaa025354bb346e2ea9cc3b27c,mr_franklin,mr_franklin@126.com,2020-09-29T09:31:14Z,mr_franklin,mr_franklin@126.com,2020-09-29T09:31:14Z,"cmd/bootnode,internal/debug: fix some comments (#21623)",TRUE,valid
901471f733dbd5f08fdf1523a16227afd96efcd9,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T18:11:30Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T18:11:30Z,"build: keep geth-sources.jar build result for JavaDoc (#21596)

* ci: tooltips for javadoc for mobile app

* f space",TRUE,valid
666092936cf766a88ad7eb972768537127c5adc9,mr_franklin,mr_franklin@126.com,2020-09-28T18:10:11Z,mr_franklin,mr_franklin@126.com,2020-09-28T18:10:11Z,p2p/enode: remove unused code (#21612),TRUE,valid
b007df89ddc3d91610332f90af18092cd2793202,shigeyuki azuchi,azuchi@chaintope.com,2020-09-28T12:30:10Z,shigeyuki azuchi,azuchi@chaintope.com,2020-09-28T12:30:10Z,light: fix wrong description in a comment (#21573),TRUE,valid
a04294d1607d0526002770cdc93bed73ee78a3a5,mr_franklin,mr_franklin@126.com,2020-09-28T12:28:38Z,mr_franklin,mr_franklin@126.com,2020-09-28T12:28:38Z,internal/web3ext: improve eth_getBlockByNumber and eth_getBlockByHash console api (#21608),TRUE,valid
eebfb13053a06433408f3b7b43837e3b2c7a8145,aaronbuchwald,aaron.buchwald56@gmail.com,2020-09-28T12:24:01Z,aaronbuchwald,aaron.buchwald56@gmail.com,2020-09-28T12:24:01Z,"core: free pointer from slice after popping element from price heap (#21572)

* Fix potential memory leak in price heap

* core: nil free pointer slice (alternative version)

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
0ddd4612b7db34a6b23926f05f0dd5807d86c7ab,Martin Holst Swende,martin@swende.se,2020-09-28T12:14:45Z,Martin Holst Swende,martin@swende.se,2020-09-28T12:14:45Z,"core/vm, params: make 2200 in line with spec (#21605)",TRUE,valid
a90e645ccda7d8d373783e161e6c6fc4430cb6d0,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T12:12:08Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T12:12:08Z,"mobile: added constructor for big int (#21597)

* mobile: added constructor for big int

* mobile: tiny nitpick",TRUE,valid
420b78659bef661a83c5c442121b13f13288c09f,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T12:10:26Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-28T12:10:26Z,"accounts/abi: ABI explicit difference between Unpack and UnpackIntoInterface (#21091)

* accounts/abi: refactored abi.Unpack

* accounts/abi/bind: fixed error

* accounts/abi/bind: modified template

* accounts/abi/bind: added ToStruct for conversion

* accounts/abi: reenabled tests

* accounts/abi: fixed tests

* accounts/abi: fixed tests for packing/unpacking

* accounts/abi: fixed tests

* accounts/abi: added more logic to ToStruct

* accounts/abi/bind: fixed template

* accounts/abi/bind: fixed ToStruct conversion

* accounts/abi/: removed unused code

* accounts/abi: updated template

* accounts/abi: refactored unused code

* contracts/checkpointoracle: updated contracts to sol ^0.6.0

* accounts/abi: refactored reflection logic

* accounts/abi: less code duplication in Unpack*

* accounts/abi: fixed rebasing bug

* fix a few typos in comments

* rebase on master

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
c9959145a9c1f1141784a2e7e0b2cb070d399065,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:23:02Z,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:23:02Z,params: begin v1.9.23 release cycle,TRUE,valid
c71a7e26a8b1e332bbf3262d88ba3ff32071456c,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:21:47Z,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:21:47Z,params: release Geth v1.9.22,TRUE,valid
7ddb44b80e6cc534495090a063d56224ef3f92f0,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:21:17Z,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:21:17Z,"Merge pull request #21635 from karalabe/cht-1.9.22

params: update CHTs for Geth v1.9.22",TRUE,valid
b5d362b2bf1ef6aece6d0d54b89d2e7ea4b86c0e,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:19:22Z,Peter Szilagyi,peterke@gmail.com,2020-09-28T08:19:22Z,params: update CHTs for Geth v1.9.22,TRUE,valid
fdd42d425b49383c4544314eba69b26f450b537b,rene,41963722+renaynay@users.noreply.github.com,2020-09-24T08:46:43Z,rene,41963722+renaynay@users.noreply.github.com,2020-09-24T08:46:43Z,cmd/devp2p/internal/ethtest: lower protocol version to 64 (#21604),TRUE,valid
39f8268147b5f4f0e42ce56dea8e1cd37aeedb75,rene,41963722+renaynay@users.noreply.github.com,2020-09-23T15:48:47Z,rene,41963722+renaynay@users.noreply.github.com,2020-09-23T15:48:47Z,cmd/devp2p/internal/ethtest: update version in handshake (#21603),TRUE,valid
a25899f3dc2494cad515ed1a65b0c4e28db951a9,rene,41963722+renaynay@users.noreply.github.com,2020-09-23T13:18:17Z,rene,41963722+renaynay@users.noreply.github.com,2020-09-23T13:18:17Z,"cmd/devp2p: add eth protocol test suite (#21598)

This change adds a test framework for the ""eth"" protocol and some basic
tests. The tests can be run using the './devp2p rlpx eth-test' command.",TRUE,valid
c1544423d655f540b55bb6ec0e7167dad9683c42,Marius van der Wijden,m.vanderwijden@live.de,2020-09-23T11:08:40Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-23T11:08:40Z,"internal/ethapi: fix nil deref + fix estimateGas console bindings (#21601)

* tried to fix

* fix for js api

* fix for nil pointer ex

* rev space

* rev space

* input call formatter",TRUE,valid
e5defccd581880101aa0897705e3e9c3735a8186,gary rong,garyrong0905@gmail.com,2020-09-23T09:44:09Z,gary rong,garyrong0905@gmail.com,2020-09-23T09:44:09Z,"trie: extend range proof (#21250)

* trie: support non-existent right proof

* trie: improve test

* trie: minor linter fix

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
0921f8a74f1c050792453fc241eef67d7400d94c,Marius van der Wijden,m.vanderwijden@live.de,2020-09-23T08:29:48Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-23T08:29:48Z,"internal/ethapi: add optional parameter blockNrOrHash to estimateGas (#21545)

This allows users to estimate gas on top of arbitrary blocks as well as pending and latest.
Tracing on pending is useful for most users as it takes into account the current txpool while
tracing on latest might be useful for users that have little to know knowledge of the current
transactions in the network.

If blockNrOrHash is not specified, estimateGas defaults to pending",TRUE,valid
25b16085da1bab4b84f52de7275ea481ea923d68,gary rong,garyrong0905@gmail.com,2020-09-23T08:03:21Z,gary rong,garyrong0905@gmail.com,2020-09-23T08:03:21Z,trie: support empty range proof (#21199),TRUE,valid
e1365b24647481ca92d95f678f6f8ee9773202cb,gary rong,garyrong0905@gmail.com,2020-09-23T07:59:11Z,gary rong,garyrong0905@gmail.com,2020-09-23T07:59:11Z,trie: fix gaped range proof test case (#21484),TRUE,valid
fdb742419e6ff8373e57bdf99836c22f689b0e55,Binacs,bin646891055@gmail.com,2020-09-22T21:22:54Z,Binacs,bin646891055@gmail.com,2020-09-22T21:22:54Z,"cmd/clef, cmd/geth: use SplitAndTrim from cmd/utils (#21579)",TRUE,valid
129cf075e963df10f42da81d817a4c12f7d4bf16,rene,41963722+renaynay@users.noreply.github.com,2020-09-22T08:17:39Z,rene,41963722+renaynay@users.noreply.github.com,2020-09-22T08:17:39Z,"p2p: move rlpx into separate package (#21464)

This change moves the RLPx protocol implementation into a separate package,
p2p/rlpx. The new package can be used to establish RLPx connections for
protocol testing purposes.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
2c097bb7a2f6e048dd9a0c4f6d74c10c07ec12df,Marius van der Wijden,m.vanderwijden@live.de,2020-09-21T14:33:35Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-21T14:33:35Z,"mobile: better api for java users (#21580)

* (mobile): Adds string representations for types

* mobile: better interfaces add stringer to types

Co-authored-by: sarath <sarath@melvault.com>",TRUE,valid
9a39c6bcb1fe11a252ac832d995a72e5f2210fbe,Osoro Bironga,fanosoro@gmail.com,2020-09-20T08:43:57Z,Osoro Bironga,fanosoro@gmail.com,2020-09-20T08:43:57Z,"accounts/abi: improve documentation and names (#21540)

* accounts: abi/bid/backends; cleaned doc errors, camelCase refactors and anonymous variable assignments

* acounts/abi/bind: doc errors, anonymous parameter assignments

* accounts/abi: doc edits, camelCase refactors

* accounts/abi/bind: review fix

* reverted name changes

* name revert

Co-authored-by: Osoro Bironga <osoro@doctaroo.com>",TRUE,valid
f354c622ca05289d9190d3718fd0da3aa4e18f27,Guillaume Ballet,gballet@gmail.com,2020-09-18T12:26:19Z,Guillaume Ballet,gballet@gmail.com,2020-09-18T12:26:19Z,core: fix a typo in comment (#21439),TRUE,valid
2482ba016eb063db3a35fea2d4b56c1d354fc027,Peter Szilagyi,peterke@gmail.com,2020-09-18T09:29:33Z,Peter Szilagyi,peterke@gmail.com,2020-09-18T09:29:33Z,"Merge pull request #21529 from karalabe/dynamic-pivot

eth/downloader: dynamically move pivot even during chain sync",TRUE,valid
fb835c024c9e9c02edd2351f20e7b8efcbe99543,Peter Szilagyi,peterke@gmail.com,2020-09-08T08:13:16Z,Peter Szilagyi,peterke@gmail.com,2020-09-08T08:13:16Z,eth/downloader: dynamically move pivot even during chain sync,TRUE,valid
07751c3d26a9c740fa1bf792199a47065db8aa8a,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-17T08:23:56Z,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-17T08:23:56Z,"cmd/geth: added counters to the geth inspect report (#21495)

* database: added counters

* Improved stats for ancient db

* Small improvement

* Better message and added percentage while counting receipts

* Fast counting for receipts

* added info message

* Show both receips itemscount  from ancient db and counted receipts

* Fixed default case

* Removed counter for receipts in ancient store

* Removed counting of receipts present in leveldb",TRUE,valid
faba018b29fa35e668e98926526cbaad5863e297,Marius van der Wijden,m.vanderwijden@live.de,2020-09-16T11:17:50Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-16T11:17:50Z,"cmd/utils: use preconfigured testnet flags instead of networkid (#21561)

* cmd/utils: use preconfigured testnet flags instead of networkid

* cmd/utils: shorter description

Co-authored-by: Martin Holst Swende <martin@swende.se>

* Update flags.go

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
89884dc3531c3766ba7c0b29be33d3c3af4d1674,Marius van der Wijden,m.vanderwijden@live.de,2020-09-16T11:15:22Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-16T11:15:22Z,"tests/fuzzers/abi: add fuzzer for fuzzing package accounts/abi (#21217)

* tests/fuzzers/abi: added abi fuzzer

* accounts/abi: fixed issues found by fuzzing

* tests/fuzzers/abi: update fuzzers, added repro test

* tests/fuzzers/abi: renamed abi_fuzzer to abifuzzer

* tests/fuzzers/abi: updated abi fuzzer

* tests/fuzzers/abi: updated abi fuzzer

* accounts/abi: minor style fix

* go.mod: added go-fuzz dependency

* tests/fuzzers/abi: updated abi fuzzer

* tests/fuzzers/abi: make linter happy

* tests/fuzzers/abi: make linter happy

* tests/fuzzers/abi: comment out false positives",TRUE,valid
93f047023f8569e95b767cd000c7c95640dfcad7,gary rong,garyrong0905@gmail.com,2020-09-16T09:51:16Z,gary rong,garyrong0905@gmail.com,2020-09-16T09:51:16Z,les/lespay/server: bump database version (#21571),TRUE,valid
8696dd39cbb5664a4a6900993e113713e56f3def,Vinod Damle,vdamle@users.noreply.github.com,2020-09-16T06:39:35Z,Vinod Damle,vdamle@users.noreply.github.com,2020-09-16T06:39:35Z,"params: allow setting Petersburg block before chain head (#21473)

* Allow setting PetersburgBlock before chainhead

if it is at the same block as ConstantinopleBlock

* Add a negative test",TRUE,valid
cf2a77af28e58359f3ec1c0376c3b834f9ad8fb5,Mason Fischer,mason@kissr.co,2020-09-15T09:29:51Z,Mason Fischer,mason@kissr.co,2020-09-15T09:29:51Z,"ethclient: fix BlockNumber (#21565)

It didn't actually work because it called a method that doesn't
exist. This fixes it also adds a test.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
0185ee09936a3657cdd6d03e2c0c630e66954f33,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-15T08:37:01Z,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-15T08:37:01Z,core/rawdb: single point of maintenance for writing and deleting tx lookup indexes (#21480),TRUE,valid
4764b2f0be91b05395f6c25b0f74bd8d65aaa590,Kirill Elagin,kirelagin@gmail.com,2020-09-15T06:27:17Z,Kirill Elagin,kirelagin@gmail.com,2020-09-15T06:27:17Z,"COYPING: restore the full text text of GPL (#21568)

When the license was added to the repository, its text was changed (some
sections at the end removed) and, worse, the authors of go-ethereum
tried to claim copyright on the license text.

The correct way to apply GPL to a project is to copy it verbatim.
This change reverts the text of the GPL to the original.",TRUE,valid
b65c3841815ed4d12a6904d18efe39bbff5eb676,Martin Holst Swende,martin@swende.se,2020-09-15T06:22:47Z,Martin Holst Swende,martin@swende.se,2020-09-15T06:22:47Z,eth/tracers: regenerate assets from #21549 (#21564),TRUE,valid
4996fce25a5d137aa570663e80be168ba37ce983,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-09-14T20:44:20Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-09-14T20:44:20Z,"les, les/lespay/server: refactor client pool (#21236)

* les, les/lespay/server: refactor client pool

* les: use ns.Operation and sub calls where needed

* les: fixed tests

* les: removed active/inactive logic from peerSet

* les: removed active/inactive peer logic

* les: fixed linter warnings

* les: fixed more linter errors and added missing metrics

* les: addressed comments

* cmd/geth: fixed TestPriorityClient

* les: simplified clientPool state machine

* les/lespay/server: do not use goroutine for balance callbacks

* internal/web3ext: fix addBalance required parameters

* les: removed freeCapacity, always connect at minCapacity initially

* les: only allow capacity change with priority status

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
f7112cc182ec9ec43ff56d4ff3c84d2518aa30ff,Felix Lange,fjl@twurst.com,2020-09-14T17:23:01Z,Felix Lange,fjl@twurst.com,2020-09-14T17:23:01Z,"rlp: add SplitUint64 (#21563)

This can be useful when working with raw RLP data.",TRUE,valid
71c37d82adaa2b69ea98ce0c5505489d6b711c1e,Julian Koh,jk2698@cornell.edu,2020-09-14T12:57:28Z,Julian Koh,jk2698@cornell.edu,2020-09-14T12:57:28Z,js/tracers: make calltracer report value in selfdestructs  (#21549),TRUE,valid
4eb92969109184c3ccec426d5190a2c183509f5d,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-09-14T12:01:18Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-09-14T12:01:18Z,"p2p/nodestate: ensure correct callback order (#21436)

This PR adds an extra guarantee to NodeStateMachine: it ensures that all
immediate effects of a certain change are processed before any subsequent
effects of any of the immediate effects on the same node. In the original
version, if a cascaded change caused a subscription callback to be called
multiple times for the same node then these calls might have happened in a
wrong chronological order.

For example:

- a subscription to flag0 changes flag1 and flag2
- a subscription to flag1 changes flag3
- a subscription to flag1, flag2 and flag3 was called in the following order:

   [flag1] -> [flag1, flag3]
   [] -> [flag1]
   [flag1, flag3] -> [flag1, flag2, flag3]

This happened because the tree of changes was traversed in a ""depth-first
order"". Now it is traversed in a ""breadth-first order""; each node has a
FIFO queue for pending callbacks and each triggered subscription callback
is added to the end of the list. The already existing guarantees are
retained; no SetState or SetField returns until the callback queue of the
node is empty again. Just like before, it is the responsibility of the
state machine design to ensure that infinite state loops are not possible.
Multiple changes affecting the same node can still happen simultaneously;
in this case the changes can be interleaved in the FIFO of the node but the
correct order is still guaranteed.

A new unit test is also added to verify callback order in the above scenario.",TRUE,valid
a99ac5335c631c72fb0d1142a121520d7cf9a950,Shude Li,islishude@gmail.com,2020-09-13T20:25:15Z,Shude Li,islishude@gmail.com,2020-09-13T20:25:15Z,Dockerfile: unexpose port 8547 as GraphQL was merged into HTTP endpoint (#21556),TRUE,valid
4e2641319be2fd33a8cd61f0258456b7cef07957,Guillaume Ballet,gballet@gmail.com,2020-09-11T18:35:38Z,Guillaume Ballet,gballet@gmail.com,2020-09-11T18:35:38Z,p2p/discover: fix typo in comments (#21554),TRUE,valid
df219e23df94008a168f1c7cc539c41320527c39,Marius van der Wijden,m.vanderwijden@live.de,2020-09-11T16:17:09Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-11T16:17:09Z,"miner: fix regression, add test for starting while download (#21547)

Fixes a regression introduced in #21536",TRUE,valid
7cf56d6f064869cb62b1673f9ee437020c595391,Marius van der Wijden,m.vanderwijden@live.de,2020-09-10T17:27:42Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-10T17:27:42Z,"miner: use channels instead of atomics in update loop (#21536)

This PR changes several different things:

- Adds test cases for the miner loop
- Stops the worker if it wasn't already stopped in worker.Close()
- Uses channels instead of atomics in the miner.update() loop

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
d7f02b448a929d6c9e4934ebbee87355336aeeb1,Guillaume Ballet,gballet@gmail.com,2020-09-10T13:14:19Z,Guillaume Ballet,gballet@gmail.com,2020-09-10T13:14:19Z,"cmd/geth: print warning when whisper config is present in toml (#21544)

* cmd/geth: print warning when whisper config is present in toml

* Update cmd/geth/config.go

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
116763952498d9c1b852fa94542df1b3f03e2812,Dan Sosedoff,dan.sosedoff@gmail.com,2020-09-10T12:24:21Z,Dan Sosedoff,dan.sosedoff@gmail.com,2020-09-10T12:24:21Z,"ethclient: add BlockNumber method (#21500)

This adds a new client method BlockNumber to fetch the most recent
block number of the chain.",TRUE,valid
4ea9737de6ec616ee9bc948b59e454cc211ca580,Shude Li,islishude@gmail.com,2020-09-10T12:21:51Z,Shude Li,islishude@gmail.com,2020-09-10T12:21:51Z,go.mod: remove golang.org/x/sync (#21541),TRUE,valid
a3cd8a040a4ffe04a7b455f11a6c049a9b29b1c5,Martin Holst Swende,martin@swende.se,2020-09-10T07:19:30Z,Martin Holst Swende,martin@swende.se,2020-09-10T07:19:30Z,"core/vm: fix benchmark overflow + prep for precompile repricings (#21530)

* core/vm/testdata: add gascost expectations to testcases

* core/vm: verify expected gas in tests for precompiles

* core/vm: fix overflow flaw in gas/s calculation",TRUE,valid
328901c24cdcbfe57ad983248b2fd481f495db3d,gary rong,garyrong0905@gmail.com,2020-09-09T15:38:47Z,gary rong,garyrong0905@gmail.com,2020-09-09T15:38:47Z,"cmd, eth: offer maxprice flag for overwritting price cap (#21531)

* cmd, eth: offer maxprice flag for overwritting price cap

* eth: rename default price cap",TRUE,valid
3a98c6f6e6613f8fe5380971fd113917c7b1ed37,Peter Szilagyi,peterke@gmail.com,2020-09-09T15:37:37Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T15:37:37Z,"Merge pull request #21537 from karalabe/les-reorg-fix

eth/downloader: only roll back light sync if not fully validating",TRUE,valid
d81c9d9b76f4255a258c1a6d93b3392ac0e8fd5f,Marius van der Wijden,m.vanderwijden@live.de,2020-09-09T13:21:20Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-09T13:21:20Z,accounts/abi/bind/backends: reverted some stylistic changes (#21535),TRUE,valid
367f12f73495b30c17c7d358cf71575f34f79757,Peter Szilagyi,peterke@gmail.com,2020-09-09T11:06:32Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T11:06:32Z,eth/downloader: only roll back light sync if not fully validating,TRUE,valid
8d35b1eb2b4b844b45cf504cc05704b1a3004e04,Peter Szilagyi,peterke@gmail.com,2020-09-09T08:23:37Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T08:23:37Z,params: begin v1.9.22 release cycle,TRUE,valid
0287d54847d3297f3ced62cd83a4c95ccbe0045b,Peter Szilagyi,peterke@gmail.com,2020-09-09T08:22:11Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T08:22:11Z,params: release Geth v1.9.21,TRUE,valid
24562d9b0c9ef1d92388d727bb08c8aa90359ea2,Peter Szilagyi,peterke@gmail.com,2020-09-09T07:34:53Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T07:34:53Z,"Merge pull request #21534 from karalabe/cht-1.9.21

params: update CHTs for v1.9.21 release",TRUE,valid
dc681fc1f6a183a476446167695e5e6fa0e5d4f8,Peter Szilagyi,peterke@gmail.com,2020-09-09T07:33:20Z,Peter Szilagyi,peterke@gmail.com,2020-09-09T07:33:20Z,params: update CHTs for v1.9.21 release,TRUE,valid
86bcbb0d79859266d4ce69ee99408aaff6018830,Guillaume Ballet,gballet@gmail.com,2020-09-08T20:02:14Z,Guillaume Ballet,gballet@gmail.com,2020-09-08T20:02:14Z,.github: remove whisper from CODEOWNERS (#21527),TRUE,valid
066c75531d5668366dc0cf9a8a2d9cb2addbc487,Guillaume Ballet,gballet@gmail.com,2020-09-08T14:13:48Z,Guillaume Ballet,gballet@gmail.com,2020-09-08T14:13:48Z,build: remove wnode from the list of packages binaries (#21526),TRUE,valid
8327d1fdfc42b0d73520fe1af1e875b960f03ee1,Martin Holst Swende,martin@swende.se,2020-09-08T11:07:55Z,Martin Holst Swende,martin@swende.se,2020-09-08T11:07:55Z,"accounts/usbwallet, signer/core: show accounts from ledger legacy derivation paths (#21517)

* accounts/usbwallet, signer/core: un-hide accounts from ledger legacy derivation paths

* Update accounts/usbwallet/wallet.go

* Update signer/core/api.go

* Update signer/core/api.go",TRUE,valid
d54f2f2e5e393741ff887a364877c0fddd5571a5,Guillaume Ballet,gballet@gmail.com,2020-09-08T08:47:48Z,Guillaume Ballet,gballet@gmail.com,2020-09-08T08:47:48Z,"whisper: remove whisper (#21487)

* whisper: remove whisper

* Update cmd/geth/config.go

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>

* cmd/geth: warn on enabling whisper + remove more whisper deps

* mobile: remove all whisper references

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>
Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
c5d28f0b2765e65f1b5cd733d7190d36a7410e32,Osoro Bironga,fanosoro@gmail.com,2020-09-07T11:07:15Z,Osoro Bironga,fanosoro@gmail.com,2020-09-07T11:07:15Z,"accounts: abi/bid/backends; cleaned doc errors, camelCase refactors and anonymous variable assignments (#21514)

Co-authored-by: Osoro Bironga <osoro@doctaroo.com>",TRUE,valid
de971cc8457601691e97045f30e1419ecc2ac103,Marius van der Wijden,m.vanderwijden@live.de,2020-09-07T08:52:01Z,Marius van der Wijden,m.vanderwijden@live.de,2020-09-07T08:52:01Z,"eth: added trace_call to trace on top of arbitrary blocks (#21338)

* eth: Added TraceTransactionPending

* eth: Implement Trace_Call, remove traceTxPending

* eth: debug_call -> debug_traceCall, recompute tx environment if pruned

* eth: fix nil panic

* eth: improve block retrieving logic in tracers

* internal/web3ext: add debug_traceCall to console",TRUE,valid
f86324edb7897b539cd44ce9710095d570e27699,Peter Szilagyi,peterke@gmail.com,2020-09-02T10:52:51Z,Peter Szilagyi,peterke@gmail.com,2020-09-02T10:52:51Z,"Merge pull request #21504 from karalabe/trie-path-sync

core, eth, trie: prepare trie sync for path based operation",TRUE,valid
eeaf1916330720d2b1c7071086a7fd6070e9eb67,Peter Szilagyi,peterke@gmail.com,2020-08-28T07:50:37Z,Peter Szilagyi,peterke@gmail.com,2020-08-28T07:50:37Z,"core, eth, trie: prepare trie sync for path based operation",TRUE,valid
3010f9fc759a9f461dfeba229622352f65186aaf,Martin Holst Swende,martin@swende.se,2020-09-02T09:01:46Z,Martin Holst Swende,martin@swende.se,2020-09-02T09:01:46Z,"eth/downloader: change intial download size (#21366)

This changes how the downloader works, a little bit. Previously, when block sync started,
we immediately started filling up to 8192 blocks. Usually this is fine, blocks are small
in the early numbers. The threshold then is lowered as we measure the size of the blocks
that are filled.

However, if the node is shut down and restarts syncing while we're in a heavy segment,
that might be bad. This PR introduces a more conservative initial threshold of 2K blocks
instead.",TRUE,valid
d90bbce954eb43bf8bb76e3e9b694b8c7953bb47,ucwong,ucwong@126.com,2020-09-01T10:56:22Z,ucwong,ucwong@126.com,2020-09-01T10:56:22Z,go.mod : update goja dependency (#21432),TRUE,valid
5cdb476dd19096bdf63085638bec9a58416c5bcd,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-01T09:02:12Z,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-09-01T09:02:12Z,"""Downloader queue stats"" is now provided once per minute (#21455)

* ""Downloader queue stats"" is now a DEBUG information

I think this info is more a DEBUG related information then an INFO. If it must remains an INFO, maybe it can be slow down to one time every 5 minutes or so.

* Update queue.go

""Downloader queue stats"" information is now provided once every minute instead of once every 10 seconds.",TRUE,valid
ff23e265cd2ff13f33e145071b317fc25f0a2b23,Hanjiang Yu,delacroix.yu@gmail.com,2020-09-01T08:23:04Z,Hanjiang Yu,delacroix.yu@gmail.com,2020-09-01T08:23:04Z,internal: fix personal.sign() (#21503),TRUE,valid
12d8570322aa44833a7b42d042da2bd69b2bb22d,Fuyang Deng,dengfuyang@outlook.com,2020-09-01T07:29:54Z,Fuyang Deng,dengfuyang@outlook.com,2020-09-01T07:29:54Z,"accounts/abi: fix a bug in getTypeSize method (#21501)

* accounts/abi: fix a bug in getTypeSize method

e.g. for ""Tuple[2]"" type, the element of the array is a tuple type and the size of the tuple may not be 32.

* accounts/abi: add unit test of getTypeSize method",TRUE,valid
5883afb3ef1e121e8625c2e1f4e929f333a65dd5,Felix Lange,fjl@twurst.com,2020-08-28T14:27:58Z,Felix Lange,fjl@twurst.com,2020-08-28T14:27:58Z,rpc: fix issue with null JSON-RPC messages (#21497),TRUE,valid
05280a7ae3f47adc8aeb9130c7f5404a42fb3a55,libotony,liboliqi@gmail.com,2020-08-27T09:33:45Z,libotony,liboliqi@gmail.com,2020-08-27T09:33:45Z,"eth/tracers: revert reason in call_tracer + error for failed internal calls (#21387)

* tests: add testdata of call tracer

* eth/tracers: return revert reason in call_tracer

* eth/tracers: regenerate assets

* eth/tracers: add error message even if no exec occurrs, fixes #21438

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
d97e0063d53ccbc8717499eb166f43b0b1d12eed,Peter Szilagyi,peterke@gmail.com,2020-08-27T08:24:28Z,Peter Szilagyi,peterke@gmail.com,2020-08-27T08:24:28Z,"Merge pull request #21491 from karalabe/state-sync-leak-fix

core/state, eth, trie: stabilize memory use, fix memory leak",TRUE,valid
856307d8bbbe20e6d45f4a2a017233a5543b30f7,ucwong,ucwong@126.com,2020-08-26T13:53:12Z,ucwong,ucwong@126.com,2020-08-26T13:53:12Z,"go.mod | goleveldb latest update (#21448)

* go.mod | goleveldb latest update

* go.mod update

* leveldb options

* go.mod: double check

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
16d7eae1c8390576057a859ea4330fba895dca40,Marius van der Wijden,m.vanderwijden@live.de,2020-08-26T10:20:12Z,Marius van der Wijden,m.vanderwijden@live.de,2020-08-26T10:20:12Z,eth: updated comments (#21490),TRUE,valid
d8da0b3d81d6623e0e500de11f50c2858e1fb9e7,Peter Szilagyi,peterke@gmail.com,2020-08-26T10:05:06Z,Peter Szilagyi,peterke@gmail.com,2020-08-26T10:05:06Z,"core/state, eth, trie: stabilize memory use, fix memory leak",TRUE,valid
92b12ee6c6ebf32507a2834b2913bd557a416209,Marius van der Wijden,m.vanderwijden@live.de,2020-08-26T07:37:00Z,Marius van der Wijden,m.vanderwijden@live.de,2020-08-26T07:37:00Z,"accounts/abi/bind/backends: Disallow AdjustTime for non-empty blocks (#21334)

* accounts/abi/bind/backends: Disallow timeshift for non-empty blocks

* accounts/abi/bind/backends: added tests for adjust time

* accounts/abi/bind/simulated: added comments, fixed test for AdjustTime

* accounts/abi/bind/backends: updated comment",TRUE,valid
fc20680b95da65f952012f3370e5d316f0ba237d,Felix Lange,fjl@twurst.com,2020-08-25T14:21:41Z,Felix Lange,fjl@twurst.com,2020-08-25T14:21:41Z,params: begin v1.9.21 release cycle,FALSE,unsigned
979fc96899c77876e15807005eadd936da17b6c2,Felix Lange,fjl@twurst.com,2020-08-25T14:20:37Z,Felix Lange,fjl@twurst.com,2020-08-25T14:20:37Z,params: release Geth v1.9.20,FALSE,unsigned
63a9d4b2aefcf92b392a63eeb04e45fea43cec60,Peter Szilagyi,peterke@gmail.com,2020-08-25T10:25:23Z,Peter Szilagyi,peterke@gmail.com,2020-08-25T10:25:23Z,"Merge pull request #21486 from karalabe/cht-1.9.20

params: update CHTs for v1.9.20 release",TRUE,valid
ce5f94920d921a13f3f0f7a3bffa9cfdd6f22016,Peter Szilagyi,peterke@gmail.com,2020-08-25T10:02:51Z,Peter Szilagyi,peterke@gmail.com,2020-08-25T10:02:51Z,params: update CHTs for v1.9.20 release,TRUE,valid
341f4510830f169653f47a3428037c612fdd0e36,Shude Li,islishude@gmail.com,2020-08-25T08:38:56Z,Shude Li,islishude@gmail.com,2020-08-25T08:38:56Z,graphql: add support for retrieving the chain id (#21451),TRUE,valid
d13b8e5570bd0806935f1032c126ec98e8f93fb2,Peter Szilagyi,peterke@gmail.com,2020-08-25T06:21:44Z,Peter Szilagyi,peterke@gmail.com,2020-08-25T06:21:44Z,"Merge pull request #21483 from karalabe/freezer-truncate-silent

core/rawdb: only complain loudly if truncating many items",TRUE,valid
5655dce3b85ae5064e94f0957a62e593095ae87b,Peter Szilagyi,peterke@gmail.com,2020-08-25T05:45:41Z,Peter Szilagyi,peterke@gmail.com,2020-08-25T05:45:41Z,core/rawdb: only complain loudly if truncating many items,TRUE,valid
7b5107b73ff9600c6856390cf28f98be25835e80,timcooijmans,timcooijmans@gmail.com,2020-08-24T12:42:39Z,timcooijmans,timcooijmans@gmail.com,2020-08-24T12:42:39Z,"p2p/discover: avoid dropping unverified nodes when table is almost empty (#21396)

This change improves discovery behavior in small networks. Very small
networks would often fail to bootstrap because all member nodes were
dropping table content due to findnode failure. The check is now changed
to avoid dropping nodes on findnode failure when their bucket is almost
empty. It also relaxes the liveness check requirement for FINDNODE/v4
response nodes, returning unverified nodes as results when there aren't
any verified nodes yet.

The ""findnode failed"" log now reports whether the node was dropped
instead of the number of results. The value of the ""results"" was
always zero by definition.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
bdde616f2363f0c7af149cd7b08ca8c1a53bd263,Peter Szilagyi,peterke@gmail.com,2020-08-24T11:00:57Z,Peter Szilagyi,peterke@gmail.com,2020-08-24T11:00:57Z,"Merge pull request #21477 from karalabe/snapshotter-shallow-generator

core/state/snapshot: reduce disk layer depth during generation",TRUE,valid
3ee91b9f2e400eee382f0f1a26b6fe233c4c3f9c,Peter Szilagyi,peterke@gmail.com,2020-08-24T10:22:36Z,Peter Szilagyi,peterke@gmail.com,2020-08-24T10:22:36Z,core/state/snapshot: reduce disk layer depth during generation,TRUE,valid
0f4e7c9b0d570ff7f79b0765a0bd3737ce635e9a,Martin Holst Swende,martin@swende.se,2020-08-24T08:32:12Z,Martin Holst Swende,martin@swende.se,2020-08-24T08:32:12Z,"eth: utilize sync bloom for getNodeData (#21445)

* eth/downloader, eth/handler: utilize sync bloom for getNodeData

* trie: handle if bloom is nil

* trie, downloader: check bloom nilness externally",TRUE,valid
1b5a867eec711d83abfda18f7083f0c64a50f8b2,Martin Holst Swende,martin@swende.se,2020-08-22T16:12:04Z,Martin Holst Swende,martin@swende.se,2020-08-22T16:12:04Z,core: do less lookups when writing fast-sync block bodies (#21468),TRUE,valid
87c0ba92136a75db0ab2aba1046d4a9860375d6a,gary rong,garyrong0905@gmail.com,2020-08-21T12:10:40Z,gary rong,garyrong0905@gmail.com,2020-08-21T12:10:40Z,"core, eth, les, trie: add a prefix to contract code (#21080)",TRUE,valid
493100ba4d333b2008149d17871d7cc5b51f821d,Martin Holst Swende,martin@swende.se,2020-08-20T18:34:31Z,Martin Holst Swende,martin@swende.se,2020-08-20T18:34:31Z,consensus/ethash: less lookups of block data,TRUE,valid
b68929caee777e22f8c6e1bbae0e8c91f5d4cfe5,Peter Szilagyi,peterke@gmail.com,2020-08-21T11:43:14Z,Peter Szilagyi,peterke@gmail.com,2020-08-21T11:43:14Z,"Merge pull request #21472 from holiman/fix_dltest_fail

eth/downloader: fix rollback issue on short chains",TRUE,valid
9f7b79af00a1ed57ab8640636041a81b58ecff59,Martin Holst Swende,martin@swende.se,2020-08-21T11:27:10Z,Martin Holst Swende,martin@swende.se,2020-08-21T11:27:10Z,eth/downloader: fix rollback issue on short chains,TRUE,valid
4e54b1a45ead09c1f4ab85ba7f62accd8f672b12,Marius van der Wijden,m.vanderwijden@live.de,2020-08-21T08:04:36Z,Marius van der Wijden,m.vanderwijden@live.de,2020-08-21T08:04:36Z,"metrics: zero temp variable in  updateMeter (#21470)

* metrics: zero temp variable in  updateMeter

Previously the temp variable was not updated properly after summing it to count.
This meant we had astronomically high metrics, now we zero out the temp whenever we
sum it onto the snapshot count

* metrics: move temp variable to be aligned, unit tests

Moves the temp variable in MeterSnapshot to be 64-bit aligned because of the atomic bug.
Adds a unit test, that catches the previous bug.",TRUE,valid
a70a79b285d9176505c5bbf73e691ed142759367,Peter Szilagyi,peterke@gmail.com,2020-08-20T14:41:26Z,Peter Szilagyi,peterke@gmail.com,2020-08-20T14:41:26Z,"Merge pull request #21466 from karalabe/go1.15

travis, dockerfile, appveyor, build: bump to Go 1.15",TRUE,valid
15fdaf20055323874a05bcae780014fb99e7cffd,Peter Szilagyi,peterke@gmail.com,2020-08-20T13:41:37Z,Peter Szilagyi,peterke@gmail.com,2020-08-20T13:41:37Z,"travis, dockerfile, appveyor, build: bump to Go 1.15",TRUE,valid
8cbdc8638fd28693f84d7bdbbdd587e8c57f6383,Peter Szilagyi,peterke@gmail.com,2020-08-20T10:01:24Z,Peter Szilagyi,peterke@gmail.com,2020-08-20T10:01:24Z,"core: define and test chain rewind corner cases (#21409)

* core: define and test chain reparation cornercases

* core: write up a variety of set-head tests

* core, eth: unify chain rollbacks, handle all the cases

* core: make linter smile

* core: remove commented out legacy code

* core, eth/downloader: fix review comments

* core: revert a removed recovery mechanism",TRUE,valid
0bdd295cc0065e0f61e595ada4d3abe58f35c448,Marius van der Wijden,m.vanderwijden@live.de,2020-08-20T07:49:35Z,Marius van der Wijden,m.vanderwijden@live.de,2020-08-20T07:49:35Z,core: more detailed metering for reorgs (#21420),TRUE,valid
7ebc6c43ff5907117a4c5a097ccaca9df9a10b98,Martin Holst Swende,martin@swende.se,2020-08-19T09:31:13Z,Martin Holst Swende,martin@swende.se,2020-08-19T09:31:13Z,"cmd/evm: statet8n output folder + tx hashes on trace filenames (#21406)

* t8ntool: add output basedir

* t8ntool: add txhash to trace filename

* t8ntool: don't default to '.' basedir, allow absolute paths",TRUE,valid
560d44479c9d01dfa498fdfb80aa7eb014bf5936,Peter Szilagyi,peterke@gmail.com,2020-08-19T07:29:54Z,Peter Szilagyi,peterke@gmail.com,2020-08-19T07:29:54Z,"Merge pull request #21461 from karalabe/ppa-drop-disco

build: drop disco, enable groovy on Ubuntu PPAs",TRUE,valid
32b078d418117a9cd52dcd655a065710c2e5ebff,Peter Szilagyi,peterke@gmail.com,2020-08-19T07:28:08Z,Peter Szilagyi,peterke@gmail.com,2020-08-19T07:28:08Z,"build: drop disco, enable groovy on Ubuntu PPAs",TRUE,valid
2ff464b29da35f9590562ca4fba7283c96712f7e,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-08-19T06:54:21Z,Giuseppe Bertone,bertone.giuseppe@gmail.com,2020-08-19T06:54:21Z,core/state: fixed some comments (#21450),TRUE,valid
f3bafecef7dfc573e68d9c04fbd1ad55fb3c0d2f,Marius van der Wijden,m.vanderwijden@live.de,2020-08-18T09:27:04Z,Marius van der Wijden,m.vanderwijden@live.de,2020-08-18T09:27:04Z,metrics: make meter updates lock-free (#21446),TRUE,valid
54add4255064f722b33fe1c13e46db0b875fe325,Martin Holst Swende,martin@swende.se,2020-08-14T12:18:12Z,Martin Holst Swende,martin@swende.se,2020-08-14T12:18:12Z,"cmd/geth/tests: try to fix spurious travis failure in les tests (#21410)

* cmd/geth/tests: try to fix spurious travis failure in les tests

* cmd/geth: les_test - remove extraneous option during boot",TRUE,valid
04926db204232b7103b8eb14bf3f8e9de129ad44,Peter Szilagyi,peterke@gmail.com,2020-08-11T11:11:16Z,Peter Szilagyi,peterke@gmail.com,2020-08-11T11:11:16Z,params: begin v1.9.20 release cycle,TRUE,valid
3e0641923d78bf1905e596a3a41a54277540bec7,Peter Szilagyi,peterke@gmail.com,2020-08-11T11:10:21Z,Peter Szilagyi,peterke@gmail.com,2020-08-11T11:10:21Z,params: release Geth v1.9.19,TRUE,valid
74925e547fe11fff8adf9a47683b90f062cc1734,Peter Szilagyi,peterke@gmail.com,2020-08-11T07:34:08Z,Peter Szilagyi,peterke@gmail.com,2020-08-11T07:34:08Z,"Merge pull request #21437 from karalabe/cht-1.9.19

params: update CHTs for v1.9.19",TRUE,valid
7afdf792ab88ff61b0c68ba4939039beae51482f,Peter Szilagyi,peterke@gmail.com,2020-08-11T07:20:03Z,Peter Szilagyi,peterke@gmail.com,2020-08-11T07:20:03Z,params: update CHTs for v1.9.19,TRUE,valid
c28fd9c0792dd85784073b7398dedc3d7a3d710a,Martin Holst Swende,martin@swende.se,2020-08-10T19:06:14Z,Martin Holst Swende,martin@swende.se,2020-08-10T19:06:14Z,tests: add Berlin-definition identical to YOLOv1 (#21435),TRUE,valid
4baa574410ece6e022068523091fd6e6ceb11369,Peter Szilagyi,peterke@gmail.com,2020-08-10T12:13:31Z,Peter Szilagyi,peterke@gmail.com,2020-08-10T12:13:31Z,"Merge pull request #21434 from karalabe/ethstats-split-rwlock

ethstats: split read and write lock, otherwise they'll lock up",TRUE,valid
9f45d6efae611ef87202a7d699158a2fdc3682cf,Peter Szilagyi,peterke@gmail.com,2020-08-10T11:33:22Z,Peter Szilagyi,peterke@gmail.com,2020-08-10T11:33:22Z,"ethstats: split read and write lock, otherwise they'll lock up",TRUE,valid
cbbc54c4956968ef240ec2610444bb30b74333a0,Peter Szilagyi,peterke@gmail.com,2020-08-10T09:08:46Z,Peter Szilagyi,peterke@gmail.com,2020-08-10T09:08:46Z,"Merge pull request #21433 from holiman/statsync_exiter

eth/downloader: allow all timers to exit",TRUE,valid
7cee2509c07e5514dc7647fcf8a4f066feaaa6df,Martin Holst Swende,martin@swende.se,2020-08-10T08:42:33Z,Martin Holst Swende,martin@swende.se,2020-08-10T08:42:33Z,eth/downloader: allow all timers to exit,TRUE,valid
48b484c5ac537d1759c9903ce81302c298f03a84,Peter Szilagyi,peterke@gmail.com,2020-08-07T16:40:28Z,Peter Szilagyi,peterke@gmail.com,2020-08-07T16:40:28Z,"Merge pull request #21428 from holiman/ethstats_moar

ethstats: overwrite old errors",TRUE,valid
06125bff89fd08ba16ff5b2fbb173ed22e9a7137,Peter Szilagyi,peterke@gmail.com,2020-08-07T13:36:33Z,Peter Szilagyi,peterke@gmail.com,2020-08-07T13:36:33Z,"Merge pull request #21429 from holiman/timerfix

eth/downloader: set deliverytime on drops and timeouts too",TRUE,valid
9fea1a5cf5a0f833f30a27ca0b60c0d71b71b062,Martin Holst Swende,martin@swende.se,2020-08-07T13:31:17Z,Martin Holst Swende,martin@swende.se,2020-08-07T13:31:17Z,eth/downloader: set deliverytime on drops and timeouts too,TRUE,valid
e401f5ff10d7815f77d9fb587291f4fcf69cbdc8,gary rong,garyrong0905@gmail.com,2020-08-07T13:33:00Z,gary rong,garyrong0905@gmail.com,2020-08-07T13:33:00Z,"les: close all connected les-server when shutdown (#21426)

* les: close all connected les-server when shutdown

* les: linter nitpick

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
6a53ce29a468376ff9a8fc5c3e3bc2e0d765ee43,Martin Holst Swende,martin@swende.se,2020-08-07T09:15:41Z,Martin Holst Swende,martin@swende.se,2020-08-07T09:15:41Z,ethstats: overwrite old errors,TRUE,valid
8f24097836b7e9265b73cfcdb586cd967e63d656,Peter Szilagyi,peterke@gmail.com,2020-08-07T12:27:00Z,Peter Szilagyi,peterke@gmail.com,2020-08-07T12:27:00Z,"Merge pull request #21427 from karalabe/fix-statesync-delivery-time

eth/downloader: save the correct delivery time for state sync",TRUE,valid
4b9c0ea76dd721ebd4848c6d1d7c00f517831d90,Peter Szilagyi,peterke@gmail.com,2020-08-07T12:16:29Z,Peter Szilagyi,peterke@gmail.com,2020-08-07T12:16:29Z,eth/downloader: save the correct delivery time for state sync,TRUE,valid
3bb8a4ed3f5e45b8525889b6eddd37e6e40c5925,Peter Szilagyi,peterke@gmail.com,2020-08-07T09:32:01Z,Peter Szilagyi,peterke@gmail.com,2020-08-07T09:32:01Z,"Merge pull request #21425 from holiman/leslock

les: update checktime even if check fails",TRUE,valid
983cb25a0794509365fcf89f2835589126237876,Martin Holst Swende,martin@swende.se,2020-08-07T08:57:02Z,Martin Holst Swende,martin@swende.se,2020-08-07T08:57:02Z,les: update checktime even if check fails,TRUE,valid
68754f393184b3fa1402f00da2d3b65502dcbc69,Peter Szilagyi,peterke@gmail.com,2020-08-06T12:28:31Z,Peter Szilagyi,peterke@gmail.com,2020-08-06T12:28:31Z,"cmd/utils: grant snapshot cache to trie if disabled (#21416)

* cmd/utils: grant snapshot cache to trie if disabled

* eth: fix up default non-mainnet cache distribution",TRUE,valid
5d4512b11305264505fbf61898ae767ca0bc815b,timcooijmans,timcooijmans@gmail.com,2020-08-06T12:19:00Z,timcooijmans,timcooijmans@gmail.com,2020-08-06T12:19:00Z,eth: use maxQueuedTxAnns for to limit the number of transactions announced (#21419),TRUE,valid
d21303f9ddac0c01fa5acb8a8dd98758daa73d15,rene,41963722+renaynay@users.noreply.github.com,2020-08-06T07:24:36Z,rene,41963722+renaynay@users.noreply.github.com,2020-08-06T07:24:36Z,"cmd/geth: fixes db unavailability for chain commands (#21415)

* chaincmd should make config nodes instead of full nodes

* add documentation for using makeConfigNode instead of makeFullNode;

* add documentation to functions

* code style",TRUE,valid
4fde0cabc1b5ce680d88655116f3f46d8afe36fe,Peter Szilagyi,peterke@gmail.com,2020-08-06T05:09:15Z,Peter Szilagyi,peterke@gmail.com,2020-08-06T05:09:15Z,"Merge pull request #21411 from holiman/fix_codelookup

core/vm: avoid map lookups for accessing jumpdest analysis",TRUE,valid
4a04127ce3f5aba96154c28354f15068e60539d2,rene,41963722+renaynay@users.noreply.github.com,2020-08-06T05:02:05Z,rene,41963722+renaynay@users.noreply.github.com,2020-08-06T05:02:05Z,"cmd/geth: fix import / export issues related to DB unavailability (#21414)

* should fix import / export issues related to DB unavailability

* document reason for makeConfigNode

* fix comment

* comment consistency

* remove comments

* lint",TRUE,valid
2de37f28e069b059d6a8fcf546ecf307373e2419,rene,41963722+renaynay@users.noreply.github.com,2020-08-05T09:22:29Z,rene,41963722+renaynay@users.noreply.github.com,2020-08-05T09:22:29Z,"downloader: add eth65 tests (#21383)

* eth65 tests

linted

* remove non-latest eth light tests",TRUE,valid
5a88a7cf5b7786da0504fdde476b6ceb20a2eb31,Robert Zaremba,robert@zaremba.ch,2020-08-05T07:52:54Z,Robert Zaremba,robert@zaremba.ch,2020-08-05T07:52:54Z,core: use errors.Is for consensus errors check (#21095),TRUE,valid
1d25039ff5cef0741f5c3aafad1c3cdcbf45db6b,Felix Lange,fjl@twurst.com,2020-08-05T07:51:37Z,Felix Lange,fjl@twurst.com,2020-08-05T07:51:37Z,"p2p/nat: limit UPNP request concurrency (#21390)

This adds a lock around requests because some routers can't handle
concurrent requests. Requests are also rate-limited.
 
The Map function request a new mapping exactly when the map timeout
occurs instead of 5 minutes earlier. This should prevent duplicate mappings.",TRUE,valid
8ead45c20b31377320c5320964da8cddcb5f59a4,Martin Holst Swende,martin@swende.se,2020-08-04T13:40:23Z,Martin Holst Swende,martin@swende.se,2020-08-04T13:40:23Z,core/vm: avoid map lookups for accessing jumpdest analysis,TRUE,valid
82a9e11058623e73ace50445b41a06ccf8fd888f,Martin Holst Swende,martin@swende.se,2020-08-04T10:21:51Z,Martin Holst Swende,martin@swende.se,2020-08-04T10:21:51Z,"ethstats: avoid concurrent write on websocket (#21404)

Fixes #21403",TRUE,valid
b35e4fce9946c2e3d1e1479d0d41b0b7e04391e5,Hao Duan,duanhao0814@gmail.com,2020-08-04T09:51:53Z,Hao Duan,duanhao0814@gmail.com,2020-08-04T09:51:53Z,"core: avoid modification of accountSet cache in tx_pool (#21159)

* core: avoid modification of accountSet cache in tx_pool

when runReorg, we may copy the dirtyAccounts' accountSet cache to promoteAddrs
in which accounts will be promoted, however, if we have reset request at the
same time, we may reuse promoteAddrs and modify the cache content which is
against the original intention of accountSet cache. So, we need to make a new
slice here to avoid modify accountSet cache.

* core: fix flatten condition + comment

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
e24e05dd0140e1827f33fedca625e3f5a1e46fed,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-08-04T09:33:07Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-08-04T09:33:07Z,"cmd/devp2p: print enode:// URL in enrdump (#21270)

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
90dedea40fc174c914ef038b8b480c2c0ff031b9,Natsu Kagami,natsukagami@gmail.com,2020-08-03T19:53:12Z,Natsu Kagami,natsukagami@gmail.com,2020-08-03T19:53:12Z,"signer: EIP 712, parse `bytes` and `bytesX` as hex strings + correct padding (#21307)

* Handle hex strings for bytesX types

* Add tests for parseBytes

* Improve tests

* Return nil bytes if error is non-nil

* Right-pad instead of left-pad bytes

* More tests",TRUE,valid
c0c01612e95dd20f125154646b38283ab780f357,rene,41963722+renaynay@users.noreply.github.com,2020-08-03T17:40:46Z,rene,41963722+renaynay@users.noreply.github.com,2020-08-03T17:40:46Z,"node: refactor package node (#21105)

This PR significantly changes the APIs for instantiating Ethereum nodes in
a Go program. The new APIs are not backwards-compatible, but we feel that
this is made up for by the much simpler way of registering services on
node.Node. You can find more information and rationale in the design
document: https://gist.github.com/renaynay/5bec2de19fde66f4d04c535fd24f0775.

There is also a new feature in Node's Go API: it is now possible to
register arbitrary handlers on the user-facing HTTP server. In geth, this
facility is used to enable GraphQL.

There is a single minor change relevant for geth users in this PR: The
GraphQL API is no longer available separately from the JSON-RPC HTTP
server. If you want GraphQL, you need to enable it using the
./geth --http --graphql flag combination.

The --graphql.port and --graphql.addr flags are no longer available.",TRUE,valid
b2b14e6ce34734542cff21b504a4579de2ff79ad,Natsu Kagami,natsukagami@gmail.com,2020-08-03T13:30:32Z,Natsu Kagami,natsukagami@gmail.com,2020-08-03T13:30:32Z,"signer/core: EIP-712 encoded data should not reject a Domain without a ChainId (#21306)

* Do not check for a non-nil ChainId

* Add encoding test",TRUE,valid
290d6bd90304e2c8f64adbf3c982818f1b935093,rene,41963722+renaynay@users.noreply.github.com,2020-08-03T12:08:42Z,rene,41963722+renaynay@users.noreply.github.com,2020-08-03T12:08:42Z,"rpc: add SetHeader method to Client (#21392)

Resolves #20163

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
9c2ac6fbd5a12b3f30feb78f3d358dca31603a86,Felix Lange,fjl@twurst.com,2020-07-31T14:20:31Z,Felix Lange,fjl@twurst.com,2020-07-31T14:20:31Z,"rpc: remove silly use of ReadVarint in subscription ID generator (#21391)

Found by @protolambda",TRUE,valid
a00dc5095b53c58136b0a9a1f19a7f0c98872cf4,Peter Szilagyi,peterke@gmail.com,2020-07-30T07:23:36Z,Peter Szilagyi,peterke@gmail.com,2020-07-30T07:23:36Z,"Merge pull request #21358 from hendrikhofstadt/fix/tx-sort-time

core: sort txs at the same gas price by received time",TRUE,valid
ff90894636babb37deed5ff444cef3af66d5894e,meowsbits,b5c6@protonmail.com,2020-07-29T19:53:59Z,meowsbits,b5c6@protonmail.com,2020-07-29T19:53:59Z,core/rawdb: convert some comments to godoc convention (#21384),TRUE,valid
9e04c5ec83cbbb227e63e53d3cd08d97e5f2a874,ucwong,ucwong@126.com,2020-07-29T11:49:12Z,ucwong,ucwong@126.com,2020-07-29T11:49:12Z,"core/bloombits: use single channel for shutdown (#20878)

This replaces the two-stage shutdown scheme with the one we
use almost everywhere else: a single quit channel signalling
termination.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
abf2d7d74ff4a5e66f5e1f78af413b7f66a4c269,Julian Y,jyap808@users.noreply.github.com,2020-07-29T10:48:03Z,Julian Y,jyap808@users.noreply.github.com,2020-07-29T10:48:03Z,"build: use -trimpath flag when building executables (#21374)

* Disable symbol table and DWARF generation by default.
Trimpath if compiling with Go >= 1.13

* Set Go to minimum version 1.13. Revert debug symbol changes.",TRUE,valid
1976bb3df0171f8bbcca168e93642a5427d1d4a5,rene,41963722+renaynay@users.noreply.github.com,2020-07-29T10:47:19Z,rene,41963722+renaynay@users.noreply.github.com,2020-07-29T10:47:19Z,"eth/downloader: remove eth62 (#21378)

* init

notes

removed some mentions of eth62, bumped protocol err too old to >=63

* remove sanity checks and bump supported protocol version up to 63

* remove 62 tests, still need to add 65

* remove 65 tests",TRUE,valid
350a0490ab31cee95b7799d89ed4b10937fa9e0a,gary rong,garyrong0905@gmail.com,2020-07-29T10:44:14Z,gary rong,garyrong0905@gmail.com,2020-07-29T10:44:14Z,les: fix unittest (#21382),TRUE,valid
37564ceda6719ba4248c2cebbbafca5de4712056,Robert Zaremba,robert@zaremba.ch,2020-07-28T16:16:49Z,Robert Zaremba,robert@zaremba.ch,2020-07-28T16:16:49Z,"miner: refactor helper functions in worker.go (#21044)

This reduces complexity of some lengthy functions in worker.go,
making the code easier to read.",TRUE,valid
28c5a8a54badcd058d91efc86e0fe735db506b69,gary rong,garyrong0905@gmail.com,2020-07-28T15:02:35Z,gary rong,garyrong0905@gmail.com,2020-07-28T15:02:35Z,"les: implement new les fetcher (#20692)

* cmd, consensus, eth, les: implement light fetcher

* les: address comment

* les: address comment

* les: address comments

* les: check td after delivery

* les: add linearExpiredValue for error counter

* les: fix import

* les: fix dead lock

* les: order announces by td

* les: encapsulate invalid counter

* les: address comment

* les: add more checks during the delivery

* les: fix log

* eth, les: fix lint

* eth/fetcher: address comment",TRUE,valid
298a19bbc69fdef59eb292656b5a3a44c64dc470,Peter Szilagyi,peterke@gmail.com,2020-07-28T14:13:04Z,Peter Szilagyi,peterke@gmail.com,2020-07-28T14:13:04Z,core: API-less transaction time sorting,TRUE,valid
c47052a580a1b150929de5de5e58b72495fbcbc1,Hendrik Hofstadt,hendrik@nexantic.com,2020-07-22T13:37:44Z,Hendrik Hofstadt,hendrik@nexantic.com,2020-07-22T13:37:44Z,core: sort txs at the same gas price by received time,TRUE,valid
93da0cf8a19bac578c9bc7da08093a062a676fa3,gary rong,garyrong0905@gmail.com,2020-07-28T13:30:31Z,gary rong,garyrong0905@gmail.com,2020-07-28T13:30:31Z,"cmd, core, eth, light, trie: dump clean cache periodically (#20391)

* cmd, core, eth, light, trie: dump clean cache periodically

* eth: update config

* trie: minor fix

* core, trie: address comments

* eth: remove useless

* trie: print clean cache dump start too

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
79ce5537ab12ec7678b3ea08ecd60faf3a12af01,6543,6543@obermui.de,2020-07-28T09:47:05Z,6543,6543@obermui.de,2020-07-28T09:47:05Z,signer/storage: fix a badly ordered error check (#21379),TRUE,valid
8e7bee9b56763e94c06e597bf968838e7ea2d03b,Peter Szilagyi,peterke@gmail.com,2020-07-27T11:58:45Z,Peter Szilagyi,peterke@gmail.com,2020-07-27T11:58:45Z,params: begin v1.9.19 release cycle,TRUE,valid
f5382591874220287de253bfc08b10afd5244927,Peter Szilagyi,peterke@gmail.com,2020-07-27T11:53:53Z,Peter Szilagyi,peterke@gmail.com,2020-07-27T11:53:53Z,params: release Geth v1.9.18,TRUE,valid
b1be9794431e513eaa95fa44ca36c134eaf04b9b,gary rong,garyrong0905@gmail.com,2020-07-27T09:57:15Z,gary rong,garyrong0905@gmail.com,2020-07-27T09:57:15Z,params: upgrade CHTs (#21376),TRUE,valid
e997f92caf7f817388e6be29645f88c7639c6629,Peter Szilagyi,peterke@gmail.com,2020-07-24T12:02:52Z,Peter Szilagyi,peterke@gmail.com,2020-07-24T12:02:52Z,"Merge pull request #21368 from holiman/update_uint256

deps: update uint256 to v1.1.1",TRUE,valid
56434bfa8936c12304a4134a1a0aac421403f76d,Martin Holst Swende,martin@swende.se,2020-07-24T12:00:08Z,Martin Holst Swende,martin@swende.se,2020-07-24T12:00:08Z,deps: update uint256 to v1.1.1,TRUE,valid
6793ffa12b7d4e86ee2f66afa1647dd3f0680ea0,Peter Szilagyi,peterke@gmail.com,2020-07-24T08:14:42Z,Peter Szilagyi,peterke@gmail.com,2020-07-24T08:14:42Z,"Merge pull request #21300 from rjl493456442/txpool-fix-queued-evictions

core: fix queued transaction eviction",TRUE,valid
5413df1dfa5452053e6e4418cd4d021c4dc002cb,rjl493456442,garyrong0905@gmail.com,2020-07-08T08:27:04Z,rjl493456442,garyrong0905@gmail.com,2020-07-08T08:27:04Z,"core: fix heartbeat in txpool

core: address comment",TRUE,valid
c374447401f3c33653fa4327fa9633042f09091c,villanuevawill,hello@willvillanueva.com,2020-05-23T01:15:01Z,villanuevawill,hello@willvillanueva.com,2020-05-23T01:15:01Z,"core: fix queued transaction eviction

Solves issue#20582. Non-executable transactions should not be evicted on each tick if there are no promote transactions or if a pending/reset empties the pending list. Tests and logging expanded to handle these cases in the future.

core/tx_pool: use a ts for each tx in the queue, but only update the heartbeat on promotion or pending replaced

queuedTs proper naming",TRUE,valid
105922180fd97ed34e090a395c62e0288a6aa424,Martin Holst Swende,martin@swende.se,2020-07-24T07:46:26Z,Martin Holst Swende,martin@swende.se,2020-07-24T07:46:26Z,"eth/downloader: refactor downloader + queue (#21263)

* eth/downloader: refactor downloader + queue

downloader, fetcher: throttle-metrics, fetcher filter improvements, standalone resultcache

downloader: more accurate deliverytime calculation, less mem overhead in state requests

downloader/queue: increase underlying buffer of results, new throttle mechanism

eth/downloader: updates to tests

eth/downloader: fix up some review concerns

eth/downloader/queue: minor fixes

eth/downloader: minor fixes after review call

eth/downloader: testcases for queue.go

eth/downloader: minor change, don't set progress unless progress...

eth/downloader: fix flaw which prevented useless peers from being dropped

eth/downloader: try to fix tests

eth/downloader: verify non-deliveries against advertised remote head

eth/downloader: fix flaw with checking closed-status causing hang

eth/downloader: hashing avoidance

eth/downloader: review concerns + simplify resultcache and queue

eth/downloader: add back some locks, address review concerns

downloader/queue: fix remaining lock flaw

* eth/downloader: nitpick fixes

* eth/downloader: remove the *2*3/4 throttling threshold dance

* eth/downloader: print correct throttle threshold in stats

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
3a57eecc69447766ab51b6b290ff6d8656e16b3f,Felix Lange,fjl@twurst.com,2020-07-23T17:15:40Z,Felix Lange,fjl@twurst.com,2020-07-23T17:15:40Z,"mobile: fix build on iOS (#21362)

This fixes the iOS framework build by naming the second parameter of the
Signer interface method. The name is important because it becomes part
of the objc method signature.

Fixes #21340",TRUE,valid
997b55236ebb5c35a87fa25dd5ec89fe6240d801,Felix Lange,fjl@twurst.com,2020-07-23T10:34:08Z,Felix Lange,fjl@twurst.com,2020-07-23T10:34:08Z,build: fix GOBIN for gomobile commands (#21361),TRUE,valid
4c268e65a083e43ec5a2b96b9c93819dedd97acf,meowsbits,b5c6@protonmail.com,2020-07-23T03:47:34Z,meowsbits,b5c6@protonmail.com,2020-07-23T03:47:34Z,"cmd/utils: implement configurable developer (--dev) account options (#21301)

* geth,utils: implement configurable developer account options

Prior to this change --dev (developer) mode
generated one account with an empty password,
irrespective of existing --password and --miner.etherbase
options.

This change makes --dev mode compatible with these
existing flags.

--dev mode may now be used in conjunction with
--password and --miner.etherbase flags to configure
the developer faucet using an existing keystore or
in creating a new account.

Signed-off-by: meows <b5c6@protonmail.com>

* main: remove key/pass flags from usage developer section

These flags are included already in other sections,
and it is not desired to duplicate them.

They were originally included in this section
along with added support for these flags in the
developer mode.

Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
0b53e485d84db1dd25330622dab6ed24818f162e,Peter Szilagyi,peterke@gmail.com,2020-07-22T14:39:08Z,Peter Szilagyi,peterke@gmail.com,2020-07-22T14:39:08Z,"Merge pull request #21352 from karalabe/dev-noinit-genesis

cmd/utils: reuse existing genesis in persistent dev mode",TRUE,valid
9e22e912e3781556bf85364bb51099f369ad7632,Peter Szilagyi,peterke@gmail.com,2020-07-21T12:53:47Z,Peter Szilagyi,peterke@gmail.com,2020-07-21T12:53:47Z,cmd/utils: reuse existing genesis in persistent dev mode,TRUE,valid
123864fc055482279fa61ce063b7e2aad48c0609,rene,41963722+renaynay@users.noreply.github.com,2020-07-21T08:53:06Z,rene,41963722+renaynay@users.noreply.github.com,2020-07-21T08:53:06Z,whisper/whisperv6: improve test error messages (#21348),TRUE,valid
7163a6664ee664df81b9028ab3ba13b9d65a7196,Sammy Libre,7374093+sammy007@users.noreply.github.com,2020-07-21T08:51:15Z,Sammy Libre,7374093+sammy007@users.noreply.github.com,2020-07-21T08:51:15Z,"ethclient: serialize negative block number as ""pending"" (#21177)

Fixes #21175

Co-authored-by: sammy007 <sammy007@users.noreply.github.com>
Co-authored-by: Adam Schmideg <adamschmideg@users.noreply.github.com>",TRUE,valid
4366c45e4ef0bbd6caa30522aa032430194c3ed1,Binacs,bin646891055@gmail.com,2020-07-21T08:23:40Z,Binacs,bin646891055@gmail.com,2020-07-21T08:23:40Z,les: make clientPool.connectedBias configurable (#21305),TRUE,valid
3a52c4dcf25bacd086abc8944175483683b79ab7,Peter Szilagyi,peterke@gmail.com,2020-07-21T07:53:12Z,Peter Szilagyi,peterke@gmail.com,2020-07-21T07:53:12Z,"Merge pull request #21336 from karalabe/tiny-ref-optimization

core/vm: use pointers to operations vs. copy by value",TRUE,valid
722b742780617a1b8e1dedb3958273e5c226cd5e,Peter Szilagyi,peterke@gmail.com,2020-07-20T12:58:33Z,Peter Szilagyi,peterke@gmail.com,2020-07-20T12:58:33Z,params: begin v1.9.18 release cycle,TRUE,valid
748f22c192d24082723f935afd0b0b63e7fd50f4,Peter Szilagyi,peterke@gmail.com,2020-07-20T12:56:42Z,Peter Szilagyi,peterke@gmail.com,2020-07-20T12:56:42Z,params: release Geth v1.9.17,TRUE,valid
43e2e58cbda97c22ddbb616cb74a03c7bc916833,gary rong,garyrong0905@gmail.com,2020-07-20T12:52:42Z,gary rong,garyrong0905@gmail.com,2020-07-20T12:52:42Z,"accounts, internal: fix funding check when estimating gas (#21346)

* internal, accounts: fix funding check when estimate gas

* accounts, internal: address comments",TRUE,valid
35ddf362299d05a683f2addee0c3157c288e8f98,Peter Szilagyi,peterke@gmail.com,2020-07-20T08:47:13Z,Peter Szilagyi,peterke@gmail.com,2020-07-20T08:47:13Z,"Merge pull request #21347 from karalabe/ethstats-fixes

ethstats: fix reconnection issue, implement primus pings",TRUE,valid
0fef66c739c4a359ac438414d502d21ff1510fd2,Peter Szilagyi,peterke@gmail.com,2020-07-20T08:11:38Z,Peter Szilagyi,peterke@gmail.com,2020-07-20T08:11:38Z,"ethstats: fix reconnection issue, implement primus pings",TRUE,valid
508891e64bb1fd5165062393299597c57f5e6025,Peter Szilagyi,peterke@gmail.com,2020-07-16T12:32:01Z,Peter Szilagyi,peterke@gmail.com,2020-07-16T12:32:01Z,core/vm: use pointers to operations vs. copy by value,TRUE,valid
9e88224eb86c92c78f5f03ffcd0793704a8b4309,Nikola Madjarevic,nikola.madjarevic@gmail.com,2020-07-16T12:08:38Z,Nikola Madjarevic,nikola.madjarevic@gmail.com,2020-07-16T12:08:38Z," core: raise gas limit in --dev mode, seed blake precompile (#21323)

* Set gasLimit in --dev mode to be 9m.

* core: Set gasLimit to 11.5 milion and add 1 wei allocation for BLAKE2b",TRUE,valid
295693759e5ded05fec0b2fb39359965b60da785,Martin Holst Swende,martin@swende.se,2020-07-16T12:06:19Z,Martin Holst Swende,martin@swende.se,2020-07-16T12:06:19Z,"core/vm: less allocations for various call variants  (#21222)

* core/vm/runtime/tests: add more benchmarks

* core/vm: initial work on improving alloc count for calls to precompiles

name                                  old time/op    new time/op    delta
SimpleLoop/identity-precompile-10M-6     117ms ±75%      43ms ± 1%  -63.09%  (p=0.008 n=5+5)
SimpleLoop/loop-10M-6                   79.6ms ± 4%    70.5ms ± 1%  -11.42%  (p=0.008 n=5+5)

name                                  old alloc/op   new alloc/op   delta
SimpleLoop/identity-precompile-10M-6    24.4MB ± 0%     4.9MB ± 0%  -79.94%  (p=0.008 n=5+5)
SimpleLoop/loop-10M-6                   13.2kB ± 0%    13.2kB ± 0%     ~     (p=0.357 n=5+5)

name                                  old allocs/op  new allocs/op  delta
SimpleLoop/identity-precompile-10M-6      382k ± 0%      153k ± 0%  -59.99%  (p=0.000 n=5+4)
SimpleLoop/loop-10M-6                     40.0 ± 0%      40.0 ± 0%     ~     (all equal)

* core/vm: don't allocate big.int for touch

name                                  old time/op    new time/op    delta
SimpleLoop/identity-precompile-10M-6    43.3ms ± 1%    42.4ms ± 7%     ~     (p=0.151 n=5+5)
SimpleLoop/loop-10M-6                   70.5ms ± 1%    76.7ms ± 1%   +8.67%  (p=0.008 n=5+5)

name                                  old alloc/op   new alloc/op   delta
SimpleLoop/identity-precompile-10M-6    4.90MB ± 0%    2.46MB ± 0%  -49.83%  (p=0.008 n=5+5)
SimpleLoop/loop-10M-6                   13.2kB ± 0%    13.2kB ± 1%     ~     (p=0.571 n=5+5)

name                                  old allocs/op  new allocs/op  delta
SimpleLoop/identity-precompile-10M-6      153k ± 0%       76k ± 0%  -49.98%  (p=0.029 n=4+4)
SimpleLoop/loop-10M-6                     40.0 ± 0%      40.0 ± 0%     ~     (all equal)

* core/vm: reduce allocs in staticcall

name                                  old time/op    new time/op    delta
SimpleLoop/identity-precompile-10M-6    42.4ms ± 7%    37.5ms ± 6%  -11.68%  (p=0.008 n=5+5)
SimpleLoop/loop-10M-6                   76.7ms ± 1%    69.1ms ± 1%   -9.82%  (p=0.008 n=5+5)

name                                  old alloc/op   new alloc/op   delta
SimpleLoop/identity-precompile-10M-6    2.46MB ± 0%    0.02MB ± 0%  -99.35%  (p=0.008 n=5+5)
SimpleLoop/loop-10M-6                   13.2kB ± 1%    13.2kB ± 0%     ~     (p=0.143 n=5+5)

name                                  old allocs/op  new allocs/op  delta
SimpleLoop/identity-precompile-10M-6     76.4k ± 0%      0.1k ± 0%     ~     (p=0.079 n=4+5)
SimpleLoop/loop-10M-6                     40.0 ± 0%      40.0 ± 0%     ~     (all equal)

* trie: better use of hasher keccakState

* core/state/statedb: reduce allocations in getDeletedStateObject

* core/vm: reduce allocations in all call derivates

* core/vm: reduce allocations in call variants

- Make returnstack `uint32`
- Use a `sync.Pool` of `stack`s

* core/vm: fix tests

* core/vm: goimports

* core/vm: tracer fix + staticcall gas fix

* core/vm: add back snapshot to staticcall

* core/vm: review concerns + make returnstack pooled + enable returndata in traces

* core/vm: fix some test tracer method signatures

* core/vm: run gencodec, minor comment polish

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
240d1851db25f3cca3b324bd9fb7c6edcb2a4e8e,Guillaume Ballet,gballet@gmail.com,2020-07-15T08:00:04Z,Guillaume Ballet,gballet@gmail.com,2020-07-15T08:00:04Z,trie: quell linter in commiter.go (#21329),TRUE,valid
6c9f040ebeafcc680b0c457e6f4886e2bca32527,Martin Holst Swende,martin@swende.se,2020-07-14T19:42:32Z,Martin Holst Swende,martin@swende.se,2020-07-14T19:42:32Z,"core: transaction pool optimizations (#21328)

* core: added local tx pool test case

* core, crypto: various allocation savings regarding tx handling

* core/txlist, txpool: save a reheap operation, avoid some bigint allocs

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>",TRUE,valid
5b081ab214d8d6373cbfdd9464f2503934b9bb68,rene,41963722+renaynay@users.noreply.github.com,2020-07-14T08:35:32Z,rene,41963722+renaynay@users.noreply.github.com,2020-07-14T08:35:32Z,cmd/clef: change --rpcport to --http.port and update flags in docs (#21318),TRUE,valid
6ef4495a8fbda46c888b8f746fa006b0dfcdcc4f,Felix Lange,fjl@twurst.com,2020-07-13T20:25:45Z,Felix Lange,fjl@twurst.com,2020-07-13T20:25:45Z,"p2p/discover: require table nodes to have an IP (#21330)

This fixes a corner case in discv5. The issue cannot happen in discv4
because it performs IP checks on all incoming node information.",TRUE,valid
79addac698d4f066b29bb90140885c815be55a07,gary rong,garyrong0905@gmail.com,2020-07-13T18:43:30Z,gary rong,garyrong0905@gmail.com,2020-07-13T18:43:30Z,core/rawdb: better log messages for ancient failure (#21327),TRUE,valid
7d5267e3a2acf273215105f04a69870e79d80d77,rene,41963722+renaynay@users.noreply.github.com,2020-07-13T14:20:20Z,rene,41963722+renaynay@users.noreply.github.com,2020-07-13T14:20:20Z,".github: Change Code Owners (#21326)

* modify code owners

* add marius",TRUE,valid
4edbc1f2bb7892f8e77d7eb2a676e0fc7c029be0,gary rong,garyrong0905@gmail.com,2020-07-13T10:45:39Z,gary rong,garyrong0905@gmail.com,2020-07-13T10:45:39Z,internal/ethapi: cap txfee for SignTransaction and Resend (#21231),TRUE,valid
6cf6e1d7536adf5b8d3f130720848af9d820b358,Tien,Tiendo1011@gmail.com,2020-07-13T09:22:30Z,Tien,Tiendo1011@gmail.com,2020-07-13T09:22:30Z, README.md: point Go API reference link to pkg.go.dev (#21321),TRUE,valid
2e08dad9e6b3b0f675d144cd41cbbef43439a8b7,libotony,liboliqi@gmail.com,2020-07-13T09:20:47Z,libotony,liboliqi@gmail.com,2020-07-13T09:20:47Z,p2p/discv5: unset pingEcho on pong timeout (#21324),TRUE,valid
af258efdb995914394b02e75b7caa952887054a5,Felix Lange,fjl@twurst.com,2020-07-13T09:17:49Z,Felix Lange,fjl@twurst.com,2020-07-13T09:17:49Z,light: goimports -w (#21325),TRUE,valid
6eef141aef618afa6bfad885b544f25b68f77cc2,gary rong,garyrong0905@gmail.com,2020-07-13T09:02:54Z,gary rong,garyrong0905@gmail.com,2020-07-13T09:02:54Z,"les: historical data garbage collection (#19570)

This change introduces garbage collection for the light client. Historical
chain data is deleted periodically. If you want to disable the GC, use
the --light.nopruning flag.",TRUE,valid
b8dd0890b3dbc5d3c1b71a0f5de026b46993a851,Felix Lange,fjl@twurst.com,2020-07-10T10:40:31Z,Felix Lange,fjl@twurst.com,2020-07-10T10:40:31Z,params: begin v1.9.17 release cycle,FALSE,unsigned
ea3b00ad75aebaf1790fe0f8afc9fb7852c87716,Felix Lange,fjl@twurst.com,2020-07-10T10:38:48Z,Felix Lange,fjl@twurst.com,2020-07-10T10:38:48Z,params: go-ethereum v1.9.16 stable,FALSE,unsigned
feb40e3a4d68cee2e999c8191e78be33ba09fe5d,gary rong,garyrong0905@gmail.com,2020-07-10T09:33:31Z,gary rong,garyrong0905@gmail.com,2020-07-10T09:33:31Z,"accounts/external: remove dependency on internal/ethapi (#21319)

Fixes #20535

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
beabf95ad7fd80db83944400348c1e42ac3b8c35,rene,41963722+renaynay@users.noreply.github.com,2020-07-09T15:48:40Z,rene,41963722+renaynay@users.noreply.github.com,2020-07-09T15:48:40Z,"cmd/geth, cmd/puppeth: replace deprecated rpc and ws flags in tests and docs (#21317)",TRUE,valid
6ccce0906a8391668779e1bb60f718711cc5a2c3,Felix Lange,fjl@twurst.com,2020-07-09T15:45:49Z,Felix Lange,fjl@twurst.com,2020-07-09T15:45:49Z,"common/math: use math/bits intrinsics for Safe* (#21316)

This is a resubmit of ledgerwatch/turbo-geth#556. The performance
benefit of this change is negligible, but it does remove a TODO.",TRUE,valid
bcb308745010675671991522ad2a9e811938d7fb,Felix Lange,fjl@twurst.com,2020-07-09T12:02:03Z,Felix Lange,fjl@twurst.com,2020-07-09T12:02:03Z,"Revert ""core, txpool: less allocations when handling transactions (#21232)""

Reverting because this change started handling account balances as
uint64 in the transaction pool, which is incorrect.

This reverts commit af5c97aebe1d37486635521ef553cb8bd4bada13.",FALSE,unsigned
967d8de77aa0ee3119c209bdf47836519e46673c,Martin Holst Swende,martin@swende.se,2020-07-08T21:08:08Z,Martin Holst Swende,martin@swende.se,2020-07-08T21:08:08Z,"eth/downloader: fix peer idleness tracking when restarting state sync (#21260)

This fixes two issues with state sync restarts:

When sync restarts with a new root, some peers can have in-flight requests.
Since all peers with active requests were marked idle when exiting sync,
the new sync would schedule more requests for those peers. When the
response for the earlier request arrived, the new sync would reject it and
mark the peer idle again, rendering the peer useless until it disconnected.

The other issue was that peers would not be marked idle when they had
delivered a response, but the response hadn't been processed before
restarting the state sync. This also made the peer useless because it
would be permanently marked busy.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
7a556abe1504e5a698f3871d435256ad6038f1cc,ucwong,ucwong@126.com,2020-07-08T12:06:53Z,ucwong,ucwong@126.com,2020-07-08T12:06:53Z,go.mod: upgrade to github.com/golang/snappy with arm64 asm (#21304),TRUE,valid
5b1cfdef898e3ce1b2e063fba23f04c9f7d1008d,Martin Holst Swende,martin@swende.se,2020-07-08T09:50:26Z,Martin Holst Swende,martin@swende.se,2020-07-08T09:50:26Z,eth: increase timeout in TestBroadcastBlock (#21299),TRUE,valid
c16967c26771ce16411aabf36fe3213da7a500a1,chris-j-h,39617426+chris-j-h@users.noreply.github.com,2020-07-07T20:23:23Z,chris-j-h,39617426+chris-j-h@users.noreply.github.com,2020-07-07T20:23:23Z,cmd/clef: Fix broken link in README and other minor fixes (#21303),TRUE,valid
6a48ae37b27de9211165450617e73dd0d52daec6,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-07-07T12:37:33Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-07-07T12:37:33Z,"cmd/devp2p: add discv4 test suite (#21163)

This adds a test suite for discovery v4. The test suite is a port of the Hive suite for
discovery, and will replace the current suite on Hive soon-ish. The tests can be
run locally with this command:

    devp2p discv4 test -remote enode//...

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
e5871b928fb0a4caf65153b552187c5c103e24d7,chris-j-h,39617426+chris-j-h@users.noreply.github.com,2020-07-07T09:12:38Z,chris-j-h,39617426+chris-j-h@users.noreply.github.com,2020-07-07T09:12:38Z,"cmd/clef: Update README with external v6.0.0 & internal v7.0.1 APIs (#21298)

Changes include:
* Updates response docs for `account_new`, `account_list`, `account_signTransaction`
* Removes `account_import`, `account_export` docs
* Adds `account_version` docs
* Updates request docs for `ui_approveListing`, `ui_approveSignData`, `ui_showInfo`, `ui_showError`, `ui_onApprovedTx`
* Adds `ui_approveNewAccount`, `ui_onInputRequired` docs",TRUE,valid
6d8e51ab8850770925f3aaf79186f0398f24a702,gary rong,garyrong0905@gmail.com,2020-07-06T20:09:30Z,gary rong,garyrong0905@gmail.com,2020-07-06T20:09:30Z,"cmd, node: dump empty value config (#21296)",TRUE,valid
6315b6fcc04033167c8cde0b1a55fea280258fd4,Felix Lange,fjl@twurst.com,2020-07-06T09:17:09Z,Felix Lange,fjl@twurst.com,2020-07-06T09:17:09Z,"rlp: reduce allocations for big.Int and byte array encoding (#21291)

This change further improves the performance of RLP encoding by removing
allocations for big.Int and [...]byte types. I have added a new benchmark
that measures RLP encoding of types.Block to verify that performance is
improved.",TRUE,valid
fa01117498a580f8de35e026f7e0ab38313868dd,Martin Holst Swende,martin@swende.se,2020-07-04T18:10:48Z,Martin Holst Swende,martin@swende.se,2020-07-04T18:10:48Z,build/ci: handle split up listing (#21293),TRUE,valid
490b380a04437d7eb780635e941fc8fa017413e7,meowsbits,b5c6@protonmail.com,2020-07-03T17:12:22Z,meowsbits,b5c6@protonmail.com,2020-07-03T17:12:22Z,"cmd/geth: allow configuring metrics HTTP server on separate endpoint (#21290)

Exposing /debug/metrics and /debug/metrics/prometheus was dependent
on --pprof, which also exposes other HTTP APIs. This change makes it possible
to run the metrics server on an independent endpoint without enabling pprof.",TRUE,valid
61270e5e1c7986427fb1a80789344daafd4bda3f,gary rong,garyrong0905@gmail.com,2020-07-03T12:50:35Z,gary rong,garyrong0905@gmail.com,2020-07-03T12:50:35Z,"eth/gasprice: lighter gas price oracle for light client (#20409)

This PR reduces the bandwidth used by the light client to compute the
recommended gas price. The current mechanism for suggesting the price is:

- retrieve recent 20 blocks
- get the lowest gas price of these blocks
- sort the price array and return the middle(60%) one

This works for full nodes, which have all blocks available locally.
However, this is very expensive for the light client because the light
client needs to retrieve block bodies from the network.

The PR changes the default options for light client. With the new config,
the light client only retrieves the two latest blocks, but in order to
collect more sample transactions, the 3 lowest prices are collected from
each block.

This PR also changes the behavior for empty blocks. If the block is empty,
the lastest price is reused for sampling.",TRUE,valid
07a95ce571b2a8c183e9986040032a7049bb24f4,Martin Holst Swende,martin@swende.se,2020-07-02T08:15:11Z,Martin Holst Swende,martin@swende.se,2020-07-02T08:15:11Z,"les/checkpointoracle: don't lookup checkpoint more than once per minute (#21285)

* les/checkpointoracle: don't lookup checkpoint more than once per second

* les/checkpoint/oracle: change oracle checktime to 1 minute",TRUE,valid
04c4e50d72e1277526df419acfb6c09cd8760233,Martin Holst Swende,martin@swende.se,2020-07-02T08:00:18Z,Martin Holst Swende,martin@swende.se,2020-07-02T08:00:18Z,"ethapi: don't crash when keystore-specific methods are called but external signer used (#21279)

* console: prevent importRawKey from getting into CLI history

* internal/ethapi: error on keystore-methods when no keystore is present",TRUE,valid
7451fc637d0b6f1e6c32381e80c6a2fff665b6bf,Martin Holst Swende,martin@swende.se,2020-07-02T07:43:42Z,Martin Holst Swende,martin@swende.se,2020-07-02T07:43:42Z,"internal/ethapi: default gas to maxgascap, not max int64 (#21284)",TRUE,valid
12867d152c3776041727aebb02f373f01318adf8,Martin Holst Swende,martin@swende.se,2020-07-01T17:54:21Z,Martin Holst Swende,martin@swende.se,2020-07-01T17:54:21Z,"rpc, internal/ethapi: default rpc gascap at 25M + better error message (#21229)

* rpc, internal/ethapi: default rpc gascap at 50M + better error message

* eth,internal: make globalgascap uint64

* core/tests: fix compilation failure

* eth/config: gascap at 25M + minor review concerns",TRUE,valid
af5c97aebe1d37486635521ef553cb8bd4bada13,Marius van der Wijden,m.vanderwijden@live.de,2020-07-01T17:35:26Z,Marius van der Wijden,m.vanderwijden@live.de,2020-07-01T17:35:26Z,"core, txpool: less allocations when handling transactions (#21232)

* core: use uint64 for total tx costs instead of big.Int

* core: added local tx pool test case

* core, crypto: various allocation savings regarding tx handling

* Update core/tx_list.go

* core: added tx.GasPriceIntCmp for comparison without allocation

adds a method to remove unneeded allocation in comparison to tx.gasPrice

* core: handle pools full of locals better

* core/tests: benchmark for tx_list

* core/txlist, txpool: save a reheap operation, avoid some bigint allocs

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
8dfd66f701a04589586ca77a00da5abc6d31c286,Marius van der Wijden,m.vanderwijden@live.de,2020-07-01T11:49:19Z,Marius van der Wijden,m.vanderwijden@live.de,2020-07-01T11:49:19Z,"rlp: avoid list header allocation in encoder (#21274)

List headers made up 11% of all allocations during sync. This change
removes most of those allocations by keeping the list header values
cached in the encoder buffer instead. Since encoder buffers are pooled,
list headers are no longer allocated in the common case where an
encoder buffer is available for reuse.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
ec51cbb5fb004a63a746cf29ae44d1e07d408591,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-07-01T08:31:11Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-07-01T08:31:11Z,"cmd/geth: LES priority client test (#20719)

This adds a regression test for the LES priority client API.",TRUE,valid
d671dbd5b79d2213b92c2c187b9016c4309881c9,Marius van der Wijden,m.vanderwijden@live.de,2020-06-30T17:43:29Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-30T17:43:29Z,"eth/downloader: fixes data race between synchronize and other methods (#21201)

* eth/downloaded: fixed datarace between synchronize and Progress

There was a race condition between `downloader.synchronize()` and `Progress` `syncWithPeer` `fetchHeight` `findAncestors` and `processHeaders`
This PR changes the behavior of the downloader a bit.
Previously the functions `Progress` `syncWithPeer` `fetchHeight` `findAncestors` and `processHeaders` read the syncMode anew within their loops. Now they read the syncMode at the start of their function and don't change it during their runtime.

* eth/downloaded: comment

* eth/downloader: added comment",TRUE,valid
1e635bd0bd6fe64c1f5539c7e73ced297173af67,rene,41963722+renaynay@users.noreply.github.com,2020-06-30T14:05:59Z,rene,41963722+renaynay@users.noreply.github.com,2020-06-30T14:05:59Z,go.mod: updated crypto deps causing build failure (#21276),TRUE,valid
b86b1e6d43dccced25ba5cd81fe4dce8400121a0,Guillaume Ballet,gballet@gmail.com,2020-06-30T13:22:21Z,Guillaume Ballet,gballet@gmail.com,2020-06-30T13:22:21Z,go.mod: bump gopsutil version (#21275),TRUE,valid
ddeea1e0c68df82c1190d3ee71aae87ed3d92bfe,Marius van der Wijden,m.vanderwijden@live.de,2020-06-30T09:59:06Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-30T09:59:06Z,"core: types: less allocations when hashing and tx handling (#21265)

* core, crypto: various allocation savings regarding tx handling

* core: reduce allocs for gas price comparison

This change reduces the allocations needed for comparing different transactions to each other.
A call to `tx.GasPrice()` copies the gas price as it has to be safe against modifications and
also needs to be threadsafe. For comparing and ordering different transactions we don't need
these guarantees

* core: added tx.GasPriceIntCmp for comparison without allocation

adds a method to remove unneeded allocation in comparison to tx.gasPrice

* core/types: pool legacykeccak256 objects in rlpHash

rlpHash is by far the most used function in core that allocates a legacyKeccak256 object on each call.
Since it is so widely used it makes sense to add pooling here so we relieve the GC.
On my machine these changes result in > 100 MILLION less allocations and > 30 GB less allocated memory.

* reverted some changes

* reverted some changes

* trie: use crypto.KeccakState instead of replicating code

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
e376d2fb31a8fa131ab1f6b9f96ac8a41c94e007,Martin Holst Swende,martin@swende.se,2020-06-30T08:12:51Z,Martin Holst Swende,martin@swende.se,2020-06-30T08:12:51Z,"cmd/evm: add state transition tool for testing (#20958)

This PR implements the EVM state transition tool, which is intended
to be the replacement for our retesteth client implementation.
Documentation is present in the cmd/evm/README.md file.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
dd91c7ce6ab5f140e576caecc8efe8f12ab3a6b1,Binacs,bin646891055@gmail.com,2020-06-30T07:56:40Z,Binacs,bin646891055@gmail.com,2020-06-30T07:56:40Z,"cmd: abstract `getPassPhrase` functions into one (#21219)

* [cmd] Abstract `getPassPhrase` functions into one.

* cmd/ethkey: fix compilation failure

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
c13df1458118067cbfd74d5eff03bf3f7368f8cb,meowsbits,b5c6@protonmail.com,2020-06-30T07:05:25Z,meowsbits,b5c6@protonmail.com,2020-06-30T07:05:25Z,"utils: fix ineffectual miner config flags (#21271)

Without use of global, these flags didn't actually modify
miner configuration, since we weren't grabbing from the
proper context scope, which should be global (vs. subcommand).

Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
02cea2330d6b4822b43a7fbaeacc12ddc8e8b1db,Marius van der Wijden,m.vanderwijden@live.de,2020-06-26T10:19:31Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-26T10:19:31Z,"eth: returned revert reason in traceTx (#21195)

* eth: returned revert reason in traceTx

* eth: return result data",TRUE,valid
413358abb915dd2cfd948f2f9a58b5bff3e672fe,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-06-24T20:01:58Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-06-24T20:01:58Z,"cmd/geth: make import cmd exit with 1 if import errors occurred (#21244)

The import command should not return a 0 status
code if the import finishes prematurely becaues
of an import error.

Returning the error causes the program to exit with 1
if the err is non nil.

Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
0c82928981028e8b32b5852c38b095d2e0d26b04,Marius van der Wijden,m.vanderwijden@live.de,2020-06-24T19:58:28Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-24T19:58:28Z,"core/vm: fix incorrect computation of BLS discount (#21253)

* core/vm: fix incorrect computation of discount

During testing on Yolov1 we found that the way geth calculates the discount
is not in line with the specification. Basically what we did is calculate
128 * Bls12381GXMulGas * discount / 1000 whenever we received more than 128 pairs
of values. Correct would be to calculate k * Bls12381... for k > 128.

* core/vm: better logic for discount calculation

* core/vm: better calculation logic, added worstcase benchmarks

* core/vm: better benchmarking logic",TRUE,valid
b482423e61e1e40ee4170139f24435fd57012333,Marius van der Wijden,m.vanderwijden@live.de,2020-06-24T19:56:27Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-24T19:56:27Z,trie: reduce allocs in insertPreimage (#21261),TRUE,valid
93142e50c3d4ced88ca1620b4cee2038c4c145ba,gary rong,garyrong0905@gmail.com,2020-06-24T10:54:13Z,gary rong,garyrong0905@gmail.com,2020-06-24T10:54:13Z,"eth: don't block if transaction broadcast loop fails (#21255)

* eth: don't block if transaction broadcast loop is returned

* eth: kick out peer if we failed to send message

* eth: address comment",TRUE,valid
23f1a0b783b351cc185dd46fd5f9992c74801469,Felix Lange,fjl@twurst.com,2020-06-24T10:51:32Z,Felix Lange,fjl@twurst.com,2020-06-24T10:51:32Z,"crypto/secp256k1: enable 128-bit int code and endomorphism optimization (#21203)

* crypto/secp256k1: enable use of __int128

This speeds up scalar & field calculations a lot.

* crypto/secp256k1: enable endomorphism optimization",TRUE,valid
da180ba097e9ac5bc53b8868b76191cbfeeb6a51,Felix Lange,fjl@twurst.com,2020-06-24T08:41:53Z,Felix Lange,fjl@twurst.com,2020-06-24T08:41:53Z,"cmd/devp2p: add commands for node key management (#21202)

These commands mirror the key/URL generation functions of cmd/bootnode.

    $ devp2p key generate mynode.key
    $ devp2p key to-enode mynode.key -ip 203.0.113.21 -tcp 30304
    enode://78a7746089baf4b8615f54a5f0b67b22b1...",TRUE,valid
c42d1390d31cc580f0966e3681cd9cb89bfa83d9,Peter Szilagyi,peterke@gmail.com,2020-06-24T06:44:23Z,Peter Szilagyi,peterke@gmail.com,2020-06-24T06:44:23Z,"Merge pull request #21256 from karalabe/p2p-packet-metrics

p2p: measure packet throughput too, not just bandwidth",TRUE,valid
42ccb2fdbda72b9ed9fa0fbb5594ee706fb8008c,Peter Szilagyi,peterke@gmail.com,2020-06-24T06:36:20Z,Peter Szilagyi,peterke@gmail.com,2020-06-24T06:36:20Z,"p2p: measure packet throughput too, not just bandwidth",TRUE,valid
dce533c246fe6e6543f87e1de220a55be64d79fc,ucwong,ucwong@126.com,2020-06-23T08:46:59Z,ucwong,ucwong@126.com,2020-06-23T08:46:59Z,whisper: fix time.sleep by time.ticker in whisper_test (#21251),TRUE,valid
9a188c975dfae0b138a6553389f875a0c173f59f,Guillaume Ballet,gballet@gmail.com,2020-06-19T13:43:52Z,Guillaume Ballet,gballet@gmail.com,2020-06-19T13:43:52Z,"common/fdlimit: build on DragonflyBSD (#21241)

* common/fdlimit: build on DragonflyBSD

* review feedback",TRUE,valid
3ebfeb09fe86a14c5dd4929b481ac67f51b13569,AusIV,code@ausiv.com,2020-06-19T07:51:37Z,AusIV,code@ausiv.com,2020-06-19T07:51:37Z,"core/rawdb: fix high memory usage in freezer (#21243)

The ancients variable in the freezer is a list of hashes, which
identifies all of the hashes to be frozen. The slice is being allocated
with a capacity of `limit`, which is the number of the last block
this batch will attempt to add to the freezer. That means we are
allocating memory for all of the blocks in the freezer, not just
the ones to be added.

If instead we allocate `limit - f.frozen`, we will only allocate
enough space for the blocks we're about to add to the freezer. On
mainnet this reduces usage by about 320 MB.",TRUE,valid
5435e0d1a1ae187f638ba3c852996713aa27d370,ucwong,ucwong@126.com,2020-06-18T15:58:49Z,ucwong,ucwong@126.com,2020-06-18T15:58:49Z,"whisper : use timer.Ticker instead of sleep (#21240)

* whisper : use timer.Ticker instead of sleep

* lint: Fix linter error

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
e029cc6616750e4734e285cfa9fe24b80236777e,ucwong,ucwong@126.com,2020-06-18T11:01:49Z,ucwong,ucwong@126.com,2020-06-18T11:01:49Z,go.mod: update snappy dependency (#21237),TRUE,valid
56a319b9daa5228a6b22ecb1d07f8183ebd98106,gary rong,garyrong0905@gmail.com,2020-06-17T07:46:31Z,gary rong,garyrong0905@gmail.com,2020-06-17T07:46:31Z,"cmd, eth, internal, les: add txfee cap (#21212)

* cmd, eth, internal, les: add gasprice cap

* cmd/utils, eth: add default value for gasprice cap

* all: use txfee cap

* cmd, eth: add fix

* cmd, internal: address comments",TRUE,valid
bcf19bc4be7d37671831c4ca3b5fa527c13afdf2,zhangsoledad,787953403@qq.com,2020-06-17T07:41:07Z,zhangsoledad,787953403@qq.com,2020-06-17T07:41:07Z,"core/rawdb: swap tailId and itemOffset for deleted items in freezer (#21220)

* fix(freezer): tailId filenum offset were misplaced

* core/rawdb: assume first item in freezer always start from zero",TRUE,valid
eb9d7d15ecf08cd5104e01a8af64489f01f700b0,Peter Szilagyi,peterke@gmail.com,2020-06-16T08:35:16Z,Peter Szilagyi,peterke@gmail.com,2020-06-16T08:35:16Z,"Merge pull request #21170 from duanhao0814/fix-dup-ecrecover

core: filter out txs with invalid signatures as soon as possible",TRUE,valid
a981b60c25e6be35ec37cf9b9625017c5fa67fdc,sixdays,lj491685571@126.com,2020-06-15T12:46:27Z,sixdays,lj491685571@126.com,2020-06-15T12:46:27Z,"eth/downloader: don't use defer for unlock before return (#21227)

Co-authored-by: linjing <linjingjing@baidu.com>",TRUE,valid
9371b2f70c70f887999d10750440fb09fe1e184f,HackyMiner,hackyminer@gmail.com,2020-06-11T13:41:43Z,HackyMiner,hackyminer@gmail.com,2020-06-11T13:41:43Z,internal/web3ext: add missing params to debug.accountRange (#21208),TRUE,valid
c85fdb76eeff83133cbad23111684085582abf73,Martin Holst Swende,martin@swende.se,2020-06-11T04:27:43Z,Martin Holst Swende,martin@swende.se,2020-06-11T04:27:43Z,go.mod: update uint256 to 1.1.0 (#21206),TRUE,valid
e30c0af86127fd605281bd5b3de3ce2fb8ac95aa,Yang Hau,vulxj0j8j8@gmail.com,2020-06-10T20:25:32Z,Yang Hau,vulxj0j8j8@gmail.com,2020-06-10T20:25:32Z,"build, internal/ethapi, crypto/bls12381: fix typos (#21210)

speicifc -> specific
assigened -> assigned
frobenious -> frobenius",TRUE,valid
4a19c0e7b81e553a9e2e4ec4d50e3c2cdb957e3a,gary rong,garyrong0905@gmail.com,2020-06-10T09:46:13Z,gary rong,garyrong0905@gmail.com,2020-06-10T09:46:13Z,"core, eth, internal: include read storage entries in structlog output (#21204)

* core, eth, internal: extend structLog tracer

* core/vm, internal: add storage view

* core, internal: add slots to storage directly

* core: remove useless

* core: address martin's comment

* core/vm: fix tests",TRUE,valid
e9ba536d85b591f3314c3fd983f2e294774416a7,Martin Holst Swende,martin@swende.se,2020-06-09T09:39:19Z,Martin Holst Swende,martin@swende.se,2020-06-09T09:39:19Z,"eth/downloader: fix spuriously failing tests (#21149)

* eth/downloader tests: fix spurious failing test due to race between receipts/headers

* miner tests: fix travis failure on arm64

* eth/downloader: tests - store td in ancients too",TRUE,valid
89043cba75e317c9bd7ba01a8ce5af44d4fa9ca1,Natsu Kagami,natsukagami@gmail.com,2020-06-09T08:26:56Z,Natsu Kagami,natsukagami@gmail.com,2020-06-09T08:26:56Z,accounts/abi: make GetType public again (#21157),TRUE,valid
d5c267fd30535610184bed914e3541a57c962ff6,Pau,pau@dabax.net,2020-06-09T08:23:42Z,Pau,pau@dabax.net,2020-06-09T08:23:42Z,accounts/keystore: fix typo in error message (#21200),TRUE,valid
a0797e37f880bcaa248127be9671b0c563f73bbf,Peter Szilagyi,peterke@gmail.com,2020-06-08T13:38:05Z,Peter Szilagyi,peterke@gmail.com,2020-06-08T13:38:05Z,"Merge pull request #21192 from karalabe/fix-escape-analysis

core/state: avoid escape analysis fault when accessing cached state",TRUE,valid
80e887d7bfbbb76fa57322d6b1121f127f3275cb,Peter Szilagyi,peterke@gmail.com,2020-06-08T13:11:37Z,Peter Szilagyi,peterke@gmail.com,2020-06-08T13:11:37Z,core/state: avoid escape analysis fault when accessing cached state,TRUE,valid
cf6674539c589f80031f3371a71c6a80addbe454,Pawe? Bylica,chfast@gmail.com,2020-06-08T12:24:40Z,Pawe? Bylica,chfast@gmail.com,2020-06-08T12:24:40Z,"core/vm: use uint256 in EVM implementation (#20787)

* core/vm: use fixed uint256 library instead of big

* core/vm: remove intpools

* core/vm: upgrade uint256, fixes uint256.NewFromBig

* core/vm: use uint256.Int by value in Stack

* core/vm: upgrade uint256 to v1.0.0

* core/vm: don't preallocate space for 1024 stack items (only 16)

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
39abd92ca82e0dd6828d0ba4af987f50b20b6aea,ucwong,ucwong@126.com,2020-06-08T11:27:08Z,ucwong,ucwong@126.com,2020-06-08T11:27:08Z,ethstats: use timer instead of time.sleep (#20924),TRUE,valid
45b75351378430689f8dd7eaa65fc98763276bc4,libby kent,viskovitzzz@gmail.com,2020-06-08T09:55:51Z,libby kent,viskovitzzz@gmail.com,2020-06-08T09:55:51Z,cmd/ethkey: support --passwordfile in generate command (#21183),TRUE,valid
da06519347cb548752c833a283c320fdabcf6603,Felix Lange,fjl@twurst.com,2020-06-08T09:00:17Z,Felix Lange,fjl@twurst.com,2020-06-08T09:00:17Z,params: begin v1.9.16 release cycle,FALSE,unsigned
0f77f34bb67b640bd8af22b215f3d279a1e21170,Felix Lange,fjl@twurst.com,2020-06-08T08:56:48Z,Felix Lange,fjl@twurst.com,2020-06-08T08:56:48Z,params: go-ethereum v1.9.15 stable,FALSE,unsigned
651233454ee0e7e091162fe1631072ae05016e0a,Peter Szilagyi,peterke@gmail.com,2020-06-08T08:16:23Z,Peter Szilagyi,peterke@gmail.com,2020-06-08T08:16:23Z,"Merge pull request #21188 from karalabe/cht-1.9.15

params: update CHTs for 1.9.15 release",TRUE,valid
a5c827af86a81a3e2d0a1ea09582fde2bf96a7dd,Peter Szilagyi,peterke@gmail.com,2020-06-08T08:14:33Z,Peter Szilagyi,peterke@gmail.com,2020-06-08T08:14:33Z,params: update CHTs for 1.9.15 release,TRUE,valid
0b3f3be2b5dde72c6292bfb16915ad763d4aa0bd,Marius van der Wijden,m.vanderwijden@live.de,2020-06-08T08:09:49Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-08T08:09:49Z,"internal/ethapi: return revert reason for eth_call (#21083)

* internal/ethapi: return revert reason for eth_call

* internal/ethapi: moved revert reason logic to doCall

* accounts/abi/bind/backends: added revert reason logic to simulated backend

* internal/ethapi: fixed linting error

* internal/ethapi: check if require reason can be unpacked

* internal/ethapi: better error logic

* internal/ethapi: simplify logic

* internal/ethapi: return vmError()

* internal/ethapi: move handling of revert out of docall

* graphql: removed revert logic until spec change

* rpc: internal/ethapi: added custom error types

* graphql: use returndata instead of return

Return() checks if there is an error. If an error is found, we return nil.
For most use cases it can be beneficial to return the output even if there
was an error. This code should be changed anyway once the spec supports
error reasons in graphql responses

* accounts/abi/bind/backends: added tests for revert reason

* internal/ethapi: add errorCode to revert error

* internal/ethapi: add errorCode of 3 to revertError

* internal/ethapi: unified estimateGasErrors, simplified logic

* internal/ethapi: unified handling of errors in DoEstimateGas

* rpc: print error data field

* accounts/abi/bind/backends: unify simulatedBackend and RPC

* internal/ethapi: added binary data to revertError data

* internal/ethapi: refactored unpacking logic into newRevertError

* accounts/abi/bind/backends: fix EstimateGas

* accounts, console, internal, rpc: minor error interface cleanups

* Revert ""accounts, console, internal, rpc: minor error interface cleanups""

This reverts commit 2d3ef53c5304e429a04983210a417c1f4e0dafb7.

* re-apply the good parts of 2d3ef53c53

* rpc: add test for returning server error data from client

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
88125d8bd00759bdce319b5cb0e8db0d9223962f,Ev,ev@ethereum.org,2020-06-08T07:53:56Z,Ev,ev@ethereum.org,2020-06-08T07:53:56Z,core: fix typo in comments (#21181),TRUE,valid
55f30db0aef3a44a6d3f93e6f21a7722bd7cba86,Marius van der Wijden,m.vanderwijden@live.de,2020-06-08T07:53:19Z,Marius van der Wijden,m.vanderwijden@live.de,2020-06-08T07:53:19Z,"core/vm, crypt/bls12381: fixed comments in bls (#21182)

* core/vm: crypto/bls12381: minor code comments

* crypto/bls12381: fix comment",TRUE,valid
9d9353567486d1537afb3ecad33a2527aee53c54,Mariano Cortesi,mcortesi@gmail.com,2020-06-08T07:52:18Z,Mariano Cortesi,mcortesi@gmail.com,2020-06-08T07:52:18Z,node: missing comma on toml tags (#21187),TRUE,valid
4b2ff1457ac28fb2894485194e0e344e84c2bcd7,ucwong,ucwong@126.com,2020-06-04T15:42:05Z,ucwong,ucwong@126.com,2020-06-04T15:42:05Z,go.mod: upgrade go-duktape to hide unused function warning (#21168),TRUE,valid
cefa2ab1bd18f7793df736cb643fed50d29494f4,Peter Szilagyi,peterke@gmail.com,2020-06-04T08:58:40Z,Peter Szilagyi,peterke@gmail.com,2020-06-04T08:58:40Z,"Merge pull request #21173 from karalabe/faucet-delete-oldaccs

cmd/faucet: delete old keystore when importing new faucet key",TRUE,valid
b1b75f00893ed9e290e8466c86e601ab1fe63bc7,Peter Szilagyi,peterke@gmail.com,2020-06-04T07:22:11Z,Peter Szilagyi,peterke@gmail.com,2020-06-04T07:22:11Z,"accounts/keystore, cmd/faucet: return old account to allow unlock",TRUE,valid
201e345c65c9940edf03c9d2b43133e35b40e613,Peter Szilagyi,peterke@gmail.com,2020-06-04T06:30:40Z,Peter Szilagyi,peterke@gmail.com,2020-06-04T06:30:40Z,"Merge pull request #21172 from karalabe/faucet-twitter-mobile

acounts/keystore, cmd/faucet: fix faucet double import, fix twitter url",TRUE,valid
469b8739ebbe45997d8e287bcd441544ebfebfda,Peter Szilagyi,peterke@gmail.com,2020-06-04T05:59:26Z,Peter Szilagyi,peterke@gmail.com,2020-06-04T05:59:26Z,"acounts/keystore, cmd/faucet: fix faucet double import, fix twitter url",TRUE,valid
8523ad450dcced0d16fbb2b9b90687f789d195a9,Hao Duan,duanhao0814@gmail.com,2020-06-03T03:55:14Z,Hao Duan,duanhao0814@gmail.com,2020-06-03T03:55:14Z,"core: filter out txs with invalid signatures as soon as possible

Once we detect an invalid transaction during recovering signatures, we should
directly exclude this transaction to avoid validating the signatures hereafter.

This should optimize the validations times of transactions with invalid signatures
to only one time.",FALSE,unsigned
8b83125739c28caf97b3c2c36b084cedb3fe682e,Peter Szilagyi,peterke@gmail.com,2020-06-03T09:20:57Z,Peter Szilagyi,peterke@gmail.com,2020-06-03T09:20:57Z,"Merge pull request #21162 from karalabe/daofork-order-check-fix

cmd/geth: fix the fork orders for DAO tests",TRUE,valid
f52ff0f1e99ee2adbe4bd8f5ffdbce8e19a0b5dd,Peter Szilagyi,peterke@gmail.com,2020-06-03T09:17:54Z,Peter Szilagyi,peterke@gmail.com,2020-06-03T09:17:54Z,cmd/geth: fix the fork orders for DAO tests,TRUE,valid
890757f03acf9974cfac07d27197803d455d67c9,Martin Holst Swende,martin@swende.se,2020-06-03T09:05:15Z,Martin Holst Swende,martin@swende.se,2020-06-03T09:05:15Z,"cmd, core, params: inital support for yolo-v1 testnet (#21154)

* core,params,puppeth: inital support for yolo-v1 testnet

* cmd/geth, core: add yolov1 console flag

* cmd, core, params: YoloV1 bakein fixups

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
4fc678542dd287c9759107d7f1f2291376434f5e,kilic,onurkilic1004@gmail.com,2020-06-03T06:44:32Z,kilic,onurkilic1004@gmail.com,2020-06-03T06:44:32Z,"core/vm, crypto/bls12381, params: add bls12-381 elliptic curve precompiles (#21018)

* crypto: add bls12-381 elliptic curve wrapper

* params: add bls12-381 precompile gas parameters

* core/vm: add bls12-381 precompiles

* core/vm: add bls12-381 precompile tests

* go.mod, go.sum: use latest bls12381 lib

* core/vm: move point encode/decode functions to base library

* crypto/bls12381: introduce bls12-381 library init function

* crypto/bls12381: import bls12381 elliptic curve implementation

* go.mod, go.sum: remove bls12-381 library

* remove unsued frobenious coeffs

supress warning for inp that used in asm

* add mappings tests for zero inputs

fix swu g2 minus z inverse constant

* crypto/bls12381: fix typo

* crypto/bls12381: better comments for bls12381 constants

* crypto/bls12381: swu, use single conditional for e2

* crypto/bls12381: utils, delete empty line

* crypto/bls12381: utils, use FromHex for string to big

* crypto/bls12381: g1, g2, strict length check for FromBytes

* crypto/bls12381: field_element, comparision changes

* crypto/bls12381: change swu, isogeny constants with hex values

* core/vm: fix point multiplication comments

* core/vm: fix multiexp gas calculation and lookup for g1 and g2

* core/vm: simpler imput length check for multiexp and pairing precompiles

* core/vm: rm empty multiexp result declarations

* crypto/bls12381: remove modulus type definition

* crypto/bls12381: use proper init function

* crypto/bls12381: get rid of new lines at fatal desciprtions

* crypto/bls12-381: fix no-adx assembly multiplication

* crypto/bls12-381: remove old config function

* crypto/bls12381: update multiplication backend

this commit changes mul backend to 6limb eip1962 backend

mul assign operations are dropped

* core/vm/contracts_tests: externalize test vectors for precompiles

* core/vm/contracts_test: externalize failure-cases for precompiles

* core/vm: linting

* go.mod: tiny up sum file

* core/vm: fix goimports linter issues

* crypto/bls12381: build tags for plain ASM or ADX implementation

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
3f649d4852d5e7a16f47d919bf0e450c450bc6bf,chenglin,910372762@qq.com,2020-06-02T16:52:20Z,chenglin,910372762@qq.com,2020-06-02T16:52:20Z,core: collect NewTxsEvent items without holding reorg lock (#21145),TRUE,valid
5f6f5e345ea3fd19d031cb2ae3c8d2894e51639e,Guillaume Ballet,gballet@gmail.com,2020-06-02T16:06:22Z,Guillaume Ballet,gballet@gmail.com,2020-06-02T16:06:22Z,console: handle undefined + null in console funcs (#21160),TRUE,valid
d98c42c0e37da20df8af74724fbd032b342035ab,Felix Lange,fjl@twurst.com,2020-06-02T12:04:44Z,Felix Lange,fjl@twurst.com,2020-06-02T12:04:44Z,"rpc: send websocket ping when connection is idle (#21142)

* rpc: send websocket ping when connection is idle

* rpc: use non-blocking send for websocket pingReset",TRUE,valid
723bd8c17fdf1614d81503efdca9e7eece3766a6,Felix Lange,fjl@twurst.com,2020-06-02T11:20:19Z,Felix Lange,fjl@twurst.com,2020-06-02T11:20:19Z,"p2p/discover: move discv4 encoding to new 'v4wire' package (#21147)

This moves all v4 protocol definitions to a new package, p2p/discover/v4wire.
The new package will be used for low-level protocol tests.",TRUE,valid
cd57d5cd38ef692de8fbedaa56598b4e9fbfbabc,Greg Colvin,greg@colvin.org,2020-06-02T10:30:16Z,Greg Colvin,greg@colvin.org,2020-06-02T10:30:16Z,"core/vm: EIP-2315, JUMPSUB for the EVM (#20619)

* core/vm: implement EIP 2315, subroutines for the EVM

* core/vm: eip 2315 - lintfix + check jump dest validity + check ret stack size constraints

  logger: markdown-friendly traces, validate jumpdest, more testcase, correct opcodes

* core/vm: update subroutines acc to eip: disallow walk-into

* core/vm/eips: gas cost changes for subroutines

* core/vm: update opcodes for EIP-2315

* core/vm: define RETURNSUB as a 'jumping' operation + review concerns

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
a35382de94fe3d0b7ef8a1719ba3e20a1b5af84c,rene,41963722+renaynay@users.noreply.github.com,2020-06-02T09:08:33Z,rene,41963722+renaynay@users.noreply.github.com,2020-06-02T09:08:33Z,"metrics: replace gosigar with gopsutil (#21041)

* replace gosigar with gopsutil

* removed check for whether GOOS is openbsd

* removed accidental import of runtime

* potential fix for difference in units between gosig and gopsutil

* fixed lint error

* remove multiplication factor

* uses cpu.ClocksPerSec as the multiplication factor

* changed dependency from shirou to renaynay (#20)

* updated dep

* switching back from using renaynay fork to using upstream as PRs were merged on upstream

* removed empty line

* optimized imports

* tidied go mod",TRUE,valid
a5eee8d1dc61352c29b9800eaf96609ba4184fd6,Martin Holst Swende,martin@swende.se,2020-05-29T09:12:43Z,Martin Holst Swende,martin@swende.se,2020-05-29T09:12:43Z,"eth/downloader: more context in errors (#21067)

This PR makes use of go 1.13 error handling, wrapping errors and using
errors.Is to check a wrapped root-cause. It also removes the travis
builders for go 1.11 and go 1.12.",TRUE,valid
389da6aa480bdf9a78d865caabc39ebeebb1d416,gary rong,garyrong0905@gmail.com,2020-05-27T14:37:37Z,gary rong,garyrong0905@gmail.com,2020-05-27T14:37:37Z,"trie: enforce monotonic range in prover and return end marker (#21130)

* trie: add hasRightElement indicator

* trie: ensure the range is monotonic increasing

* trie: address comment and fix lint

* trie: address comment

* trie: make linter happy

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
b2c59e297bb302068cbf0b50fccdcda9ba12134e,sixdays,lj491685571@126.com,2020-05-27T14:12:13Z,sixdays,lj491685571@126.com,2020-05-27T14:12:13Z,"consensus/clique: make internal error private (#21132)

Co-authored-by: linjing <linjingjing@baidu.com>",TRUE,valid
9219e0fba42d0e73583604cf6b20742b79ba37c7,Felix Lange,fjl@twurst.com,2020-05-26T19:37:37Z,Felix Lange,fjl@twurst.com,2020-05-26T19:37:37Z,"eth: interrupt chain insertion on shutdown (#21114)

This adds a new API method on core.BlockChain to allow interrupting
running data inserts, and calls the method before shutting down the
downloader.

The BlockChain interrupt checks are now done through a method instead
of inlining the atomic load everywhere. There is no loss of efficiency from
this and it makes the interrupt protocol a lot clearer because the check is
defined next to the method that sets the flag.",TRUE,valid
4873a9d3c3f78a4346228fcba18257634408d906,Felix Lange,fjl@twurst.com,2020-05-26T11:24:22Z,Felix Lange,fjl@twurst.com,2020-05-26T11:24:22Z,"build: upgrade to golangci lint v1.27.0 (#21127)

* build: upgrade to golangci-lint v1.27.0

* build: raise lint timeout to 3 minutes",TRUE,valid
070a5e1252a3da74eed18a42437ed428648037f6,gary rong,garyrong0905@gmail.com,2020-05-26T10:11:29Z,gary rong,garyrong0905@gmail.com,2020-05-26T10:11:29Z,"trie: fix for range proof (#21107)

* trie: fix for range proof

* trie: fix typo",TRUE,valid
81e9caed7d2759ec1da7f268b57c8de45297ea5e,Hao Duan,duanhao0814@gmail.com,2020-05-26T10:09:00Z,Hao Duan,duanhao0814@gmail.com,2020-05-26T10:09:00Z,"ethstats: avoid blocking chan when received invalid stats request (#21073)

* ethstats: avoid blocking chan when received invalid stats request

* ethstats: minor code polishes

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
7ddb40239bed22774c0341c572f22ed34ea78f99,ucwong,ucwong@126.com,2020-05-26T09:03:37Z,ucwong,ucwong@126.com,2020-05-26T09:03:37Z,ethdb/leveldb: use timer instead of time.After (#21066),TRUE,valid
2f66a8d614253f8f0d205b4ab8be37be9eced9a5,Richard Patel,me@terorie.dev,2020-05-26T09:00:09Z,Richard Patel,me@terorie.dev,2020-05-26T09:00:09Z,"metrics/prometheus: define TYPE once, add tests (#21068)

* metrics/prometheus: define type once for histograms

* metrics/prometheus: test collector",TRUE,valid
dbf6b8a7971f1a11b692a3d1bbcd5983b8af65a9,Felix Lange,fjl@twurst.com,2020-05-25T17:50:36Z,Felix Lange,fjl@twurst.com,2020-05-25T17:50:36Z,cmd/utils: fix default DNS discovery configuration (#21124),TRUE,valid
befecc9fdf5d1222cb1cd03d975e47be1e9d00d8,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-05-25T16:01:03Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-05-25T16:01:03Z,consensus/ethash: fix flaky test by reading seal results (#21085),TRUE,valid
e868adde30eee9001e60bcf17e5c4bec83b36090,Martin Holst Swende,martin@swende.se,2020-05-25T14:12:48Z,Martin Holst Swende,martin@swende.se,2020-05-25T14:12:48Z,core/vm: improve jumpdest lookup (#21123),TRUE,valid
25a661e0c2fef5b8de9e36f8c928f374d23e3b01,yutianwu,wzxingbupt@gmail.com,2020-05-25T10:00:18Z,yutianwu,wzxingbupt@gmail.com,2020-05-25T10:00:18Z,consensus/clique: remove redundant pair of parentheses (#21104),TRUE,valid
4f2784b38f59066913bbaf1e6fa531ec724b3650,Martin Michlmayr,tbm@cyrius.com,2020-05-25T08:21:28Z,Martin Michlmayr,tbm@cyrius.com,2020-05-25T08:21:28Z,all: fix typos in comments (#21118),TRUE,valid
48e3b95e774535aee1104d1283d2536cd47c9389,ucwong,ucwong@126.com,2020-05-25T08:20:09Z,ucwong,ucwong@126.com,2020-05-25T08:20:09Z,miner: replace use of 'self' as receiver name (#21113),TRUE,valid
b4a2681120209836f7275753abcc9c7d3f9f8924,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-05-22T11:46:34Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-05-22T11:46:34Z,"les, les/lespay: implement new server pool (#20758)

This PR reimplements the light client server pool. It is also a first step
to move certain logic into a new lespay package. This package will contain
the implementation of the lespay token sale functions, the token buying and
selling logic and other components related to peer selection/prioritization
and service quality evaluation. Over the long term this package will be
reusable for incentivizing future protocols.

Since the LES peer logic is now based on enode.Iterator, it can now use
DNS-based fallback discovery to find servers.

This document describes the function of the new components:
https://gist.github.com/zsfelfoldi/3c7ace895234b7b345ab4f71dab102d4",TRUE,valid
65ce550b37670ce34aeaeaa6e66510028d2f7603,gary rong,garyrong0905@gmail.com,2020-05-20T12:45:38Z,gary rong,garyrong0905@gmail.com,2020-05-20T12:45:38Z,"trie: extend range proofs with non-existence (#21000)

* trie: implement range proof with non-existent edge proof

* trie: fix cornercase

* trie: consider empty range

* trie: add singleSide test

* trie: support all-elements range proof

* trie: fix typo

* trie: tiny typos and formulations

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
0a99efa61fd7fc29d4b82b66fc93ea5e4a1cb6e6,ucwong,ucwong@126.com,2020-05-20T07:32:54Z,ucwong,ucwong@126.com,2020-05-20T07:32:54Z,whisper: use canonical import name of package go-ethereum (#21099),TRUE,valid
d5b7d1cc34e766f2e2c2b82c00c5d12cf71a9cac,Boqin Qin,Bobbqqin@gmail.com,2020-05-19T10:48:27Z,Boqin Qin,Bobbqqin@gmail.com,2020-05-19T10:48:27Z,"accounts: add blockByNumberNoLock() to avoid double-lock (#20983)

* abi/bind/backends: testcase for double-lock

* accounts: add blockByNumberNoLock to avoid double-lock

* backend/simulated: use stateroot, not blockhash for retrieveing state

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
e0987f67e04a840b2f5ee30eb089ae2b7b06df5e,Martin Holst Swende,martin@swende.se,2020-05-19T08:44:46Z,Martin Holst Swende,martin@swende.se,2020-05-19T08:44:46Z,"cmd/clef, signer/core: password input fixes (#20960)

* cmd/clef, signer/core: use better terminal input for passwords, make it possible to avoid boot-up warning

* all: move commonly used prompter to isolated (small) package

* cmd/clef: Add new --acceptWarn to clef README

* cmd/clef: rename flag 'acceptWarn' to 'suppress-bootwarn'

Co-authored-by: ligi <ligi@ligi.de>",TRUE,valid
3666da8a4b99e67c8c00684ae837e140b797823d,Felix Lange,fjl@twurst.com,2020-05-14T11:12:52Z,Felix Lange,fjl@twurst.com,2020-05-14T11:12:52Z,console: fix unlockAccount argument count check (#21081),TRUE,valid
f3f1e59eea922e5fb0d78d55aba471c35c20b022,Marius van der Wijden,m.vanderwijden@live.de,2020-05-13T15:50:18Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-13T15:50:18Z,"accounts/abi: simplify reflection logic (#21058)

* accounts/abi: simplified reflection logic

* accounts/abi: simplified reflection logic

* accounts/abi: removed unpack

* accounts/abi: removed comments

* accounts/abi: removed uneccessary complications

* accounts/abi: minor changes in error messages

* accounts/abi: removed unnused code

* accounts/abi: fixed indexed argument unpacking

* accounts/abi: removed superfluous test cases

This commit removes two test cases. The first one is trivially invalid as we have the same
test cases as passing in packing_test.go L375. The second one passes now,
because we don't need the mapArgNamesToStructFields in unpack_atomic anymore.
Checking for purely underscored arg names generally should not be something we do
as the abi/contract is generally out of the control of the user.

* accounts/abi: removed comments, debug println

* accounts/abi: added commented out code

* accounts/abi: addressed comments

* accounts/abi: remove unnecessary dst.CanSet check

* accounts/abi: added dst.CanSet checks",TRUE,valid
677724af0c0d2c394f3630aaee058ee47ffa1b9f,Satpal,28562234+SatpalSandhu61@users.noreply.github.com,2020-05-13T15:34:24Z,Satpal,28562234+SatpalSandhu61@users.noreply.github.com,2020-05-13T15:34:24Z,cmd: fix log contexts (#21077),TRUE,valid
46698d79310ab1c12089f4bc2c13ac2f136128da,Peter Szilagyi,peterke@gmail.com,2020-05-13T09:33:58Z,Peter Szilagyi,peterke@gmail.com,2020-05-13T09:33:58Z,params: begin v1.9.15 release cycle,TRUE,valid
6d74d1e5f762e06a6a739a42261886510f842778,Peter Szilagyi,peterke@gmail.com,2020-05-13T09:31:35Z,Peter Szilagyi,peterke@gmail.com,2020-05-13T09:31:35Z,params: release go-ethereum v1.9.14,TRUE,valid
a188a1e150ecc917d85631f9e1308712ff55bd5d,Hao Duan,duanhao0814@gmail.com,2020-05-13T09:06:19Z,Hao Duan,duanhao0814@gmail.com,2020-05-13T09:06:19Z,"ethstats: stop report ticker in each loop cycle #21070 (#21071)

Co-authored-by: Hao Duan <duan.hao@hyperchain.cn>",TRUE,valid
d02301f758df1d16875c959b58cf91c76edecbdd,gary rong,garyrong0905@gmail.com,2020-05-13T08:33:48Z,gary rong,garyrong0905@gmail.com,2020-05-13T08:33:48Z,"core: fix missing receipt on Clique crashes (#21045)

* core: fix missing receipt

* core: address comment",TRUE,valid
0b63915430e5921722004345228c5239a8784d6b,Marius van der Wijden,m.vanderwijden@live.de,2020-05-12T11:02:23Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-12T11:02:23Z,"accounts/abi: allow overloaded argument names (#21060)

* accounts/abi: allow overloaded argument names

In solidity it is possible to create the following contract:
```
contract Overloader {
    struct F { uint _f; uint __f; uint f; }
    function f(F memory f) public {}
}
```
This however resulted in a panic in the abi package.

* accounts/abi fixed error handling",TRUE,valid
b8ea9042e52f7bb59c0c0c9e7df37d4f2f579dd2,Marius van der Wijden,m.vanderwijden@live.de,2020-05-12T10:21:40Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-12T10:21:40Z,"accounts/abi: accounts/abi/bind: Move topics to abi package (#21057)

* accounts/abi/bind: added test cases for waitDeployed

* accounts/abi/bind: added test case for boundContract

* accounts/abi/bind: removed unnecessary resolve methods

* accounts/abi: moved topics from /bind to /abi

* accounts/abi/bind: cleaned up format... functions

* accounts/abi: improved log message

* accounts/abi: added type tests

* accounts/abi/bind: remove superfluous template methods",TRUE,valid
7b7e5921a4012810707aaf825080c70ef6823768,gary rong,garyrong0905@gmail.com,2020-05-12T10:11:34Z,gary rong,garyrong0905@gmail.com,2020-05-12T10:11:34Z,"miner: support disabling empty blockprecommits form the Go API (#20736)

* cmd, miner: add noempty-precommit flag

* cmd, miner: get rid of external flag

* miner: change bool to atomic int

* miner: fix tiny typo

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
7540c53e72f2974a0c5509274412c2bf65dd1ab9,ucwong,ucwong@126.com,2020-05-12T09:19:15Z,ucwong,ucwong@126.com,2020-05-12T09:19:15Z,core/rawdb: remove unused math (#21065),TRUE,valid
aaede53738fac7767459dc2a854136ac6680e5b2,ucwong,ucwong@126.com,2020-05-12T08:46:35Z,ucwong,ucwong@126.com,2020-05-12T08:46:35Z,"core/rawdb : log format fix for Unindexing transaction (#21064)

* core/rawdb : log format fix for Unindexing transaction

* core/rawdb: tiny fixup

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
53cac027d0795a66097c753495a8609e545822ba,gary rong,garyrong0905@gmail.com,2020-05-12T08:02:15Z,gary rong,garyrong0905@gmail.com,2020-05-12T08:02:15Z,"les: drop the message if the entire p2p connection is stuck (#21033)

* les: drop the message if the entire p2p connection is stuck

* les: fix lint",TRUE,valid
7ace5a3a8b2a4591063096232a3a1264e3faf8fe,Martin Holst Swende,martin@swende.se,2020-05-12T05:46:10Z,Martin Holst Swende,martin@swende.se,2020-05-12T05:46:10Z,"core: fixup blockchain tests (#21062)

core: fixup blockchain tests",TRUE,valid
40859a2441a91b120ce33b5f5ede95c8f7e7fd97,Peter Szilagyi,peterke@gmail.com,2020-05-11T16:05:47Z,Peter Szilagyi,peterke@gmail.com,2020-05-11T16:05:47Z,"Merge pull request #21061 from karalabe/cht-1.9.14

params: bump CHTs for the v1.9.14 release",TRUE,valid
45352300592cf68feb64d67aefa607eec2c9a1de,Martin Holst Swende,martin@swende.se,2020-05-11T15:58:43Z,Martin Holst Swende,martin@swende.se,2020-05-11T15:58:43Z,"cmd, core, eth: background transaction indexing (#20302)

* cmd, core, eth: init tx lookup in background

* core/rawdb: tiny log fixes to make it clearer what's happening

* core, eth: fix rebase errors

* core/rawdb: make reindexing less generic, but more optimal

* rlp: implement rlp list iterator

* core/rawdb: new implementation of tx indexing/unindex using generic tx iterator and hashing rlp-data

* core/rawdb, cmd/utils: fix review concerns

* cmd/utils: fix merge issue

* core/rawdb: add some log formatting polishes

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
126ac94f369e56a4da879aaa8914afef6a8a64b2,Peter Szilagyi,peterke@gmail.com,2020-05-11T15:56:09Z,Peter Szilagyi,peterke@gmail.com,2020-05-11T15:56:09Z,params: bump CHTs for the v1.9.14 release,TRUE,valid
6f54ae24cdeacd14519eac8b127e0e1fea03d66a,Felix Lange,fjl@twurst.com,2020-05-11T15:11:17Z,Felix Lange,fjl@twurst.com,2020-05-11T15:11:17Z,"p2p: add 0 port check in dialer  (#21008)

* p2p: add low port check in dialer

We already have a check like this for UDP ports, add a similar one in
the dialer. This prevents dials to port zero and it's also an extra
layer of protection against spamming HTTP servers.

* p2p/discover: use errLowPort in v4 code

* p2p: change port check

* p2p: add comment

* p2p/simulations/adapters: ensure assigned port is in all node records",TRUE,valid
069a7e1f8abe4e06f7aba7bb1dbd5a49ce242a5a,AusIV,git@ausiv.com,2020-05-11T12:11:17Z,AusIV,git@ausiv.com,2020-05-11T12:11:17Z,"core/rawdb: stop freezer process as part of freezer.Close() (#21010)

* core/rawdb: Stop freezer process as part of freezer.Close()

When you call db.Close(), it was closing the leveldb database first,
then closing the freezer, but never stopping the freezer process.
This could cause the freezer to attempt to write to leveldb after
leveldb had been closed, leading to a crash with a non-zero exit code.

This change adds a quit channel to the freezer, and freezer.Close()
will not return until the freezer process has stopped.

Additionally, when you call freezerdb.Close(), it will close the
AncientStore before closing leveldb, to ensure that the freezer goroutine
will be stopped before leveldb is closed.

* core/rawdb: Fix formatting for golint

* core/rawdb: Use backoff flag to avoid repeating select

* core/rawdb: Include accidentally omitted backoff",TRUE,valid
bd60295de56b04a435fc2a0b31d3d18a34cd3843,Martin Holst Swende,martin@swende.se,2020-05-11T09:59:21Z,Martin Holst Swende,martin@swende.se,2020-05-11T09:59:21Z,"console: fix some crashes/errors in the bridge (#21050)

Fixes #21046",TRUE,valid
930e82d7f4e6e0e7e90d36569f294745e1547a1e,Marius van der Wijden,m.vanderwijden@live.de,2020-05-11T08:16:32Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-11T08:16:32Z,"params, cmd/utils: remove outdated discv5 bootnodes, deprecate flags (#20949)

* params: remove outdated discv5 bootnodes

* cmd/utils: deprecated bootnodesv4/v5 flags",TRUE,valid
37877e86ed44d4bada1df47dca4ee41428943749,Peter Szilagyi,peterke@gmail.com,2020-05-11T08:09:25Z,Peter Szilagyi,peterke@gmail.com,2020-05-11T08:09:25Z,"Merge pull request #21056 from karalabe/statedb-simpler-code

core/state: make GetCodeSize mirror GetCode implementation wise",TRUE,valid
263622f44f45eb3e8be6dde4ed030f7f5717066b,gary rong,garyrong0905@gmail.com,2020-05-11T08:08:20Z,gary rong,garyrong0905@gmail.com,2020-05-11T08:08:20Z,"accounts/abi/bind/backend, internal/ethapi: recap gas limit with balance (#21043)

* accounts/abi/bind/backend, internal/ethapi: recap gas limit with balance

* accounts, internal: address comment and fix lint

* accounts, internal: extend log message

* tiny nits to format hexutil.Big and nil properly

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
0b2edf05bbbab272794f2ea5c92acb5857984102,Peter Szilagyi,peterke@gmail.com,2020-05-11T07:14:49Z,Peter Szilagyi,peterke@gmail.com,2020-05-11T07:14:49Z,core/state: make GetCodeSize mirror GetCode implementation wise,TRUE,valid
e29e4c2376ae9718208178b226bd9ee86d2ffa4f,ligi,ligi@ligi.de,2020-05-11T07:05:37Z,ligi,ligi@ligi.de,2020-05-11T07:05:37Z,"build: fix CLI params for windows LNK files (#21055)

* build: Fix CLI params for windows LNK files

closes #21054

* Remove parameters",TRUE,valid
82f9ed49fa6a6831c997582821dd1c5ba4f14116,Martin Holst Swende,martin@swende.se,2020-05-08T18:52:20Z,Martin Holst Swende,martin@swende.se,2020-05-08T18:52:20Z,"core/state: avoid statedb.dbErr due to emptyCode (#21051)

* core/state: more verbose stateb errors

* core/state: fix flaw

* core/state: fixed lint

Co-authored-by: Marius van der Wijden <m.vanderwijden@live.de>",TRUE,valid
b0b65d017f7bfd454d6f3bcbbc4eb419e940bf5c,Martin Holst Swende,martin@swende.se,2020-05-07T13:13:34Z,Martin Holst Swende,martin@swende.se,2020-05-07T13:13:34Z,"core/state: abort commit if read errors have occurred (#21039)

This finally adds the error check that the documentation of StateDB.dbErr
promises to do. dbErr was added in 9e5f03b6c (June 2017), and the check was
already missing in that commit. We somehow survived without it for three years.",TRUE,valid
1152f458499b4d91b95a873d9d33c923397a2184,Martin Holst Swende,martin@swende.se,2020-05-07T13:06:31Z,Martin Holst Swende,martin@swende.se,2020-05-07T13:06:31Z,"core/state: include zero-address in state dump if present (#21038)

* Include 0x0000 address into the dump if it is present

* core/state: go fmt

Co-authored-by: Alexey Akhunov <akhounov@gmail.com>",TRUE,valid
dd88bd82c9453b01e5d8b659bf59e44396a1f572,Marius van der Wijden,m.vanderwijden@live.de,2020-05-07T07:24:10Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-07T07:24:10Z,"accounts/abi/bind: add void if no return args specified (#21002)

* accounts/abi/bind: add void if no return args specified

Currently the java generator generates invalid input on pure/view functions
that have no return type. e.g. `function f(uint u) view public {}`
This is not a problem in practice as people rarely ever write functions like this.

* accounts/abi/bind: use elseif instead of nested if",TRUE,valid
85944c25619da8cfb69dd78ec191b219ca720f3f,gary rong,garyrong0905@gmail.com,2020-05-07T07:07:59Z,gary rong,garyrong0905@gmail.com,2020-05-07T07:07:59Z,core/state/snapshot: fix typo (#21037),TRUE,valid
87c463c47aa6d10a55a4b860bab3d53199814d01,Peter Szilagyi,peterke@gmail.com,2020-05-06T15:11:15Z,Peter Szilagyi,peterke@gmail.com,2020-05-06T15:11:15Z,"Merge pull request #21036 from karalabe/snapshot-storage-leak

core/state/snapshot: don't create storage list for non-existing accounts",TRUE,valid
90af6dae6efc934e698bac11b09f773724e296bd,Peter Szilagyi,peterke@gmail.com,2020-05-06T14:22:38Z,Peter Szilagyi,peterke@gmail.com,2020-05-06T14:22:38Z,core/state/snapshot: don't create storage list for non-existing accounts,TRUE,valid
39c64d85a2af2c48c9b79447d2848c4f5f22446c,Boqin Qin,Bobbqqin@gmail.com,2020-05-06T13:47:59Z,Boqin Qin,Bobbqqin@gmail.com,2020-05-06T13:47:59Z,core: avoid double-lock in tx_pool_test (#20984),TRUE,valid
234cc8e77f912ec33c1774e007e3f3a5065da426,Guillaume Ballet,gballet@gmail.com,2020-05-06T13:35:04Z,Guillaume Ballet,gballet@gmail.com,2020-05-06T13:35:04Z,eth/downloader: minor typo fixes in comments (#21035),TRUE,valid
5cdc2dffda5af375bd5e26216c525159354022aa,gary rong,garyrong0905@gmail.com,2020-05-06T13:33:57Z,gary rong,garyrong0905@gmail.com,2020-05-06T13:33:57Z,trie: fix TestBadRangeProof unit test (#21034),TRUE,valid
c2147ee154b4d638c3b241fce0b1e185b72c0c2b,ploui,64719999+ploui@users.noreply.github.com,2020-05-06T10:01:01Z,ploui,64719999+ploui@users.noreply.github.com,2020-05-06T10:01:01Z,"eth: don't inadvertently enable snapshots in archive nodes (#21025)

* eth: don't reassign more cache than is being made available

* eth: don't inadvertently enable snapshot in a case where --snapshot wasn't given",TRUE,valid
b98259868b8362bb027636d8209fa7e583d9dff4,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:59:33Z,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:59:33Z,"Merge pull request #21032 from karalabe/skip-announce-goroutine-eth64

eth: skip transaction announcer goroutine on eth<65",TRUE,valid
292570ad6cea36ae89fd024cfd7d5319fc68170e,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:58:51Z,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:58:51Z,"Merge pull request #21028 from karalabe/memfix-32bit-arch

cmd/geth: handle memfixes on 32bit arch with large RAM",TRUE,valid
34ed2d834a7786e4ae3c24fbcea6cc236bc644f7,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:47:27Z,Peter Szilagyi,peterke@gmail.com,2020-05-06T09:47:27Z,eth: skip transaction announcer goroutine on eth<65,TRUE,valid
933acf3389d420a655b35a8dbf40536ebe058113,Marius van der Wijden,m.vanderwijden@live.de,2020-05-05T14:30:43Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-05T14:30:43Z,"account/abi: remove superfluous type checking (#21022)

* accounts/abi: added getType func to Type struct

* accounts/abi: fixed tuple unpack

* accounts/abi: removed type.Type

* accounts/abi: added comment

* accounts/abi: removed unused types

* accounts/abi: removed superfluous declarations

* accounts/abi: typo",TRUE,valid
44a3b8c04cf18dc0a796f96d5972beb0e3cbe79b,Peter Szilagyi,peterke@gmail.com,2020-05-05T12:11:40Z,Peter Szilagyi,peterke@gmail.com,2020-05-05T12:11:40Z,"Merge pull request #21026 from karalabe/disable-highmem-test

tests: skip consensus test using 1GB RAM",TRUE,valid
a52511e69295e3b81b0a6f5a391549764a234b55,Peter Szilagyi,peterke@gmail.com,2020-05-05T12:11:00Z,Peter Szilagyi,peterke@gmail.com,2020-05-05T12:11:00Z,build: raise test timeout back to 10 mins (#21027),TRUE,valid
8f8ff8d6010954fe5dbd2ce36330fbf1b8451e4f,Peter Szilagyi,peterke@gmail.com,2020-05-05T10:25:56Z,Peter Szilagyi,peterke@gmail.com,2020-05-05T10:25:56Z,cmd/geth: handle memfixes on 32bit arch with large RAM,TRUE,valid
4515772993db46e8e5e9480be579c75238c4f227,Peter Szilagyi,peterke@gmail.com,2020-05-05T09:27:09Z,Peter Szilagyi,peterke@gmail.com,2020-05-05T09:27:09Z,tests: skip consensus test using 1GB RAM,TRUE,valid
c989bca173681f4462985cec2d30616aa0774edd,rene,41963722+renaynay@users.noreply.github.com,2020-05-05T08:19:17Z,rene,41963722+renaynay@users.noreply.github.com,2020-05-05T08:19:17Z,"cmd/utils: renames flags related to http-rpc server (#20935)

* rpc flags related to starting http server renamed to http

* old rpc flags aliased and still functional

* pprof flags fixed

* renames gpo related flags

* linted

* renamed rpc flags for consistency and clarity

* added warn logs

* added more warn logs for all deprecated flags for consistency

* moves legacy flags to separate file, hides older flags under show-deprecated-flags command

* legacy prefix and moved some more legacy flags to legacy file

* fixed circular import

* added docs

* fixed imports lint error

* added notes about when flags were deprecated

* cmd/utils: group flags by deprecation date + reorder by date,

* modified deprecated comments for consistency, added warn log for --rpc

* making sure deprecated flags are still functional

* show-deprecated-flags command cleaned up

* fixed lint errors

* corrected merge conflict

* IsSet --> GlobalIsSet

* uncategorized flags, if not deprecated, displayed under misc

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
587656619d281fe76824a392008ff87d1a0bbe3f,Peter Szilagyi,peterke@gmail.com,2020-05-04T14:10:17Z,Peter Szilagyi,peterke@gmail.com,2020-05-04T14:10:17Z,"Merge pull request #21023 from karalabe/snapshot-verify-iterator-release

core/state/snapshot: release iterator after verification",TRUE,valid
da591470147689bb5978eaaff28468d19af61614,Peter Szilagyi,peterke@gmail.com,2020-05-04T12:14:08Z,Peter Szilagyi,peterke@gmail.com,2020-05-04T12:14:08Z,core/state/snapshot: release iterator after verification,TRUE,valid
5e45db76100b938756217f7d27d83cdae99d352d,Peter Szilagyi,peterke@gmail.com,2020-05-04T12:12:35Z,Peter Szilagyi,peterke@gmail.com,2020-05-04T12:12:35Z,"Merge pull request #21021 from karalabe/tests-snapshot-gen-cleanup

tests: cleanup snapshot generator goroutine leak",TRUE,valid
ab72803e6f171d6fc2c40419c833853b7c122f6f,Marius van der Wijden,m.vanderwijden@live.de,2020-05-04T12:09:14Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-04T12:09:14Z,accounts/abi: move U256Bytes to common/math (#21020),TRUE,valid
e872083d444eb571ea4ce55553a7d4dcb439474c,Marius van der Wijden,m.vanderwijden@live.de,2020-05-04T11:20:20Z,Marius van der Wijden,m.vanderwijden@live.de,2020-05-04T11:20:20Z,"accounts/abi: removed Kind from Type struct (#21009)

* accounts/abi: removed Kind from Type struct

* accounts/abi: removed unused code",TRUE,valid
65cd28aa0eca876b6a3e3b702889d3bde4386e9d,Peter Szilagyi,peterke@gmail.com,2020-05-04T08:54:24Z,Peter Szilagyi,peterke@gmail.com,2020-05-04T08:54:24Z,tests: cleanup snapshot generator goroutine leak,TRUE,valid
510b6f90db406b697610fe0ff2eee66d173673b2,Martin Holst Swende,martin@swende.se,2020-05-01T11:52:41Z,Martin Holst Swende,martin@swende.se,2020-05-01T11:52:41Z,"accounts/external: convert signature v value to 0/1 (#20997)

This fixes an issue with clef, which already transforms the signature
to use the legacy 27/28 encoding.

Fixes #20994",TRUE,valid
c43be6cf875a6557cb4c42cfd9f65b612e8b4cd7,Boqin Qin,Bobbqqin@gmail.com,2020-05-01T11:48:52Z,Boqin Qin,Bobbqqin@gmail.com,2020-05-01T11:48:52Z,les: remove invalid use of t.Fatal in TestHandshake (#21012),TRUE,valid
7e4d1925f06beca77dfda23c0c6a19a3ab7be8b4,Felix Lange,fjl@twurst.com,2020-05-01T10:51:04Z,Felix Lange,fjl@twurst.com,2020-05-01T10:51:04Z,go.sum: run go mod tidy (#21014),TRUE,valid
d2d3166f35b7cdaa63c54503bfccd4c808564f18,Martin Holst Swende,martin@swende.se,2020-04-30T16:57:06Z,Martin Holst Swende,martin@swende.se,2020-04-30T16:57:06Z,"accounts/external: fill account-cache if that hasn't already been done, fixes #20995 (#20998)",TRUE,valid
2337aa64eb6f8c60641724ccb5919d1a5d7d9f82,gary rong,garyrong0905@gmail.com,2020-04-30T07:43:50Z,gary rong,garyrong0905@gmail.com,2020-04-30T07:43:50Z,core/state/snapshot: fix trie generator reporter (#21004),TRUE,valid
3cebfb6664408b04f87dd0fe3d6fccdf7b7badd5,Peter Szilagyi,peterke@gmail.com,2020-04-30T07:26:25Z,Peter Szilagyi,peterke@gmail.com,2020-04-30T07:26:25Z,"Merge pull request #21003 from karalabe/snapshot-journal-nilfix

core/state/snapshot: fix journal nil deserialziation",TRUE,valid
4b6f6ffe2389cc2a62a10e9e8014101e3b0a595b,Peter Szilagyi,peterke@gmail.com,2020-04-29T15:00:29Z,Peter Szilagyi,peterke@gmail.com,2020-04-29T15:00:29Z,core/state/snapshot: fix journal nil deserialziation,TRUE,valid
26d271dfbba1367326dec38068f9df828d462c61,gary rong,garyrong0905@gmail.com,2020-04-29T09:53:08Z,gary rong,garyrong0905@gmail.com,2020-04-29T09:53:08Z,"core/state/snapshot: implement storage iterator (#20971)

* core/state/snapshot: implement storage iterator

* core/state/snapshot, tests: implement helper function

* core/state/snapshot: fix storage issue

If an account is deleted in the tx_1 but recreated in the tx_2,
the it can happen that in this diff layer, both destructedSet
and storageData records this account. In this case, the storage
iterator should be able to iterate the slots belong to new account
but disable further iteration in deeper layers(belong to old account)

* core/state/snapshot: address peter and martin's comment

* core/state: address comments

* core/state/snapshot: fix test",TRUE,valid
1264c19f1153d6379b4df37ae7a9d996b90dd732,ucwong,ucwong@126.com,2020-04-28T11:57:07Z,ucwong,ucwong@126.com,2020-04-28T11:57:07Z,go.mod : goupnp v1.0.0 upgrade (#20996),TRUE,valid
7f95a85fd474b93e9f6441fa7f582f9bd089aeb7,Martin Holst Swende,martin@swende.se,2020-04-28T11:28:38Z,Martin Holst Swende,martin@swende.se,2020-04-28T11:28:38Z,"signer, log: properly escape character sequences (#20987)

* signer: properly handle terminal escape characters

* log: use strconv conversion instead of custom escape function

* log: remove relection tests for nil",TRUE,valid
0708b573bc38c1d393d2452cb97807dccda70b5f,ucwong,ucwong@126.com,2020-04-28T08:53:08Z,ucwong,ucwong@126.com,2020-04-28T08:53:08Z,"event, whisper/whisperv6: use defer where possible (#20940)",TRUE,valid
9887edd580d161d22d284e8778b090016bd24f80,Steven E. Harris,seh@panix.com,2020-04-28T08:43:21Z,Steven E. Harris,seh@panix.com,2020-04-28T08:43:21Z,rpc: add explicit 200 response for empty HTTP GET (#20952),TRUE,valid
1893266c59c04eb55709b911578767f1ab8a9210,ucwong,ucwong@126.com,2020-04-28T08:22:23Z,ucwong,ucwong@126.com,2020-04-28T08:22:23Z,"go.mod: upgrade to golang-lru v0.5.4 (#20992)

golang-lru is now a go module, and the upgrade corrects a couple
of minor issues. In particular, the library could crash if you inserted
nil into an LRU cache.",TRUE,valid
92a7538ed3ffb23b372219ec2e7a36457217730e,Felix Lange,fjl@twurst.com,2020-04-28T08:06:49Z,Felix Lange,fjl@twurst.com,2020-04-28T08:06:49Z,"core: improve TestLogRebirth (#20961)

This is a resubmit of #20668 which rewrites the problematic test
without any additional goroutines. It also documents the test better.

The purpose of this test is checking whether log events are sent
correctly when importing blocks. The test was written at a time when
blockchain events were delivered asynchronously, making the check hard
to pull off. Now that core.BlockChain delivers events synchronously
during the call to InsertChain, the test can be simplified.

Co-authored-by: BurtonQin <bobbqqin@gmail.com>",TRUE,valid
5c3993444d725aba00c7c8c976c5cc9f4bf6a317,Julian Y,jyap808@users.noreply.github.com,2020-04-27T15:25:24Z,Julian Y,jyap808@users.noreply.github.com,2020-04-27T15:25:24Z,"rpc: make ExampleClientSubscription work with the geth API (#19483)

This corrects the call to eth_getBlockByNumber, which previously
returned this error:

  can't get latest block: missing value for required argument 1

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
ba068d40dd9a198ccc7ad9382c768f363aeb54cc,Boqin Qin,Bobbqqin@gmail.com,2020-04-27T13:16:30Z,Boqin Qin,Bobbqqin@gmail.com,2020-04-27T13:16:30Z,"core: add check in AddChildIndexer to avoid double lock (#20982)

This fixes a theoretical double lock condition which could occur in

    indexer.AddChildIndexer(indexer)

Nobody would ever do that though.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
e32ee6ac05af434d6af330682a00cafa1ba32a66,Marius van der Wijden,m.vanderwijden@live.de,2020-04-27T13:07:33Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-27T13:07:33Z,"accounts/abi: added abi test cases, minor bug fixes  (#20903)

* accounts/abi: added documentation

* accounts/abi: reduced usage of arguments.LengthNonIndexed

* accounts/abi: simplified reflection logic

* accounts/abi: moved testjson data into global declaration

* accounts/abi: removed duplicate test cases

* accounts/abi: reworked abi tests

* accounts/abi: added more tests for abi packing

* accounts/abi/bind: refactored base tests

* accounts/abi: run pack tests as subtests

* accounts/abi: removed duplicate tests

* accounts/abi: removed unnused arguments.LengthNonIndexed

Due to refactors to the code, we do not need the arguments.LengthNonIndexed function anymore.
You can still get the length by calling len(arguments.NonIndexed())

* accounts/abi: added type test

* accounts/abi: modified unpack test to pack test

* accounts/abi: length check on arrayTy

* accounts/abi: test invalid abi

* accounts/abi: fixed rebase error

* accounts/abi: fixed rebase errors

* accounts/abi: removed unused definition

* accounts/abi: merged packing/unpacking tests

* accounts/abi: fixed [][][32]bytes encoding

* accounts/abi: added tuple test cases

* accounts/abi: renamed getMockLog -> newMockLog

* accounts/abi: removed duplicate test

* accounts/abi: bools -> booleans",TRUE,valid
40283d0522e5bf2567e080b5eac9700597095704,Steven E. Harris,seh@panix.com,2020-04-27T09:16:00Z,Steven E. Harris,seh@panix.com,2020-04-27T09:16:00Z,"node: shut down all node-related HTTP servers gracefully (#20956)

Rather than just closing the underlying network listener to stop our
HTTP servers, use the graceful shutdown procedure, waiting for any
in-process requests to finish.",TRUE,valid
a070e23178e8ad2213893a758fe87a3213ec1bff,Peter Szilagyi,peterke@gmail.com,2020-04-27T09:02:13Z,Peter Szilagyi,peterke@gmail.com,2020-04-27T09:02:13Z,"Merge pull request #20988 from karalabe/catchup-shutdown

eth: fix shutdown regression to abort downloads, not just cancel",TRUE,valid
b0bbd4718511a8b2575e5feb8cbd54beb9675973,Peter Szilagyi,peterke@gmail.com,2020-04-27T08:22:15Z,Peter Szilagyi,peterke@gmail.com,2020-04-27T08:22:15Z,"eth: fix shutdown regression to abort downloads, not just cancel",TRUE,valid
1aa83290f5052ce275fc4f36b909a721afe6037a,tgyKomgo,52910426+tgyKomgo@users.noreply.github.com,2020-04-24T14:50:03Z,tgyKomgo,52910426+tgyKomgo@users.noreply.github.com,2020-04-24T14:50:03Z,"p2p/enode: update code comment (#20972)

It is possible to specify enode URLs using domain name since
commit b90cdbaa79cf, but the code comment still said that only
IP addresses are allowed.

Co-authored-by: admin@komgo.io <KomgoRocks2018!>",TRUE,valid
8a2e8faadd55a81090996afdd6b9e082bb32f72b,gary rong,garyrong0905@gmail.com,2020-04-24T11:43:49Z,gary rong,garyrong0905@gmail.com,2020-04-24T11:43:49Z,core/state/snapshot: fix binary iterator (#20970),TRUE,valid
44ff3f3dc98a5bd72e06ff6b05739c2dce8c9b62,gary rong,garyrong0905@gmail.com,2020-04-24T11:37:56Z,gary rong,garyrong0905@gmail.com,2020-04-24T11:37:56Z,"trie: initial implementation for range proof (#20908)

* trie: initial implementation for range proof

* trie: add benchmark

* trie: fix lint

* trie: fix minor issue

* trie: unset the edge valuenode as well

* trie: unset the edge valuenode as nilValuenode",TRUE,valid
38aab0aa831594f31d02c9f02bfacc0bef48405d,Marius van der Wijden,m.vanderwijden@live.de,2020-04-22T09:52:29Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-22T09:52:29Z,"accounts/keystore: fix double import race (#20915)

* accounts/keystore: fix race in Import/ImportECDSA

* accounts/keystore: added import/export tests

* cmd/geth: improved TestAccountImport test

* accounts/keystore: added import/export tests

* accounts/keystore: fixed naming

* accounts/keystore: fixed typo

* accounts/keystore: use mutex instead of rwmutex

* accounts: use errors instead of fmt",TRUE,valid
2ec72321910204048d3a05174d3cad6d877e647f,icodezjb,icodezjb@163.com,2020-04-22T08:27:47Z,icodezjb,icodezjb@163.com,2020-04-22T08:27:47Z,"core: mirror full node reorg logic in light client too (#20931)

* core: fix the condition of reorg

* core: fix nitpick to only retrieve head once

* core: don't reorg if received chain is longer at same diff

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
b9df7ecdc3d3685180ceb29665bab59e9f614da5,gary rong,garyrong0905@gmail.com,2020-04-22T08:25:36Z,gary rong,garyrong0905@gmail.com,2020-04-22T08:25:36Z,"all: seperate consensus error and evm internal error (#20830)

* all: seperate consensus error and evm internal error

There are actually two types of error will be returned when
a tranaction/message call is executed: (a) consensus error
(b) evm internal error. The former should be converted to
a consensus issue, e.g. The sender doesn't enough asset to
purchase the gas it specifies. The latter is allowed since
evm itself is a blackbox and internal error is allowed to happen.

This PR emphasizes the difference by introducing a executionResult
structure. The evm error is embedded inside. So if any error
returned, it indicates consensus issue happens.

And also this PR improve the `EstimateGas` API to return the concrete
revert reason if the transaction always fails

* all: polish

* accounts/abi/bind/backends: add tests

* accounts/abi/bind/backends, internal: cleanup error message

* all: address comments

* core: fix lint

* accounts, core, eth, internal: address comments

* accounts, internal: resolve revert reason if possible

* accounts, internal: address comments",TRUE,valid
c60c0c97e77ef28086c851fd2d8499e9e1574ac3,ucwong,ucwong@126.com,2020-04-22T07:31:32Z,ucwong,ucwong@126.com,2020-04-22T07:31:32Z,go.mod : update fastcache to 1.5.7 (#20936),TRUE,valid
870d4c4970d6b5b613a5860d405b5ad0d1f569a1,Peter Szilagyi,peterke@gmail.com,2020-04-22T06:50:01Z,Peter Szilagyi,peterke@gmail.com,2020-04-22T06:50:01Z,"Merge pull request #20953 from holiman/fixdlseek

core/state/snapshot: make difflayer account iterator seek operation inclusive",TRUE,valid
6c458f32f80db882df02a1766f5d4cdbd930bcb7,ucwong,ucwong@126.com,2020-04-21T14:42:18Z,ucwong,ucwong@126.com,2020-04-21T14:42:18Z,p2p: defer wait group done in protocol start (#20951),TRUE,valid
c036fe35a8513d8f8ea74c6cbe0190c60f088862,Martin Holst Swende,martin@swende.se,2020-04-21T14:26:02Z,Martin Holst Swende,martin@swende.se,2020-04-21T14:26:02Z,core/state/snapshot: make difflayer account iterator seek operation inclusive,TRUE,valid
7599999dcd966843a08a79529470d15e77139ce0,Boqin Qin,Bobbqqin@gmail.com,2020-04-21T08:11:38Z,Boqin Qin,Bobbqqin@gmail.com,2020-04-21T08:11:38Z,"snapshot: add Unlock before return (#20948)

* Forget Unlock in snapshot

* Remove Unlock before panic",TRUE,valid
79b68dd78d70ed8e6629849c3d9d71992f8e9aaa,Peter Szilagyi,peterke@gmail.com,2020-04-20T13:52:04Z,Peter Szilagyi,peterke@gmail.com,2020-04-20T13:52:04Z,"Merge pull request #20923 from holiman/fix_seckeybuf

trie: fix concurrent usage of secKeyBuf, ref #20920",TRUE,valid
648b0cb7144feec13391f8e587866e9d47a75548,rene,41963722+renaynay@users.noreply.github.com,2020-04-20T09:46:38Z,rene,41963722+renaynay@users.noreply.github.com,2020-04-20T09:46:38Z,"cmd, core: remove override muir glacier and override istanbul (#20942)",TRUE,valid
ac9c03f910a91db95db1ed7b20c50b49faefbaae,Marius van der Wijden,m.vanderwijden@live.de,2020-04-20T07:01:04Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-20T07:01:04Z,"accounts/abi: Prevent recalculation of internal fields (#20895)

* accounts/abi: prevent recalculation of ID, Sig and String

* accounts/abi: fixed unpacking of no values

* accounts/abi: multiple fixes to arguments

* accounts/abi: refactored methodName and eventName

This commit moves the complicated logic of how we assign method names
and event names if they already exist into their own functions for
better readability.

* accounts/abi: prevent recalculation of internal

In this commit, I changed the way we calculate the string
representations, sig representations and the id's of methods. Before
that these fields would be recalculated everytime someone called .Sig()
.String() or .ID() on a method or an event.

Additionally this commit fixes issue #20856 as we assign names to inputs
with no name (input with name """" becomes ""arg0"")

* accounts/abi: added unnamed event params test

* accounts/abi: fixed rebasing errors in method sig

* accounts/abi: fixed rebasing errors in method sig

* accounts/abi: addressed comments

* accounts/abi: added FunctionType enumeration

* accounts/abi/bind: added test for unnamed arguments

* accounts/abi: improved readability in NewMethod, nitpicks

* accounts/abi: method/eventName -> overloadedMethodName",TRUE,valid
ca22d0761bd772d38d229d59b3c72a2e7ca9592c,Boqin Qin,Bobbqqin@gmail.com,2020-04-17T12:51:38Z,Boqin Qin,Bobbqqin@gmail.com,2020-04-17T12:51:38Z,"event: fix inconsistency in Lock and Unlock (#20933)

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
7a63faf734d7150e764c0c08de7f83ceaf64e272,Nishant Das,nish1993@hotmail.com,2020-04-16T13:58:37Z,Nishant Das,nish1993@hotmail.com,2020-04-16T13:58:37Z,"p2p/discover: add helper methods to UDPv5 (#20918)

This adds two new methods to UDPv5, AllNodes and LocalNode.

AllNodes returns all the nodes stored in the local table; this is
useful for the purposes of metrics collection and also debugging any
potential issues with other discovery v5 implementations.

LocalNode returns the local node object. The reason for exposing this
is so that users can modify and set/delete new key-value entries in
the local record.",TRUE,valid
3bf1054a13f2ed2ba8c0c7c44279bbca6e4e7cbb,Peter Szilagyi,peterke@gmail.com,2020-04-16T07:41:32Z,Peter Szilagyi,peterke@gmail.com,2020-04-16T07:41:32Z,params: begin v1.9.14 release cycle,TRUE,valid
cbc4ac264e9671898bff6ec7e434da3eca4bd273,Peter Szilagyi,peterke@gmail.com,2020-04-16T07:39:22Z,Peter Szilagyi,peterke@gmail.com,2020-04-16T07:39:22Z,params: release Geth v1.9.13,TRUE,valid
359d9c3f0a51fb80214e5e0cb1142df469421b45,Peter Szilagyi,peterke@gmail.com,2020-04-15T15:25:54Z,Peter Szilagyi,peterke@gmail.com,2020-04-15T15:25:54Z,"Merge pull request #20925 from karalabe/cht-1.9.13

params: update CHTs for the 1.9.13 release",TRUE,valid
d77d35a4a943bac035d7b380d29483ddc1259e8a,Peter Szilagyi,peterke@gmail.com,2020-04-15T15:03:10Z,Peter Szilagyi,peterke@gmail.com,2020-04-15T15:03:10Z,params: update CHTs for the 1.9.13 release,TRUE,valid
6402c42b6748c0e8494e6432f40fe4527650076b,Martin Holst Swende,martin@swende.se,2020-04-15T11:08:53Z,Martin Holst Swende,martin@swende.se,2020-04-15T11:08:53Z,"all: simplify and fix database iteration with prefix/start (#20808)

* core/state/snapshot: start fixing disk iterator seek

* ethdb, rawdb, leveldb, memorydb: implement iterators with prefix and start

* les, core/state/snapshot: iterator fixes

* all: remove two iterator methods

* all: rename Iteratee.NewIteratorWith -> NewIterator

* ethdb: fix review concerns",TRUE,valid
af4080b4b7fe653568714b0012fc702ecec917f4,Martin Holst Swende,martin@swende.se,2020-04-15T09:07:29Z,Martin Holst Swende,martin@swende.se,2020-04-15T09:07:29Z,"trie: fix concurrent usage of secKeyBuf, ref #20920",TRUE,valid
00064ddcfb76c194997c261ca85486b2c8fd8784,gary rong,garyrong0905@gmail.com,2020-04-15T07:23:58Z,gary rong,garyrong0905@gmail.com,2020-04-15T07:23:58Z,"accounts/abi: implement new fallback functions (#20764)

* accounts/abi: implement new fackball functions

In Solidity v0.6.0, the original fallback is separated
into two different sub types: fallback and receive.

This PR addes the support for parsing new format abi
and the relevant abigen functionalities.

* accounts/abi: fix unit tests

* accounts/abi: minor fixes

* accounts/abi, mobile: support jave binding

* accounts/abi: address marius's comment

* accounts/abi: Work around the uin64 conversion issue

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
2a836bb259c03626e5ef8435f99f341ea911bfff,Marius van der Wijden,m.vanderwijden@live.de,2020-04-14T15:13:47Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-14T15:13:47Z,"core/rawdb: fix data race between Retrieve and Close (#20919)

* core/rawdb: fixed data race between retrieve and close

closes https://github.com/ethereum/go-ethereum/issues/20420

* core/rawdb: use non-atomic load while holding mutex",TRUE,valid
eb2fd823b2fd8d6745cceb25de19fde0acd53d23,Peter Szilagyi,peterke@gmail.com,2020-04-14T11:03:18Z,Peter Szilagyi,peterke@gmail.com,2020-04-14T11:03:18Z,"travis, appveyor, build, Dockerfile: bump Go to 1.14.2 (#20913)

* travis, appveyor, build, Dockerfile: bump Go to 1.14.2

* travis, appveyor: force GO111MODULE=on for every build",TRUE,valid
5a20cc0de6f58f09e68c13154702b278b7aeeedf,ligi,ligi@ligi.de,2020-04-14T08:08:27Z,ligi,ligi@ligi.de,2020-04-14T08:08:27Z,README: update min go version to 1.13 (#20911),TRUE,valid
0851646e480f3fff0d6cdd900fc1034960b993f0,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-04-09T09:55:32Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2020-04-09T09:55:32Z,"les, les/lespay/client: add service value statistics and API (#20837)

This PR adds service value measurement statistics to the light client. It
also adds a private API that makes these statistics accessible. A follow-up
PR will add the new server pool which uses these statistics to select
servers with good performance.

This document describes the function of the new components:
https://gist.github.com/zsfelfoldi/3c7ace895234b7b345ab4f71dab102d4

Co-authored-by: rjl493456442 <garyrong0905@gmail.com>
Co-authored-by: rjl493456442 <garyrong0905@gmail.com>",TRUE,valid
15540ae9928441a38f8af47d8227347e6bada5ae,Raw Pong Ghmoa,58883403+q9f@users.noreply.github.com,2020-04-09T09:09:58Z,Raw Pong Ghmoa,58883403+q9f@users.noreply.github.com,2020-04-09T09:09:58Z,"cmd: deprecate --testnet, use named networks instead (#20852)

* cmd/utils: make goerli the default testnet

* cmd/geth: explicitly rename testnet to ropsten

* core: explicitly rename testnet to ropsten

* params: explicitly rename testnet to ropsten

* cmd: explicitly rename testnet to ropsten

* miner: explicitly rename testnet to ropsten

* mobile: allow for returning the goerli spec

* tests: explicitly rename testnet to ropsten

* docs: update readme to reflect changes to the default testnet

* mobile: allow for configuring goerli and rinkeby nodes

* cmd/geth: revert --testnet back to ropsten and mark as legacy

* cmd/util: mark --testnet flag as deprecated

* docs: update readme to properly reflect the 3 testnets

* cmd/utils: add an explicit deprecation warning on startup

* cmd/utils: swap goerli and ropsten in usage

* cmd/geth: swap goerli and ropsten in usage

* cmd/geth: if running a known preset, log it for convenience

* docs: improve readme on usage of ropsten's testnet datadir

* cmd/utils: check if legacy `testnet` datadir exists for ropsten

* cmd/geth: check for legacy testnet path in console command

* cmd/geth: use switch statement for complex conditions in main

* cmd/geth: move known preset log statement to the very top

* cmd/utils: create new ropsten configurations in the ropsten datadir

* cmd/utils: makedatadir should check for existing testnet dir

* cmd/geth: add legacy testnet flag to the copy db command

* cmd/geth: add legacy testnet flag to the inspect command",TRUE,valid
023b87b9d18b9fbcc659af37d64870c0ba216cdd,Marius van der Wijden,m.vanderwijden@live.de,2020-04-09T08:54:57Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-09T08:54:57Z,"accounts/abi/bind: fixed erroneous filtering of negative ints (#20865)

* accounts/abi/bind: fixed erroneous packing of negative ints

* accounts/abi/bind: added test cases for negative ints in topics

* accounts/abi/bind: fixed genIntType for go 1.12

* accounts/abi: minor  nitpick",TRUE,valid
1bad8612229ef40998b263ff36b6ecee9a7859e5,rene,41963722+renaynay@users.noreply.github.com,2020-04-08T14:58:27Z,rene,41963722+renaynay@users.noreply.github.com,2020-04-08T14:58:27Z,changed date of rpcstack.go since new file (#20904),TRUE,valid
fe9ffa5953a28d570478ac61238218a195fe0ccb,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-04-08T14:01:11Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-04-08T14:01:11Z,"crypto: improve error messages in LoadECDSA (#20718)

This improves error messages when the file is too short or too long.
Also rewrite the test for SaveECDSA because LoadECDSA has its own
test now.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
07d909ff3283fb50a1312a1919787768e54a1c81,rene,41963722+renaynay@users.noreply.github.com,2020-04-08T11:33:12Z,rene,41963722+renaynay@users.noreply.github.com,2020-04-08T11:33:12Z,"node: allow websocket and HTTP on the same port (#20810)

This change makes it possible to run geth with JSON-RPC over HTTP and
WebSocket on the same TCP port. The default port for WebSocket
is still 8546. 

    geth --rpc --rpcport 8545 --ws --wsport 8545

This also removes a lot of deprecated API surface from package rpc.
The rpc package is now purely about serving JSON-RPC and no longer
provides a way to start an HTTP server.",TRUE,valid
5065cdefffbd401e97dd89075081485c4fa4b774,Marius van der Wijden,m.vanderwijden@live.de,2020-04-08T10:00:10Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-08T10:00:10Z,"accounts/abi/bind: Refactored topics  (#20851)

* accounts/abi/bind: refactored topics

* accounts/abi/bind: use store function to remove code duplication

* accounts/abi/bind: removed unused type defs

* accounts/abi/bind: error on tuples in topics

* Cosmetic changes to restart travis build

Co-authored-by: Guillaume Ballet <gballet@gmail.com>",TRUE,valid
6975172d01292e29c9404eb3322c4629802fe02c,ucwong,ucwong@126.com,2020-04-08T09:26:16Z,ucwong,ucwong@126.com,2020-04-08T09:26:16Z,"whisper/mailserver : recover corrupt db files before opening (#20891)

* whisper/mailserver : recover db file when openfile corrupted

* whisper/mailserver : fix db -> s.db

* whisper/mailserver : common/errors for dbfile",TRUE,valid
c8e9a91672ce27d3c82a579a14d840bd6a04049f,Felix Lange,fjl@twurst.com,2020-04-08T08:07:29Z,Felix Lange,fjl@twurst.com,2020-04-08T08:07:29Z,"build: upgrade to golangci-lint 1.24.0 (#20901)

* accounts/scwallet: remove unnecessary uses of fmt.Sprintf

* cmd/puppeth: remove unnecessary uses of fmt.Sprintf

* p2p/discv5: remove unnecessary use of fmt.Sprintf

* whisper/mailserver: remove unnecessary uses of fmt.Sprintf

* core: goimports -w tx_pool_test.go

* eth/downloader: goimports -w downloader_test.go

* build: upgrade to golangci-lint 1.24.0",TRUE,valid
b7394d79428d395a6fca0567659cdcd4d808bee2,Felix Lange,fjl@twurst.com,2020-04-08T07:57:23Z,Felix Lange,fjl@twurst.com,2020-04-08T07:57:23Z,"p2p/discover: add initial discovery v5 implementation (#20750)

This adds an implementation of the current discovery v5 spec.

There is full integration with cmd/devp2p and enode.Iterator in this
version. In theory we could enable the new protocol as a replacement of
discovery v4 at any time. In practice, there will likely be a few more
changes to the spec and implementation before this can happen.",TRUE,valid
671f22be3888aa9d056e0798508c42420638cb1f,rene,41963722+renaynay@users.noreply.github.com,2020-04-07T12:37:24Z,rene,41963722+renaynay@users.noreply.github.com,2020-04-07T12:37:24Z,couple of fixes to docs in clef (#20900),TRUE,valid
6a3daa2a4ecf814578fd8f3fca5850a8f0252ac8,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-04-07T10:16:35Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-04-07T10:16:35Z,.github: change gitter reference to discord link in issue template (#20896),TRUE,valid
094996b8c96047564c541e4ffe50bd9b6a470e96,Martin Holst Swende,martin@swende.se,2020-04-07T10:15:28Z,Martin Holst Swende,martin@swende.se,2020-04-07T10:15:28Z,docs/audits: add discv5 protocol audits from LA and C53 (#20898),TRUE,valid
8dc89415511ec0d5f8b0128e9ef9fb624ddb5d56,Martin Holst Swende,martin@swende.se,2020-04-07T09:45:21Z,Martin Holst Swende,martin@swende.se,2020-04-07T09:45:21Z,"core/vm: use a callcontext struct (#20761)

* core/vm: use a callcontext struct

* core/vm: fix tests

* core/vm/runtime: benchmark

* core/vm: make intpool push inlineable, unexpose callcontext",TRUE,valid
0bec6a43f68ec5eb608303c346985d38c7c7e1fb,Martin Holst Swende,martin@swende.se,2020-04-07T08:23:57Z,Martin Holst Swende,martin@swende.se,2020-04-07T08:23:57Z,"cmd/geth: enable metrics for geth import command (#20738)

* cmd/geth: enable metrics for geth import command

* cmd/geth: enable metrics-flags for import command",TRUE,valid
f0b5eb09eb30545b11ad5c0179517fc2159ad02d,gary rong,garyrong0905@gmail.com,2020-04-07T06:16:21Z,gary rong,garyrong0905@gmail.com,2020-04-07T06:16:21Z,"eth, les: fix flaky tests (#20897)

* les: fix flaky test

* eth: fix flaky test",TRUE,valid
3cf7d2e9a6605bef8140b01483d65da874e11a8a,William Morriss,wjmelements@gmail.com,2020-04-03T18:10:53Z,William Morriss,wjmelements@gmail.com,2020-04-03T18:10:53Z,"internal/ethapi: add CallArgs.ToMessage method (#20854)

ToMessage is used to convert between ethapi.CallArgs and types.Message.
It reduces the length of the DoCall method by about half by abstracting out
the conversion between the CallArgs and the Message. This should improve the
code's maintainability and reusability.",TRUE,valid
be6078ad831dea01121510dfc9ab1f264a3a189c,Boqin Qin,Bobbqqin@gmail.com,2020-04-03T18:07:22Z,Boqin Qin,Bobbqqin@gmail.com,2020-04-03T18:07:22Z,"all: fix a bunch of inconsequential goroutine leaks (#20667)

The leaks were mostly in unit tests, and could all be resolved by
adding suitably-sized channel buffers or by restructuring the test
to not send on a channel after an error has occurred.

There is an unavoidable goroutine leak in Console.Interactive: when
we receive a signal, the line reader cannot be unblocked and will get
stuck. This leak is now documented and I've tried to make it slightly 
less bad by adding a one-element buffer to the output channels of
the line-reading loop. Should the reader eventually awake from its
blocked state (i.e. when stdin is closed), at least it won't get stuck
trying to send to the interpreter loop which has quit long ago.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
98eab2dbe7f2c0b4d6ae73ec61d1e5b2e600e0db,Marius van der Wijden,m.vanderwijden@live.de,2020-04-03T12:11:04Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-03T12:11:04Z,"mobile: use bind.NewKeyedTransactor instead of duplicating (#20888)

It's better to reuse the existing code to create a keyed transactor
than to rewrite the logic again.",TRUE,valid
be9172a7ac5cf8a6919a36213531c51ecb5cc6ef,gary rong,garyrong0905@gmail.com,2020-04-03T10:36:44Z,gary rong,garyrong0905@gmail.com,2020-04-03T10:36:44Z,"rpc: metrics for JSON-RPC method calls (#20847)

This adds a couple of metrics for tracking the timing
and frequency of method calls:

- rpc/requests gauge counts all requests
- rpc/success gauge counts requests which return err == nil
- rpc/failure gauge counts requests which return err != nil
- rpc/duration/all timer tracks timing of all requests
- rpc/duration/<method>/<success/failure> tracks per-method timing",TRUE,valid
462ddce5b2a47835d057e3950ee5feb9d6c7bc10,Luke Champine,luke.champine@gmail.com,2020-04-03T09:57:24Z,Luke Champine,luke.champine@gmail.com,2020-04-03T09:57:24Z,"crypto/ecies: improve concatKDF (#20836)

This removes a bunch of weird code around the counter overflow check in
concatKDF and makes it actually work for different hash output sizes.

The overflow check worked as follows: concatKDF applies the hash function N
times, where N is roundup(kdLen, hashsize) / hashsize. N should not
overflow 32 bits because that would lead to a repetition in the KDF output.

A couple issues with the overflow check:

- It used the hash.BlockSize, which is wrong because the
  block size is about the input of the hash function. Luckily, all standard
  hash functions have a block size that's greater than the output size, so
  concatKDF didn't crash, it just generated too much key material.
- The check used big.Int to compare against 2^32-1.
- The calculation could still overflow before reaching the check.

The new code in concatKDF doesn't check for overflow. Instead, there is a
new check on ECIESParams which ensures that params.KeyLen is < 512. This
removes any possibility of overflow.

There are a couple of miscellaneous improvements bundled in with this
change:

- The key buffer is pre-allocated instead of appending the hash output
  to an initially empty slice.
- The code that uses concatKDF to derive keys is now shared between Encrypt
  and Decrypt.
- There was a redundant invocation of IsOnCurve in Decrypt. This is now removed
  because elliptic.Unmarshal already checks whether the input is a valid curve
  point since Go 1.5.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
f7b29ec942d91aee420d89d976ed94257398764e,ucwong,ucwong@126.com,2020-04-02T20:08:45Z,ucwong,ucwong@126.com,2020-04-02T20:08:45Z,rpc: add missing timer.Stop calls in websocket tests (#20863),TRUE,valid
f98cabad7cea07a96f80c7b68efc10ff08d483f4,ucwong,ucwong@126.com,2020-04-02T14:04:45Z,ucwong,ucwong@126.com,2020-04-02T14:04:45Z,core: add missing Timer.Stop call in TestLogReorgs (#20870),TRUE,valid
0c359e4b9a3f3418245ed8ef131e2ea4e4bab792,ucwong,ucwong@126.com,2020-04-02T14:03:40Z,ucwong,ucwong@126.com,2020-04-02T14:03:40Z," p2p/discv5, p2p/testing: add missing Timer.Stop calls in tests (#20869)",TRUE,valid
37d6357806f49071cad5ab2043545b05eebdb7ee,ucwong,ucwong@126.com,2020-04-02T14:02:10Z,ucwong,ucwong@126.com,2020-04-02T14:02:10Z,ethstats: add missing Ticker.Stop call (#20867),TRUE,valid
53e034ce0be31155bf0b982ac02fbffc0924fc79,ucwong,ucwong@126.com,2020-04-02T14:01:18Z,ucwong,ucwong@126.com,2020-04-02T14:01:18Z,metrics: add missing calls to Ticker.Stop in tests (#20866),TRUE,valid
0893ee6d519cb5cffb56c480020051d25728a734,ucwong,ucwong@126.com,2020-04-02T13:56:25Z,ucwong,ucwong@126.com,2020-04-02T13:56:25Z,event: add missing timer.Stop call in TestFeed (#20868),TRUE,valid
4d891f23b5a03ab8a8f64dd1683018942a5c7b0a,ucwong,ucwong@126.com,2020-04-02T13:54:59Z,ucwong,ucwong@126.com,2020-04-02T13:54:59Z,les: add missing Ticker.Stop call (#20864),TRUE,valid
66ed58bfcc2658e2ef60521c04701fb8e0455bcb,ucwong,ucwong@126.com,2020-04-02T10:32:45Z,ucwong,ucwong@126.com,2020-04-02T10:32:45Z,eth/fetcher: add missing timer.Stop calls (#20861),TRUE,valid
47f7c736cb4872be272f978b9bfade33bff3f0f1,ucwong,ucwong@126.com,2020-04-02T10:31:50Z,ucwong,ucwong@126.com,2020-04-02T10:31:50Z,eth/filters: add missing Ticker.Stop call (#20862),TRUE,valid
228a2970566261df7f86764ca94cb6a670500064,Martin Holst Swende,martin@swende.se,2020-04-02T10:27:44Z,Martin Holst Swende,martin@swende.se,2020-04-02T10:27:44Z,cmd/geth: fix bad genesis test (#20860),TRUE,valid
ad4b60efdd5f1827872f110a6c8e39e60e45fb4f,ucwong,ucwong@126.com,2020-04-02T08:40:38Z,ucwong,ucwong@126.com,2020-04-02T08:40:38Z,miner/worker: add missing timer.Stop call (#20857),TRUE,valid
c87cdd30532f5512c8335fd13204f57e11263427,ucwong,ucwong@126.com,2020-04-02T08:11:16Z,ucwong,ucwong@126.com,2020-04-02T08:11:16Z,p2p/discv5: add missing Timer.Stop calls (#20853),TRUE,valid
f15849cf00ddc21137886e582cc064e80ee8c47e,Marius van der Wijden,m.vanderwijden@live.de,2020-04-01T16:46:53Z,Marius van der Wijden,m.vanderwijden@live.de,2020-04-01T16:46:53Z,accounts/abi faster unpacking of int256 (#20850),TRUE,valid
bf35e27ea76ea50515e3f345a9ac05ec558ffabf,ucwong,ucwong@126.com,2020-04-01T16:00:33Z,ucwong,ucwong@126.com,2020-04-01T16:00:33Z,p2p/server: add UDP port mapping goroutine to wait group (#20846),TRUE,valid
1e2e1b41f8cf0c51f53dd064a4caa75faee14065,ucwong,ucwong@126.com,2020-04-01T14:12:01Z,ucwong,ucwong@126.com,2020-04-01T14:12:01Z,"cmd/devp2p, cmd/wnode, whisper: add missing calls to Timer.Stop (#20843)",TRUE,valid
d56dc038d2a89c8b11d5ca5630c32114ccaef836,Pawe? Bylica,chfast@gmail.com,2020-04-01T10:40:07Z,Pawe? Bylica,chfast@gmail.com,2020-04-01T10:40:07Z,"cmd/evm: Rework execution stats (#20792)

- Dump stats also for --bench flag.
- From memory stats only show number and size of allocations. This is what `test -bench` shows. I doubt others like number of GC runs are any useful, but can be added if requested.
- Now the mem stats are for single execution in case of --bench.",TRUE,valid
a5a9feab21cf5af36f2790bc4c5d928e4c7b7608,ucwong,ucwong@126.com,2020-04-01T09:35:26Z,ucwong,ucwong@126.com,2020-04-01T09:35:26Z,whisper: fix whisper go routine leak with sync wait group (#20844),TRUE,valid
f0be151349cb1440d119d3c033936e22bcb0724a,Jeff Wentworth,jeff@curvegrid.com,2020-03-31T16:14:42Z,Jeff Wentworth,jeff@curvegrid.com,2020-03-31T16:14:42Z,"README: update private network genesis spec with istanbul (#20841)

* add istanbul and muirGlacier to genesis states in README

* remove muirGlacier, relocate istanbul",TRUE,valid
f78ffc0545f577af9c8f94c5f940a1d5a6ea90bf,gary rong,garyrong0905@gmail.com,2020-03-31T15:17:24Z,gary rong,garyrong0905@gmail.com,2020-03-31T15:17:24Z,"les: create utilities as common package (#20509)

* les: move execqueue into utilities package

execqueue is a util for executing queued functions
in a serial order which is used by both les server
and les client. Move it to common package.

* les: move randselect to utilities package

weighted_random_selector is a helpful tool for randomly select
items maintained in a set but based on the item weight.

It's used anywhere is LES package, mainly by les client but will
be used in les server with very high chance. So move it into a
common package as the second step for les separation.

* les: rename to utils",TRUE,valid
32d31c31afdd17a8ce71985c1a760caf0d2916e5,Martin Holst Swende,martin@swende.se,2020-03-31T13:01:16Z,Martin Holst Swende,martin@swende.se,2020-03-31T13:01:16Z,"metrics: improve TestTimerFunc (#20818)

The test failed due to what appears to be fluctuations in time.Sleep, which is
not the actual method under test. This change modifies it so we compare the
metered Max to the actual time instead of the desired time.",TRUE,valid
3b69c14f5d48d583f240cdbdc38818a47ec6761d,Martin Holst Swende,martin@swende.se,2020-03-31T10:10:34Z,Martin Holst Swende,martin@swende.se,2020-03-31T10:10:34Z,whisper/whisperv6: decrease pow requirement in tests (#20815),TRUE,valid
300c35b8542a2d9586aab91b152d3970346018e1,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-03-31T10:09:45Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-03-31T10:09:45Z,travis: allow cocoapods deploy to fail (#20833),TRUE,valid
03fe9de2cb87716dbabfecfb7e9bf1083d901e38,Wenbiao Zheng,delweng@gmail.com,2020-03-31T10:08:44Z,Wenbiao Zheng,delweng@gmail.com,2020-03-31T10:08:44Z,"eth: add debug_accountRange API (#19645)

This new API allows reading accounts and their content by address range.

Co-authored-by: Martin Holst Swende <martin@swende.se>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
c56f4fa808c218e7e69837596d31aa9e444666a8,Martin Holst Swende,martin@swende.se,2020-03-31T10:03:48Z,Martin Holst Swende,martin@swende.se,2020-03-31T10:03:48Z,"cmd/clef: add newaccount command (#20782)

* cmd/clef: add newaccount command

* cmd/clef: document clef_New, update API versioning

* Update cmd/clef/intapi_changelog.md

Co-Authored-By: ligi <ligi@ligi.de>

* Update signer/core/uiapi.go

Co-Authored-By: ligi <ligi@ligi.de>

Co-authored-by: ligi <ligi@ligi.de>",TRUE,valid
8f05cfa1227c3d013ec86ec24c336731768ef22b,Hanjiang Yu,42531996+de1acr0ix@users.noreply.github.com,2020-03-31T08:44:04Z,Hanjiang Yu,42531996+de1acr0ix@users.noreply.github.com,2020-03-31T08:44:04Z,"cmd, consensus: add option to disable mmap for DAG caches/datasets (#20484)

* cmd, consensus: add option to disable mmap for DAG caches/datasets

* consensus: add benchmarks for mmap with/with lock",TRUE,valid
76eed9e50d65e014acf0828588ed8f6ce1777f8d,Martin Holst Swende,martin@swende.se,2020-03-31T08:25:41Z,Martin Holst Swende,martin@swende.se,2020-03-31T08:25:41Z,"snapshotter/tests: verify snapdb post-state against trie (#20812)

* core/state/snapshot: basic trie-to-hash implementation

* tests: validate snapshot after test

* core/state/snapshot: fix review concerns",TRUE,valid
84f497552092e2d061c8636b58737bc462ba4a3d,Peter Szilagyi,peterke@gmail.com,2020-03-30T09:14:53Z,Peter Szilagyi,peterke@gmail.com,2020-03-30T09:14:53Z,"Merge pull request #20835 from holiman/bump

core: bump txpool tx max size to 128KB",TRUE,valid
55a73f556a67f496fbc78943929d91ce9832761e,Martin Holst Swende,martin@swende.se,2020-03-30T08:46:05Z,Martin Holst Swende,martin@swende.se,2020-03-30T08:46:05Z,core: bump txpool tx max size to 128KB,TRUE,valid
5d7e5b00be3eb04a334366d78b6ab742772c8e0a,Ha ?ANG,dvietha@gmail.com,2020-03-27T15:33:14Z,Ha ?ANG,dvietha@gmail.com,2020-03-27T15:33:14Z,eth/filters: fix typo on unindexedLogs function's comment (#20827),TRUE,valid
62cd943c7bfefd810ed8175703f79224f8a2f77b,gary rong,garyrong0905@gmail.com,2020-03-27T15:21:58Z,gary rong,garyrong0905@gmail.com,2020-03-27T15:21:58Z,les: fix dead lock (#20828),TRUE,valid
d6c5f2417c03e802f312d86fc40f33b53803c3eb,Felix Lange,fjl@twurst.com,2020-03-27T13:03:20Z,Felix Lange,fjl@twurst.com,2020-03-27T13:03:20Z,"eth: improve shutdown synchronization (#20695)

* eth: improve shutdown synchronization

Most goroutines started by eth.Ethereum didn't have any shutdown sync at
all, which lead to weird error messages when quitting the client.

This change improves the clean shutdown path by stopping all internal
components in dependency order and waiting for them to actually be
stopped before shutdown is considered done. In particular, we now stop
everything related to peers before stopping 'resident' parts such as
core.BlockChain.

* eth: rewrite sync controller

* eth: remove sync start debug message

* eth: notify chainSyncer about new peers after handshake

* eth: move downloader.Cancel call into chainSyncer

* eth: make post-sync block broadcast synchronous

* eth: add comments

* core: change blockchain stop message

* eth: change closeBloomHandler channel type",TRUE,valid
d7851e635936dc71f649b8836d0afa2e8764edd6,rene,41963722+renaynay@users.noreply.github.com,2020-03-27T12:52:53Z,rene,41963722+renaynay@users.noreply.github.com,2020-03-27T12:52:53Z,"graphql, node, rpc: fix typos in comments (#20824)",TRUE,valid
d3c1e654f06a38cb1d78cab0503d872e4ca56bec,Felix Lange,fjl@twurst.com,2020-03-26T22:55:33Z,Felix Lange,fjl@twurst.com,2020-03-26T22:55:33Z,"cmd/devp2p: be very correct about route53 change splitting (#20820)

Turns out the way RDATA limits work is documented after all,
I just didn't search right. The trick to make it work is to
count UPSERTs twice.

This also adds an additional check to ensure TTL changes are
applied on existing records.",TRUE,valid
87a411b839dc770460cd152cf2e7e6d40729709a,Felix Lange,fjl@twurst.com,2020-03-26T15:39:56Z,Felix Lange,fjl@twurst.com,2020-03-26T15:39:56Z,cmd/devp2p: lower route53 change limit again (#20819),TRUE,valid
1583e7d2744af796aa85159217e80ca146097302,Felix Lange,fjl@twurst.com,2020-03-26T11:51:50Z,Felix Lange,fjl@twurst.com,2020-03-26T11:51:50Z,"cmd/devp2p: tweak DNS TTLs (#20801)

* cmd/devp2p: tweak DNS TTLs

* cmd/devp2p: bump treeNodeTTL to four weeks",TRUE,valid
4690912ac9742568df6c0cf75cf96ffc0838a9d3,Peter Szilagyi,peterke@gmail.com,2020-03-26T11:15:43Z,Peter Szilagyi,peterke@gmail.com,2020-03-26T11:15:43Z,"Merge pull request #20816 from karalabe/disable-gosigar-ios

metrics: disable CPU stats (gosigar) on iOS",TRUE,valid
42e02ac03bfc4e01496d15314e94f46260d98f86,Peter Szilagyi,peterke@gmail.com,2020-03-26T09:24:01Z,Peter Szilagyi,peterke@gmail.com,2020-03-26T09:24:01Z,metrics: disable CPU stats (gosigar) on iOS,TRUE,valid
39f502329fac4640cfb71959c3496f19ea88bc85,Martin Holst Swende,martin@swende.se,2020-03-23T17:21:23Z,Martin Holst Swende,martin@swende.se,2020-03-23T17:21:23Z,"internal/ethapi: don't set sender-balance to maxuint, fixes #16999 (#20783)

Prior to this change, eth_call changed the balance of the sender account in the
EVM environment to 2^256 wei to cover the gas cost of the call execution.
We've had this behavior for a long time even though it's super confusing.

This commit sets the default call gasprice to zero instead of updating the balance,
which is better because it makes eth_call semantics less surprising. Removing
the built-in balance assignment also makes balance overrides work as expected.",TRUE,valid
0734c4b82050fd8114bb18514191cb5c7ccf5259,Martin Holst Swende,martin@swende.se,2020-03-23T15:26:56Z,Martin Holst Swende,martin@swende.se,2020-03-23T15:26:56Z,"node, cmd/clef: report actual port used for http rpc (#20789)",TRUE,valid
a75c0610b7aad63de01cefeeaf3426b332e718eb,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-23T14:05:15Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-23T14:05:15Z,"core/blockchain: simplify atomic store after writeBlockWithState (#20798)

Signed-off-by: meows <b5c6@protonmail.com>",TRUE,valid
613af7ceea0f94b92f0e63e8db3a5f5926421087,Peter Szilagyi,peterke@gmail.com,2020-03-23T10:57:31Z,Peter Szilagyi,peterke@gmail.com,2020-03-23T10:57:31Z,"Merge pull request #20152 from karalabe/snapshot-5

Dynamic state snapshots",TRUE,valid
074efe6c8dfe879adb26f60a8a9554fdf9da1907,Martin Holst Swende,martin@swende.se,2020-03-06T12:05:44Z,Martin Holst Swende,martin@swende.se,2020-03-06T12:05:44Z,"core: fix two snapshot iterator flaws, decollide snap storage prefix

* core/state/snapshot/iterator: fix two disk iterator flaws

* core/rawdb: change SnapshotStoragePrefix to avoid prefix collision with preimagePrefix",TRUE,valid
93ffb85b3d3874d08beb2127e70a278444eaec93,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-21T14:28:27Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-21T14:28:27Z,"rpc: dont log an error if user configures --rpcapi=rpc... (#20776)

This just prevents a false negative ERROR warning when, for some unknown
reason, a user attempts to turn on the module rpc even though it's already going
to be on.",TRUE,valid
e943f07a858b2eb3a47fbee32cd2d5b6c19ed0da,Guillaume Ballet,gballet@gmail.com,2020-03-20T08:37:53Z,Guillaume Ballet,gballet@gmail.com,2020-03-20T08:37:53Z,"whisper/whisperv6: delete failing tests (#20788)

These tests occasionally fail on Travis.",TRUE,valid
0e6ea9199ca701ee4c96220e873884327c8d18ff,Peter Szilagyi,peterke@gmail.com,2020-03-19T08:06:44Z,Peter Szilagyi,peterke@gmail.com,2020-03-19T08:06:44Z,"Merge pull request #20781 from karalabe/fix-clique-console-apis

internal/web3ext: fix clique console apis to work on missing arguments",TRUE,valid
36e93d2dd8c0ba705036de70b58edd133d10dd36,Peter Szilagyi,peterke@gmail.com,2020-03-18T14:30:58Z,Peter Szilagyi,peterke@gmail.com,2020-03-18T14:30:58Z,"Merge pull request #20779 from meowsbits/patch-3

core/rawdb: fix freezer table test error check",TRUE,valid
e6ca1958d3a2d93321e380e04a0d91bccc2e44e6,Peter Szilagyi,peterke@gmail.com,2020-03-18T13:23:16Z,Peter Szilagyi,peterke@gmail.com,2020-03-18T13:23:16Z,internal/web3ext: fix clique console apis to work on missing arguments,TRUE,valid
4655b60999b91d3d35d52e4526074ce903deaac9,Peter Szilagyi,peterke@gmail.com,2020-03-18T13:08:06Z,Peter Szilagyi,peterke@gmail.com,2020-03-18T13:08:06Z,"Merge pull request #20780 from karalabe/fix-eth-mine-sync-race

eth: when triggering a sync, check the head header TD, not block",TRUE,valid
dc6e98d2a8a084b0535f729587fb134e1715b3d7,Peter Szilagyi,peterke@gmail.com,2020-03-18T12:17:12Z,Peter Szilagyi,peterke@gmail.com,2020-03-18T12:17:12Z,"eth: when triggering a sync, check the head header TD, not block",TRUE,valid
6283391c9939d71934520200dd6ef9e77920d3ab,gary rong,garyrong0905@gmail.com,2020-03-18T12:15:49Z,gary rong,garyrong0905@gmail.com,2020-03-18T12:15:49Z,"core/rawdb: improve table database (#20703)

This PR fixes issues in TableDatabase.

TableDatabase is a wrapper of underlying ethdb.Database with an additional prefix.
The prefix is applied to all entries it maintains. However when we try to retrieve entries
from it we don't handle the key properly. In theory the prefix should be truncated and
only user key is returned. But we don't do it in some cases, e.g. the iterator and batch
replayer created from it. So this PR is the fix to these issues.",TRUE,valid
20a092fb9fac68a1835b7a98e2e3a0e96a138ef6,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-18T11:55:30Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-18T11:55:30Z,"core/rawdb: fix freezer table test error check

Fixes: Condition is always 'false' because 'err' is always 'nil'",TRUE,valid
5dd0cd12ec05bd2ced2ab1317168b0b991344fc2,Alex Willmer,alex@moreati.org.uk,2020-03-18T09:52:07Z,Alex Willmer,alex@moreati.org.uk,2020-03-18T09:52:07Z,"go.mod: update duktape to fix sprintf warnings (#20777)

This revision of go-duktype fixes the following warning

```
duk_logging.c: In function duk__logger_prototype_log_shared:
duk_logging.c:184:64: warning: Z directive writing 1 byte into a region of size between 0 and 9 [-Wformat-overflow=]
  184 |  sprintf((char *) date_buf, ""%04d-%02d-%02dT%02d:%02d:%02d.%03dZ"",
      |                                                                ^
In file included from /usr/include/stdio.h:867,
                 from duk_logging.c:5:
/usr/include/x86_64-linux-gnu/bits/stdio2.h:36:10: note: __builtin___sprintf_chk output between 25 and 85 bytes into a destination of size 32
   36 |   return __builtin___sprintf_chk (__s, __USE_FORTIFY_LEVEL - 1,
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   37 |       __bos (__s), __fmt, __va_arg_pack ());
      |       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
```",TRUE,valid
efd92d81a9655a5aed17cc433d1f8d2c9dcce25c,gary rong,garyrong0905@gmail.com,2020-03-18T09:18:14Z,gary rong,garyrong0905@gmail.com,2020-03-18T09:18:14Z,cmd/checkpoint-admin: add some documentation (#20697),TRUE,valid
8d7aa9078f8a94c2c10b1d11e04242df0ea91e5b,Peter Szilagyi,peterke@gmail.com,2020-03-16T11:44:58Z,Peter Szilagyi,peterke@gmail.com,2020-03-16T11:44:58Z,params: begin v1.9.13 release cycle,TRUE,valid
b6f1c8dcc058a936955eb8e5766e2962218924bc,Peter Szilagyi,peterke@gmail.com,2020-03-16T11:39:04Z,Peter Szilagyi,peterke@gmail.com,2020-03-16T11:39:04Z,params: release Geth v1.9.12,TRUE,valid
97243f3a7657a302dca45910429b9b6d198259f4,winsvega,dimitry@ethereum.org,2020-03-16T09:33:32Z,winsvega,dimitry@ethereum.org,2020-03-16T09:33:32Z,geth retesteth: increase retesteth default http timeouts (#20767),TRUE,valid
241b28369013e72a1fcf5c0a38578a0dbbdb6c89,Peter Szilagyi,peterke@gmail.com,2020-03-14T12:23:58Z,Peter Szilagyi,peterke@gmail.com,2020-03-14T12:23:58Z,"Merge pull request #20747 from karalabe/update-crypto-deps

go.mod: update golang.org/x/crypto to fix a Go 1.14 race rejection",TRUE,valid
466b009135dccde9e1358dbc15057c84b28b1e81,Peter Szilagyi,peterke@gmail.com,2020-03-06T15:14:47Z,Peter Szilagyi,peterke@gmail.com,2020-03-06T15:14:47Z,go.mod: update golang.org/x/crypto to fix a Go 1.14 race rejection,TRUE,valid
68b4b74682dd7b81ab921666d0e3eed56cdc838c,Peter Szilagyi,peterke@gmail.com,2020-03-14T11:52:46Z,Peter Szilagyi,peterke@gmail.com,2020-03-14T11:52:46Z,"Merge pull request #20762 from karalabe/fix-txprop-leak

eth: fix transaction announce/broadcast goroutine leak",TRUE,valid
270fbfba4bb4e0fe91ad2bb3a64cd4aa34da4c5f,Peter Szilagyi,peterke@gmail.com,2020-03-13T21:47:15Z,Peter Szilagyi,peterke@gmail.com,2020-03-13T21:47:15Z,eth: fix transaction announce/broadcast goroutine leak,TRUE,valid
92f3405daebe2f2bc8962c565bbb89616e1b30e3,gary rong,garyrong0905@gmail.com,2020-03-12T10:25:52Z,gary rong,garyrong0905@gmail.com,2020-03-12T10:25:52Z,"eth, les: fix time sensitive unit tests (#20741)",TRUE,valid
b1efff659e82a1f137a4b70fcd2a67c09237cef5,Felix Lange,fjl@twurst.com,2020-03-12T10:24:36Z,Felix Lange,fjl@twurst.com,2020-03-12T10:24:36Z,"rpc: improve cancel test (#20752)

This is supposed to fix the occasional failures in 
TestCancel* on Travis CI.",TRUE,valid
0bdb21f0cb9fe73a02b61aeedbbae5b57fc337ae,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-10T09:55:27Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-03-10T09:55:27Z,"tests: update tests/testdata@develop, include EIP2384 config (#20746)

Includes difficulty tests for EIP2384 aka MuirGlacier.",TRUE,valid
fab0ee3bfad9c685064dc12a210479a196e1cb3c,Peter Szilagyi,peterke@gmail.com,2020-03-04T13:06:04Z,Peter Szilagyi,peterke@gmail.com,2020-03-04T13:06:04Z,core/state/snapshot: fix various iteration issues due to destruct set,TRUE,valid
bc5d742c664245879ee80ecd968009b56f3e758c,Martin Holst Swende,martin@swende.se,2020-03-04T12:39:27Z,Martin Holst Swende,martin@swende.se,2020-03-04T12:39:27Z,core: more blockchain tests,TRUE,valid
eff7cfbb03b74816513d415c0ecfe93ae83f4096,Martin Holst Swende,martin@swende.se,2020-03-04T12:38:55Z,Martin Holst Swende,martin@swende.se,2020-03-04T12:38:55Z,core/state/snapshot: handle deleted accounts in fast iterator,TRUE,valid
328de180a7172d2fc2894be11ad10548ef9d27e0,Peter Szilagyi,peterke@gmail.com,2020-03-04T08:19:53Z,Peter Szilagyi,peterke@gmail.com,2020-03-04T08:19:53Z,core/state: fix resurrection state clearing and access,TRUE,valid
dcb22a9f99b19bb6b6d27cdba754ad740dc426c5,Peter Szilagyi,peterke@gmail.com,2020-03-03T14:55:06Z,Peter Szilagyi,peterke@gmail.com,2020-03-03T14:55:06Z,core/state: fix account root hash update point,TRUE,valid
a4cf279494f53276cf3576ae89b14b58efe644fb,Peter Szilagyi,peterke@gmail.com,2020-03-03T13:52:00Z,Peter Szilagyi,peterke@gmail.com,2020-03-03T13:52:00Z,core/state: extend snapshotter to handle account resurrections,TRUE,valid
6e05ccd845da26774774185956b3fd67966894ca,Peter Szilagyi,peterke@gmail.com,2020-03-03T07:10:23Z,Peter Szilagyi,peterke@gmail.com,2020-03-03T07:10:23Z,"core/state/snapshot, tests: sync snap gen + snaps in consensus tests",TRUE,valid
556888c4a971d4fd02be15f09cba7a65c5c0d930,Ali Atiia,42751398+aliatiia@users.noreply.github.com,2020-03-02T17:20:27Z,Ali Atiia,42751398+aliatiia@users.noreply.github.com,2020-03-02T17:20:27Z,"core/vm: fix method doc (#20730)

typo in func name in the comment",TRUE,valid
fe8347ea8a596ed233911340368ffd607fc23f70,Martin Holst Swende,martin@swende.se,2020-03-02T13:06:44Z,Martin Holst Swende,martin@swende.se,2020-03-02T13:06:44Z,squashme,TRUE,valid
361a6f08acad506c16cef1a1436b5975478e811f,Martin Holst Swende,martin@swende.se,2020-03-02T12:46:56Z,Martin Holst Swende,martin@swende.se,2020-03-02T12:46:56Z,core/tests: test for destroy+recreate contract with storage,TRUE,valid
01d92531ee0993c0e6e5efe877a1242bfd808626,rene,41963722+renaynay@users.noreply.github.com,2020-02-28T13:43:04Z,rene,41963722+renaynay@users.noreply.github.com,2020-02-28T13:43:04Z, rpc: correct typo and reword comment for consistency (#20728),TRUE,valid
92ec07d63bc06241df6b9c8cec6c9d5954a192f5,Peter Szilagyi,peterke@gmail.com,2020-02-27T13:03:10Z,Peter Szilagyi,peterke@gmail.com,2020-02-27T13:03:10Z,core/state: fix an account resurrection issue,TRUE,valid
1e1b18637e83991d3fe7ec048ef22174e75c5bd4,Felix Lange,fjl@twurst.com,2020-02-27T12:10:28Z,Felix Lange,fjl@twurst.com,2020-02-27T12:10:28Z,p2p/discv5: fix test on go 1.14 (#20724),TRUE,valid
f1a7997af38bb992d1a75c49ceb952117d3548ec,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-27T11:59:00Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-27T11:59:00Z,crypto/bn256: fix import line (#20723),TRUE,valid
cec1f292f0ba6fe5c0ebce505cec69c0efc86d4d,Felix Lange,fjl@twurst.com,2020-02-27T10:16:51Z,Felix Lange,fjl@twurst.com,2020-02-27T10:16:51Z,"mobile: add CallOpts.SetFrom (#20721)

This was missing because I forgot to wrap it when bind.CallOpts.From
as added.",TRUE,valid
4fabd9cbd2b8fc6bdc643fefb5ea583c5019171c,gary rong,garyrong0905@gmail.com,2020-02-26T09:41:24Z,gary rong,garyrong0905@gmail.com,2020-02-26T09:41:24Z,"les: separate peer into clientPeer and serverPeer (#19991)

* les: separate peer into clientPeer and serverPeer

* les: address comments",TRUE,valid
fadf84a75251ca0487c169c0906bedfe995767e4,Martin Holst Swende,martin@swende.se,2020-02-25T16:57:06Z,Martin Holst Swende,martin@swende.se,2020-02-25T16:57:06Z,"internal/ethapi: default to zero address for calls (#20702)

This makes eth_call and eth_estimateGas use the zero address
as sender when the ""from"" parameter is not supplied.

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
06d4470b4146a4e2ec813a01cc101aeaff6ce1eb,Peter Szilagyi,peterke@gmail.com,2020-02-24T11:26:34Z,Peter Szilagyi,peterke@gmail.com,2020-02-24T11:26:34Z,core: fix broken tests due to API changes + linter,TRUE,valid
19099421dc9d1c0818002fa7de948e056e1eee61,Martin Holst Swende,martin@swende.se,2020-01-19T19:57:56Z,Martin Holst Swende,martin@swende.se,2020-01-19T19:57:56Z,"core/state/snapshot: faster account iteration, CLI integration",TRUE,valid
6ddb92a089c7b07f512a1236a69b1cd568a660b1,Peter Szilagyi,peterke@gmail.com,2019-12-10T09:00:03Z,Peter Szilagyi,peterke@gmail.com,2019-12-10T09:00:03Z,core/state/snapshot: full featured account iteration,TRUE,valid
e5708353562405684ef7d34602635cc25231ad36,Martin Holst Swende,martin@swende.se,2019-12-06T22:27:18Z,Martin Holst Swende,martin@swende.se,2019-12-06T22:27:18Z,core/state/snapshot: implement iterator priority for fast direct data lookup,TRUE,valid
e567675473606cb325c6f51c83b9c5cb0592c8d3,Peter Szilagyi,peterke@gmail.com,2019-12-05T13:37:25Z,Peter Szilagyi,peterke@gmail.com,2019-12-05T13:37:25Z,core/state/snapshot: move iterator out into its own files,TRUE,valid
7e389963014ebd175260b7128873a85e5c74bb7b,Martin Holst Swende,martin@swende.se,2019-11-05T18:06:37Z,Martin Holst Swende,martin@swende.se,2019-11-05T18:06:37Z,core/state/snapshot: implement snapshot layer iteration,TRUE,valid
22c494d3996db9d7a09c8e5fcbfd15592b36f57a,Peter Szilagyi,peterke@gmail.com,2019-12-03T08:00:26Z,Peter Szilagyi,peterke@gmail.com,2019-12-03T08:00:26Z,"core/state/snapshot: bloom, metrics and prefetcher fixes",TRUE,valid
3ad4335accd08f2160aac489e4e16dceaae695be,Martin Holst Swende,martin@swende.se,2019-12-02T08:31:07Z,Martin Holst Swende,martin@swende.se,2019-12-02T08:31:07Z,core/state/snapshot: node behavioural difference on bloom content,TRUE,valid
fd39f722a3ff506aba9a993bb10ef176f8d654d8,Peter Szilagyi,peterke@gmail.com,2019-12-02T11:27:20Z,Peter Szilagyi,peterke@gmail.com,2019-12-02T11:27:20Z,"core: journal the snapshot inside leveldb, not a flat file",TRUE,valid
d5d7c0c24b824b0a166c606b4e71a92bd5e16e21,Martin Holst Swende,martin@swende.se,2019-12-01T19:49:00Z,Martin Holst Swende,martin@swende.se,2019-12-01T19:49:00Z,core/state/snapshot: fix difflayer origin-initalization after flatten,TRUE,valid
351a5903b0ccb9c77b5f0983fdd17c3d4de7acf9,Peter Szilagyi,peterke@gmail.com,2019-11-26T07:48:29Z,Peter Szilagyi,peterke@gmail.com,2019-11-26T07:48:29Z,"core/rawdb, core/state/snapshot: runtime snapshot generation",TRUE,valid
f300c0df01dde6b23f5fec4f1b2f91bc75f32c2f,Martin Holst Swende,martin@swende.se,2019-11-25T14:30:29Z,Martin Holst Swende,martin@swende.se,2019-11-25T14:30:29Z,core/state/snapshot: replace bigcache with fastcache,TRUE,valid
d754091a87703278b744815ccdcc499df66c9c1e,Peter Szilagyi,peterke@gmail.com,2019-11-22T11:23:49Z,Peter Szilagyi,peterke@gmail.com,2019-11-22T11:23:49Z,"core/state/snapshot: unlink snapshots from blocks, quad->linear cleanup",TRUE,valid
cdf3f016dfc19b0f5a6471f2b649519b7256d68d,Martin Holst Swende,martin@swende.se,2019-10-23T13:19:02Z,Martin Holst Swende,martin@swende.se,2019-10-23T13:19:02Z,snapshot: iteration and buffering optimizations,TRUE,valid
d7d81d7c1255d613400e833d634579129c73f8de,Peter Szilagyi,peterke@gmail.com,2019-10-17T15:30:31Z,Peter Szilagyi,peterke@gmail.com,2019-10-17T15:30:31Z,"core/state/snapshot: extract and split cap method, cover corners",TRUE,valid
e146fbe4e739e5912aadcceb77f9aff803b4a052,Martin Holst Swende,martin@swende.se,2019-10-04T13:24:01Z,Martin Holst Swende,martin@swende.se,2019-10-04T13:24:01Z,"core/state: lazy sorting, snapshot invalidation",TRUE,valid
542df8898ef6d718647058c129069804bc463ea5,Peter Szilagyi,peterke@gmail.com,2019-08-06T10:40:28Z,Peter Szilagyi,peterke@gmail.com,2019-08-06T10:40:28Z,core: initial version of state snapshots,TRUE,valid
2a5ed1a1d3920a8a81aa5dfff21b148ee4f1107e,Boqin Qin,Bobbqqin@gmail.com,2020-02-25T09:44:21Z,Boqin Qin,Bobbqqin@gmail.com,2020-02-25T09:44:21Z,eth/downloader: fix possible data race by inconsistent field protection (#20690),TRUE,valid
bf1cdd723ad527cce147710f95b852e599a08b76,Peter Szilagyi,peterke@gmail.com,2020-02-24T13:03:49Z,Peter Szilagyi,peterke@gmail.com,2020-02-24T13:03:49Z,"Merge pull request #20712 from karalabe/txfetcher-fix-test-randomness

eth/fetcher: remove randomness from test data",TRUE,valid
c6be24c731f698874e640b6bf92312b6088698f4,Peter Szilagyi,peterke@gmail.com,2020-02-24T12:59:02Z,Peter Szilagyi,peterke@gmail.com,2020-02-24T12:59:02Z,eth/fetcher: remove randomness from test data,TRUE,valid
6ffee2afd66892da1145f47e210210e6bf55c74a,Chris Chinchilla,chris.ward@ethereum.org,2020-02-21T15:30:21Z,Chris Chinchilla,chris.ward@ethereum.org,2020-02-21T15:30:21Z,docs: correct clef typo (#20705),TRUE,valid
2e1ecc02bdf28a27e475386bc9f51452096bef4b,gary rong,garyrong0905@gmail.com,2020-02-20T12:05:54Z,gary rong,garyrong0905@gmail.com,2020-02-20T12:05:54Z,"les, miner, accounts/abi/bind: fix load-sensitive unit tests (#20698)",TRUE,valid
6df973df27ea72334efa4800e1e77f776fcf1c30,Guillaume Ballet,gballet@gmail.com,2020-02-20T11:46:47Z,Guillaume Ballet,gballet@gmail.com,2020-02-20T11:46:47Z,"go.mod: upgrade goja to latest (#20700)

The new goja version supports the 'escape' and 'unescape' built-in functions.
This fixes #20693",TRUE,valid
4be88401200699a8afe0602e1a8624e6e10989c1,Gregory Markou,16929357+GregTheGreek@users.noreply.github.com,2020-02-18T14:07:41Z,Gregory Markou,16929357+GregTheGreek@users.noreply.github.com,2020-02-18T14:07:41Z,core/vm: use dedicated SLOAD gas constant for EIP-2200 (#20646),TRUE,valid
529b81dadb3134005d3851ae8a163f43822bef01,Peter Szilagyi,peterke@gmail.com,2020-02-18T11:27:39Z,Peter Szilagyi,peterke@gmail.com,2020-02-18T11:27:39Z,params: begin v1.9.12 release cycle,TRUE,valid
6a62fe399b68ab9e3625ef5e7900394f389adc3a,Peter Szilagyi,peterke@gmail.com,2020-02-18T11:26:00Z,Peter Szilagyi,peterke@gmail.com,2020-02-18T11:26:00Z,params: release Geth v1.9.11 stable,TRUE,valid
dae3aee5ff7ebcd24a50937a1d0ae080c2f1d897,Felix Lange,fjl@twurst.com,2020-02-18T11:24:05Z,Felix Lange,fjl@twurst.com,2020-02-18T11:24:05Z,les: add bootstrap nodes as initial discoveries (#20688),TRUE,valid
05ccbb5edd315bcb1b630a4a6bb86bdada18e4d9,Peter Szilagyi,peterke@gmail.com,2020-02-18T08:57:05Z,Peter Szilagyi,peterke@gmail.com,2020-02-18T08:57:05Z,"Merge pull request #20687 from karalabe/cht-1.9.11

params: update CHTs for the v1.9.11 release",TRUE,valid
4f55e24c02011c47feb33129f68284f092bcc06e,Peter Szilagyi,peterke@gmail.com,2020-02-18T08:55:44Z,Peter Szilagyi,peterke@gmail.com,2020-02-18T08:55:44Z,params: update CHTs for the v1.9.11 release,TRUE,valid
91b228966e042d8fad36451d524bbf8b2abde690,Felix Lange,fjl@twurst.com,2020-02-17T16:33:32Z,Felix Lange,fjl@twurst.com,2020-02-17T16:33:32Z,"rpc: remove startup error for invalid modules, log it instead (#20684)

This removes the error added in #20597 in favor of a log message at
error level. Failing to start broke a bunch of people's setups and is
probably not the right thing to do for this check.",TRUE,valid
1b9c5b393b9a52078a25f426af6e1fcc5996ca67,Boqin Qin,Bobbqqin@gmail.com,2020-02-17T16:33:12Z,Boqin Qin,Bobbqqin@gmail.com,2020-02-17T16:33:12Z,"all: fix goroutine leaks in unit tests by adding 1-elem channel buffer (#20666)

This fixes a bunch of cases where a timeout in the test would leak
a goroutine.",TRUE,valid
57d4898e2992a46fc2deab93a2666a2979b6704c,Felix Lange,fjl@twurst.com,2020-02-17T14:23:25Z,Felix Lange,fjl@twurst.com,2020-02-17T14:23:25Z,"p2p/dnsdisc: re-check tree root when leaf resolution fails (#20682)

This adds additional logic to re-resolve the root name of a tree when a
couple of leaf requests have failed. We need this change to avoid
getting into a failure state where leaf requests keep failing for half
an hour when the tree has been updated.",TRUE,valid
c2117982b874cc3538e0a8a7e779423c9943e2b7,Peter Szilagyi,peterke@gmail.com,2020-02-17T12:43:30Z,Peter Szilagyi,peterke@gmail.com,2020-02-17T12:43:30Z,"Merge pull request #20678 from karalabe/broadcast-sqrt-proper

eth: don't enforce minimum broadcast, fix broadcast test",TRUE,valid
1c4c486a85ef304e060da592bf46f81d015aa662,Felix Lange,fjl@twurst.com,2020-02-17T11:22:52Z,Felix Lange,fjl@twurst.com,2020-02-17T11:22:52Z,cmd/ethkey: speed up test by using weaker scrypt parameters (#20680),TRUE,valid
ac7278776838ba4dc69f57f8dbbef219d8bc3b6f,Felix Lange,fjl@twurst.com,2020-02-17T11:22:15Z,Felix Lange,fjl@twurst.com,2020-02-17T11:22:15Z,"p2p: remove MeteredPeerEvent (#20679)

This event was added for the dashboard, but we don't need it anymore
since the dashboard is gone.",TRUE,valid
26284ec3cc0bb8d314fc740d976c9090b82ec07f,Peter Szilagyi,peterke@gmail.com,2020-02-17T11:15:17Z,Peter Szilagyi,peterke@gmail.com,2020-02-17T11:15:17Z,"Merge pull request #20681 from karalabe/go1.13.8

travis, appveyor, build: bump builder Go to 1.13.8",TRUE,valid
fef8c985bc03df86ed9fc35e660c81fb3eed0330,Peter Szilagyi,peterke@gmail.com,2020-02-17T11:13:24Z,Peter Szilagyi,peterke@gmail.com,2020-02-17T11:13:24Z,"travis, appveyor, build: bump builder Go to 1.13.8",TRUE,valid
36a1e0b67d4f8d8b8861f8ee1de78eb881241127,Peter Szilagyi,peterke@gmail.com,2020-02-17T10:01:03Z,Peter Szilagyi,peterke@gmail.com,2020-02-17T10:01:03Z,"eth: don't enforce minimum broadcast, fix broadcast test",TRUE,valid
37531b18847774a7f057496bc34f2a48053fa417,Boqin Qin,Bobbqqin@gmail.com,2020-02-15T18:14:29Z,Boqin Qin,Bobbqqin@gmail.com,2020-02-15T18:14:29Z,"cmd/faucet: protect f.reqs with Rlock to prevent data race (#20669)

* cmd/faucet: add Rlock to protect f.reqs in apiHandler

* cmd/faucet: make a locked copy of f.reqs",TRUE,valid
855690523a6bd98ce2eef9489d9f76cf2bc3868c,Martin Holst Swende,martin@swende.se,2020-02-14T08:54:02Z,Martin Holst Swende,martin@swende.se,2020-02-14T08:54:02Z,core: ensure state exists for prefetcher (#20627),TRUE,valid
38d1b0cba277db17129a4870158115c5a428cffc,Felix Lange,fjl@twurst.com,2020-02-13T13:38:30Z,Felix Lange,fjl@twurst.com,2020-02-13T13:38:30Z,"cmd/geth: enable DNS discovery by default (#20660)

* node: expose config in service context

* eth: integrate p2p/dnsdisc

* cmd/geth: add some DNS flags

* eth: remove DNS URLs

* cmd/utils: configure DNS names for testnets

* params: update DNS URLs

* cmd/geth: configure mainnet DNS

* cmd/utils: rename DNS flag and fix flag processing

* cmd/utils: remove debug print

* node: fix test",TRUE,valid
eddcecc160b275cd53c1f288f1123bb828cab659,Peter Szilagyi,peterke@gmail.com,2020-02-13T13:28:34Z,Peter Szilagyi,peterke@gmail.com,2020-02-13T13:28:34Z,"Merge pull request #20234 from rjl493456442/newtxhashes_2

core, eth: announce based transaction propagation",TRUE,valid
9938d954c8391682947682543cf9b52196507a88,Peter Szilagyi,peterke@gmail.com,2020-01-22T14:39:43Z,Peter Szilagyi,peterke@gmail.com,2020-01-22T14:39:43Z,eth: rework tx fetcher to use O(1) ops + manage network requests,TRUE,valid
90caa2cabbd46c3e712eb7216bd668dd02bb15a8,Felix Lange,fjl@twurst.com,2020-02-13T10:10:03Z,Felix Lange,fjl@twurst.com,2020-02-13T10:10:03Z,"p2p: new dial scheduler (#20592)

* p2p: new dial scheduler

This change replaces the peer-to-peer dial scheduler with a new and
improved implementation. The new code is better than the previous
implementation in two key aspects:

- The time between discovery of a node and dialing that node is
  significantly lower in the new version. The old dialState kept
  a buffer of nodes and launched a task to refill it whenever the buffer
  became empty. This worked well with the discovery interface we used to
  have, but doesn't really work with the new iterator-based discovery
  API.

- Selection of static dial candidates (created by Server.AddPeer or
  through static-nodes.json) performs much better for large amounts of
  static peers. Connections to static nodes are now limited like dynanic
  dials and can no longer overstep MaxPeers or the dial ratio.

* p2p/simulations/adapters: adapt to new NodeDialer interface

* p2p: re-add check for self in checkDial

* p2p: remove peersetCh

* p2p: allow static dials when discovery is disabled

* p2p: add test for dialScheduler.removeStatic

* p2p: remove blank line

* p2p: fix documentation of maxDialPeers

* p2p: change ""ok"" to ""added"" in static node log

* p2p: improve dialTask docs

Also increase log level for ""Can't resolve node""

* p2p: ensure dial resolver is truly nil without discovery

* p2p: add ""looking for peers"" log message

* p2p: clean up Server.run comments

* p2p: fix maxDialedConns for maxpeers < dialRatio

Always allocate at least one dial slot unless dialing is disabled using
NoDial or MaxPeers == 0. Most importantly, this fixes MaxPeers == 1 to
dedicate the sole slot to dialing instead of listening.

* p2p: fix RemovePeer to disconnect the peer again

Also make RemovePeer synchronous and add a test.

* p2p: remove ""Connection set up"" log message

* p2p: clean up connection logging

We previously logged outgoing connection failures up to three times.

- in SetupConn() as ""Setting up connection failed addr=...""
- in setupConn() with an error-specific message and ""id=... addr=...""
- in dial() as ""Dial error task=...""

This commit ensures a single log message is emitted per failure and adds
""id=... addr=... conn=..."" everywhere (id= omitted when the ID isn't
known yet).

Also avoid printing a log message when a static dial fails but can't be
resolved because discv4 is disabled. The light client hit this case all
the time, increasing the message count to four lines per failed
connection.

* p2p: document that RemovePeer blocks",TRUE,valid
5f2002bbcc1ad21818d9b08badea84acac6d0481,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T14:20:50Z,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T14:20:50Z,accounts: add walletsNoLock to avoid double read lock (#20655),TRUE,valid
a9614c3c9167d2da3b5c72e773e64984ab504814,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T14:19:47Z,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T14:19:47Z,"event, p2p/simulations/adapters: fix rare goroutine leaks (#20657)

Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
46c4b699c8b5b537416d395852a3f44fd7a45f49,Marius van der Wijden,m.vanderwijden@live.de,2020-02-12T10:33:17Z,Marius van der Wijden,m.vanderwijden@live.de,2020-02-12T10:33:17Z,accounts/abi/bind/backends: add support for historical state (#20644),TRUE,valid
18213281627b310ac68d22bca7c401ab5f67e1da,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T09:33:31Z,Boqin Qin,bobbqqin@bupt.edu.cn,2020-02-12T09:33:31Z,event: add missing unlock before panic (#20653),TRUE,valid
8045504abf64a865be4b1dbc780b796a9f5d11cc,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-11T15:46:32Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-11T15:46:32Z,"les: log disconnect reason when light server is not synced (#20643)

Co-authored-by: ligi <ligi@ligi.de>",TRUE,valid
c22fdec3c7c48bc5076cb85b92a55a68951db167,Felix Lange,fjl@twurst.com,2020-02-11T15:36:49Z,Felix Lange,fjl@twurst.com,2020-02-11T15:36:49Z,"common/mclock: add NewTimer and Timer.Reset (#20634)

These methods can be helpful when migrating existing timer code.",TRUE,valid
049e17116e5e00a052384905a433fed5245ea5c4,rjl493456442,garyrong0905@gmail.com,2019-10-28T11:59:07Z,rjl493456442,garyrong0905@gmail.com,2019-10-28T11:59:07Z,"core, eth: implement eth/65 transaction fetcher",TRUE,valid
dcffb7777fc2978cf1bb243f1ebdaa5f75d1e542,winsvega,dimitry@ethereum.org,2020-02-11T09:54:05Z,winsvega,dimitry@ethereum.org,2020-02-11T09:54:05Z,cmd/geth retesteth: add eth_getBlockByHash (#20621),TRUE,valid
8694d14e655a20d70e51b7c4605d63d53de8d351,chabashilah,doumodoumo@gmail.com,2020-02-11T09:52:51Z,chabashilah,doumodoumo@gmail.com,2020-02-11T09:52:51Z,signer: add bytes32 as valid primitive (#20609),TRUE,valid
172f7778fe498c383e0bdb234aaac4f61d4a2512,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-11T08:48:58Z,Adam Schmideg,adamschmideg@users.noreply.github.com,2020-02-11T08:48:58Z,rpc: add error when call result parameter is not addressable (#20638),TRUE,valid
34bb132b108e0c17c079d6b24524c2958306a009,AmitBRD,60668103+AmitBRD@users.noreply.github.com,2020-02-09T20:50:44Z,AmitBRD,60668103+AmitBRD@users.noreply.github.com,2020-02-09T20:50:44Z,"graphql: add transaction signature values (#20623)

The feature update allows the GraphQL API endpoint to retrieve
transaction signature R,S,V parameters.

Co-authored-by: amitshah <amitshah0t7@gmail.com>
Co-authored-by: Felix Lange <fjl@twurst.com>",TRUE,valid
675f4e75b868289993fa2cb9eb543532a3c80610,Nick Ward,wardnick@protonmail.com,2020-02-09T16:18:47Z,Nick Ward,wardnick@protonmail.com,2020-02-09T16:18:47Z,README.md: update evm usage example (#20635),TRUE,valid
4a231cd951faaf011cdec8fdde66a948b637718e,Martin Holst Swende,martin@swende.se,2020-02-07T09:44:32Z,Martin Holst Swende,martin@swende.se,2020-02-07T09:44:32Z,"internal/ethapi: return non-null ""number"" for pending block (#20616)

Fixes: #20587, ethereum/web3.py#1572",TRUE,valid
976a0f5558e20ed7cb7ba2cd68d7429d1ef01db9,Felix Lange,fjl@twurst.com,2020-02-05T14:29:59Z,Felix Lange,fjl@twurst.com,2020-02-05T14:29:59Z,"cmd/devp2p: fix Route53 TXT record splitting (#20626)

For longer records and subtree entries, the deployer created two
separate TXT records. This doesn't work as intended because the client
will receive the two records in arbitrary order. The fix is to encode
longer values as ""string1""""string2"" instead of ""string1"", ""string2"".
This encoding creates a single record on AWS Route53.",TRUE,valid
a1313b5b1e9713e7e10f5ef29b7981c9c49d688b,Martin Holst Swende,martin@swende.se,2020-02-04T12:02:38Z,Martin Holst Swende,martin@swende.se,2020-02-04T12:02:38Z,"trie: make hasher parallel when number of changes are large (#20488)

* trie: make hasher parallel when number of changes are large

* trie: remove unused field dirtyCount

* trie: rename unhashedCount/unhashed",TRUE,valid
711ed74e091f2ada6e2aa84e5e62b9696b589d8a,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-02-04T10:49:13Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2020-02-04T10:49:13Z,"cmd/geth: add 'dumpgenesis' command (#20191)

Adds the 'geth dumpgenesis' command, which writes the configured
genesis in JSON format to stdout. This provides a way to generate the
data (structure and content) that can then be used with the 'geth init'
command.",TRUE,valid
058a4ac5f13f49a67d4b28111dd0ad3eea387c8c,Martin Holst Swende,martin@swende.se,2020-02-04T10:32:31Z,Martin Holst Swende,martin@swende.se,2020-02-04T10:32:31Z,"core/evm: less iteration in blockhash (#20589)

* core/vm/runtime: add test for blockhash

* core/evm: less iteration in blockhash

* core/vm/runtime: nitpickfix

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",TRUE,valid
33791dbeb51ce910983d15dda53fd83c05be9bb3,tintin,tintinweb@oststrom.com,2020-02-04T08:55:07Z,tintin,tintinweb@oststrom.com,2020-02-04T08:55:07Z,"tracers: avoid panic on invalid arguments  (#20612)

* add regression tests for #20611

* eth/tracers: fix panics occurring for invalid params in js-tracers

Co-authored-by: Martin Holst Swende <martin@swende.se>",TRUE,valid
5a9c96454e04673124eedf681ae3aa0a58ffc843,Martin Holst Swende,martin@swende.se,2020-02-03T15:28:30Z,Martin Holst Swende,martin@swende.se,2020-02-03T15:28:30Z,"trie: separate hashes and committer, collapse on commit

* trie:  make db insert use size instead of full data

* core/state: minor optimization in state onleaf allocation

* trie: implement dedicated committer and hasher

* trie: use dedicated committer/hasher

* trie: linter nitpicks

* core/state, trie: avoid unnecessary storage trie load+commit

* trie: review feedback, mainly docs + minor changes

* trie: start deprecating old hasher

* trie: fix misspell+lint

* trie: deprecate hasher.go, make proof framework use new hasher

* trie: rename pure_committer/hasher to committer/hasher

* trie, core/state: fix review concerns

* trie: more review concerns

* trie: make commit collapse into hashnode, don't touch dirtyness

* trie: goimports fixes

* trie: remove panics",TRUE,valid
4cc89a5a32bd3623a065765637d5c08641e2a251,Felix Lange,fjl@twurst.com,2020-02-03T15:22:46Z,Felix Lange,fjl@twurst.com,2020-02-03T15:22:46Z,internal/build: don't crash in DownloadFile when offline (#20595),TRUE,valid
15d09038a6b1d533bc78662f2f0b77ccf03aaab0,Martin Holst Swende,martin@swende.se,2020-01-31T13:12:19Z,Martin Holst Swende,martin@swende.se,2020-01-31T13:12:19Z,params: update bootnodes (#20610),TRUE,valid
3c776c71994d7efde8793172cc8c09573a006dcc,Martin Holst Swende,martin@swende.se,2020-01-31T11:00:37Z,Martin Holst Swende,martin@swende.se,2020-01-31T11:00:37Z,"retesteth: clean txpool on rewind, default dao support (#20596)",TRUE,valid
24cab2d5357ed968aa5a4752f7afc27c8320b064,Guillaume Ballet,gballet@gmail.com,2020-01-30T10:21:10Z,Guillaume Ballet,gballet@gmail.com,2020-01-30T10:21:10Z,core/vm/runtime: fix typos in comment (#20608),TRUE,valid
594e038e75a1acf3d922d48afdcc2b7bdae40368,Guillaume Ballet,gballet@gmail.com,2020-01-29T12:47:56Z,Guillaume Ballet,gballet@gmail.com,2020-01-29T12:47:56Z,"signer/rules: use goja and remove otto (#20599)

* signer: replace otto with goja

* go.mod: remove Otto",TRUE,valid
a903912b9622780a7b6d852a21307a8a81962fd7,Felix Lange,fjl@twurst.com,2020-01-28T09:37:08Z,Felix Lange,fjl@twurst.com,2020-01-28T09:37:08Z,"rpc: check module availability at startup (#20597)

Fixes #20467

Co-authored-by: meowsbits <45600330+meowsbits@users.noreply.github.com>",TRUE,valid
44c365c3e2a3ab0f9f6f9c8ae1fa22e51cd3424f,Zhou Zhiyao,ZHOU0250@e.ntu.edu.sg,2020-01-27T13:03:15Z,Zhou Zhiyao,ZHOU0250@e.ntu.edu.sg,2020-01-27T13:03:15Z,"rpc: reset writeConn when conn is closed on readErr (#20414)

This change makes the client attempt to reconnect when a write fails.
We already had reconnect support, but the reconnect would previously
happen on the next call after an error. Being more eager leads to a
smoother experience overall.",FALSE,unsigned
7b68975a00ee914d91f9c6a56c55a357012ab844,Guillaume Ballet,gballet@gmail.com,2020-01-27T10:50:48Z,Guillaume Ballet,gballet@gmail.com,2020-01-27T10:50:48Z,"console, internal/jsre: use github.com/dop251/goja (#20470)

This replaces the JavaScript interpreter used by the console with goja,
which is actively maintained and a lot faster than otto. Clef still uses otto
and eth/tracers still uses duktape, so we are currently dependent on three
different JS interpreters. We're looking to replace the remaining uses of otto
soon though.",FALSE,unsigned
60deeb103e0a3c9d414e71cc47c9adb1d46fe0da,Guillaume Ballet,gballet@gmail.com,2020-01-27T09:05:21Z,Guillaume Ballet,gballet@gmail.com,2020-01-27T09:05:21Z,cmd/evm: accept --input for disasm command (#20548),FALSE,unsigned
0b284f6c6cfc6df452ca23f9454ee16a6330cb8e,Martin Holst Swende,martin@swende.se,2020-01-23T19:55:56Z,Martin Holst Swende,martin@swende.se,2020-01-23T19:55:56Z,cmd/geth/retesteth: use canon head instead of keeping alternate count (#20572),TRUE,valid
8a5c81349ead2dc3208ba09517f7ee9f6866a7db,Guillaume Ballet,gballet@gmail.com,2020-01-23T15:08:06Z,Guillaume Ballet,gballet@gmail.com,2020-01-23T15:08:06Z,eth: fix comment typo in handler.go (#20575),FALSE,unsigned
33c56ebc6757fd50e7a7ea1d594754e33d904887,Martin Holst Swende,martin@swende.se,2020-01-21T14:51:36Z,Martin Holst Swende,martin@swende.se,2020-01-21T14:51:36Z,"cmd: implement abidump (#19958)

* abidump: implement abi dump command

* cmd/abidump: add license",FALSE,unsigned
31baf3a9afbca0ca08cc9487444d31f1530fa1b0,Felix Lange,fjl@twurst.com,2020-01-21T12:57:33Z,Felix Lange,fjl@twurst.com,2020-01-21T12:57:33Z,"log, internal/debug: delete RotatingFileHandler (#20586)

* log: delete RotatingFileHandler

We added this for the dashboard, which is gone now. The
handler never really worked well and had data race and file
handling issues.

* internal/debug: remove unused RotatingFileHandler setup code",FALSE,unsigned
ad2fc7c6a6487d9864b47b29e7686f0afb765ede,Peter Szilagyi,peterke@gmail.com,2020-01-20T10:32:47Z,Peter Szilagyi,peterke@gmail.com,2020-01-20T10:32:47Z,params: begin Geth v1.9.11 release cycle,TRUE,valid
58cf5686eab9019cc01e202e846a6bbc70a3301d,Peter Szilagyi,peterke@gmail.com,2020-01-20T10:27:51Z,Peter Szilagyi,peterke@gmail.com,2020-01-20T10:27:51Z,params: release Geth v1.9.10,TRUE,valid
b4aa4a6965cf85c294a53ad5e200cf1468c2a182,Peter Szilagyi,peterke@gmail.com,2020-01-20T09:18:37Z,Peter Szilagyi,peterke@gmail.com,2020-01-20T09:18:37Z,"Merge pull request #20580 from karalabe/cht-1.9.10

params: update CHTs for v1.9.10 release",TRUE,valid
b88b4632c2d1beba72dda31d072902c503962591,gary rong,garyrong0905@gmail.com,2020-01-20T08:38:08Z,gary rong,garyrong0905@gmail.com,2020-01-20T08:38:08Z,core: fix chain indexer unit test (#20506),FALSE,unsigned
1f1cefc036e23ab71f5b259e64f22df6de03ec34,Peter Szilagyi,peterke@gmail.com,2020-01-20T08:28:49Z,Peter Szilagyi,peterke@gmail.com,2020-01-20T08:28:49Z,params: update CHTs for v1.9.10 release,TRUE,valid
4c8fcd93daaf945871691f3aa74d6cddb7ff5b47,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:55:00Z,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:55:00Z,"Merge pull request #20579 from karalabe/android-go-1.13.6

travis: bump Android builder to Go 1.13.6",TRUE,valid
fcc84c38ddb6514059fec2da1c70376a551905aa,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:54:20Z,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:54:20Z,travis: bump Android builder to Go 1.13.6,TRUE,valid
6d200efe72aa1707167e96074db9ca31c4497797,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:53:13Z,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:53:13Z,"Merge pull request #20578 from karalabe/win-go-1.13.6

appveyor: bump Go to 1.13.6 on Windows",TRUE,valid
92956e29305c5c89a29bf69d5831c8b863be3ddb,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:50:59Z,Peter Szilagyi,peterke@gmail.com,2020-01-19T22:50:59Z,appveyor: bump Go to 1.13.6 on Windows,TRUE,valid
9b09c0fc8314e6ee355cc11a81ed0fc40b8a1b4a,Martin Holst Swende,martin@swende.se,2020-01-17T11:59:45Z,Martin Holst Swende,martin@swende.se,2020-01-17T11:59:45Z,"* trie: utilize callbacks instead of amassing lists in ref/unref (#20529)

* trie/tests: add benchmarks and update trie tests

* trie: update benchmark tests

* trie: utilize callbacks instead of amassing lists of hashes in database ref/unref

* trie: replace remaining non-callback based accesses",FALSE,unsigned
770316dc206618c97afaac9deceb1f9b878488ea,gary rong,garyrong0905@gmail.com,2020-01-17T10:49:32Z,gary rong,garyrong0905@gmail.com,2020-01-17T10:49:32Z,"core, light: write chain data in atomic way (#20287)

* core: write chain data in atomic way

* core, light: address comments

* core, light: fix linter

* core, light: address comments",FALSE,unsigned
0af96d2556de8eaa41bd2002b028b3740504b734,Felix Lange,fjl@twurst.com,2020-01-17T10:32:29Z,Felix Lange,fjl@twurst.com,2020-01-17T10:32:29Z,"cmd/devp2p: submit Route53 changes in batches (#20524)

This change works around the 32k RDATA character limit per change
request and fixes several issues in the deployer which prevented it from
working for our production trees.",TRUE,valid
d5acc5ed9e74bf5e23b50ca176332028211e3581,Felix Lange,fjl@twurst.com,2020-01-17T10:29:16Z,Felix Lange,fjl@twurst.com,2020-01-17T10:29:16Z,"p2p: ensure Server.loop is ticking even if discovery hangs (#20573)

This is a temporary fix for a problem which started happening when the
dialer was changed to read nodes from an enode.Iterator. Before the
iterator change, discovery queries would always return within a couple
seconds even if there was no Internet access. Since the iterator won't
return unless a node is actually found, discoverTask can take much
longer. This means that the 'emergency connect' logic might not execute
in time, leading to a stuck node.",FALSE,unsigned
fcafa0baa53a5e0db69100c05da04c61d4810768,Felix Lange,fjl@twurst.com,2020-01-16T12:10:15Z,Felix Lange,fjl@twurst.com,2020-01-16T12:10:15Z,"p2p: wait for listener goroutines on shutdown (#20569)

* p2p: wait for goroutine exit, fixes #20558

* p2p: wait for all slots on exit

Co-authored-by: Martin Holst Swende <martin@swende.se>",FALSE,unsigned
1ee754b05647ab28a9269238ec0f52f095c7c131,Guillaume Ballet,gballet@gmail.com,2020-01-16T12:09:38Z,Guillaume Ballet,gballet@gmail.com,2020-01-16T12:09:38Z,"build: upgrade golangci to 1.22.2 (#20566)

* build: upgrade golangci to 1.22.2

* .golangci.yml: don't fail on asset deadcode",FALSE,unsigned
b3b8d36995ec5ba1d0171f3c82e84713971f2ceb,Peter Szilagyi,peterke@gmail.com,2020-01-16T12:09:00Z,Peter Szilagyi,peterke@gmail.com,2020-01-16T12:09:00Z,"Merge pull request #20570 from karalabe/ppa-focal-go-1.13.6

travis, build: enable Ubuntu Focal and Go 1.13.6 on PPA",TRUE,valid
9b32f592dc2f3c20f0705cdc7346a6315440a39d,Peter Szilagyi,peterke@gmail.com,2020-01-16T11:28:32Z,Peter Szilagyi,peterke@gmail.com,2020-01-16T11:28:32Z,"travis, build: enable Ubuntu Focal and Go 1.13.6 on PPA",TRUE,valid
3e97b04a3df8a175b7cc61ae8f6f7e0d40f5cd4b,Felix Lange,fjl@twurst.com,2020-01-16T11:03:41Z,Felix Lange,fjl@twurst.com,2020-01-16T11:03:41Z,"build: put GOPATH in /tmp on launchpad (#20564)

* build: put GOPATH in /tmp on launchpad

* build: don't remove GOPATH from go tool environment",FALSE,unsigned
f20c8d495a60db86149ebe3e13e995d661bc7958,Martin Holst Swende,martin@swende.se,2020-01-15T14:30:50Z,Martin Holst Swende,martin@swende.se,2020-01-15T14:30:50Z,eth: increase timeout to fix a spurious travis test failure (#20560),FALSE,unsigned
8704e8a8fc1ae7f70478a344518a864391b13657,Felix Lange,fjl@twurst.com,2020-01-15T10:38:35Z,Felix Lange,fjl@twurst.com,2020-01-15T10:38:35Z,build: fix makefile HOME reference (#20562),FALSE,unsigned
94e8418939c66233180e9c79a2f716a3b4be70dc,Felix Lange,fjl@twurst.com,2020-01-15T09:37:31Z,Felix Lange,fjl@twurst.com,2020-01-15T09:37:31Z,build: attempt to fix debian build failure without GOPATH (#20561),FALSE,unsigned
feda78e052edb862b0e666f8d3af68f00ed7c0df,Felix Lange,fjl@twurst.com,2020-01-14T12:13:14Z,Felix Lange,fjl@twurst.com,2020-01-14T12:13:14Z,"build: remove env.sh (#20541)

* build: remove env.sh

This removes the dirty symlink-to-self hack we've had for years. The
script was added to enable building without GOPATH and did that job
reliably for all this time. We can remove the workaround because modern
Go supports building without GOPATH natively.

* Makefile: add GO111MODULE=on to environment",FALSE,unsigned
8592a575532e753776c2fa6ec0234294ac2c55a1,Peter Szilagyi,peterke@gmail.com,2020-01-14T11:18:22Z,Peter Szilagyi,peterke@gmail.com,2020-01-14T11:18:22Z,"Merge pull request #20555 from holiman/cripple_txsize

core: set max tx size down to 2 slots (64KB)",TRUE,valid
b2de0bd87beea1f8b0f6787fb76c4dc0538db37b,Martin Holst Swende,martin@swende.se,2020-01-14T10:49:36Z,Martin Holst Swende,martin@swende.se,2020-01-14T10:49:36Z,core: set max tx size down to 2 slots (64KB),TRUE,valid
e9e69d6e296d21a7c9c66024c9888a862027252e,Peter Szilagyi,peterke@gmail.com,2020-01-13T13:19:14Z,Peter Szilagyi,peterke@gmail.com,2020-01-13T13:19:14Z,"Merge pull request #20546 from karalabe/validate-block-broadcast

eth: check propagated block malformation on receiption",TRUE,valid
a90cc66f3c9635ce93b8df3fd8dcd6418063f97e,Peter Szilagyi,peterke@gmail.com,2020-01-13T12:23:54Z,Peter Szilagyi,peterke@gmail.com,2020-01-13T12:23:54Z,eth: check propagated block malformation on receiption,TRUE,valid
8bd37a1d919194d9a488d1cee823eaecfeb5ed9a,MichaelRiabzev-StarkWare,michael@starkware.co,2020-01-10T09:40:03Z,MichaelRiabzev-StarkWare,michael@starkware.co,2020-01-10T09:40:03Z,"core: count tx size in slots, bump max size ot 4x32KB (#20352)

* tests for tx size

* alow multiple slots transactions

* tests for tx size limit (32 KB)

* change tx size tests to use addRemoteSync instead of validateTx (requested in pool request).

* core: minor tx slotting polishes, add slot tracking metric

Co-authored-by: Michael Riabzev <RiabzevMichael@gmail.com>
Co-authored-by: Peter Szilagyi <peterke@gmail.com>",FALSE,unsigned
b5c4ea56b8718c3b74ca608678841fe2a2f0d718,Peter Szilagyi,peterke@gmail.com,2020-01-10T09:36:21Z,Peter Szilagyi,peterke@gmail.com,2020-01-10T09:36:21Z,"Merge pull request #20540 from holiman/verbose_panic

core/state: add more verbosity to panic",TRUE,valid
fc392395fbb7d26d8b2123b12402225b9d4324d3,Martin Holst Swende,martin@swende.se,2020-01-10T09:12:32Z,Martin Holst Swende,martin@swende.se,2020-01-10T09:12:32Z,core/state: add more verbosity to panic,TRUE,valid
b211742e5f1ec87e59683e979dd914c1a5a2fade,Peter Szilagyi,peterke@gmail.com,2020-01-09T11:26:37Z,Peter Szilagyi,peterke@gmail.com,2020-01-09T11:26:37Z,"Revert ""eth: refactor creation of EthAPIBackend (#20476)"" (#20536)

This reverts commit a1bc0e3cb69d6080b884728a60d2f92392b4c392.",TRUE,valid
0218d7001d2a566b35072ee21b9f84f6b2711bbe,Felix Lange,fjl@twurst.com,2020-01-08T15:11:51Z,Felix Lange,fjl@twurst.com,2020-01-08T15:11:51Z,"internal/testlog: print file+line number of log call in test log (#20528)

* internal/testlog: print file+line number of log call in test log

This changes the unit test logger to print the actual file and line
number of the logging call instead of ""testlog.go:44"".

Output of 'go test -v -run TestServerListen ./p2p' before this change:

    === RUN   TestServerListen
    --- PASS: TestServerListen (0.00s)
        testlog.go:44: DEBUG[01-08|15:16:31.651] UDP listener up         addr=127.0.0.1:62678
        testlog.go:44: DEBUG[01-08|15:16:31.651] TCP listener up         addr=127.0.0.1:62678
        testlog.go:44: TRACE[01-08|15:16:31.652] Accepted connection     addr=127.0.0.1:62679

And after:

    === RUN   TestServerListen
    --- PASS: TestServerListen (0.00s)
        server.go:868: DEBUG[01-08|15:25:35.679] TCP listener up         addr=127.0.0.1:62712
        server.go:557: DEBUG[01-08|15:25:35.679] UDP listener up         addr=127.0.0.1:62712
        server.go:912: TRACE[01-08|15:25:35.680] Accepted connection     addr=127.0.0.1:62713

* internal/testlog: document use of t.Helper",FALSE,unsigned
4d663d57d663a342f05e690acb3f012e46010908,gary rong,garyrong0905@gmail.com,2020-01-08T13:08:56Z,gary rong,garyrong0905@gmail.com,2020-01-08T13:08:56Z,les: fix request serving metrics (#20507),FALSE,unsigned
8a63f7f504b752b3da127b9df8152bce54fcaae5,Felix Lange,fjl@twurst.com,2020-01-08T09:25:01Z,Felix Lange,fjl@twurst.com,2020-01-08T09:25:01Z,.travis.yml: use latest macOS 10.14 image (#20526),FALSE,unsigned
c49a4165d074c2d08c362cfe1dac835b6a3e1251,Guillaume Ballet,gballet@gmail.com,2020-01-07T17:19:21Z,Guillaume Ballet,gballet@gmail.com,2020-01-07T17:19:21Z,consensus/ethash: fix a typo and error message (#20503),FALSE,unsigned
a1bc0e3cb69d6080b884728a60d2f92392b4c392,Jonathan Gimeno,jgimeno@gmail.com,2020-01-07T17:12:27Z,Jonathan Gimeno,jgimeno@gmail.com,2020-01-07T17:12:27Z,eth: refactor creation of EthAPIBackend (#20476),FALSE,unsigned
a013f02df2329fafc08f23cd623df6afa7471d20,wangxiang,scottwangsxll@gmail.com,2020-01-07T17:08:22Z,wangxiang,scottwangsxll@gmail.com,2020-01-07T17:08:22Z,whisper/whisperv6: fix peer time.Ticker leak (#20520),FALSE,unsigned
50be790869a294b2cbce9727232b6350a9883a6e,Marius van der Wijden,m.vanderwijden@live.de,2020-01-07T17:06:44Z,Marius van der Wijden,m.vanderwijden@live.de,2020-01-07T17:06:44Z,README.md: Genoil fork has been discontinued (#20521),FALSE,unsigned
9e0f934e2b6ea28211d44e385ada14c8192622ad,Yole,007yuyue@gmail.com,2020-01-07T09:56:16Z,Yole,007yuyue@gmail.com,2020-01-07T09:56:16Z,"cmd/geth: update copyright year (#20512)

Update copyright from 2013-2019 to 2013-2020",FALSE,unsigned
4f7b7f84ae6bbb46001424f787dba93892dfc317,me020523,me020523@gmail.com,2020-01-07T09:31:20Z,me020523,me020523@gmail.com,2020-01-07T09:31:20Z,"add node.go unit test file node_test.go (#20028)

* add node.go unit test file node_test.go

* add node_test.go file license and rollback trie_test.go

* fix unused variable v

* trie: fix license year

Co-authored-by: Peter Szilagyi <peterke@gmail.com>",FALSE,unsigned
c6285e6437cd2d732721e170a5e4170af1328435,gary rong,garyrong0905@gmail.com,2020-01-07T09:24:21Z,gary rong,garyrong0905@gmail.com,2020-01-07T09:24:21Z,"les/checkpointoracle: move oracle into its own package (#20508)

* les: move the checkpoint oracle into its own package

It's first step of refactor LES package. LES package
basically can be divided into LES client and LES server.
However both sides will use checkpoint package for
status retrieval and verification. So this PR moves
checkpoint oracle into a separate package

* les: address comments",FALSE,unsigned
35f95aef6fecca68eb18035bc81ad7a4c712908f,Kumar Anirudha,mail@anirudha.dev,2020-01-07T09:08:33Z,Kumar Anirudha,mail@anirudha.dev,2020-01-07T09:08:33Z,"cmd/puppeth: change dashboard title to not use ""testnet"" (#20513)",FALSE,unsigned
7a509b47321a28e36f437170a3cc5c283ee7909d,Prince Sinha,sinhaprince013@gmail.com,2020-01-06T11:25:38Z,Prince Sinha,sinhaprince013@gmail.com,2020-01-06T11:25:38Z,"internal/ethapi: fix encoding of uncle headers and pending blocks (#20460)

Fixes #19024
Fixes #19332",FALSE,unsigned
433937fb42a1cb43fda247313797874e92d3c9fe,Guillaume Ballet,gballet@gmail.com,2020-01-06T11:07:21Z,Guillaume Ballet,gballet@gmail.com,2020-01-06T11:07:21Z,cmd/geth: fix forked exe leak in console tests (#20480),FALSE,unsigned
2eeb8dd27188f6500ae28576aa258ff0b4e4d3c0,Chris Pacia,ctpacia@gmail.com,2020-01-06T11:06:29Z,Chris Pacia,ctpacia@gmail.com,2020-01-06T11:06:29Z,"rpc: add DialWebsocketWithDialer (#20471)

This commit intents to replicate the DialHTTPWithClient function which allows
creating a RPC Client using a custom dialer but for websockets.

We introduce a new DialWebsocketWithDialer function which allows the caller
to instantiate a new websocket client using a custom dialer.",FALSE,unsigned
b7cf41e4b38812fafab43bb353b7637c4a75cc5f,Sylvain Laurent,s@6120.eu,2020-01-06T11:03:26Z,Sylvain Laurent,s@6120.eu,2020-01-06T11:03:26Z,accounts/abi: fix method constant flag for solidity 6.0 (#20482),FALSE,unsigned
3bb6815fc1ade61e85b7039cf2e08a0871bb47e4,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-12-25T01:06:00Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-12-25T01:06:00Z,les: do not disconnect another server (#20453),TRUE,valid
a67fe48b43bfaa750d264bab54c1ea1a15c2a8f7,Gerald Nash,me+github@aunyks.com,2019-12-20T12:19:01Z,Gerald Nash,me+github@aunyks.com,2019-12-20T12:19:01Z,Change file extension of the ./tests/fuzzers README (#20474),FALSE,unsigned
93b1171316d8f6e0252973eeaabf4cf8fbd9414d,Ilan Gitter,8359193+gitteri@users.noreply.github.com,2019-12-20T10:33:32Z,Ilan Gitter,8359193+gitteri@users.noreply.github.com,2019-12-20T10:33:32Z,"accounts/abi/backends/simulated: add more API methods (#5) (#20208)

* Add more functionality to the sim (#5)

* backends: implement more of ethclient in sim

* backends: add BlockByNumber to simulated backend

* backends: make simulated progress function agree with syncprogress interface for client

* backends: add more tests

* backends: add more comments

* backends: fix sim for index in tx and add tests

* backends: add lock back to estimategas

* backends: goimports

* backends: go ci lint

* Add more functionality to the sim (#5)

* backends: implement more of ethclient in sim

* backends: add BlockByNumber to simulated backend

* backends: make simulated progress function agree with syncprogress interface for client

* backends: add more tests

* backends: add more comments

* backends: fix sim for index in tx and add tests

* backends: add lock back to estimategas

* backends: goimports

* backends: go ci lint

* assert errs",FALSE,unsigned
6ae9dc15cc51310f33a011dcafab5739a6ceea93,Jeff Wentworth,jeff@curvegrid.com,2019-12-18T10:16:07Z,Jeff Wentworth,jeff@curvegrid.com,2019-12-18T10:16:07Z,"[#20266] Fix bugs decoding integers and fixed bytes in indexed event fields (#20269)

* fix parseTopics() and add tests

* remove printf

* add ParseTopicsIntoMap() tests

* fix FixedBytesTy

* fix int and fixed bytes

* golint topics_test.go",FALSE,unsigned
49cf000df7a5fad11323ed8e1186710c4034260d,Pawe? Bylica,chfast@gmail.com,2019-12-18T08:43:18Z,Pawe? Bylica,chfast@gmail.com,2019-12-18T08:43:18Z,"cmd/evm: Add --bench flag for benchmarking (#20330)

The --bench flag uses the testing.B to execute the EVM bytecode many times and get the average exeuction time out of it.",FALSE,unsigned
c4b7fdd27ed7ad44d4cc8ea953bae78efac536da,Ryan Schneider,ryanleeschneider@gmail.com,2019-12-17T11:10:15Z,Ryan Schneider,ryanleeschneider@gmail.com,2019-12-17T11:10:15Z,"eth, internal/web3ext: add optional first and last arguments to the  `admin_exportChain` RPC. (#20107)",FALSE,unsigned
275cd4988dbef4b81e856a6c6ae8cb12242e3976,Guillaume Ballet,gballet@gmail.com,2019-12-16T12:37:15Z,Guillaume Ballet,gballet@gmail.com,2019-12-16T12:37:15Z,"cmd/abigen: Sanitize vyper's combined json names (#20419)

* cmd/abigen: Sanitize vyper's combined json names

* Review feedback: handle full paths",TRUE,valid
f51cf573b5c602914d22f5a31c58378c5aa17ffd,Felix Lange,fjl@twurst.com,2019-12-12T21:25:12Z,Felix Lange,fjl@twurst.com,2019-12-12T21:25:12Z,cmd/devp2p: implement AWS Route53 enrtree deployer (#20446),TRUE,valid
191364c3507a87c72a49a68e7d4bc79773d61f47,Felix Lange,fjl@twurst.com,2019-12-12T09:15:36Z,Felix Lange,fjl@twurst.com,2019-12-12T09:15:36Z,"p2p/dnsdisc: add enode.Iterator API (#20437)

* p2p/dnsdisc: add support for enode.Iterator

This changes the dnsdisc.Client API to support the enode.Iterator
interface.

* p2p/dnsdisc: rate-limit DNS requests

* p2p/dnsdisc: preserve linked trees across root updates

This improves the way links are handled when the link root changes.
Previously, sync would simply remove all links from the current tree and
garbage-collect all unreachable trees before syncing the new list of
links.

This behavior isn't great in certain cases: Consider a structure where
trees A, B, and C reference each other and D links to A. If D's link
root changed, the sync code would first remove trees A, B and C, only to
re-sync them later when the link to A was found again.

The fix for this problem is to track the current set of links in each
clientTree and removing old links only AFTER all links are synced.

* p2p/dnsdisc: deflake iterator test

* cmd/devp2p: adapt dnsClient to new p2p/dnsdisc API

* p2p/dnsdisc: tiny comment fix",FALSE,unsigned
d90d1db609c8d77baa422d49bd371207c06b4711,Felix Lange,fjl@twurst.com,2019-12-10T11:39:14Z,Felix Lange,fjl@twurst.com,2019-12-10T11:39:14Z,eth/filters: remove use of event.TypeMux for pending logs (#20312),TRUE,valid
b8bc9b3d8e603ca6de70f5f6c38976514e1fb88e,Peter Szilagyi,peterke@gmail.com,2019-12-10T11:31:25Z,Peter Szilagyi,peterke@gmail.com,2019-12-10T11:31:25Z,"Merge pull request #20444 from MariusVanDerWijden/patch-4

core: removed old invalid comment",TRUE,valid
f383eaa102d11490a85c0a238f904e5d06b95178,Marius van der Wijden,m.vanderwijden@live.de,2019-12-10T10:50:16Z,Marius van der Wijden,m.vanderwijden@live.de,2019-12-10T10:50:16Z,core: removed old invalid comment,TRUE,valid
cecc7230c054dd1a4fc2783ad558bfa6e92062fe,Martin Holst Swende,martin@swende.se,2019-12-10T09:57:37Z,Martin Holst Swende,martin@swende.se,2019-12-10T09:57:37Z,"tests/fuzzers: fuzzbuzz fuzzers for keystore, rlp, trie, whisper  (#19910)

* fuzzers: fuzzers for keystore, rlp, trie, whisper (cred to @guidovranken)

* fuzzers: move fuzzers to testdata

* testdata/fuzzers: documentation

* testdata/fuzzers: corpus for rlp

* tests/fuzzers: fixup",FALSE,unsigned
4b40b5377b5069141cbb87026da96b079f393fff,Charing,pip1998@foxmail.com,2019-12-10T08:26:07Z,Charing,pip1998@foxmail.com,2019-12-10T08:26:07Z,"miner: add dependency for stress tests (#20436)

1.to build stress tests

Depends-On: 6269e5574c024bb82617b33f673550231b3a3b37",FALSE,unsigned
370cb95b7ff5990879a4f47fcc818be7d6366357,Peter Szilagyi,peterke@gmail.com,2019-12-06T09:53:25Z,Peter Szilagyi,peterke@gmail.com,2019-12-06T09:53:25Z,params: begin v1.9.10 release cycle,TRUE,valid
017449971e1e9e220efcd97d3313a0e27f47003b,Peter Szilagyi,peterke@gmail.com,2019-12-06T09:51:37Z,Peter Szilagyi,peterke@gmail.com,2019-12-06T09:51:37Z,params: release Geth v1.9.9,TRUE,valid
bc01593afbb2f0bdbf7f21adc790f161b2a8b41d,Martin Holst Swende,martin@swende.se,2019-12-06T09:36:40Z,Martin Holst Swende,martin@swende.se,2019-12-06T09:36:40Z,"consensus/ethash, params: eip-2384: bump difficulty bomb (#20347)

* consensus/ethash, params: implement eip-2384: bump difficulty bomb

* params: EIP 2384 compat checks

* consensus, params: add Muir Glacier block number (mainnet,ropsten) + official name

* core/forkid: forkid tests for muir glacier

* params/config: address review concerns

* params, core/forkid: review nitpicks

* cmd/geth,eth,les: add override option for muir glacier

* params: nit fix",FALSE,unsigned
c9dce0bfd769808f75aedbe119caa5f67be26b76,Marius van der Wijden,m.vanderwijden@live.de,2019-12-05T21:16:35Z,Marius van der Wijden,m.vanderwijden@live.de,2019-12-05T21:16:35Z,p2p/enode: remove data race in sliceIter (#20421),FALSE,unsigned
e78f631dfc51bddd02bfc2b05ae088fc028b1ae7,Peter Szilagyi,peterke@gmail.com,2019-12-05T09:38:41Z,Peter Szilagyi,peterke@gmail.com,2019-12-05T09:38:41Z,"Merge pull request #20428 from karalabe/cht-1.9.9

params: update CHTs for v1.9.9 release",TRUE,valid
6b6882f08b4b230fc6f740700d73b8cef049d6cb,Peter Szilagyi,peterke@gmail.com,2019-12-05T09:01:40Z,Peter Szilagyi,peterke@gmail.com,2019-12-05T09:01:40Z,params: update CHTs for v1.9.9 release,TRUE,valid
c2d65d34d5c6f27b8d1a52280964023a3eefd66e,Peter Szilagyi,peterke@gmail.com,2019-12-02T10:51:00Z,Peter Szilagyi,peterke@gmail.com,2019-12-02T10:51:00Z,"Merge pull request #20415 from karalabe/trie-dirty-cache-metrics

trie: track dirty cache metrics, track clean writes on commit",TRUE,valid
13ccf6016e8b71a6a80ff7e78ae84aad6ed08326,Peter Szilagyi,peterke@gmail.com,2019-12-02T10:14:44Z,Peter Szilagyi,peterke@gmail.com,2019-12-02T10:14:44Z,"trie: track dirty cache metrics, track clean writes on commit",TRUE,valid
7ce7c3967cf2c8ebf921fd90891a5105909e752c,Marius van der Wijden,m.vanderwijden@live.de,2019-12-02T09:29:25Z,Marius van der Wijden,m.vanderwijden@live.de,2019-12-02T09:29:25Z,accounts/abi/bind: fix destructive packing of *big.Int (#20412),FALSE,unsigned
fc7e0fe6c75f5c0015935eb49bde677a53be52be,gary rong,garyrong0905@gmail.com,2019-11-29T13:22:08Z,gary rong,garyrong0905@gmail.com,2019-11-29T13:22:08Z,"core, miner: remove PostChainEvents (#19396)

This change:

- removes the PostChainEvents method on core.BlockChain.
- sorts 'removed log' events by block number.
- fire the NewChainHead event if we inject a canonical block into the chain
  even if the entire insertion is not successful.
- guarantees correct event ordering in all cases.",FALSE,unsigned
5cc6e7a71e6d7677f4c075e5cc98e3d86a8cca08,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:47:14Z,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:47:14Z,accounts/usbwallet: fix staticcheck warnings (#20372),FALSE,unsigned
d556d39a2cef8406de4c6deb5e558761c0b5af5d,xinluyin,31590468+xinluyin@users.noreply.github.com,2019-11-29T10:46:12Z,xinluyin,31590468+xinluyin@users.noreply.github.com,2019-11-29T10:46:12Z,internal/web3ext: add debug_accountRange (#20410),FALSE,unsigned
54d332e1db268803223c2d8ea594b719a820f1a4,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:42:53Z,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:42:53Z,accounts/scwallet: fix staticcheck warnings (#20370),FALSE,unsigned
e0bf5f0ccbeed89de6fe7611045787e072b1ab32,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:40:02Z,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:40:02Z,internal: fix staticcheck warnings (#20380),FALSE,unsigned
1ff3d7c2d48d2625c5c96a6e785332ce5fdeea60,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:38:34Z,Guillaume Ballet,gballet@gmail.com,2019-11-29T10:38:34Z,"cmd/faucet, cmd/geth: fix staticcheck warnings (#20374)",FALSE,unsigned
08611cfd75b503d8489e0640780637d49d2be7eb,gary rong,garyrong0905@gmail.com,2019-11-28T10:47:35Z,gary rong,garyrong0905@gmail.com,2019-11-28T10:47:35Z,trie: remove dead code (#20405),FALSE,unsigned
9a529d64d14f8ebf677e69cf1b5de836ca215049,Guillaume Ballet,gballet@gmail.com,2019-11-28T09:53:06Z,Guillaume Ballet,gballet@gmail.com,2019-11-28T09:53:06Z,log: fix staticcheck warnings (#20388),FALSE,unsigned
a91b704b013aaabb3bfc796f5a3d8c940dfb7f05,Felix Lange,fjl@twurst.com,2019-11-28T09:51:57Z,Felix Lange,fjl@twurst.com,2019-11-28T09:51:57Z,"consensus/ethash: refactor remote sealer (#20335)

The original idea behind this change was to remove a use of the
deprecated CancelRequest method. Simply removing it would've been an
option, but I couldn't resist and did a bit of a refactoring instead.

All remote sealing code was contained in a single giant function. Remote
sealing is now extracted into its own object, remoteSealer.",TRUE,valid
c9f28ca8e5aff171d1602725a78fe47b2fa27bb1,Peter Szilagyi,peterke@gmail.com,2019-11-27T13:08:34Z,Peter Szilagyi,peterke@gmail.com,2019-11-27T13:08:34Z,"go: update fastcache to 1.5.3 (#20404)

deps: update fastcache to 1.5.3",TRUE,valid
58e33d9e5ae25de30cd6be7a40372f1ba05db9ba,Peter Szilagyi,peterke@gmail.com,2019-11-27T13:05:58Z,Peter Szilagyi,peterke@gmail.com,2019-11-27T13:05:58Z,"Merge pull request #20403 from karalabe/fix-freezer-reinit

core/rawdb: fix reinit regression caused by the hash check PR",TRUE,valid
7800ba978d4ba71422755ed3e30d12a4aef33381,Martin Holst Swende,martin@swende.se,2019-11-27T12:46:07Z,Martin Holst Swende,martin@swende.se,2019-11-27T12:46:07Z,deps: update fastcache to 1.5.3,TRUE,valid
717f8a4e8f768e2c3a34067f4a55f9c8e3267f3f,Peter Szilagyi,peterke@gmail.com,2019-11-27T12:41:47Z,Peter Szilagyi,peterke@gmail.com,2019-11-27T12:41:47Z,core/rawdb: fix reinit regression caused by the hash check PR,TRUE,valid
7b189d6f1f7eedf46c6607901af291855b81112b,Guillaume Ballet,gballet@gmail.com,2019-11-27T08:50:30Z,Guillaume Ballet,gballet@gmail.com,2019-11-27T08:50:30Z,"core: fix staticcheck warnings (#20384)

* core: fix staticcheck warnings

* fix goimports",TRUE,valid
c4844e9ee211f34d8023b0de8221d03a63817395,Guillaume Ballet,gballet@gmail.com,2019-11-27T08:49:41Z,Guillaume Ballet,gballet@gmail.com,2019-11-27T08:49:41Z,les: fix staticcheck warnings (#20371),TRUE,valid
23c8c741318cc9f7baba3d3555c1c9385494714e,zaccoding,zaccoding725@gmail.com,2019-11-26T10:46:39Z,zaccoding,zaccoding725@gmail.com,2019-11-26T10:46:39Z,cmd: fix command help messages in modules (#20203),FALSE,unsigned
0676320169a27af44f1fea522853abf3522aeede,Peter Szilagyi,peterke@gmail.com,2019-11-26T10:21:11Z,Peter Szilagyi,peterke@gmail.com,2019-11-26T10:21:11Z,params: begin v1.9.9 release cycle,TRUE,valid
d62e9b285777c036c108b89fac0c78f7855ba314,Peter Szilagyi,peterke@gmail.com,2019-11-26T10:20:22Z,Peter Szilagyi,peterke@gmail.com,2019-11-26T10:20:22Z,params: release go-ethereum v1.9.8,TRUE,valid
878e35bfde7c1911857622ed7fd19ad9827114f9,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-26T10:17:15Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-26T10:17:15Z,les: fix clientInfo deadlock (#20395),FALSE,unsigned
2e98706a997f09dff7d63d79ae860c256f56ba42,Felix Lange,fjl@twurst.com,2019-11-26T10:14:43Z,Felix Lange,fjl@twurst.com,2019-11-26T10:14:43Z,"p2p/discover: slow down lookups on empty table (#20389)

* p2p/discover: slow down lookups on empty table

* p2p/discover: wake from slowdown sleep when table is closed",FALSE,unsigned
8c1e8de839fc0ee10376e2b476bfa90aad4caf6b,Guillaume Ballet,gballet@gmail.com,2019-11-25T13:39:55Z,Guillaume Ballet,gballet@gmail.com,2019-11-25T13:39:55Z,"accounts/keystore: fix staticcheck warnings (#20373)

* accounts/keystore: fix staticcheck warnings

* review feedback",TRUE,valid
b26eedf9e9ff0ca414d35372b29d37874c208eca,gary rong,garyrong0905@gmail.com,2019-11-25T13:03:22Z,gary rong,garyrong0905@gmail.com,2019-11-25T13:03:22Z,accounts/abi/bind: avoid reclaring structs (#20381),FALSE,unsigned
44b41641f8220fe79e43461356c147cc3cc72380,Felix Lange,fjl@twurst.com,2019-11-25T12:41:53Z,Felix Lange,fjl@twurst.com,2019-11-25T12:41:53Z,"rlp: fix staticcheck warnings (#20368)

* rlp: fix staticcheck warnings

* rlp: fix ExampleDecode test",FALSE,unsigned
9ef90dbf30dbf2f1ff935496e3577e4acd49b09a,Peter Szilagyi,peterke@gmail.com,2019-11-25T11:51:22Z,Peter Szilagyi,peterke@gmail.com,2019-11-25T11:51:22Z,"Merge pull request #20385 from etclabscore/fix/version-cmd-networkid

cmd/geth: remove network id from version cmd",TRUE,valid
d9d2a4eef929b9f0e15ccbfd0850dd46c9bf9b66,meows,b5c6@protonmail.com,2019-11-25T11:17:45Z,meows,b5c6@protonmail.com,2019-11-25T11:17:45Z,"cmd/geth: remove network id from version cmd

It was reflective only of the Default setting,
and not chain aware.",TRUE,valid
9d67222f4ead6273ffbfbcef2d7711132fcf50e2,gary rong,garyrong0905@gmail.com,2019-11-25T08:58:15Z,gary rong,garyrong0905@gmail.com,2019-11-25T08:58:15Z,trie: replace bigcache with fastcache (#19971),FALSE,unsigned
f5a68a40bfba218d4be252488826e1d46778fd01,Guillaume Ballet,gballet@gmail.com,2019-11-24T20:06:06Z,Guillaume Ballet,gballet@gmail.com,2019-11-24T20:06:06Z,eth/tracers: fix staticcheck warnings (#20379),FALSE,unsigned
f06ae5ca6a9fd275fc53eeb3de75388d55b4a479,Guillaume Ballet,gballet@gmail.com,2019-11-24T19:46:34Z,Guillaume Ballet,gballet@gmail.com,2019-11-24T19:46:34Z,miner: fix staticcheck warnings (#20375),FALSE,unsigned
3a0480e07d4eca0adcc9e2e989e969f14aaf917c,Michael Forney,mforney@mforney.org,2019-11-23T11:52:17Z,Michael Forney,mforney@mforney.org,2019-11-23T11:52:17Z,"core/asm: allow numbers in labels (#20362)

Numbers were already allowed when creating labels, just not when
referencing them.",FALSE,unsigned
5d21667587c4bc2479d36a13e2b15dd5c6eb8672,Guillaume Ballet,gballet@gmail.com,2019-11-23T11:51:37Z,Guillaume Ballet,gballet@gmail.com,2019-11-23T11:51:37Z,"tests, signer: remove staticcheck warnings (#20364)",FALSE,unsigned
fdff182f1150a58fbe59fc26e3cb479531fbc67c,Felix Lange,fjl@twurst.com,2019-11-22T16:02:13Z,Felix Lange,fjl@twurst.com,2019-11-22T16:02:13Z,"p2p/discv5: add deprecation warning and remove unused code (#20367)

* p2p/discv5: add deprecation warning and remove unused code

* p2p/discv5: remove unused variables",FALSE,unsigned
0abcf03fde4508d5ee1be2df2ef4235aafd637d9,Felix Lange,fjl@twurst.com,2019-11-22T15:24:48Z,Felix Lange,fjl@twurst.com,2019-11-22T15:24:48Z,trie: remove unused code (#20366),FALSE,unsigned
58f2ce8671fcc5121fc696b6962ba826fcf8a7f0,Guillaume Ballet,gballet@gmail.com,2019-11-22T15:04:35Z,Guillaume Ballet,gballet@gmail.com,2019-11-22T15:04:35Z,metrics: fix issues reported by staticcheck (#20365),FALSE,unsigned
dd21f079e83710795bc9731a5a9eac41a8858004,Felix Lange,fjl@twurst.com,2019-11-22T14:56:05Z,Felix Lange,fjl@twurst.com,2019-11-22T14:56:05Z,"core/state: fix staticcheck warnings (#20357)

Also remove dependency on gopkg.in/check.v1 in tests.",TRUE,valid
36a684ca1efe15efbfefc2f0b22abeb4c0039e5a,Felix Lange,fjl@twurst.com,2019-11-21T21:22:47Z,Felix Lange,fjl@twurst.com,2019-11-21T21:22:47Z,"accounts/abi: fix staticcheck warnings (#20358)

* accounts/abi: fix staticcheck warnings

* accounts/abi: restore unused field for test",FALSE,unsigned
bcc12347783826771756ade39c697fa551f5ea0f,Felix Lange,fjl@twurst.com,2019-11-21T18:30:28Z,Felix Lange,fjl@twurst.com,2019-11-21T18:30:28Z,accounts/abi/bind/backends: remove unused assignment (#20359),FALSE,unsigned
c1db636fb3e382a62188d7b1247c48c4d4892c38,Peter Szilagyi,peterke@gmail.com,2019-11-21T16:56:10Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T16:56:10Z,"Merge pull request #20360 from karalabe/ppa-fix-cigo-clean

build: skip go clean on PPA, messes with the module trick",TRUE,valid
5b558ad936c00e468851b2fc46b136b059495675,Peter Szilagyi,peterke@gmail.com,2019-11-21T16:18:59Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T16:18:59Z,"build: skip go clean on PPA, messes with the module trick",TRUE,valid
b6d4f6b66e99c08f419e6a469259cbde1c8b0582,Felix Lange,fjl@twurst.com,2019-11-21T14:35:22Z,Felix Lange,fjl@twurst.com,2019-11-21T14:35:22Z,core/types: remove BlockBy sorting code (#20355),FALSE,unsigned
0ec5ab417559ac3399a73f76219fce043dfc0ef9,Felix Lange,fjl@twurst.com,2019-11-21T14:34:28Z,Felix Lange,fjl@twurst.com,2019-11-21T14:34:28Z,common: improve GraphQL error messages (#20354),FALSE,unsigned
07541004649cdb209b4d72376b087984a4af60ad,Peter Szilagyi,peterke@gmail.com,2019-11-21T14:24:07Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T14:24:07Z,"Merge pull request #20356 from karalabe/ppa-fix-cigo

build: pull in ci.go dependencies for the PPA builder",TRUE,valid
475ae8bd93ccc9189241b6300c535aa162245dbe,Peter Szilagyi,peterke@gmail.com,2019-11-21T14:14:31Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T14:14:31Z,build: pull in ci.go dependencies for the PPA builder,TRUE,valid
89ab8a74c0910f50fba34c5c49cec3b07654e4ec,Felix Lange,fjl@twurst.com,2019-11-21T13:51:53Z,Felix Lange,fjl@twurst.com,2019-11-21T13:51:53Z,"go.mod: switch to Go modules (#20311)

* go.mod, vendor: switch to Go modules

* travis: explicitly enable go modules in Go 1.11 and 1.12

* accounts/abi/bind: switch binding test to go modules

* travis, build: aggregate and upload go mod dependencies for PPA

* go.mod: tidy up the modules to avoid xgo writes to go.sum

* build, internal/build: drop own file/folder copier

* travis: fake build ppa only for go module dependencies

* mobile: fix CopyFile switch to package cp

* build, travis: use ephemeral debsrc GOPATH to get mod deps",TRUE,valid
72e62efc76fd4d69d376ea244a409261b6983edc,Felix Lange,fjl@twurst.com,2019-11-21T13:51:25Z,Felix Lange,fjl@twurst.com,2019-11-21T13:51:25Z,common/hexutil: improve GraphQL error messages (#20353),FALSE,unsigned
f56f969dd3d6bda9ed80fdb028cec8b2092d6020,Peter Szilagyi,peterke@gmail.com,2019-11-21T13:08:10Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T13:08:10Z,"Merge pull request #20350 from holiman/puppeth_ssh

cmd/puppeth: make ssh prompt more user-friendly",TRUE,valid
216ff5a9522536f637c4e12edf458120eb83cfd0,Martin Holst Swende,martin@swende.se,2019-11-21T10:04:31Z,Martin Holst Swende,martin@swende.se,2019-11-21T10:04:31Z,cmd/puppeth: make ssh prompt more user-friendly,TRUE,valid
7be89a7a01ea0aab3293ba7ebfa8280b02331717,Peter Szilagyi,peterke@gmail.com,2019-11-21T11:34:33Z,Peter Szilagyi,peterke@gmail.com,2019-11-21T11:34:33Z,"Merge pull request #20339 from etclabscore/fix/cmd-puppeth-blocknonce-type

cmd/puppeth: x-spec nonce data type, use types.BlockNonce",TRUE,valid
59177bc8c09f60772b2445ad4fc28a30ce6ab80d,meows,b5c6@protonmail.com,2019-11-20T15:26:31Z,meows,b5c6@protonmail.com,2019-11-20T15:26:31Z,"cmd/puppeth: x-spec nonce data type, use types.BlockNonce

Refactors to use existing BlockNonce type instead of
hand-rolled bytes logic.",TRUE,valid
c5b46a79c169dfd24575ab75479eac471b6fbc82,Peter Szilagyi,peterke@gmail.com,2019-11-20T14:24:03Z,Peter Szilagyi,peterke@gmail.com,2019-11-20T14:24:03Z,"Merge pull request #20338 from etclabscore/feat/statetests-dedupe-walk-refactor

tests: refactor TestState to dedupe walk callback",TRUE,valid
b4bc3b3c3586de69267b766d18b4ee2c762bcdc0,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-20T14:08:07Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-20T14:08:07Z,tests: enable TransactionTests Istanbul case (#20337),FALSE,unsigned
75e029db8b18f3ef020110e7947a5f42e417c35b,Peter Szilagyi,peterke@gmail.com,2019-11-20T12:56:07Z,Peter Szilagyi,peterke@gmail.com,2019-11-20T12:56:07Z,"build, travis: use ephemeral debsrc GOPATH to get mod deps",TRUE,valid
b8ced9e00be1e0f7f774b154f19b58643b04df3c,meows,b5c6@protonmail.com,2019-11-20T12:54:18Z,meows,b5c6@protonmail.com,2019-11-20T12:54:18Z,"tests: refactor TestState to dedupe walk callback

Minor refactoring.",TRUE,valid
f8790b94826f4ae649434b5f5f2806d336bd4651,Peter Szilagyi,peterke@gmail.com,2019-11-18T20:06:28Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T20:06:28Z,mobile: fix CopyFile switch to package cp,TRUE,valid
8bd5bb891874d02027aea8e87c88481e11adc718,Peter Szilagyi,peterke@gmail.com,2019-11-18T18:39:25Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T18:39:25Z,travis: fake build ppa only for go module dependencies,TRUE,valid
a7dfaa0bda37a97d5a6286be1e08ef54ee90a833,Peter Szilagyi,peterke@gmail.com,2019-11-18T18:29:01Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T18:29:01Z,"build, internal/build: drop own file/folder copier",TRUE,valid
e1dcea8bf03bf206df1cbbf00778e40d333ff13c,Peter Szilagyi,peterke@gmail.com,2019-11-18T17:54:13Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T17:54:13Z,go.mod: tidy up the modules to avoid xgo writes to go.sum,TRUE,valid
b3d6304f1e1ad7ee1d0917c8b208fd067bc3ffb6,Peter Szilagyi,peterke@gmail.com,2019-11-18T17:18:50Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T17:18:50Z,"travis, build: aggregate and upload go mod dependencies for PPA",TRUE,valid
f4ec85486a1532594c5009e3c0b9903cbb93e844,Peter Szilagyi,peterke@gmail.com,2019-11-18T13:39:39Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T13:39:39Z,accounts/abi/bind: switch binding test to go modules,TRUE,valid
dfdb204b48bae669a6afd0fd76bd4e67eef86de1,Peter Szilagyi,peterke@gmail.com,2019-11-18T12:47:17Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T12:47:17Z,travis: explicitly enable go modules in Go 1.11 and 1.12,TRUE,valid
15fb780de68acde58417224943aaff9367ecdd0c,Peter Szilagyi,peterke@gmail.com,2019-11-18T12:22:36Z,Peter Szilagyi,peterke@gmail.com,2019-11-18T12:22:36Z,"go.mod, vendor: switch to Go modules",TRUE,valid
3a4a3d080bd6c80d7186e7a32030322eb8d0b138,Peter Szilagyi,peterke@gmail.com,2019-11-20T10:49:13Z,Peter Szilagyi,peterke@gmail.com,2019-11-20T10:49:13Z,"Merge pull request #20261 from holiman/less_querying

internal/ethapi: don't query wallets at every execution of gas estimation",TRUE,valid
b7ba944e8879583a40771446dccb6b988f72fa31,gary rong,garyrong0905@gmail.com,2019-11-20T10:46:35Z,gary rong,garyrong0905@gmail.com,2019-11-20T10:46:35Z,cmd/puppeth: update chain spec of parity (#20241),FALSE,unsigned
9b59c75405282d5628d4f416160b8984cd76a168,gary rong,garyrong0905@gmail.com,2019-11-20T10:36:41Z,gary rong,garyrong0905@gmail.com,2019-11-20T10:36:41Z,"miner: fix data race in tests (#20310)

* miner: fix data race in tests

miner: fix linter

* miner: address comment",FALSE,unsigned
f71e85b8e267641cc4f7b9ce7305726403e78385,Felix Lange,fjl@twurst.com,2019-11-20T08:53:01Z,Felix Lange,fjl@twurst.com,2019-11-20T08:53:01Z,core: fix staticcheck warnings (#20323),FALSE,unsigned
8008c5b1fa99c8582791afbdedaf4a54eb59260d,Felix Lange,fjl@twurst.com,2019-11-20T08:06:21Z,Felix Lange,fjl@twurst.com,2019-11-20T08:06:21Z,"rpc: remove 'exported or builtin' restriction for parameters (#20332)

* rpc: remove 'exported or builtin' restriction for parameters

There is no technial reason for this restriction because package reflect
can create values of any type. Requiring parameters and return values to
be exported causes a lot of noise in package exports.

* rpc: fix staticcheck warnings",FALSE,unsigned
9c6cf960b46fc71d62ebb5c2d7a1b32634afc2e4,Felix Lange,fjl@twurst.com,2019-11-19T17:22:04Z,Felix Lange,fjl@twurst.com,2019-11-19T17:22:04Z,"internal/web3ext, les: update clique JS and make it work with the light client (#20318)

Also fix the input formatter on clique_getSnapshot and clique_getSigners
so that integers as well as hex number strings are accepted.",TRUE,valid
df206d25138078ffda04764412b248eaf4c4e9ba,Felix Lange,fjl@twurst.com,2019-11-19T16:16:42Z,Felix Lange,fjl@twurst.com,2019-11-19T16:16:42Z,p2p/simulations: fix staticcheck warnings (#20322),TRUE,valid
9e8cc00b733a505c2815b58d94315298371579cb,Felix Lange,fjl@twurst.com,2019-11-19T16:16:08Z,Felix Lange,fjl@twurst.com,2019-11-19T16:16:08Z,p2p: remove unused code (#20325),TRUE,valid
ac5e28ea382f46bf5744b62c3cc73436c8176850,Felix Lange,fjl@twurst.com,2019-11-19T16:14:00Z,Felix Lange,fjl@twurst.com,2019-11-19T16:14:00Z,whisper/whisperv6: fix staticcheck warnings (#20328),TRUE,valid
3b0f3483c4c17cfc95fb27245f8db994d3341070,Guillaume Ballet,gballet@gmail.com,2019-11-19T16:13:42Z,Guillaume Ballet,gballet@gmail.com,2019-11-19T16:13:42Z,.github: remove 'nonsense' from CODEOWNERS (#20329),FALSE,unsigned
7f70a7010632b0982cc8b0ad1559148ab07da6e9,Felix Lange,fjl@twurst.com,2019-11-19T14:00:32Z,Felix Lange,fjl@twurst.com,2019-11-19T14:00:32Z,event: remove unused field 'closed' (#20324),FALSE,unsigned
94e825098351e4738e607ca62f7a7ac1228d148f,Felix Lange,fjl@twurst.com,2019-11-19T13:55:48Z,Felix Lange,fjl@twurst.com,2019-11-19T13:55:48Z,cmd/wnode: remove uses of common.ToHex (#20327),FALSE,unsigned
c013192ba7683741b33ad3f713c0b83d0a619b31,Felix Lange,fjl@twurst.com,2019-11-19T13:53:26Z,Felix Lange,fjl@twurst.com,2019-11-19T13:53:26Z,ethclient: remove use of common.ToHex (#20326),FALSE,unsigned
0b6338321f0198cc32734ec2e14cbd2f0f1238fd,Guillaume Ballet,gballet@gmail.com,2019-11-19T12:57:05Z,Guillaume Ballet,gballet@gmail.com,2019-11-19T12:57:05Z,travis: deactivate arm build during push (#20321),FALSE,unsigned
b9c90c5581934454aa71af5b4b668c37b67d92fc,gary rong,garyrong0905@gmail.com,2019-11-19T10:32:57Z,gary rong,garyrong0905@gmail.com,2019-11-19T10:32:57Z,"core/rawdb: check hash before return data from ancient db (#20195)

* core/rawdb: check hash before return data from ancient db

* core/rawdb: fix lint

* core/rawdb: calculate the hash in the fly",FALSE,unsigned
5fefe39ba5797538d3001cf9045ad730425eb5ca,Felix Lange,fjl@twurst.com,2019-11-19T09:17:41Z,Felix Lange,fjl@twurst.com,2019-11-19T09:17:41Z,p2p/netutil: fix staticcheck warning (#20315),FALSE,unsigned
dfe891270a7edc1733af53eb7c35ec7e5b8ae36a,Felix Lange,fjl@twurst.com,2019-11-19T09:16:34Z,Felix Lange,fjl@twurst.com,2019-11-19T09:16:34Z,"cmd/ethkey: fix file permissions in changepassword command (#20313)

Found by staticcheck.",FALSE,unsigned
c5c5e0dbe8802b6e8dbb7307af98a209cbbdea87,Felix Lange,fjl@twurst.com,2019-11-18T17:14:59Z,Felix Lange,fjl@twurst.com,2019-11-18T17:14:59Z,"consensus/clique: fix struct tags for status API (#20316)

Also unexport the status struct.",TRUE,valid
3f4a875bf6a74defd6e5e5a9cf121a5adc6e6c86,Martin Holst Swende,martin@swende.se,2019-11-18T16:03:57Z,Martin Holst Swende,martin@swende.se,2019-11-18T16:03:57Z,"consensus/clique: add clique_status API method (#20103)

This PR introduces clique_status which gives info about the health of
the clique network.

It's currently a bit PITA to find out how a clique network is
performing, and it can easily happen that sealers drop off -- and
everything is 'fine' until one more signer drops off, and the network
suddenly halts.

The new method provides the following stats:

- Which signers are currently active, and have signed blocks in the last
  N (set to 64) blocks?
- How many blocks has each signer signed?
- What is the difficulty in the last N blocks, compared to the
  theoretical maximum?",FALSE,unsigned
a3d263dd3aa5e2fa80948bc0a1de2f0e4c57084e,Felix Lange,fjl@twurst.com,2019-11-18T15:38:54Z,Felix Lange,fjl@twurst.com,2019-11-18T15:38:54Z,cmd/clef: fix staticcheck warnings (#20314),TRUE,valid
190fb8180a62c2372db60e2ffe70363f079b41d6,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-18T14:48:20Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-18T14:48:20Z,"build: add test cmd flag -v for verbose logs (#20298)

Adds flags akin to -coverage flag enabling the test runner
to use go test's -v flag, signaling verbose test log output.",FALSE,unsigned
b02afb6b3d1befaba28b84c64c9c6f7f62ffdc74,Guillaume Ballet,gballet@gmail.com,2019-11-18T14:34:17Z,Guillaume Ballet,gballet@gmail.com,2019-11-18T14:34:17Z,travis: use travis_wait for both install and build (#20309),FALSE,unsigned
422604b4383ddc59f2fe610a75b0f9c40e38f3fa,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-18T11:42:49Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-18T11:42:49Z,les: rename UpdateBalance to AddBalance and simplify return format (#20304),FALSE,unsigned
57d697629de6f982d69f2b33c9e169bdc12109b9,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-18T09:41:49Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-18T09:41:49Z,"core: s/isEIP155/isHomestead/g (fix IntrinsicGas signature var name) (#20300)

* core: s/isEIP155/isEIP2/ (fix)

This signature variable name reflects a spec'd change
in gas cost for creating contracts as documented in EIP2 (Homestead HF).

https://github.com/ethereum/EIPs/blob/master/EIPS/eip-2.md#specification

* core: s/isEIP2/sIsHomestead/g

Use isHomestead since Homestead is what the caller
and rest of the code uses.",FALSE,unsigned
11d09fd3baaf0a967521afd16a186cd31aef9fcb,Guillaume Ballet,gballet@gmail.com,2019-11-18T08:52:12Z,Guillaume Ballet,gballet@gmail.com,2019-11-18T08:52:12Z,"travis: remove traces and use travis_wait in ARM build (#20296)

* travis: remove debug traces

* travis: Add travis_wait to the test run

* travis: increase travis_wait time",FALSE,unsigned
689486449d0d3af3257139046aec810572e1604d,Felix Lange,fjl@twurst.com,2019-11-18T08:49:18Z,Felix Lange,fjl@twurst.com,2019-11-18T08:49:18Z,"build: use golangci-lint (#20295)

* build: use golangci-lint

This changes build/ci.go to download and run golangci-lint instead
of gometalinter.

* core/state: fix unnecessary conversion

* p2p/simulations: fix lock copying (found by go vet)

* signer/core: fix unnecessary conversions

* crypto/ecies: remove unused function cmpPublic

* core/rawdb: remove unused function print

* core/state: remove unused function xTestFuzzCutter

* core/vm: disable TestWriteExpectedValues in a different way

* core/forkid: remove unused function checksum

* les: remove unused type proofsData

* cmd/utils: remove unused functions prefixedNames, prefixFor

* crypto/bn256: run goimports

* p2p/nat: fix goimports lint issue

* cmd/clef: avoid using unkeyed struct fields

* les: cancel context in testRequest

* rlp: delete unreachable code

* core: gofmt

* internal/build: simplify DownloadFile for Go 1.11 compatibility

* build: remove go test --short flag

* .travis.yml: disable build cache

* whisper/whisperv6: fix ineffectual assignment in TestWhisperIdentityManagement

* .golangci.yml: enable goconst and ineffassign linters

* build: print message when there are no lint issues

* internal/build: refactor download a bit",FALSE,unsigned
7c4a4eb58a3d36e7bcef450308017925322525ca,Felix Lange,fjl@twurst.com,2019-11-18T08:40:59Z,Felix Lange,fjl@twurst.com,2019-11-18T08:40:59Z,"rpc, p2p/simulations: use github.com/gorilla/websocket (#20289)

* rpc: improve codec abstraction

rpc.ServerCodec is an opaque interface. There was only one way to get a
codec using existing APIs: rpc.NewJSONCodec. This change exports
newCodec (as NewFuncCodec) and NewJSONCodec (as NewCodec). It also makes
all codec methods non-public to avoid showing internals in godoc.

While here, remove codec options in tests because they are not
supported anymore.

* p2p/simulations: use github.com/gorilla/websocket

This package was the last remaining user of golang.org/x/net/websocket.
Migrating to the new library wasn't straightforward because it is no
longer possible to treat WebSocket connections as a net.Conn.

* vendor: delete golang.org/x/net/websocket

* rpc: fix godoc comments and run gofmt",FALSE,unsigned
9e71f55bfab91a26f5cfc06f0a4e48839b25f249,Michael Forney,mforney@mforney.org,2019-11-17T14:45:54Z,Michael Forney,mforney@mforney.org,2019-11-17T14:45:54Z,"cmd/evm: Allow loading input from file (#20273)

Make it possible to load input from a file. Simlar to `--code` / `--codefile`, have `--input`/`--inputfile`.",FALSE,unsigned
51c3290beedac6b66b2e6f41cde9336c6a292a15,Martin Holst Swende,martin@swende.se,2019-11-11T11:12:19Z,Martin Holst Swende,martin@swende.se,2019-11-11T11:12:19Z,internal/ethapi: don't query wallets at every execution of gas estimation,TRUE,valid
738b51ae31c48a598b7c5bad37c054976a41025f,nebojsa94,nebojsa94@users.noreply.github.com,2019-11-15T08:52:33Z,nebojsa94,nebojsa94@users.noreply.github.com,2019-11-15T08:52:33Z,core/vm: fix tracer interface parameter name (#20294),FALSE,unsigned
f03b2db7db123a569672b0caed5c1cd735c72ba7,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-14T21:05:32Z,meowsbits,45600330+meowsbits@users.noreply.github.com,2019-11-14T21:05:32Z,params: finish sentence in comment (#20291),FALSE,unsigned
49d1a032da98ac5c61cd42d6e2d3de2145b2f67d,Guillaume Ballet,gballet@gmail.com,2019-11-14T13:42:23Z,Guillaume Ballet,gballet@gmail.com,2019-11-14T13:42:23Z,build: gather info to investigate why builds fail on ARM (#20281),FALSE,unsigned
765fe446cf392f721cf9b962b3b7b811c5aa23d1,Guillaume Ballet,gballet@gmail.com,2019-11-14T09:09:16Z,Guillaume Ballet,gballet@gmail.com,2019-11-14T09:09:16Z,whisper/whisperv6: fix staticcheck issues (#20288),FALSE,unsigned
afe0b65405e9e0ad2dadc2ed6e35cd46d41686d5,Felix Lange,fjl@twurst.com,2019-11-14T09:04:16Z,Felix Lange,fjl@twurst.com,2019-11-14T09:04:16Z,"dashboard: remove the dashboard (#20279)

This removes the dashboard project. The dashboard was an experimental
browser UI for geth which displayed metrics and chain information in
real time. We are removing it because it has marginal utility and nobody
on the team can maintain it.

Removing the dashboard removes a lot of dependency code and shaves
6 MB off the geth binary size.",TRUE,valid
987648b0ade10a2e64f18fae616a2277eef2a3c2,Felix Lange,fjl@twurst.com,2019-11-14T08:05:17Z,Felix Lange,fjl@twurst.com,2019-11-14T08:05:17Z,"cmd/faucet: use github.com/gorilla/websocket (#20283)

golang.org/x/net/websocket is unmaintained, and we have already
switched to using github.com/gorilla/websocket for package rpc.",FALSE,unsigned
9504c5c360f5aa443f20008f7e9da7528caab8bf,Jorropo,jorropo.pgm@gmail.com,2019-11-14T08:03:41Z,Jorropo,jorropo.pgm@gmail.com,2019-11-14T08:03:41Z,rpc: fix typo example code (#20284),FALSE,unsigned
f8a95d996fbe66e460747c963bf30c59eb49021c,gary rong,garyrong0905@gmail.com,2019-11-14T07:26:10Z,gary rong,garyrong0905@gmail.com,2019-11-14T07:26:10Z,"accounts/abi/bind, cmd/abigen: implement alias for abigen (#20244)

* accounts/abi/bind, cmd/abigen: implement alias for abigen

* accounts/abi/bind: minor fixes

* accounts/abi/bind: address comments

* cmd/abigen: address comments

* accounts/abi/bind: print error log when identifier collision

* accounts/abi/bind: address comments

* accounts/abi/bind: address comment",FALSE,unsigned
bf5c6b29faa2ed863ef48903321b2ce362ed6f83,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-13T22:47:03Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-11-13T22:47:03Z,"les: implement server priority API (#20070)

This PR implements the LES server RPC API. Methods for server
capacity, client balance and client priority management are provided.",FALSE,unsigned
22e3bbbf0aa711fcab3876ac1a34b8cdff8a0ccd,Guillaume Ballet,gballet@gmail.com,2019-11-13T11:40:50Z,Guillaume Ballet,gballet@gmail.com,2019-11-13T11:40:50Z," miner: increase worker test timeout (#20268)

TestEmptyWork* occasionally fails due to timeout. Increase the timeout.",FALSE,unsigned
4ea9b62b5ce396c5609c100b8b2c05f11d1d7fac,Kurkó Mihály,kurkomisi@users.noreply.github.com,2019-11-13T11:13:13Z,Kurkó Mihály,kurkomisi@users.noreply.github.com,2019-11-13T11:13:13Z," dashboard: send current block to the dashboard client (#19762)

This adds all dashboard changes from the last couple months.
We're about to remove the dashboard, but decided that we should
get all the recent work in first in case anyone wants to pick up this
project later on.

* cmd, dashboard, eth, p2p: send peer info to the dashboard
* dashboard: update npm packages, improve UI, rebase
* dashboard, p2p: remove println, change doc
* cmd, dashboard, eth, p2p: cleanup after review
* dashboard: send current block to the dashboard client",FALSE,unsigned
6f1a600f6c8be05252d3f313dccbca9de918010a,Rick,rick.no@groundx.xyz,2019-11-13T11:01:52Z,Rick,rick.no@groundx.xyz,2019-11-13T11:01:52Z,p2p: fix bug in TestPeerDisconnect (#20277),FALSE,unsigned
de2259d27c75fa954115420e829a954486e6de92,Guillaume Ballet,gballet@gmail.com,2019-11-08T08:58:57Z,Guillaume Ballet,gballet@gmail.com,2019-11-08T08:58:57Z,"travis: enable test suite on ARM64 (#20219)

* travis: Enable ARM support

* Include fixes from 20039

* Add a trace to debug the invalid lookup issue

* Try increasing the timeout to see if the arm test passes

* Investigate the resolver issue

* Increase arm64 timeout for clique test

* increase timeout in tests for arm64

* Only test the failing tests

* Review feedback: don't export epsilon

* Remove investigation tricks+include fjl's feeback

* Revert the retry ahead of using the mock resolver

* Fix rebase errors",FALSE,unsigned
adf007dadc1b5e4185c0fc088c7cde7d235feff1,Felix Lange,fjl@twurst.com,2019-11-07T15:40:37Z,Felix Lange,fjl@twurst.com,2019-11-07T15:40:37Z,p2p/enode: mock DNS resolver in URL parsing test (#20252),TRUE,valid
4b8f56cf9809bb59366858dc7bfa9b0064c6496c,Peter Szilagyi,peterke@gmail.com,2019-11-07T08:00:18Z,Peter Szilagyi,peterke@gmail.com,2019-11-07T08:00:18Z,params: begin v1.9.8 release cycle,TRUE,valid
a718daa674a2e23cb0c8a6789f7e5467e705bbbd,Peter Szilagyi,peterke@gmail.com,2019-11-07T07:58:39Z,Peter Szilagyi,peterke@gmail.com,2019-11-07T07:58:39Z,params: release Geth v1.9.7,TRUE,valid
b9bac1f384ceef7d7390b9dd9da759bce1741392,gary rong,garyrong0905@gmail.com,2019-11-06T21:09:37Z,gary rong,garyrong0905@gmail.com,2019-11-06T21:09:37Z,"les: fix and slim the unit tests of les (#20247)

* les: loose restriction of unit tests

* les: update unit tests

* les, light: slim the unit tests",FALSE,unsigned
fc3661f89ccdefc4cc31f9aeb15dffce59afddca,Peter Szilagyi,peterke@gmail.com,2019-11-06T15:54:39Z,Peter Szilagyi,peterke@gmail.com,2019-11-06T15:54:39Z,"Merge pull request #20248 from karalabe/cht-1.9.7

params: hard-code new CHTs for the 1.9.7 release",TRUE,valid
9948724debefc14a02849f2cefe085582da00919,Peter Szilagyi,peterke@gmail.com,2019-11-06T15:47:13Z,Peter Szilagyi,peterke@gmail.com,2019-11-06T15:47:13Z,params: hard-code new CHTs for the 1.9.7 release,TRUE,valid
c702bd70edf7d6ed1946bcab34b1d40e487a7ee6,Peter Szilagyi,peterke@gmail.com,2019-11-05T13:35:51Z,Peter Szilagyi,peterke@gmail.com,2019-11-05T13:35:51Z,travis: bump linter to Go 1.13.x,TRUE,valid
734e00af9e9a5487f57b00ae33cbb52dbe0c9565,Peter Szilagyi,peterke@gmail.com,2019-11-05T13:32:42Z,Peter Szilagyi,peterke@gmail.com,2019-11-05T13:32:42Z,"travis, build, internal: use own Go bundle for PPA builds (#20240)

* build: bump PPAs to Go 1.13 (via longsleep), keep Trusty on 1.11

* travis, build, vendor: use own Go bundle for PPA builds

* travis, build, internal, vendor: smarter Go bundler, own untar

* build: updated ci-notes with new Go bundling, only make, don't test",TRUE,valid
b566cfdffdc51d5dcde571377d709a5519a24f0d,Martin Holst Swende,martin@swende.se,2019-11-04T09:31:10Z,Martin Holst Swende,martin@swende.se,2019-11-04T09:31:10Z,"core/evm: avoid copying memory for input in calls (#20177)

* core/evm, contracts: avoid copying memory for input in calls + make ecrecover not modify input buffer

* core/vm: optimize mstore a bit

* core/vm: change Get -> GetCopy in vm memory access",FALSE,unsigned
7a6d5d0cce16e1a766e6fc89c3aacb7ecf502dcc,gary rong,garyrong0905@gmail.com,2019-11-04T08:41:29Z,gary rong,garyrong0905@gmail.com,2019-11-04T08:41:29Z,"cmd/puppeth: integrate istanbul into puppeth (#19926)

* cmd/puppeth: integrate istanbul into puppeth

* cmd/puppeth: address comment

* cmd/puppeth: use hexutil.Big for fork indicator

* cmd/puppeth: finalize istanbul fork

* cmd/puppeth: fix 2200 for parity, rename is to eip1283ReenableTransition

* cmd/puppeth: fix eip1108

* cmd/puppeth: add blake2f for parity

* cmd/puppeth: add aleth istanbul precompiled

* cmd/puppeth: use hexutil.Big

* cmd/puppeth: fix unit tests

* cmd/puppeth: update testdata",FALSE,unsigned
0ff73804652e95ea730b5b5c941610c7947365d8,Peter Szilagyi,peterke@gmail.com,2019-11-04T08:38:10Z,Peter Szilagyi,peterke@gmail.com,2019-11-04T08:38:10Z,"Merge pull request #20231 from SamuelMarks/go1.13.4

appveyor: bump to Go 1.13.4",TRUE,valid
0ce5e113be8c54c7c30a3a797827114adb0df19c,gary rong,garyrong0905@gmail.com,2019-11-02T12:02:35Z,gary rong,garyrong0905@gmail.com,2019-11-02T12:02:35Z,"les: rework clientpool (#20077)

* les: rework clientpool",FALSE,unsigned
86fe283d194462a863977d83ba8c07209c41b05f,Samuel Marks,807580+SamuelMarks@users.noreply.github.com,2019-11-02T07:54:04Z,Samuel Marks,807580+SamuelMarks@users.noreply.github.com,2019-11-02T07:54:04Z,appveyor: bump to Go 1.13.4,FALSE,expired_key
44b74cfc40aba4d76281ce4f0b8f020aa99a5687,gary rong,garyrong0905@gmail.com,2019-10-31T13:17:51Z,gary rong,garyrong0905@gmail.com,2019-10-31T13:17:51Z,"accounts/abi: add internalType information and fix issues (#20179)

* accounts/abi: fix various issues

The fixed issues include:

(1) If there is no return in a call function, unpack should
return nil error

(2) For some functions which have struct array as parameter,
it will also be detected and generate the struct definition

(3) For event, if it has non-indexed parameter, the parameter
name will also be assigned if empty. Also the internal struct
will be detected and generate struct defition if not exist.

(4) Fix annotation generation in event function

* accounts/abi: add new abi field internalType

* accounts: address comments and add tests

* accounts/abi: replace strings.ReplaceAll with strings.Replace",FALSE,unsigned
9278951a626f7f13a53d28637bcda162f412f66c,Martin Holst Swende,martin@swende.se,2019-10-31T09:04:26Z,Martin Holst Swende,martin@swende.se,2019-10-31T09:04:26Z,"params, core/forkid: configure mainnet istanbul block 9069K (#20222)

* params: configure mainnet istanbul block 9069K

* core/forkid: add some more test items for mainnet istanbul",FALSE,unsigned
12f2a25d5e585b6988819426a3df20fab4a1991c,Peter Szilagyi,peterke@gmail.com,2019-10-31T08:58:28Z,Peter Szilagyi,peterke@gmail.com,2019-10-31T08:58:28Z,"Merge pull request #20225 from karalabe/forkid-eth-handshake-verification-plus

cmd/devp2p, core/forkid: make forkid.Filter API uniform",TRUE,valid
8927f7724aa1e096b458ca2c0b1a91d11fdfcc58,Peter Szilagyi,peterke@gmail.com,2019-10-31T08:38:14Z,Peter Szilagyi,peterke@gmail.com,2019-10-31T08:38:14Z,"cmd/devp2p, core/forkid: make forkid.Filter API uniform",TRUE,valid
93422e9d15063f707c381cd25758d6a34daece18,Peter Szilagyi,peterke@gmail.com,2019-10-30T11:21:25Z,Peter Szilagyi,peterke@gmail.com,2019-10-30T11:21:25Z,"Merge pull request #20140 from karalabe/eth64-handshake-forkid

eth: eth/64 - extend handshake with with fork id",TRUE,valid
5d91acccd5b1b050f49d048976496c6133da6dc5,gary rong,garyrong0905@gmail.com,2019-10-30T11:07:30Z,gary rong,garyrong0905@gmail.com,2019-10-30T11:07:30Z,"miner: increase import time allowance (#20217)

Fix the block import unit test which can time out sometimes.",FALSE,unsigned
9641cacea87f6b97139e8930179ed98fb908c548,Peter Szilagyi,peterke@gmail.com,2019-10-30T11:05:31Z,Peter Szilagyi,peterke@gmail.com,2019-10-30T11:05:31Z,core/forkid: add two clauses for more precise validation (#20220),FALSE,unsigned
64571f9379fdca11165517c122551f246c613ea4,Peter Szilagyi,peterke@gmail.com,2019-09-30T18:28:50Z,Peter Szilagyi,peterke@gmail.com,2019-09-30T18:28:50Z,eth: eth/64 - extend handshake packet with fork id,TRUE,valid
e3063044140254cb3b546e5ed0a2e230cfb2dd9f,Peter Szilagyi,peterke@gmail.com,2019-10-29T15:10:44Z,Peter Szilagyi,peterke@gmail.com,2019-10-29T15:10:44Z,"Merge pull request #20204 from holiman/fix_downloader_race

eth/downloader: fix data race in downloader",TRUE,valid
2c37142d2f177d0cccc114486040f0913a3900c7,Felix Lange,fjl@twurst.com,2019-10-29T15:08:57Z,Felix Lange,fjl@twurst.com,2019-10-29T15:08:57Z,"cmd/devp2p, p2p: dial using node iterator, discovery crawler (#20132)

* p2p/enode: add Iterator and associated utilities

* p2p/discover: add RandomNodes iterator

* p2p: dial using iterator

* cmd/devp2p: add discv4 crawler

* cmd/devp2p: WIP nodeset filter

* cmd/devp2p: fixup lesFilter

* core/forkid: add NewStaticFilter

* cmd/devp2p: make -eth-network filter actually work

* cmd/devp2p: improve crawl timestamp handling

* cmd/devp2p: fix typo

* p2p/enode: fix comment typos

* p2p/discover: fix comment typos

* p2p/discover: rename lookup.next to 'advance'

* p2p: lower discovery mixer timeout

* p2p/enode: implement dynamic FairMix timeouts

* cmd/devp2p: add ropsten support in -eth-network filter

* cmd/devp2p: tweak crawler log message",FALSE,unsigned
3eca7b5d2770d046b673924152f2a747ff66434e,Martin Holst Swende,martin@swende.se,2019-10-25T11:17:32Z,Martin Holst Swende,martin@swende.se,2019-10-25T11:17:32Z,eth/downloader: fix data race in downloader,TRUE,valid
b0b277525cb4e476deb461de1b5827a33daa2086,Michael Forney,mforney@mforney.org,2019-10-29T12:47:18Z,Michael Forney,mforney@mforney.org,2019-10-29T12:47:18Z,"core/asm: assembly parser label fixes (#20210)

* core/asm: Fix encoding of pushed labels

EVM uses big-endian byte-order, so to pad a label value to 4 bytes,
zeros must be added to the front, not the end.

* core/asm: Fix PC calculations when a label is pushed

Incrementing PC by 5 is only correct if the label appears after a jump,
in which case there is an implicit push. When it appears after an explicit
push, PC should only be incremented by 4.

* core/asm: Allow JUMP with no argument

This way, a label can be pushed explicitly, or loaded from memory to
implement a jump table.",FALSE,unsigned
ecdbb402ee0838a4be366b5f485a59d2da2053f5,gary rong,garyrong0905@gmail.com,2019-10-28T17:50:11Z,gary rong,garyrong0905@gmail.com,2019-10-28T17:50:11Z,"trie: remove node ordering slice in sync batch (#19929)

When we flush a batch of trie nodes into database during the state
sync, we should guarantee that all children should be flushed before
parent.

Actually the trie nodes commit order is strict by: children -> parent.
But when we flush all ready nodes into db, we don't need the order
anymore since

    (1) they are all ready nodes (no more dependency)
    (2) underlying database provides write atomicity",FALSE,unsigned
9c81387befa18a686b262482cd1dd27b75fe8422,Michael Forney,mforney@mforney.org,2019-10-28T13:55:20Z,Michael Forney,mforney@mforney.org,2019-10-28T13:55:20Z,"cmd/evm: remove surrounding whitespace in hex input code (#20211)

This way, the output of `evm compile` can be used directly in `evm
--codefile code.txt run`, without stripping the trailing newline first.",FALSE,unsigned
72617a0742391e80701123cd19429edd0e94fd10,Guillaume Ballet,gballet@gmail.com,2019-10-28T07:57:34Z,Guillaume Ballet,gballet@gmail.com,2019-10-28T07:57:34Z,consensus: fix possessives in comments. (#20209),FALSE,unsigned
db79143a13c9f912706b76a8c3a9e6966c39003a,Martin Holst Swende,martin@swende.se,2019-10-24T08:45:07Z,Martin Holst Swende,martin@swende.se,2019-10-24T08:45:07Z,"clef: resolve windows pipes, fixes #20121 (#20166)",TRUE,valid
538f763fdc304329d6231e6cb31efab4cba5153e,Piotr Dyraga,piotr.dyraga@keep.network,2019-10-21T08:13:41Z,Piotr Dyraga,piotr.dyraga@keep.network,2019-10-21T08:13:41Z,"accounts/abi/bind: take into account gas price during gas estimation (#20189)

The gas price was not passed to the `EstimateGas` function. As a result,
conditional execution paths depending on `tx.gasprice` could be not
correctly processed and we could get invalid gas estimates for contract
function calls.",FALSE,unsigned
d4bb3798d8aa33a21b5422b800ccdef01c7e1574,gary rong,garyrong0905@gmail.com,2019-10-20T10:36:40Z,gary rong,garyrong0905@gmail.com,2019-10-20T10:36:40Z,"miner: add generate and import unit test (#20111)

This PR adds a new unit test in miner package which will create some blocks from miner and then import into another chain. In this way, we can ensure all blocks generated by Geth miner obey consensus rules.",FALSE,unsigned
08953e42c1b7120dda8ebd6763e73a3aa5a27b4c,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-20T10:25:25Z,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-20T10:25:25Z,metrics: change links in README.md to https (#20182),FALSE,unsigned
b9299bbc46567608b4e6dcc4e8b8758dd3289231,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-18T19:30:53Z,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-18T19:30:53Z,"dashboard: change links in README to https (#20181)

Changed http:// to https:// on links in dashboard/README.md",FALSE,unsigned
9a770659486a51600d4781f6f67dd2f695c55644,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-18T06:51:54Z,Marius Kjærstad,sandakersmann@users.noreply.github.com,2019-10-18T06:51:54Z,"Changed http:// to https:// on links in log/README.md (#20178)

docs: change http to https on links in log/README.md",FALSE,unsigned
a28093ced4e81bcae10ccceba68f0c64da14383c,Jeffery Robert Walsh,rlxrlps@gmail.com,2019-10-17T08:39:14Z,Jeffery Robert Walsh,rlxrlps@gmail.com,2019-10-17T08:39:14Z,README: use new miner threads flag instead of legacy minerthreads flag (#20165),FALSE,unsigned
d5b79e752e80c097191630ada2b07b32b48de77b,Ross,9055337+Chadsr@users.noreply.github.com,2019-10-17T08:07:09Z,Ross,9055337+Chadsr@users.noreply.github.com,2019-10-17T08:07:09Z,p2p/simulations: add node properties support and utility functions (#20060),FALSE,unsigned
73003659561d83eb3123e008157134eaab6e4b03,Felix Lange,fjl@twurst.com,2019-10-16T11:35:24Z,Felix Lange,fjl@twurst.com,2019-10-16T11:35:24Z,"p2p/dnsdisc: update to latest EIP-1459 spec (#20168)

This updates the DNS TXT record format to the latest
changes in ethereum/EIPs#2313.",FALSE,unsigned
c476460cb2ea573a3266da5d5ec121170bb48e56,Martin Holst Swende,martin@swende.se,2019-10-16T11:23:14Z,Martin Holst Swende,martin@swende.se,2019-10-16T11:23:14Z,"params: check fork ordering when initializing new genesis, fixes #20136 (#20169)

prevent users from misconfiguring their nodes so that fork ordering is not preserved.",TRUE,valid
028af3457d9491433c90eca8383be87e2becb574,gary rong,garyrong0905@gmail.com,2019-10-15T08:19:20Z,gary rong,garyrong0905@gmail.com,2019-10-15T08:19:20Z,"cmd/utils: fix command line flag resolve (#20167)

In Geth, we have two sources for configuration:
(1) Config file
(2) Command line flag

Basically geth will first resolve config file and then overwrite
configs with command line flags.

This issue is: geth should only overwrite configs if flags are truly
set. So before we apply any flag to configs, `GlobalIsSet` check
is necessary.",FALSE,unsigned
a73f3f45183a347864a1c941930d6f26c6f06ac2,Felix Lange,fjl@twurst.com,2019-10-03T09:29:55Z,Felix Lange,fjl@twurst.com,2019-10-03T09:29:55Z,params: begin v1.9.7 release cycle,FALSE,unsigned
bd05968077f27f7eb083404dd8448157996a8788,Felix Lange,fjl@twurst.com,2019-10-03T09:29:20Z,Felix Lange,fjl@twurst.com,2019-10-03T09:29:20Z,params: release Geth v1.9.6 stable,FALSE,unsigned
6e730915bd6382006970431fe6ca0290b79be0e0,Felix Lange,fjl@twurst.com,2019-10-02T11:14:27Z,Felix Lange,fjl@twurst.com,2019-10-02T11:14:27Z,"les: add empty ""les"" ENR entry for servers (#20145)",FALSE,unsigned
c713ea7c222c81d650908dcc3d69dbaf0fe63557,Darrel Herbst,dherbst@gmail.com,2019-10-02T09:32:02Z,Darrel Herbst,dherbst@gmail.com,2019-10-02T09:32:02Z,cmd/bootnode: fix exit behavior with -genkey (#20110),FALSE,unsigned
7f5f62aaa082a270860c5206383fa671e960571d,Martin Holst Swende,martin@swende.se,2019-10-02T08:33:51Z,Martin Holst Swende,martin@swende.se,2019-10-02T08:33:51Z,"tests: update test suite for istanbul (#20082)

* update tests for istanbul

* tests: updated blockchaintests, see https://github.com/ethereum/tests/issues/637

* tests: update again, hopefully fixed this time

* tests: skip time consuming, run legacy tests

* tests: update again

* build: disable long-running tests on travis

* tests: fix formatting nits

* tests: I hate github's editor",FALSE,unsigned
b2f696e0258ca57adc8f3568eaadd487bd622eb1,kikilass,36239971+kikilass@users.noreply.github.com,2019-09-30T19:57:20Z,kikilass,36239971+kikilass@users.noreply.github.com,2019-09-30T19:57:20Z,github: Added capital P (#20139),FALSE,unsigned
62b43ee0d517c68df5f40ecb940a730102ea25b8,Peter Szilagyi,peterke@gmail.com,2019-09-30T09:02:29Z,Peter Szilagyi,peterke@gmail.com,2019-09-30T09:02:29Z,"Merge pull request #20133 from karalabe/measure-subprotocol-traffic

p2p: measure subprotocol bandwidth usage",TRUE,valid
a2a60869c8f6e44b7b44ee53b3a490e686ab0267,Peter Szilagyi,peterke@gmail.com,2019-09-27T14:41:47Z,Peter Szilagyi,peterke@gmail.com,2019-09-27T14:41:47Z,p2p: measure subprotocol bandwidth usage,TRUE,valid
df89233b5780d3b42945070e9bae616a76a83866,gary rong,garyrong0905@gmail.com,2019-09-26T14:44:00Z,gary rong,garyrong0905@gmail.com,2019-09-26T14:44:00Z,"ethdb/leveldb: disable seek compaction (#20130)

* vendor: update leveldb

* ethdb/leveldb: disable seek compaction and add metrics

* vendor: udpate latest levledb

* ethdb/leveldb: fix typo",FALSE,unsigned
ead711779d6e2e1d4593d7dcede8ae6454a3b961,Martin Holst Swende,martin@swende.se,2019-09-26T09:10:35Z,Martin Holst Swende,martin@swende.se,2019-09-26T09:10:35Z,"core: initialize current block/fastblock atomics to nil, fix #19286 (#19352)",TRUE,valid
2133f18f15a301a0b06eb50abf4b9b8f3033fe2b,zcheng9,zcheng9@hawk.iit.edu,2019-09-26T09:09:59Z,zcheng9,zcheng9@hawk.iit.edu,2019-09-26T09:09:59Z,core/state: fix database leak and copy tests (#19306),FALSE,unsigned
1a6ef5ae58ab7900139ef60da78cd1746b5bfa57,ywzqwwt,39263032+ywzqwwt@users.noreply.github.com,2019-09-26T08:57:51Z,ywzqwwt,39263032+ywzqwwt@users.noreply.github.com,2019-09-26T08:57:51Z,core/blockchain: remove block from futureBlocks on error (#19763),FALSE,unsigned
ad03d9801c40565dd2014d7bc0f0f4a779dcfece,Ryan Schneider,ryanleeschneider@gmail.com,2019-09-26T08:47:31Z,Ryan Schneider,ryanleeschneider@gmail.com,2019-09-26T08:47:31Z,"internal/ethapi: support block number or hash on state-related methods (#19491)

This change adds support for EIP-1898.",FALSE,unsigned
62391ddbeb55d604a982e1a4ff382e2729f2d96b,Lucas Hendren,lhendre2@gmail.com,2019-09-26T08:30:33Z,Lucas Hendren,lhendre2@gmail.com,2019-09-26T08:30:33Z,"tests/solidity: add contract to test every opcode (#19283)

Fixes #18210",FALSE,unsigned
0568e817012753a9f71fffa50160990dbc3779a2,Felix Lange,fjl@twurst.com,2019-09-25T09:38:13Z,Felix Lange,fjl@twurst.com,2019-09-25T09:38:13Z,"p2p/dnsdisc: add implementation of EIP-1459 (#20094)

This adds an implementation of node discovery via DNS TXT records to the
go-ethereum library. The implementation doesn't match EIP-1459 exactly,
the main difference being that this implementation uses separate merkle
trees for tree links and ENRs. The EIP will be updated to match p2p/dnsdisc.

To maintain DNS trees, cmd/devp2p provides a frontend for the p2p/dnsdisc
library. The new 'dns' subcommands can be used to create, sign and deploy DNS
discovery trees.",TRUE,valid
32b07e8b1f970ac76c78dcd27401658f8e3fe3a3,gary rong,garyrong0905@gmail.com,2019-09-25T08:05:15Z,gary rong,garyrong0905@gmail.com,2019-09-25T08:05:15Z,les: fix checkpoint sync (#20120),FALSE,unsigned
aca39a6498030470c3fe3feb8d761e9cb0d88e93,Peter Szilagyi,peterke@gmail.com,2019-09-24T10:29:21Z,Peter Szilagyi,peterke@gmail.com,2019-09-24T10:29:21Z,"Merge pull request #20115 from holiman/minor_dashboard_fx

dashboard: log dashboard url",TRUE,valid
be500b57d29dbb93fa9de782406c2147712fad7c,Martin Holst Swende,martin@swende.se,2019-09-24T08:08:46Z,Martin Holst Swende,martin@swende.se,2019-09-24T08:08:46Z,dashboard: log host+port,TRUE,valid
a308f012ba6bac3249ae52727e1c52273390d7e9,Peter Szilagyi,peterke@gmail.com,2019-09-24T07:49:59Z,Peter Szilagyi,peterke@gmail.com,2019-09-24T07:49:59Z,"core/state: fix copy-commit-copy (#20113)

* core/state: revert noop finalise, fix copy-commit-copy

* core/state: reintroduce net sstore tracking, extend tests for it",TRUE,valid
311419c7d695e76fc4668104d217e6784db469f1,Peter Szilagyi,peterke@gmail.com,2019-09-23T08:38:39Z,Peter Szilagyi,peterke@gmail.com,2019-09-23T08:38:39Z,"Merge pull request #20096 from skylenet/remove-ef-legacy-bootnodes

params: remove legacy bootnodes",TRUE,valid
63b18027dc9e5ad86992b3e7acbd3f033a458192,Felix Lange,fjl@twurst.com,2019-09-20T11:33:08Z,Felix Lange,fjl@twurst.com,2019-09-20T11:33:08Z,params: start v1.9.6 release cycle,FALSE,unsigned
a1c09b93871dd3770adffb177086abda1b2ff3af,Felix Lange,fjl@twurst.com,2019-09-20T11:32:10Z,Felix Lange,fjl@twurst.com,2019-09-20T11:32:10Z,params: release Geth v1.9.5 stable,FALSE,unsigned
05347b3d982504e383cfb72fbfc341bd2fe75e94,gary rong,garyrong0905@gmail.com,2019-09-20T09:55:44Z,gary rong,garyrong0905@gmail.com,2019-09-20T09:55:44Z,"core/state: fix state object deep copy (#20100)

deepCopy didn't copy pending storage updates, leading to the
creation of blocks with invalid state root.",FALSE,unsigned
75aec8a28dd065f63b061c0b575ca2ba4c3870cd,Rafael Matias,rafael@skyle.net,2019-09-19T17:35:57Z,Rafael Matias,rafael@skyle.net,2019-09-19T17:35:57Z,params: remove legacy bootnodes,TRUE,valid
24ef83518c5e3c173784b20eabba140162d66dfb,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:38:43Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:38:43Z,params: start v1.9.5 release cycle,TRUE,valid
46891c12ab54c9e179f26378ce618fd48460190c,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:36:53Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:36:53Z,params: release Geth v1.9.4 stable,TRUE,valid
c0010f0220769dbe3965ae7d277daa6f04ce5437,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:25:13Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:25:13Z,"Merge pull request #20092 from karalabe/vendor-usb-bump

vendor: pull in USB Windows fixes",TRUE,valid
9f98628dc220e5b7000f29be077be568c3ced51a,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:02:48Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T08:02:48Z,vendor: pull in USB Windows fixes,TRUE,valid
a6a14f6b712efbfb91a4c0a05eb42998e8dda2ea,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:47:50Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:47:50Z,"Merge pull request #20090 from soc1c/s1-testnet-istanbul

params: activate Istanbul on Ropsten, Rinkeby and Görli",TRUE,valid
f9eb3072167603e70b018c295e305d71b69756e3,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:13:11Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:13:11Z,"core/forkid, params: fix tests, enable Istanbul on Rinkeby + testers",TRUE,valid
03c7d8fb3139f3fee8ddcf8a35b6a908f582621f,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:11:29Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T07:11:29Z,"Merge pull request #20091 from karalabe/cht-1.9.4

params: bump CHTs for the 1.9.4 release",TRUE,valid
2becb995830f3951643cf973fbf29ca313b833b8,Peter Szilagyi,peterke@gmail.com,2019-09-19T06:45:40Z,Peter Szilagyi,peterke@gmail.com,2019-09-19T06:45:40Z,params: bump CHTs for the 1.9.4 release,TRUE,valid
ad380cd57f9b7f8ed748b61b568f8733836ba2e3,soc1c,soc1c@users.noreply.github.com,2019-09-19T06:25:08Z,soc1c,soc1c@users.noreply.github.com,2019-09-19T06:25:08Z,params: activate Istanbul on Ropsten and Görli,TRUE,valid
7b32d2a47017570c44cd7f8a83612a29656c9857,Peter Szilagyi,peterke@gmail.com,2019-09-18T09:03:02Z,Peter Szilagyi,peterke@gmail.com,2019-09-18T09:03:02Z,"Merge pull request #20085 from karalabe/txpool-api-fix

core: fix tx dedup return error count",TRUE,valid
f40ff23b7bf5396936159ae500ed5b18fdaec27d,Peter Szilagyi,peterke@gmail.com,2019-09-18T07:53:01Z,Peter Szilagyi,peterke@gmail.com,2019-09-18T07:53:01Z,core: fix tx dedup return error count,TRUE,valid
0ac9bbba6cd259bc9895e786121cdcb6e7c5d9d2,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-09-17T13:28:41Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-09-17T13:28:41Z,"les: multiple server bugfixes (#20079)

* les: detailed relative cost metrics

* les: filter txpool relative request statistic

* les: initialize price factors

* les: increased connected bias to lower churn rate

* les: fixed clientPool.setLimits

* core: do not use mutex in GetAncestor

* les: bump factor db version again

* les: add metrics

* les, light: minor fixes",FALSE,unsigned
d4dce43bffc44f39ce67da4dc26c06ac51d3c62f,Peter Szilagyi,peterke@gmail.com,2019-09-17T13:25:24Z,Peter Szilagyi,peterke@gmail.com,2019-09-17T13:25:24Z,"Merge pull request #20081 from karalabe/txpool-lockless-dedup

core: dedup known transactions without global lock, track metrics",TRUE,valid
056183c05634efeaee2bab6c3ace781f6da59cfc,Peter Szilagyi,peterke@gmail.com,2019-09-17T12:50:34Z,Peter Szilagyi,peterke@gmail.com,2019-09-17T12:50:34Z,"core: dedup known transactions without global lock, track metrics",TRUE,valid
8d41e885e6c4bd8d6c1bd08d385165dd41f7edf1,Martin Holst Swende,martin@swende.se,2019-09-17T07:34:28Z,Martin Holst Swende,martin@swende.se,2019-09-17T07:34:28Z,"core: smaller txpool status locking (#20080)

* txpool: smaller lock portion

* core/tx_pool: fix data race",FALSE,unsigned
8bd64f4a1c26a50e099cb47c91faaa3f9c8ca6ac,Peter Szilagyi,peterke@gmail.com,2019-09-16T10:34:52Z,Peter Szilagyi,peterke@gmail.com,2019-09-16T10:34:52Z,"Merge pull request #20075 from holiman/evm_defaults

cmd/evm: make evm default to all ethash protocol changes",TRUE,valid
b1c3010bf2c334241a8cb01eab110e5f1cd88f71,Felix Lange,fjl@twurst.com,2019-09-16T09:16:30Z,Felix Lange,fjl@twurst.com,2019-09-16T09:16:30Z,"common/mclock: clean up AfterFunc support (#20054)

This change adds tests for the virtual clock and aligns the interface
with the time package by renaming Cancel to Stop. It also removes the
binary search from Stop because it complicates the code unnecessarily.",TRUE,valid
aff986958da831d85788f33fe11aab31995ac072,Peter Szilagyi,peterke@gmail.com,2019-09-16T08:46:31Z,Peter Szilagyi,peterke@gmail.com,2019-09-16T08:46:31Z,"Merge pull request #19953 from karalabe/state-accumulate-writes

core/state: accumulate writes and only update tries when must",TRUE,valid
f49d6e5ec09b740ae88c3a04edbe60b357b81991,Martin Holst Swende,martin@swende.se,2019-09-16T08:39:41Z,Martin Holst Swende,martin@swende.se,2019-09-16T08:39:41Z,core: add blockchain test too for revert cornercase,TRUE,valid
223b950944f494a5b4e0957fd9f92c48b09037ad,Peter Szilagyi,peterke@gmail.com,2019-08-12T19:56:07Z,Peter Szilagyi,peterke@gmail.com,2019-08-12T19:56:07Z,core/state: accumulate writes and only update tries when must,TRUE,valid
16f0fb70f17838e6e3db0230034f9da15b7aeedb,Martin Holst Swende,martin@swende.se,2019-09-13T20:32:20Z,Martin Holst Swende,martin@swende.se,2019-09-13T20:32:20Z,cmd/evm: make evm default to all ethash protocol changes,TRUE,valid
96fb839133183960571d9a2e7222536362791899,Felix Lange,fjl@twurst.com,2019-09-13T09:10:57Z,Felix Lange,fjl@twurst.com,2019-09-13T09:10:57Z,"rlp: improve nil pointer handling (#20064)

* rlp: improve nil pointer handling

In both encoder and decoder, the rules for encoding nil pointers were a
bit hard to understand, and didn't leave much choice. Since RLP allows
two empty values (empty list, empty string), any protocol built on RLP
must choose either of these values to represent the null value in a
certain context.

This change adds choice in the form of two new struct tags, ""nilString""
and ""nilList"". These can be used to specify how a nil pointer value is
encoded. The ""nil"" tag still exists, but its implementation is now
explicit and defines exactly how nil pointers are handled in a single
place.

Another important change in this commit is how nil pointers and the
Encoder interface interact. The EncodeRLP method was previously called
even on nil values, which was supposed to give users a choice of how
their value would be handled when nil. It turns out this is a stupid
idea. If you create a network protocol containing an object defined in
another package, it's better to be able to say that the object should be
a list or string when nil in the definition of the protocol message
rather than defining the encoding of nil on the object itself.

As of this commit, the encoding rules for pointers now take precedence
over the Encoder interface rule. I think the ""nil"" tag will work fine
for most cases. For special kinds of objects which are a struct in Go
but strings in RLP, code using the object can specify the desired
encoding of nil using the ""nilString"" and ""nilList"" tags.

* rlp: propagate struct field type errors

If a struct contained fields of undecodable type, the encoder and
decoder would panic instead of returning an error. Fix this by
propagating type errors in makeStruct{Writer,Decoder} and add a test.",TRUE,valid
3b6c9902f308ffc595912802644c5d21616e61f5,Rob Mulholand,rmulholand@8thlight.com,2019-09-12T19:22:22Z,Rob Mulholand,rmulholand@8thlight.com,2019-09-12T19:22:22Z,core: remove unused gas return in ApplyTransaction (#20065),FALSE,unsigned
efe123759ab5c6eb536dc3f0718ec5acc2dca7fe,Peter Szilagyi,peterke@gmail.com,2019-09-12T11:23:34Z,Peter Szilagyi,peterke@gmail.com,2019-09-12T11:23:34Z,"Revert ""build: switch PPA from Gophers dep to manual download"" (#20061)",TRUE,valid
8eb646a96d148c45f7e1b39dd5ecfc7d2c153eb9,Peter Szilagyi,peterke@gmail.com,2019-09-12T10:52:39Z,Peter Szilagyi,peterke@gmail.com,2019-09-12T10:52:39Z,"Merge pull request #20059 from karalabe/ppa-manual-go

build: switch PPA from Gophers dep to manual download",TRUE,valid
c02d5bc5a95238b3fe01425d122c7d5ec38869eb,Peter Szilagyi,peterke@gmail.com,2019-09-12T10:00:18Z,Peter Szilagyi,peterke@gmail.com,2019-09-12T10:00:18Z,build: switch PPA from Gophers dep to manual download,TRUE,valid
71251c7296ce79ade37b1705b38447a956319de9,Peter Szilagyi,peterke@gmail.com,2019-09-12T09:34:15Z,Peter Szilagyi,peterke@gmail.com,2019-09-12T09:34:15Z,"Merge pull request #20058 from karalabe/go1.13

travis, Dockerfile, appveyor: bump to Go 1.13",TRUE,valid
2469c4ecd4757e56ed22da1285ed7deab9d5b112,Peter Szilagyi,peterke@gmail.com,2019-09-12T08:09:11Z,Peter Szilagyi,peterke@gmail.com,2019-09-12T08:09:11Z,"travis, Dockerfile, appveyor: bump to Go 1.13",TRUE,valid
39b0b1a1a6506c8c25fcff56f4d70a85739dcb6a,Felix Lange,fjl@twurst.com,2019-09-11T12:41:22Z,Felix Lange,fjl@twurst.com,2019-09-11T12:41:22Z,"all: make unit tests work with Go 1.13 (#20053)

Most of these changes are related to the Go 1.13 changes to test binary
flag handling. 

* cmd/geth: make attach tests more reliable

This makes the test wait for the endpoint to come up by polling
it instead of waiting for two seconds.

* tests: fix test binary flags for Go 1.13

Calling flag.Parse during package initialization is prohibited
as of Go 1.13 and causes test failures. Call it in TestMain instead.

* crypto/ecies: remove useless -dump flag in tests

* p2p/simulations: fix test binary flags for Go 1.13

Calling flag.Parse during package initialization is prohibited
as of Go 1.13 and causes test failures. Call it in TestMain instead.

* build: remove workaround for ./... vendor matching

This workaround was necessary for Go 1.8. The Go 1.9 release changed
the expansion rules to exclude vendored packages.

* Makefile: use relative path for GOBIN

This makes the ""Run ./build/bin/..."" line look nicer.

* les: fix test binary flags for Go 1.13

Calling flag.Parse during package initialization is prohibited
as of Go 1.13 and causes test failures. Call it in TestMain instead.",TRUE,valid
91b73495098c7941e3eb1c58a702952bf5acf1a6,Martin Holst Swende,martin@swende.se,2019-09-11T11:46:14Z,Martin Holst Swende,martin@swende.se,2019-09-11T11:46:14Z,tests: expose internal RunNoVerify method (#20051),FALSE,unsigned
52a967cfab1f01120a4324e25c655a5a1497fcd3,Nguyen Kien Trung,trung.n.k@gmail.com,2019-09-10T22:38:42Z,Nguyen Kien Trung,trung.n.k@gmail.com,2019-09-10T22:38:42Z,eth: remove unused field (#20049),FALSE,unsigned
305ed955db2e4db840a03613e058d65bd880b900,Peter Szilagyi,peterke@gmail.com,2019-09-10T14:12:06Z,Peter Szilagyi,peterke@gmail.com,2019-09-10T14:12:06Z,"Merge pull request #20038 from holiman/minor_encodingfix

core/state: optimize some internals during encoding",TRUE,valid
72045dff4f766d4b8332f126e377ab54a683276e,Martin Holst Swende,martin@swende.se,2019-09-05T11:19:55Z,Martin Holst Swende,martin@swende.se,2019-09-05T11:19:55Z,core/state: optimize some internals during encoding,TRUE,valid
46b437f39c66d228294acb76878fea890af77949,Peter Szilagyi,peterke@gmail.com,2019-09-10T12:23:20Z,Peter Szilagyi,peterke@gmail.com,2019-09-10T12:23:20Z,"Merge pull request #20047 from karalabe/counter-to-gauge

core, metrics, p2p: switch some invalid counters to gauges",TRUE,valid
72d5a27a397f4397082df91dd1650251e828a251,Peter Szilagyi,peterke@gmail.com,2019-09-10T11:39:07Z,Peter Szilagyi,peterke@gmail.com,2019-09-10T11:39:07Z,"core, metrics, p2p: switch some invalid counters to gauges",TRUE,valid
4f6bf2f1c56c0a44455036dda11d5b186962f8ab,Peter Szilagyi,peterke@gmail.com,2019-09-10T10:33:01Z,Peter Szilagyi,peterke@gmail.com,2019-09-10T10:33:01Z,"Merge pull request #20046 from karalabe/graphql-fix-web-and-decoding

common, graphql: fix hash/address decoding + UI content type",TRUE,valid
49b86a28590917eebf43bce213a2e0586db58755,Peter Szilagyi,peterke@gmail.com,2019-09-10T09:20:36Z,Peter Szilagyi,peterke@gmail.com,2019-09-10T09:20:36Z,"common, graphql: fix hash/address decoding + UI content type",TRUE,valid
cea2c804450fa1a6ff36b6a883085d60bf906de6,Flash Sheridan,flash@pobox.com,2019-09-10T09:06:26Z,Flash Sheridan,flash@pobox.com,2019-09-10T09:06:26Z," README: accounts in alloc field should exist (#20005)

* Accounts in alloc field must already exist

Note that accounts in alloc field must already exist, as pointed out by Simeon Vanov in https://gettoshare.com/2017/10/30/how-to-use-genesis-json-alloc-property/

* Change wording per PR review comment

* README: minor fixups",FALSE,unsigned
67bfc9305324ef73267856f26752904715be312d,Peter Szilagyi,peterke@gmail.com,2019-09-04T12:13:54Z,Peter Szilagyi,peterke@gmail.com,2019-09-04T12:13:54Z,"Merge pull request #20033 from karalabe/docker-expose-graphql

Dockerfile: expose GraphQL ports",TRUE,valid
ce2da832ac5fb2c77d35454f567d2ba67ed54c3e,Peter Szilagyi,peterke@gmail.com,2019-09-04T11:46:07Z,Peter Szilagyi,peterke@gmail.com,2019-09-04T11:46:07Z,Dockerfile: expose GraphQL ports,TRUE,valid
b4a4a4db71f17daefc05a36674dd23fbd78fb78c,Peter Szilagyi,peterke@gmail.com,2019-09-03T09:12:53Z,Peter Szilagyi,peterke@gmail.com,2019-09-03T09:12:53Z,params: begin Geth v1.9.4 release cycle,TRUE,valid
cfbb969da803d4cc92e1a64fc1b3c06db299b564,Peter Szilagyi,peterke@gmail.com,2019-09-03T09:00:38Z,Peter Szilagyi,peterke@gmail.com,2019-09-03T09:00:38Z,params: release Geth v1.9.3 stable,TRUE,valid
1611815b8dc7e5168823a0bb5785a65f59579ec9,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-09-03T08:43:35Z,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-09-03T08:43:35Z,"cmd/utils: reduce light.maxpeers default for clients to 1/10th (#19933)

Currently light.maxpeers is 100 - after this change it's 10 for non-servers.

Fixes #19820",FALSE,unsigned
b8a94571397c1afd5579f1e319aff05a676c917d,Peter Szilagyi,peterke@gmail.com,2019-09-03T08:38:11Z,Peter Szilagyi,peterke@gmail.com,2019-09-03T08:38:11Z,"Merge pull request #19915 from holiman/filltx

internal/ethapi: implement fillTransaction",TRUE,valid
af16ca177f0fbe3434b6f4ee0f536722e1983507,Felix Lange,fjl@twurst.com,2019-09-02T10:05:07Z,Felix Lange,fjl@twurst.com,2019-09-02T10:05:07Z,rpc: raise limit in TestClientNotificationStorm (#19999),TRUE,valid
cedf8be4356dd6320437357979bbc5ee4bdbdd4c,winsvega,winsvega@mail.ru,2019-09-02T09:49:49Z,winsvega,winsvega@mail.ru,2019-09-02T09:49:49Z,retesteth: enable maxResults in AccountRange (#20020),FALSE,unsigned
d5bd38384c1c0630d77468c12c8ad99d57ac2229,Peter Szilagyi,peterke@gmail.com,2019-08-30T12:35:43Z,Peter Szilagyi,peterke@gmail.com,2019-08-30T12:35:43Z,"Merge pull request #20019 from holiman/minor_adminfix

eth: disallow overwrite files via admin.exportChain",TRUE,valid
292cf7c649c4fa6cc63ed6a1ae9368d1dc70588d,Martin Holst Swende,martin@swende.se,2019-08-30T08:39:29Z,Martin Holst Swende,martin@swende.se,2019-08-30T08:39:29Z,eth: disallow overwrite files via admin.exportChain,TRUE,valid
396f1dd87b91cc08a1db08aaa2b901a47b69d26f,gary rong,garyrong0905@gmail.com,2019-08-27T13:29:00Z,gary rong,garyrong0905@gmail.com,2019-08-27T13:29:00Z,les: fix panic (#20013),FALSE,unsigned
68502595f670c02fe2f056b6e3e83c92c14d62e5,gary rong,garyrong0905@gmail.com,2019-08-27T11:07:25Z,gary rong,garyrong0905@gmail.com,2019-08-27T11:07:25Z,"les: wait for all task goroutines before dropping the peer (#20010)

* les: wait all task routines before drop the peer

* les: address comments

* les: fix issue",FALSE,unsigned
a978adfd7c5ec1b9f7271c69f8f3a6686bb73c19,Flash Sheridan,flash@pobox.com,2019-08-26T07:44:05Z,Flash Sheridan,flash@pobox.com,2019-08-26T07:44:05Z,"README: change chainID to <arbitrary positive integer> (#20002)

* Change chainId in genesis block to 8888 from 0 

Change chainId in genesis block to 8888 from 0 per Moriteru in https://ethereum.stackexchange.com/a/28082/40230.

* Replace 8888 with <arbitrary positive integer>

Per PR review, replace Moriterus arbitrary positive integer 8888 with <arbitrary positive integer> in chainId field.",FALSE,unsigned
cc9eb91d30a5d4806154b832b9665aecc617b6d8,Peter Szilagyi,peterke@gmail.com,2019-08-23T09:38:05Z,Peter Szilagyi,peterke@gmail.com,2019-08-23T09:38:05Z,"Merge pull request #20004 from karalabe/istanbul-override

cmd, core, eth, les: support --override.istanbul",TRUE,valid
e39b2a2bde3f2f1a82f7836cf957af94a45acfc2,Peter Szilagyi,peterke@gmail.com,2019-08-23T09:09:27Z,Peter Szilagyi,peterke@gmail.com,2019-08-23T09:09:27Z,"acmd, core, eth, les: support --override.istanbul",TRUE,valid
c8a1c0a1156e23625cdca98b65286084609dca43,Peter Szilagyi,peterke@gmail.com,2019-08-23T08:55:43Z,Peter Szilagyi,peterke@gmail.com,2019-08-23T08:55:43Z,"Merge pull request #19993 from karalabe/istanbul-eip-integration

core/vm: enable istanbul EIPs in the jump table",TRUE,valid
4aeeddc6586ec2d405e1c67ee22cd367d805368b,Martin Holst Swende,martin@swende.se,2019-08-23T08:01:09Z,Martin Holst Swende,martin@swende.se,2019-08-23T08:01:09Z,tests: implement Istanbul support,TRUE,valid
e126b0836a06bc3c2f52a5940a09f0ed74134b6b,Martin Holst Swende,martin@swende.se,2019-08-23T07:48:40Z,Martin Holst Swende,martin@swende.se,2019-08-23T07:48:40Z,retesteth: implement istanbul support,TRUE,valid
961aa0533f75027bc5bc80f994adb80d14635553,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-22T13:18:39Z,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-22T13:18:39Z,"rpc: enable compression on HTTP transport (#19997)

This change adds support for gzip encoding on HTTP responses.
Gzip encoding is used when the client sets the 'accept-encoding: gzip' header.
Original change by @brianosaurus, with fixes from @SjonHortensius.",FALSE,unsigned
54b271a86dd748f3b0bcebeaf678dc34e0d6177a,Felix Lange,fjl@twurst.com,2019-08-22T13:14:06Z,Felix Lange,fjl@twurst.com,2019-08-22T13:14:06Z,"crypto: add SignatureLength constant and use it everywhere (#19996)

Original change by @jpeletier",TRUE,valid
b90cdbaa79cfe438aab0f1389d35980f3d38ec84,alexwang,39109351+dipingxian2@users.noreply.github.com,2019-08-22T12:23:40Z,alexwang,39109351+dipingxian2@users.noreply.github.com,2019-08-22T12:23:40Z,p2p/enode: allow DNS names in enode URLs (#18524),FALSE,unsigned
4d358b9fc022da8f9085c3276a65fd3cd68a2b9d,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-22T11:32:26Z,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-22T11:32:26Z,"cmd/utils: customize cli.HelpPrinter to fix alignment (#19956)

This copies cli.printHelp but changes minwidth to 38. Custom flag
code is improved to print the default value using cli.FlagStringer like
all built-in flags do.",FALSE,unsigned
1eaf66ae602dec2043d704b3121dde869b047280,Peter Szilagyi,peterke@gmail.com,2019-08-22T11:18:51Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T11:18:51Z,"Merge pull request #19995 from karalabe/ios-notag

build: gomobile automaticall adds the ios tag, don't duplicate",TRUE,valid
4ef5e9746b6f235d007b61a30276fe897cc9be8b,Peter Szilagyi,peterke@gmail.com,2019-08-22T11:16:48Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T11:16:48Z,"build: gomobile automaticall adds the ios tag, don't duplicate",TRUE,valid
060e33fb4c28a20f3e0ae0e95cd5b27e88c9ec7d,Peter Szilagyi,peterke@gmail.com,2019-08-22T10:41:55Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T10:41:55Z,core/vm: enable istanbul EIPs in the jump table,TRUE,valid
46ec63b84932705219aad80174f8968357373b69,Andrey Petrov,andrey.petrov@shazow.net,2019-08-22T09:47:24Z,Andrey Petrov,andrey.petrov@shazow.net,2019-08-22T09:47:24Z,"ethdb/dbtest: addd test suite for ethdb backends (#19960)

- Move the existing tests from memorydb into a generalized testsuite
that can be run by any ethdb backend implementation.
- Add several more test cases to clarify some non-obvious nuances when
implementing a custom ethdb backend, such as the behaviour of
NewIteratorWithPrefix vs NewIteratorWithStart.
- Add leveldb to the testsuite using in-memory storage for fast
execution.",FALSE,unsigned
1cd5bf080ea82caeef8bebb4f0e46a47ee647f55,lmittmann,lmittmann@users.noreply.github.com,2019-08-22T09:45:07Z,lmittmann,lmittmann@users.noreply.github.com,2019-08-22T09:45:07Z,common: unify hex prefix check code (#19937),FALSE,unsigned
7c229941ac332557bf148918a3a1cff98354e2df,HackyMiner,hackyminer@gmail.com,2019-08-22T09:28:23Z,HackyMiner,hackyminer@gmail.com,2019-08-22T09:28:23Z,"core: log chain reorg/split metrics (#18950)

* core: log chain reorg/split metrics

* core: report 1-block reorgs on the metrics too",FALSE,unsigned
ac23073619252e05f2b2f801370ae7d6b1b38023,Peter Szilagyi,peterke@gmail.com,2019-08-22T09:27:54Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T09:27:54Z,"Merge pull request #19992 from karalabe/fix-blake2b-386-2

crypto/blake2b: fix 386, round 2",TRUE,valid
8e391cec43efd5c43b13ce1aee5f388aee499611,Peter Szilagyi,peterke@gmail.com,2019-08-22T09:24:11Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T09:24:11Z,"crypto/blake2b: fix 386, round 2",TRUE,valid
5b2c47a575cd0c37230cd9104db07f965816076c,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:50:40Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:50:40Z,"Merge pull request #19990 from karalabe/fix-blake2b-386

crypto/blake2b: fix non-amd64 builds",TRUE,valid
8517dd463d2b823b5c406a4e2c98c41547e542a5,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:22:16Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:22:16Z,crypto/blake2b: fix non-amd64 builds,TRUE,valid
22fdbee8ed50d39592f811806b0a218badfe6a30,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:09:31Z,Peter Szilagyi,peterke@gmail.com,2019-08-22T08:09:31Z,"Merge pull request #19972 from keep-network/istanbul-eip-152-blake2b-f-precompile

core/vm, crypto/blake2b: add BLAKE2b compression func at 0x09",TRUE,valid
1bccafe5ef54ba849e414ce7c90f7b7130634a9a,Peter Szilagyi,peterke@gmail.com,2019-08-21T09:38:18Z,Peter Szilagyi,peterke@gmail.com,2019-08-21T09:38:18Z,"core/vm, crypto/blake2b: add SSE, AVX and AVX2 code",TRUE,valid
2890f060b7f9f13649a7e0ec95393f61f1d254a0,Piotr Dyraga,piotr.dyraga@keep.network,2019-06-17T17:19:47Z,Piotr Dyraga,piotr.dyraga@keep.network,2019-06-17T17:19:47Z,"core/vm, crypto/blake2b: add BLAKE2b compression func at 0x09

The precompile at 0x09 wraps the BLAKE2b F compression function:
https://tools.ietf.org/html/rfc7693#section-3.2

The precompile requires 6 inputs tightly encoded, taking exactly 213
bytes, as explained below.

- `rounds` - the number of rounds - 32-bit unsigned big-endian word
- `h` - the state vector - 8 unsigned 64-bit little-endian words
- `m` - the message block vector - 16 unsigned 64-bit little-endian words
- `t_0, t_1` - offset counters - 2 unsigned 64-bit little-endian words
- `f` - the final block indicator flag - 8-bit word

[4 bytes for rounds][64 bytes for h][128 bytes for m][8 bytes for t_0]
[8 bytes for t_1][1 byte for f]

The boolean `f` parameter is considered as `true` if set to `1`.
The boolean `f` parameter is considered as `false` if set to `0`.
All other values yield an invalid encoding of `f` error.

The precompile should compute the F function as specified in the RFC
(https://tools.ietf.org/html/rfc7693#section-3.2) and return the updated
state vector `h` with unchanged encoding (little-endian).

See EIP-152 for details.",TRUE,valid
2ed729d38e90154d1f23ebdf5a9f2808212276d8,gary rong,garyrong0905@gmail.com,2019-08-21T09:29:34Z,gary rong,garyrong0905@gmail.com,2019-08-21T09:29:34Z,"les: handler separation (#19639)

les: handler separation",FALSE,unsigned
4aee0d1994ad286c18aa3a586ae950e96979a7f1,Martin Holst Swende,martin@swende.se,2019-08-21T07:17:19Z,Martin Holst Swende,martin@swende.se,2019-08-21T07:17:19Z,"core: fix crash in chain reimport (#19986)

* blockchain: fix flaw in block import

* core/blockchain: address review concerns

* core/blockchain: go format with 's'",FALSE,unsigned
039a9c36226eafaf07942ecfb6082a90945ea86a,Samuel Marks,807580+SamuelMarks@users.noreply.github.com,2019-08-19T13:23:13Z,Samuel Marks,807580+SamuelMarks@users.noreply.github.com,2019-08-19T13:23:13Z,"appveyor: bump to Go 1.12.9 (#19966)

* appveyor: bump to Go 1.12.8

* appveyor: bump to Go 1.12.9",FALSE,unsigned
3bb9b49afb17ae4e66f52adba359670078883dcb,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:39:38Z,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:39:38Z,"core/vm, params: implement EIP2200, SSTORE optimizations (#19964)

* core/vm, params: implement EIP2200, SSTORE optimizations

* core/vm, params: switch EIP2200 to Wei's version",TRUE,valid
9dfca5df4b0e36826526f4ee11cf3c2561eb33c6,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:08:34Z,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:08:34Z,"Merge pull request #19983 from karalabe/private-chain-config

README: update private network fork config fields",TRUE,valid
273b3741b6d54aa22e2d03ec3a2d6e7daf711fcb,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:07:23Z,Peter Szilagyi,peterke@gmail.com,2019-08-19T11:07:23Z,README: update private network fork config fields,TRUE,valid
85d2b0d654f25a12530f623b5642d8e03b68404a,Ben Holden-Crowther,4144334+blrhc@users.noreply.github.com,2019-08-19T10:31:45Z,Ben Holden-Crowther,4144334+blrhc@users.noreply.github.com,2019-08-19T10:31:45Z,cmd/clef: spelling correction (#19973),FALSE,unsigned
7d3b26018bfaeed83b132589c4382a83d9db7bf2,Martin Holst Swende,martin@swende.se,2019-08-19T09:46:19Z,Martin Holst Swende,martin@swende.se,2019-08-19T09:46:19Z,"signer/fourbyte: update signatures, sort and don't compress (#19957)

* fourbyte: update signatures, make signatures sorted+not compressed

* fourbyte: disable linter",FALSE,unsigned
dbb03fe9893dd19f6b1de1ee3b768317f22fd135,Martin Holst Swende,martin@swende.se,2019-08-15T12:59:46Z,Martin Holst Swende,martin@swende.se,2019-08-15T12:59:46Z,tests: update from ethereum/tests (#19945),FALSE,unsigned
2c50b2c90431ec6663ad7504ce1edf60786191c4,gary rong,garyrong0905@gmail.com,2019-08-15T12:54:16Z,gary rong,garyrong0905@gmail.com,2019-08-15T12:54:16Z,cmd/geth: set up cache and metrics when starting node (#19911),FALSE,unsigned
9bad7fa717cf92d6c1c8836ea2c42f0d66cc21ea,Felix Lange,fjl@twurst.com,2019-08-15T10:12:56Z,Felix Lange,fjl@twurst.com,2019-08-15T10:12:56Z,common/compiler: fix lint issue (#19967),TRUE,valid
26f538b0e5a78bbe6ffc22bc5c25d42001d1bc9d,Felix Lange,fjl@twurst.com,2019-08-15T08:36:36Z,Felix Lange,fjl@twurst.com,2019-08-15T08:36:36Z,"p2p/enode, p2p/discv5: fix URL parsing test for go 1.12.8 (#19963)",TRUE,valid
260b177fe3f0ec897a4a4d71f2c2247e50b9fbd3,shiqinfeng1,150627601@qq.com,2019-08-15T08:33:06Z,shiqinfeng1,150627601@qq.com,2019-08-15T08:33:06Z,common/compiler: support relative import paths (#17374),FALSE,unsigned
c2c4c9f1e5f887058285c1299d250899fe0f7d89,gary rong,garyrong0905@gmail.com,2019-08-14T12:53:21Z,gary rong,garyrong0905@gmail.com,2019-08-14T12:53:21Z,"core, light, params: implement eip2028 (#19931)

* core, light, params: implement eip2028

* core, light: address comments

* core: address comments

* tests: disable Istanbul tx tests (until updated)

* core: address comment",FALSE,unsigned
44c8b9ad373dd99d4a92d6e5de63a7e7354bd850,Peter Szilagyi,peterke@gmail.com,2019-08-13T13:17:43Z,Peter Szilagyi,peterke@gmail.com,2019-08-13T13:17:43Z,"Merge pull request #19955 from karalabe/deprecate-cosmic

build: deprecate Ubuntu Cosmic, start supporting Eoan",TRUE,valid
eea66ddbbddd870a05edc8a64973ad10879736f8,Peter Szilagyi,peterke@gmail.com,2019-08-13T11:04:03Z,Peter Szilagyi,peterke@gmail.com,2019-08-13T11:04:03Z,"build: deprecate Ubuntu Cosmic, start supporting Eoan",TRUE,valid
aaf29095bbad7ecad3e9c29b8d7e4ccbbfc8b0cd,Peter Szilagyi,peterke@gmail.com,2019-08-13T10:06:00Z,Peter Szilagyi,peterke@gmail.com,2019-08-13T10:06:00Z,params: begin Geth v1.9.3 release cycle,TRUE,valid
e76047e9f5499b58064bddde514dd3119a090adf,Peter Szilagyi,peterke@gmail.com,2019-08-13T10:03:42Z,Peter Szilagyi,peterke@gmail.com,2019-08-13T10:03:42Z,params: release Geth v1.9.2,TRUE,valid
34d7503d95bf3a65d08f099ed65568761a312d21,Peter Szilagyi,peterke@gmail.com,2019-08-12T15:50:09Z,Peter Szilagyi,peterke@gmail.com,2019-08-12T15:50:09Z,"Merge pull request #19942 from karalabe/cht-1.9.2

params: update CHT to 12th August, 2019",TRUE,valid
9b8d72765521bff0ee7a624cbd2582440a827b36,ligi,ligi@ligi.de,2019-08-12T14:39:15Z,ligi,ligi@ligi.de,2019-08-12T14:39:15Z,cmd/clef: fix typo introduced in #19932 (#19946),FALSE,unsigned
df6c08a485270f96f8a65124748246b84b2c37ae,gary rong,garyrong0905@gmail.com,2019-08-12T14:14:40Z,gary rong,garyrong0905@gmail.com,2019-08-12T14:14:40Z,"core, trie: decode the value for storage dump (#19943)

* core, trie: decode the value for storage dump

* core/state: address comment",FALSE,unsigned
423fd5877d677227af0afd30f492820fd17166a8,Peter Szilagyi,peterke@gmail.com,2019-08-12T11:23:32Z,Peter Szilagyi,peterke@gmail.com,2019-08-12T11:23:32Z,"params: update CHT to 12th August, 2019",TRUE,valid
8657a0d6b5777ae5a94cb4714ae18b0c38a25c09,gary rong,garyrong0905@gmail.com,2019-08-12T11:19:53Z,gary rong,garyrong0905@gmail.com,2019-08-12T11:19:53Z,les: degrade the log level (#19939),FALSE,unsigned
36994e4e0b2be1362f99048d08b907628088e2bb,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-12T09:00:38Z,SjonHortensius,SjonHortensius@users.noreply.github.com,2019-08-12T09:00:38Z,"all: replace passPHRASE with passWORD in user interactions (#19932)

* Ref #19906 - replace passPHRASE with passWORD in any user interactions

this skips doccomments and variablenames to minimize impact. It does
however include a rename of the `ethkey` `changepassphrase` parameter

* console: fix JavaScript error capitalization",FALSE,unsigned
c9cdf144d55f6bbd75314e812eeefc18d7e8c40e,gary rong,garyrong0905@gmail.com,2019-08-08T13:44:11Z,gary rong,garyrong0905@gmail.com,2019-08-08T13:44:11Z,"graphql, internal/ethapi: support overriding accounts in eth_call (#19917)

* graphql, internal/ethapi: extend eth_call

This PR offers the third option parameter for eth_call API.
Caller can specify a batch of contracts for overriding the
original account metadata(nonce, balance, code, state).
It has a few advantages:

* It's friendly for debugging
* It's can make on-chain contract lighter for getting rid of
  state access functions

* core, internal: address comments",FALSE,unsigned
081642ed255fd939ec186f97fd60a316b51d8b61,Martin Holst Swende,martin@swende.se,2019-08-08T13:20:28Z,Martin Holst Swende,martin@swende.se,2019-08-08T13:20:28Z,"Eip 1344 (ChainID opcode) (#19921)

* core/vm: implement EIP 1344 (ChainID opcode)

* core/vm: formatting",FALSE,unsigned
17589aa75fdff7a90b2d783d7289df75f183c164,Roc Yu,rociiu0112@gmail.com,2019-08-08T09:23:40Z,Roc Yu,rociiu0112@gmail.com,2019-08-08T09:23:40Z,"accounts, internal/ethapi: use common Accounts method (#18428)

* accounts/mananger, internal/ethapi/api: Add new function AllAccounts on account manager to remove the duplication code on getting all wallets accounts

* Rename to Accounts

* Rename to AllAccounts",FALSE,unsigned
3e993ff64a9c2e9651fae11aaee55032cd6b0c3e,Martin Holst Swende,martin@swende.se,2019-08-08T09:07:23Z,Martin Holst Swende,martin@swende.se,2019-08-08T09:07:23Z,"Eip 1884 v3 (#19743)

* core/vm, tests: implement EIP 1884, add support for feature-tests

* core/vm: 1884-changes to extcodehash, move selfbalance opcode

* tests: fix statetests

* core/vm: move constants, address review concerns

* core/vm: word formatting

Co-Authored-By: Peter Szilagyi <peterke@gmail.com>",FALSE,unsigned
f3478f2899e80d59d15956ae408fab93cf26254d,Aleksey @soar Smyrnov,i@soar.name,2019-08-08T09:05:35Z,Aleksey @soar Smyrnov,i@soar.name,2019-08-08T09:05:35Z,"internal/build: fix commit extraction for detached head repo (#18315)

* Fix commit extraction

* Comments for commit extraction

Requested in https://github.com/ethereum/go-ethereum/pull/18315",FALSE,unsigned
c55e1b495cb1082b5bb11b3c2e6e3d0943dae3cd,Martin Holst Swende,martin@swende.se,2019-08-08T08:22:10Z,Martin Holst Swende,martin@swende.se,2019-08-08T08:22:10Z,ethapi: implement filltransaction,TRUE,valid
f891fd98754b49b351e3a289578bf3072c3e8c8a,Corey Lin,514971757@qq.com,2019-08-07T09:53:16Z,Corey Lin,514971757@qq.com,2019-08-07T09:53:16Z,"core/vm: fix comment grammar (#19923)

* core/vm:modify comment errors

* modify its back to it's",FALSE,unsigned
beff5fa578b5349004d146d6e399aa0cca1550e5,Antonio Salazar Cardozo,savedfastcool@gmail.com,2019-08-06T14:12:54Z,Antonio Salazar Cardozo,savedfastcool@gmail.com,2019-08-06T14:12:54Z,"params, core/vm: Istanbul EIP-1108 bn256 gas cost reduction (#19904)

* params: add IsIstanbul to config + rules

IstanbulBlock, used to determine if the config IsIstanbul, is currently
left nil until an actual block is chosen.

* params, core/vm: implement EIP-1108

Old gas costs for elliptic curve operations are given the PreIstanbul
prefix, while current gas costs retain the unprefixed names. The actual
precompile implementations are the same, so they are factored out into
common functions that are called by the pre-Istanbul and current
precompile structs. Finally, an Istanbul precompile list is added that
references the new precompile structs, which in turn reference the new
gas costs.

* params: fix fork ordering, add missing chain compatibility check",FALSE,unsigned
aa6005b469fdd1aa7a95f501ce87908011f43159,Martin Holst Swende,martin@swende.se,2019-08-05T08:01:02Z,Martin Holst Swende,martin@swende.se,2019-08-05T08:01:02Z,"core/vm, params: refactor chain configuration (#19735)

* params, core/vm: deprecating gastable, part 1

* core/vm, params: deprecate gastable, use both constant and dynamic gas

* core/vm, params: remove gastable, remove copypaste

* core/vm: make use of the chainrules

* interpreter: make tracing count constant+dynamic gas

* core/vm: review concerns (param/method name changes)

* core/vm: make use of chainrules more",FALSE,unsigned
a7de796840eeb267e298bcc98cdaa3a538234bef,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-08-03T12:36:10Z,Felföldi Zsolt,zsfelfoldi@gmail.com,2019-08-03T12:36:10Z,les: implement new client pool (#19745),TRUE,valid
947f5f2b152e18dfab2bec72c99ef76e1d851764,gary rong,garyrong0905@gmail.com,2019-08-02T07:20:46Z,gary rong,garyrong0905@gmail.com,2019-08-02T07:20:46Z,"accounts/abi, signer/fourbyte: fix incorrect signature (#19881)

The abi package already supports function overload by adding a suffix to the overloaded function name, but it uses the function name with suffix to calculate signature(both for the event and method).

This PR fixes it by adding a new field named RawName, which can be used to calcuate all signatures but use Name to distinguish different overloaded function.",FALSE,unsigned
e46a01d56c190badd6b71a4fba6c886fcee1059b,Peter Szilagyi,peterke@gmail.com,2019-08-01T08:00:56Z,Peter Szilagyi,peterke@gmail.com,2019-08-01T08:00:56Z,"ethdb/memorydb: allow noop compact on memdb (#19907)

* ethdb/memorydb: allow noop compact on memdb

* ethdb/memorydb: fix comment type",TRUE,valid
7f3362595a3bdf1c27b17f16b7d90d89882312ab,Peter Szilagyi,peterke@gmail.com,2019-07-31T09:07:03Z,Peter Szilagyi,peterke@gmail.com,2019-07-31T09:07:03Z,"Merge pull request #19902 from karalabe/simulated-close

accounts/abi/bind: support closing a simulated backend",TRUE,valid
140a7e91778447e058c1811103037437b2091c6e,Peter Szilagyi,peterke@gmail.com,2019-07-31T08:35:57Z,Peter Szilagyi,peterke@gmail.com,2019-07-31T08:35:57Z,accounts/abi/bind: support closing a simulated backend,TRUE,valid
96ab8e1575bb5e3a12a70dc6f349f4baa32f710a,Felix Lange,fjl@twurst.com,2019-07-30T13:39:48Z,Felix Lange,fjl@twurst.com,2019-07-30T13:39:48Z,"internal/ethapi: return null inclusion info for pending transactions (#19901)

This change ensures 'blockHash', 'blockNumber' and 'transactionIndex'
are set to null for pending transactions. This behavior is required by
the Ethereum JSON-RPC spec.",FALSE,unsigned
f34a3a68054eaad15d76c871eeabfa854df47dae,Frank Szendzielarz,33515470+FrankSzendzielarz@users.noreply.github.com,2019-07-25T11:46:42Z,Frank Szendzielarz,33515470+FrankSzendzielarz@users.noreply.github.com,2019-07-25T11:46:42Z,"cmd/clef: fix colored output on Windows (#19889)

* Fixes #19861 - coloured output

* cmd/clef: minor formatting nit

* cmd/clef: bleah, stupid github editor",FALSE,unsigned
8812c4d3f9f57edff6706608b93a1c5567e57d9f,gary rong,garyrong0905@gmail.com,2019-07-25T06:29:53Z,gary rong,garyrong0905@gmail.com,2019-07-25T06:29:53Z,"eth, graphql, internal/ethapi, les: polish and improve graphql (#19886)",FALSE,unsigned
e4232c153ba93a71a3e39a74dbe5f1d7c1ad46ac,gary rong,garyrong0905@gmail.com,2019-07-25T06:25:16Z,gary rong,garyrong0905@gmail.com,2019-07-25T06:25:16Z,ineternal/ethapi: wrap block size with hex.Uint64 (#19885),FALSE,unsigned
389bd75142eaf7585d5c104add26b6a3b153f8ad,Tyler Ferrara,tylerferrara123@gmail.com,2019-07-25T05:51:31Z,Tyler Ferrara,tylerferrara123@gmail.com,2019-07-25T05:51:31Z,travis: isolate linter and tests jobs (#19883),FALSE,unsigned
08e5cd94a9be9743617f0edbbd4c21ca93cc0911,Peter Szilagyi,peterke@gmail.com,2019-07-24T06:44:37Z,Peter Szilagyi,peterke@gmail.com,2019-07-24T06:44:37Z,params: begin Geth v1.9.2 release cycle,TRUE,valid
b7b2f60f866d92e75db5bfe5be51b48eadeb3150,Peter Szilagyi,peterke@gmail.com,2019-07-24T06:41:48Z,Peter Szilagyi,peterke@gmail.com,2019-07-24T06:41:48Z,params: release Geth v1.9.1,TRUE,valid
530f78e22de9580c3779d33fd0e3b3c8e677c8d0,gary rong,garyrong0905@gmail.com,2019-07-23T13:52:24Z,gary rong,garyrong0905@gmail.com,2019-07-23T13:52:24Z,"eth, internal, les: add getHeaderBy* APIs (#19669)

* eth, interal, les: add getHeaderBy* APIs

* internal: address the comment

* eth, internal, les: getHeader nits, missing TD, console callable",FALSE,unsigned
57d9c93dcdf8341088abdf322d0f7a2787768ec6,Alexander van der Meij,alexandervdm@users.noreply.github.com,2019-07-23T12:06:44Z,Alexander van der Meij,alexandervdm@users.noreply.github.com,2019-07-23T12:06:44Z,"vendor, internal/build: fix OpenBSD by bumping Azure libs (#17966)

* bump azure-storage-blob-go dependency to 0.3.0 release

* update azure-storage-blob-go module import path

* fix multiple return values on azblob.NewSharedKeyCredential

* vendor: bump Azure libs to latest from upstream",FALSE,unsigned
4f56790efc0da36e3bf20e7194f864f84b72c7e6,Peter Szilagyi,peterke@gmail.com,2019-07-23T10:06:31Z,Peter Szilagyi,peterke@gmail.com,2019-07-23T10:06:31Z,signer/fourbytes: fix up error messages (#19877),TRUE,valid
78ab411aacfb11e00e1c7466aaa20843016429f3,Peter Szilagyi,peterke@gmail.com,2019-07-23T09:54:20Z,Peter Szilagyi,peterke@gmail.com,2019-07-23T09:54:20Z,"Merge pull request #19875 from karalabe/dev-4gb-cache

cmd/geth: skip 4GB memory bump for devnet",TRUE,valid
f08eb0489657f19da56d1ffb2ff9296bdfc61a6c,gary rong,garyrong0905@gmail.com,2019-07-23T09:53:35Z,gary rong,garyrong0905@gmail.com,2019-07-23T09:53:35Z,les: get rid of testing tx journal (#19876),FALSE,unsigned
3b96c17fc148c8a4731a8230cd5b2d392047ef8c,wbt,wbt@users.noreply.github.com,2019-07-23T09:52:41Z,wbt,wbt@users.noreply.github.com,2019-07-23T09:52:41Z,"cmd/faucet: add grace period to faucet timeout (#18105)

* Add 5 minute grace period to faucet timeout

* cmd/faucet: make grace period dynamic based on original wait time",FALSE,unsigned
4ac941a9fc13a530d39691dfcd4326056b4cc6bc,Peter Szilagyi,peterke@gmail.com,2019-07-23T09:18:22Z,Peter Szilagyi,peterke@gmail.com,2019-07-23T09:18:22Z,cmd/geth: skip 4GB memory bump for devnet,TRUE,valid
b80c840af33aae1ff99ce9879fecc6161a0c1620,gary rong,garyrong0905@gmail.com,2019-07-22T12:45:40Z,gary rong,garyrong0905@gmail.com,2019-07-22T12:45:40Z,"core, les: fix les unit tests (#19823)",FALSE,unsigned
a32a2b933ad6793a2fe4172cd46c5c5906da259a,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T10:34:41Z,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T10:34:41Z,"cmd, contracts, eth, p2p, signer, whisper: fixed ineffectual assignments (#19869)

Fixed assigning values to variables we don't end up using.",FALSE,unsigned
04e175b8ecc95080742aa8c8be68b155433a13bf,Felix Lange,fjl@twurst.com,2019-07-22T10:22:39Z,Felix Lange,fjl@twurst.com,2019-07-22T10:22:39Z,"rpc: implement websockets with github.com/gorilla/websocket  (#19866)

* rpc: implement websockets with github.com/gorilla/websocket

This change makes package rpc use the github.com/gorilla/websocket
package for WebSockets instead of golang.org/x/net/websocket. The new
library is more robust and supports all WebSocket features including
continuation frames.

There are new tests for two issues with the previously-used library:

  - TestWebsocketClientPing checks handling of Ping frames.
  - TestWebsocketLargeCall checks whether the request size limit is
    applied correctly.

* rpc: raise HTTP/WebSocket request size limit to 5MB

* rpc: remove default origin for client connections

The client used to put the local hostname into the Origin header because
the server wanted an origin to accept the connection, but that's silly:
Origin is for browsers/websites. The nobody would whitelist a particular
hostname.

Now that the server doesn't need Origin anymore, don't bother setting
one for clients. Users who need an origin can use DialWebsocket to
create a client with arbitrary origin if needed.

* vendor: put golang.org/x/net/websocket back

* rpc: don't set Origin header for empty (default) origin

* rpc: add HTTP status code to handshake error

This makes it easier to debug failing connections.

* ethstats: use github.com/gorilla/websocket

* rpc: fix lint",FALSE,unsigned
e8141e168560b8b1d2b50658c454adbfa905dacc,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:57:54Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:57:54Z,"Merge pull request #19873 from karalabe/author-1.9.1

all: update author list and licenses",TRUE,valid
82985075f7e5de819445ca57c1f9b80894b162b6,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:45:33Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:45:33Z,"Merge pull request #19872 from karalabe/cht-1.9.1

params: bump hard-coded CHTs to 22nd July values",TRUE,valid
b973eddd2830fb4743e0e69d026eafbb97a40c79,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:31:11Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:31:11Z,build: deduplicate same authors with different casing,TRUE,valid
1a83114c74b66c13b025e4a7df1c45e7ade42e05,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:17:27Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:17:27Z,all: update author list and licenses,TRUE,valid
364e485e5134843c9f6abc0ff51096bb4c8655c8,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:16:51Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T09:16:51Z,"build: update license exclusions, case insensitive author list",TRUE,valid
28fea9c5afe2b69298e0eb90c697ce5067f0064f,Peter Szilagyi,peterke@gmail.com,2019-07-22T08:26:07Z,Peter Szilagyi,peterke@gmail.com,2019-07-22T08:26:07Z,params: bump hard-coded CHTs to 22nd July values,TRUE,valid
57fc1d21e18c0c698cd5ca86bcbbbaef352cad50,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T07:51:13Z,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T07:51:13Z,"cmd/geth, core/rawdb: add missing error checks (#19871)

* Added missing error checks

Add error handling where we assign err a value, but don't check for it being nil.

* core/rawdb: tiny style nit",FALSE,unsigned
cc3ef1e4f48dc305c942bc2259b3121210206686,Kitten King,53072918+kittenking@users.noreply.github.com,2019-07-22T07:34:33Z,Kitten King,53072918+kittenking@users.noreply.github.com,2019-07-22T07:34:33Z,"cmd, crypto, eth, internals: fix Typos (#19868)",FALSE,unsigned
5183483c53fac7ad5d31759ecb95ca7b1a67744d,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T07:30:09Z,Christian Muehlhaeuser,muesli@gmail.com,2019-07-22T07:30:09Z,"core/state, p2p/discover, trie, whisper: avoid unnecessary conversions (#19870)

No need to convert these types.",FALSE,unsigned
a1f8549262567ddacac3d4180f8a6ca0826036a9,Kurkó Mihály,kurkomisi@users.noreply.github.com,2019-07-19T09:25:43Z,Kurkó Mihály,kurkomisi@users.noreply.github.com,2019-07-19T09:25:43Z,p2p: add ENR to PeerInfo (#19816),FALSE,unsigned
